/*! jQuery v3.1.1 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.1.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(e?(e=!1,f=c&&r.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function D(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):C.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(D(this,a||[],!1))},not:function(a){return this.pushStack(D(this,a||[],!0))},is:function(a){return!!D(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var E,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,G=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||E,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:F.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),B.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};G.prototype=r.fn,E=r(d);var H=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function J(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return J(a,"nextSibling")},prev:function(a){return J(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(I[a]||r.uniqueSort(e),H.test(a)&&e.reverse()),this.pushStack(e)}});var K=/[^\x20\t\r\n\f]+/g;function L(a){var b={};return r.each(a.match(K)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?L(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function M(a){return a}function N(a){throw a}function O(a,b,c){var d;try{a&&r.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&r.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,M,e),g(f,c,N,e)):(f++,j.call(a,g(f,c,M,e),g(f,c,N,e),g(f,c,M,c.notifyWith))):(d!==M&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==N&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:M,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:M)),c[2][3].add(g(0,a,r.isFunction(d)?d:N))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(O(a,g.done(h(c)).resolve,g.reject),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)O(e[c],h(c),g.reject);return g.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&P.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var Q=r.Deferred();r.fn.ready=function(a){return Q.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||Q.resolveWith(d,[r]))}}),r.ready.then=Q.then;function R(){d.removeEventListener("DOMContentLoaded",R),
a.removeEventListener("load",R),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",R),a.addEventListener("load",R));var S=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)S(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},T=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function U(){this.expando=r.expando+U.uid++}U.uid=1,U.prototype={cache:function(a){var b=a[this.expando];return b||(b={},T(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){r.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(K)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var V=new U,W=new U,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function Z(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:X.test(a)?JSON.parse(a):a)}function $(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Y,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=Z(c)}catch(e){}W.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return W.hasData(a)||V.hasData(a)},data:function(a,b,c){return W.access(a,b,c)},removeData:function(a,b){W.remove(a,b)},_data:function(a,b,c){return V.access(a,b,c)},_removeData:function(a,b){V.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=W.get(f),1===f.nodeType&&!V.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),$(f,d,e[d])));V.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){W.set(this,a)}):S(this,function(b){var c;if(f&&void 0===b){if(c=W.get(f,a),void 0!==c)return c;if(c=$(f,a),void 0!==c)return c}else this.each(function(){W.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){W.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=V.get(a,b),c&&(!d||r.isArray(c)?d=V.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return V.get(a,c)||V.access(a,c,{empty:r.Callbacks("once memory").add(function(){V.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=V.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var _=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,aa=new RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),ba=["Top","Right","Bottom","Left"],ca=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function ea(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&aa.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var fa={};function ga(a){var b,c=a.ownerDocument,d=a.nodeName,e=fa[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),fa[d]=e,e)}function ha(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=V.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&ca(d)&&(e[f]=ga(d))):"none"!==c&&(e[f]="none",V.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ha(this,!0)},hide:function(){return ha(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ca(this)?r(this).show():r(this).hide()})}});var ia=/^(?:checkbox|radio)$/i,ja=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ka=/^$|\/(?:java|ecma)script/i,la={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};la.optgroup=la.option,la.tbody=la.tfoot=la.colgroup=la.caption=la.thead,la.th=la.td;function ma(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function na(a,b){for(var c=0,d=a.length;c<d;c++)V.set(a[c],"globalEval",!b||V.get(b[c],"globalEval"))}var oa=/<|&#?\w+;/;function pa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(oa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ja.exec(f)||["",""])[1].toLowerCase(),i=la[h]||la._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=ma(l.appendChild(f),"script"),j&&na(g),c){k=0;while(f=g[k++])ka.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var qa=d.documentElement,ra=/^key/,sa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ta=/^([^.]*)(?:\.(.+)|)/;function ua(){return!0}function va(){return!1}function wa(){try{return d.activeElement}catch(a){}}function xa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)xa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=va;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(qa,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(K)||[""],j=b.length;while(j--)h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.hasData(a)&&V.get(a);if(q&&(i=q.events)){b=(b||"").match(K)||[""],j=b.length;while(j--)if(h=ta.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&V.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(V.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==wa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===wa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r.nodeName(this,"input"))return this.click(),!1},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ua:va,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:va,isPropagationStopped:va,isImmediatePropagationStopped:va,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ua,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ua,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ua,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&ra.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&sa.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return xa(this,a,b,c,d)},one:function(a,b,c,d){return xa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=va),this.each(function(){r.event.remove(this,a,c,b)})}});var ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,za=/<script|<style|<link/i,Aa=/checked\s*(?:[^=]|=\s*.checked.)/i,Ba=/^true\/(.*)/,Ca=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Da(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a:a}function Ea(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Fa(a){var b=Ba.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ga(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(V.hasData(a)&&(f=V.access(a),g=V.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}W.hasData(a)&&(h=W.access(a),i=r.extend({},h),W.set(b,i))}}function Ha(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ia.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ia(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Aa.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ia(f,b,c,d)});if(m&&(e=pa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(ma(e,"script"),Ea),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,ma(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Fa),l=0;l<i;l++)j=h[l],ka.test(j.type||"")&&!V.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Ca,""),k))}return a}function Ja(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(ma(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&na(ma(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(ya,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=ma(h),f=ma(a),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);if(b)if(c)for(f=f||ma(a),g=g||ma(h),d=0,e=f.length;d<e;d++)Ga(f[d],g[d]);else Ga(a,h);return g=ma(h,"script"),g.length>0&&na(g,!i&&ma(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(T(c)){if(b=c[V.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[V.expando]=void 0}c[W.expando]&&(c[W.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ja(this,a,!0)},remove:function(a){return Ja(this,a)},text:function(a){return S(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.appendChild(a)}})},prepend:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(ma(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return S(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!za.test(a)&&!la[(ja.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(ma(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ia(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(ma(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var Ka=/^margin/,La=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),Ma=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",qa.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,qa.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Na(a,b,c){var d,e,f,g,h=a.style;return c=c||Ma(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&La.test(g)&&Ka.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Oa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Pa=/^(none|table(?!-c[ea]).+)/,Qa={position:"absolute",visibility:"hidden",display:"block"},Ra={letterSpacing:"0",fontWeight:"400"},Sa=["Webkit","Moz","ms"],Ta=d.createElement("div").style;function Ua(a){if(a in Ta)return a;var b=a[0].toUpperCase()+a.slice(1),c=Sa.length;while(c--)if(a=Sa[c]+b,a in Ta)return a}function Va(a,b,c){var d=aa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Wa(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ba[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ba[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ba[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ba[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ba[f]+"Width",!0,e)));return g}function Xa(a,b,c){var d,e=!0,f=Ma(a),g="border-box"===r.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(d=Na(a,b,f),(d<0||null==d)&&(d=a.style[b]),La.test(d))return d;e=g&&(o.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+Wa(a,b,c||(g?"border":"content"),e,f)+"px"}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Na(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=a.style;return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=aa.exec(c))&&e[1]&&(c=ea(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Na(a,b,d)),"normal"===e&&b in Ra&&(e=Ra[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Pa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Xa(a,b,d):da(a,Qa,function(){return Xa(a,b,d)})},set:function(a,c,d){var e,f=d&&Ma(a),g=d&&Wa(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=aa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Va(a,c,g)}}}),r.cssHooks.marginLeft=Oa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Na(a,"marginLeft"))||a.getBoundingClientRect().left-da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ba[d]+b]=f[d]||f[d-2]||f[0];return e}},Ka.test(a)||(r.cssHooks[a+b].set=Va)}),r.fn.extend({css:function(a,b){return S(this,function(a,b,c){var d,e,f={},g=0;if(r.isArray(b)){for(d=Ma(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function Ya(a,b,c,d,e){return new Ya.prototype.init(a,b,c,d,e)}r.Tween=Ya,Ya.prototype={constructor:Ya,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=Ya.propHooks[this.prop];return a&&a.get?a.get(this):Ya.propHooks._default.get(this)},run:function(a){var b,c=Ya.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ya.propHooks._default.set(this),this}},Ya.prototype.init.prototype=Ya.prototype,Ya.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},Ya.propHooks.scrollTop=Ya.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=Ya.prototype.init,r.fx.step={};var Za,$a,_a=/^(?:toggle|show|hide)$/,ab=/queueHooks$/;function bb(){$a&&(a.requestAnimationFrame(bb),r.fx.tick())}function cb(){return a.setTimeout(function(){Za=void 0}),Za=r.now()}function db(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ba[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function eb(a,b,c){for(var d,e=(hb.tweeners[b]||[]).concat(hb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function fb(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&ca(a),q=V.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],_a.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=V.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ha([a],!0),j=a.style.display||j,k=r.css(a,"display"),ha([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=V.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ha([a],!0),m.done(function(){p||ha([a]),V.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=eb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function gb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function hb(a,b,c){var d,e,f=0,g=hb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Za||cb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Za||cb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(gb(k,j.opts.specialEasing);f<g;f++)if(d=hb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,eb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}r.Animation=r.extend(hb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return ea(c.elem,a,aa.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(K);for(var c,d=0,e=a.length;d<e;d++)c=a[d],hb.tweeners[c]=hb.tweeners[c]||[],hb.tweeners[c].unshift(b)},prefilters:[fb],prefilter:function(a,b){b?hb.prefilters.unshift(a):hb.prefilters.push(a)}}),r.speed=function(a,b,c){var e=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off||d.hidden?e.duration=0:"number"!=typeof e.duration&&(e.duration in r.fx.speeds?e.duration=r.fx.speeds[e.duration]:e.duration=r.fx.speeds._default),null!=e.queue&&e.queue!==!0||(e.queue="fx"),e.old=e.complete,e.complete=function(){r.isFunction(e.old)&&e.old.call(this),e.queue&&r.dequeue(this,e.queue)},e},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=hb(this,r.extend({},a),f);(e||V.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=V.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=V.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(db(b,!0),a,d,e)}}),r.each({slideDown:db("show"),slideUp:db("hide"),slideToggle:db("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(Za=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),Za=void 0},r.fx.timer=function(a){r.timers.push(a),a()?r.fx.start():r.timers.pop()},r.fx.interval=13,r.fx.start=function(){$a||($a=a.requestAnimationFrame?a.requestAnimationFrame(bb):a.setInterval(r.fx.tick,r.fx.interval))},r.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame($a):a.clearInterval($a),$a=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var ib,jb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return S(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?ib:void 0)),
void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(K);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),ib={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||r.find.attr;jb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=jb[g],jb[g]=e,e=null!=c(a,b,d)?g:null,jb[g]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return S(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function mb(a){var b=a.match(K)||[];return b.join(" ")}function nb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,nb(this)))});if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,nb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(K)||[];while(c=this[i++])if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=mb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,nb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(K)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=nb(this),b&&V.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":V.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+mb(nb(c))+" ").indexOf(b)>-1)return!0;return!1}});var ob=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ob,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:mb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!r.nodeName(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!pb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(V.get(h,"events")||{})[b.type]&&V.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&T(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!T(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=V.access(d,b);e||d.addEventListener(a,c,!0),V.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=V.access(d,b)-1;e?V.access(d,b,e):(d.removeEventListener(a,c,!0),V.remove(d,b))}}});var qb=a.location,rb=r.now(),sb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var tb=/\[\]$/,ub=/\r?\n/g,vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;function xb(a,b,c,d){var e;if(r.isArray(b))r.each(b,function(b,e){c||tb.test(a)?d(a,e):xb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)xb(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)xb(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(a)&&(this.checked||!ia.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});var yb=/%20/g,zb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb={},Gb={},Hb="*/".concat("*"),Ib=d.createElement("a");Ib.href=qb.href;function Jb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(K)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Kb(a,b,c,d){var e={},f=a===Gb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Lb(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Mb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Nb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:Cb.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Lb(Lb(a,r.ajaxSettings),b):Lb(r.ajaxSettings,a)},ajaxPrefilter:Jb(Fb),ajaxTransport:Jb(Gb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Bb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||qb.href)+"").replace(Eb,qb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(K)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ib.protocol+"//"+Ib.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Kb(Fb,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Db.test(o.type),f=o.url.replace(zb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(yb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(sb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Ab,"$1"),n=(sb.test(f)?"&":"?")+"_="+rb++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Hb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Kb(Gb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Mb(o,y,d)),v=Nb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ob={0:200,1223:204},Pb=r.ajaxSettings.xhr();o.cors=!!Pb&&"withCredentials"in Pb,o.ajax=Pb=!!Pb,r.ajaxTransport(function(b){var c,d;if(o.cors||Pb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||r.expando+"_"+rb++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):b.jsonp!==!1&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=B.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=pa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=mb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length};function Sb(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),d.width||d.height?(e=f.ownerDocument,c=Sb(e),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||qa})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return S(this,function(a,d,e){var f=Sb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Oa(o.pixelPosition,function(a,c){if(c)return c=Na(a,b),La.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return S(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Tb=a.jQuery,Ub=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ub),b&&a.jQuery===r&&(a.jQuery=Tb),r},b||(a.jQuery=a.$=r),r});

/*! jQuery Validation Plugin - v1.17.0 - 7/29/2017
 * https://jqueryvalidation.org/
 * Copyright (c) 2017 Jrn Zaefferer; Licensed MIT */
!function (a) { "function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof module && module.exports ? module.exports = a(require("jquery")) : a(jQuery) }(function (a) { a.extend(a.fn, { validate: function (b) { if (!this.length) return void (b && b.debug && window.console && console.warn("Nothing selected, can't validate, returning nothing.")); var c = a.data(this[0], "validator"); return c ? c : (this.attr("novalidate", "novalidate"), c = new a.validator(b, this[0]), a.data(this[0], "validator", c), c.settings.onsubmit && (this.on("click.validate", ":submit", function (b) { c.submitButton = b.currentTarget, a(this).hasClass("cancel") && (c.cancelSubmit = !0), void 0 !== a(this).attr("formnovalidate") && (c.cancelSubmit = !0) }), this.on("submit.validate", function (b) { function d() { var d, e; return c.submitButton && (c.settings.submitHandler || c.formSubmitted) && (d = a("<input type='hidden'/>").attr("name", c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)), !c.settings.submitHandler || (e = c.settings.submitHandler.call(c, c.currentForm, b), d && d.remove(), void 0 !== e && e) } return c.settings.debug && b.preventDefault(), c.cancelSubmit ? (c.cancelSubmit = !1, d()) : c.form() ? c.pendingRequest ? (c.formSubmitted = !0, !1) : d() : (c.focusInvalid(), !1) })), c) }, valid: function () { var b, c, d; return a(this[0]).is("form") ? b = this.validate().form() : (d = [], b = !0, c = a(this[0].form).validate(), this.each(function () { b = c.element(this) && b, b || (d = d.concat(c.errorList)) }), c.errorList = d), b }, rules: function (b, c) { var d, e, f, g, h, i, j = this[0]; if (null != j && (!j.form && j.hasAttribute("contenteditable") && (j.form = this.closest("form")[0], j.name = this.attr("name")), null != j.form)) { if (b) switch (d = a.data(j.form, "validator").settings, e = d.rules, f = a.validator.staticRules(j), b) { case "add": a.extend(f, a.validator.normalizeRule(c)), delete f.messages, e[j.name] = f, c.messages && (d.messages[j.name] = a.extend(d.messages[j.name], c.messages)); break; case "remove": return c ? (i = {}, a.each(c.split(/\s/), function (a, b) { i[b] = f[b], delete f[b] }), i) : (delete e[j.name], f) }return g = a.validator.normalizeRules(a.extend({}, a.validator.classRules(j), a.validator.attributeRules(j), a.validator.dataRules(j), a.validator.staticRules(j)), j), g.required && (h = g.required, delete g.required, g = a.extend({ required: h }, g)), g.remote && (h = g.remote, delete g.remote, g = a.extend(g, { remote: h })), g } } }), a.extend(a.expr.pseudos || a.expr[":"], { blank: function (b) { return !a.trim("" + a(b).val()) }, filled: function (b) { var c = a(b).val(); return null !== c && !!a.trim("" + c) }, unchecked: function (b) { return !a(b).prop("checked") } }), a.validator = function (b, c) { this.settings = a.extend(!0, {}, a.validator.defaults, b), this.currentForm = c, this.init() }, a.validator.format = function (b, c) { return 1 === arguments.length ? function () { var c = a.makeArray(arguments); return c.unshift(b), a.validator.format.apply(this, c) } : void 0 === c ? b : (arguments.length > 2 && c.constructor !== Array && (c = a.makeArray(arguments).slice(1)), c.constructor !== Array && (c = [c]), a.each(c, function (a, c) { b = b.replace(new RegExp("\\{" + a + "\\}", "g"), function () { return c }) }), b) }, a.extend(a.validator, { defaults: { messages: {}, groups: {}, rules: {}, errorClass: "error", pendingClass: "pending", validClass: "valid", errorElement: "label", focusCleanup: !1, focusInvalid: !0, errorContainer: a([]), errorLabelContainer: a([]), onsubmit: !0, ignore: ":hidden", ignoreTitle: !1, onfocusin: function (a) { this.lastActive = a, this.settings.focusCleanup && (this.settings.unhighlight && this.settings.unhighlight.call(this, a, this.settings.errorClass, this.settings.validClass), this.hideThese(this.errorsFor(a))) }, onfocusout: function (a) { this.checkable(a) || !(a.name in this.submitted) && this.optional(a) || this.element(a) }, onkeyup: function (b, c) { var d = [16, 17, 18, 20, 35, 36, 37, 38, 39, 40, 45, 144, 225]; 9 === c.which && "" === this.elementValue(b) || a.inArray(c.keyCode, d) !== -1 || (b.name in this.submitted || b.name in this.invalid) && this.element(b) }, onclick: function (a) { a.name in this.submitted ? this.element(a) : a.parentNode.name in this.submitted && this.element(a.parentNode) }, highlight: function (b, c, d) { "radio" === b.type ? this.findByName(b.name).addClass(c).removeClass(d) : a(b).addClass(c).removeClass(d) }, unhighlight: function (b, c, d) { "radio" === b.type ? this.findByName(b.name).removeClass(c).addClass(d) : a(b).removeClass(c).addClass(d) } }, setDefaults: function (b) { a.extend(a.validator.defaults, b) }, messages: { required: "This field is required.", remote: "Please fix this field.", email: "Please enter a valid email address.", url: "Please enter a valid URL.", date: "Please enter a valid date.", dateISO: "Please enter a valid date (ISO).", number: "Please enter a valid number.", digits: "Please enter only digits.", equalTo: "Please enter the same value again.", maxlength: a.validator.format("Please enter no more than {0} characters."), minlength: a.validator.format("Please enter at least {0} characters."), rangelength: a.validator.format("Please enter a value between {0} and {1} characters long."), range: a.validator.format("Please enter a value between {0} and {1}."), max: a.validator.format("Please enter a value less than or equal to {0}."), min: a.validator.format("Please enter a value greater than or equal to {0}."), step: a.validator.format("Please enter a multiple of {0}.") }, autoCreateRanges: !1, prototype: { init: function () { function b(b) { !this.form && this.hasAttribute("contenteditable") && (this.form = a(this).closest("form")[0], this.name = a(this).attr("name")); var c = a.data(this.form, "validator"), d = "on" + b.type.replace(/^validate/, ""), e = c.settings; e[d] && !a(this).is(e.ignore) && e[d].call(c, this, b) } this.labelContainer = a(this.settings.errorLabelContainer), this.errorContext = this.labelContainer.length && this.labelContainer || a(this.currentForm), this.containers = a(this.settings.errorContainer).add(this.settings.errorLabelContainer), this.submitted = {}, this.valueCache = {}, this.pendingRequest = 0, this.pending = {}, this.invalid = {}, this.reset(); var c, d = this.groups = {}; a.each(this.settings.groups, function (b, c) { "string" == typeof c && (c = c.split(/\s/)), a.each(c, function (a, c) { d[c] = b }) }), c = this.settings.rules, a.each(c, function (b, d) { c[b] = a.validator.normalizeRule(d) }), a(this.currentForm).on("focusin.validate focusout.validate keyup.validate", ":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']", b).on("click.validate", "select, option, [type='radio'], [type='checkbox']", b), this.settings.invalidHandler && a(this.currentForm).on("invalid-form.validate", this.settings.invalidHandler) }, form: function () { return this.checkForm(), a.extend(this.submitted, this.errorMap), this.invalid = a.extend({}, this.errorMap), this.valid() || a(this.currentForm).triggerHandler("invalid-form", [this]), this.showErrors(), this.valid() }, checkForm: function () { this.prepareForm(); for (var a = 0, b = this.currentElements = this.elements(); b[a]; a++)this.check(b[a]); return this.valid() }, element: function (b) { var c, d, e = this.clean(b), f = this.validationTargetFor(e), g = this, h = !0; return void 0 === f ? delete this.invalid[e.name] : (this.prepareElement(f), this.currentElements = a(f), d = this.groups[f.name], d && a.each(this.groups, function (a, b) { b === d && a !== f.name && (e = g.validationTargetFor(g.clean(g.findByName(a))), e && e.name in g.invalid && (g.currentElements.push(e), h = g.check(e) && h)) }), c = this.check(f) !== !1, h = h && c, c ? this.invalid[f.name] = !1 : this.invalid[f.name] = !0, this.numberOfInvalids() || (this.toHide = this.toHide.add(this.containers)), this.showErrors(), a(b).attr("aria-invalid", !c)), h }, showErrors: function (b) { if (b) { var c = this; a.extend(this.errorMap, b), this.errorList = a.map(this.errorMap, function (a, b) { return { message: a, element: c.findByName(b)[0] } }), this.successList = a.grep(this.successList, function (a) { return !(a.name in b) }) } this.settings.showErrors ? this.settings.showErrors.call(this, this.errorMap, this.errorList) : this.defaultShowErrors() }, resetForm: function () { a.fn.resetForm && a(this.currentForm).resetForm(), this.invalid = {}, this.submitted = {}, this.prepareForm(), this.hideErrors(); var b = this.elements().removeData("previousValue").removeAttr("aria-invalid"); this.resetElements(b) }, resetElements: function (a) { var b; if (this.settings.unhighlight) for (b = 0; a[b]; b++)this.settings.unhighlight.call(this, a[b], this.settings.errorClass, ""), this.findByName(a[b].name).removeClass(this.settings.validClass); else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass) }, numberOfInvalids: function () { return this.objectLength(this.invalid) }, objectLength: function (a) { var b, c = 0; for (b in a) void 0 !== a[b] && null !== a[b] && a[b] !== !1 && c++; return c }, hideErrors: function () { this.hideThese(this.toHide) }, hideThese: function (a) { a.not(this.containers).text(""), this.addWrapper(a).hide() }, valid: function () { return 0 === this.size() }, size: function () { return this.errorList.length }, focusInvalid: function () { if (this.settings.focusInvalid) try { a(this.findLastActive() || this.errorList.length && this.errorList[0].element || []).filter(":visible").focus().trigger("focusin") } catch (b) { } }, findLastActive: function () { var b = this.lastActive; return b && 1 === a.grep(this.errorList, function (a) { return a.element.name === b.name }).length && b }, elements: function () { var b = this, c = {}; return a(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function () { var d = this.name || a(this).attr("name"); return !d && b.settings.debug && window.console && console.error("%o has no name assigned", this), this.hasAttribute("contenteditable") && (this.form = a(this).closest("form")[0], this.name = d), !(d in c || !b.objectLength(a(this).rules())) && (c[d] = !0, !0) }) }, clean: function (b) { return a(b)[0] }, errors: function () { var b = this.settings.errorClass.split(" ").join("."); return a(this.settings.errorElement + "." + b, this.errorContext) }, resetInternals: function () { this.successList = [], this.errorList = [], this.errorMap = {}, this.toShow = a([]), this.toHide = a([]) }, reset: function () { this.resetInternals(), this.currentElements = a([]) }, prepareForm: function () { this.reset(), this.toHide = this.errors().add(this.containers) }, prepareElement: function (a) { this.reset(), this.toHide = this.errorsFor(a) }, elementValue: function (b) { var c, d, e = a(b), f = b.type; return "radio" === f || "checkbox" === f ? this.findByName(b.name).filter(":checked").val() : "number" === f && "undefined" != typeof b.validity ? b.validity.badInput ? "NaN" : e.val() : (c = b.hasAttribute("contenteditable") ? e.text() : e.val(), "file" === f ? "C:\\fakepath\\" === c.substr(0, 12) ? c.substr(12) : (d = c.lastIndexOf("/"), d >= 0 ? c.substr(d + 1) : (d = c.lastIndexOf("\\"), d >= 0 ? c.substr(d + 1) : c)) : "string" == typeof c ? c.replace(/\r/g, "") : c) }, check: function (b) { b = this.validationTargetFor(this.clean(b)); var c, d, e, f, g = a(b).rules(), h = a.map(g, function (a, b) { return b }).length, i = !1, j = this.elementValue(b); if ("function" == typeof g.normalizer ? f = g.normalizer : "function" == typeof this.settings.normalizer && (f = this.settings.normalizer), f) { if (j = f.call(b, j), "string" != typeof j) throw new TypeError("The normalizer should return a string value."); delete g.normalizer } for (d in g) { e = { method: d, parameters: g[d] }; try { if (c = a.validator.methods[d].call(this, j, b, e.parameters), "dependency-mismatch" === c && 1 === h) { i = !0; continue } if (i = !1, "pending" === c) return void (this.toHide = this.toHide.not(this.errorsFor(b))); if (!c) return this.formatAndAdd(b, e), !1 } catch (k) { throw this.settings.debug && window.console && console.log("Exception occurred when checking element " + b.id + ", check the '" + e.method + "' method.", k), k instanceof TypeError && (k.message += ".  Exception occurred when checking element " + b.id + ", check the '" + e.method + "' method."), k } } if (!i) return this.objectLength(g) && this.successList.push(b), !0 }, customDataMessage: function (b, c) { return a(b).data("msg" + c.charAt(0).toUpperCase() + c.substring(1).toLowerCase()) || a(b).data("msg") }, customMessage: function (a, b) { var c = this.settings.messages[a]; return c && (c.constructor === String ? c : c[b]) }, findDefined: function () { for (var a = 0; a < arguments.length; a++)if (void 0 !== arguments[a]) return arguments[a] }, defaultMessage: function (b, c) { "string" == typeof c && (c = { method: c }); var d = this.findDefined(this.customMessage(b.name, c.method), this.customDataMessage(b, c.method), !this.settings.ignoreTitle && b.title || void 0, a.validator.messages[c.method], "<strong>Warning: No message defined for " + b.name + "</strong>"), e = /\$?\{(\d+)\}/g; return "function" == typeof d ? d = d.call(this, c.parameters, b) : e.test(d) && (d = a.validator.format(d.replace(e, "{$1}"), c.parameters)), d }, formatAndAdd: function (a, b) { var c = this.defaultMessage(a, b); this.errorList.push({ message: c, element: a, method: b.method }), this.errorMap[a.name] = c, this.submitted[a.name] = c }, addWrapper: function (a) { return this.settings.wrapper && (a = a.add(a.parent(this.settings.wrapper))), a }, defaultShowErrors: function () { var a, b, c; for (a = 0; this.errorList[a]; a++)c = this.errorList[a], this.settings.highlight && this.settings.highlight.call(this, c.element, this.settings.errorClass, this.settings.validClass), this.showLabel(c.element, c.message); if (this.errorList.length && (this.toShow = this.toShow.add(this.containers)), this.settings.success) for (a = 0; this.successList[a]; a++)this.showLabel(this.successList[a]); if (this.settings.unhighlight) for (a = 0, b = this.validElements(); b[a]; a++)this.settings.unhighlight.call(this, b[a], this.settings.errorClass, this.settings.validClass); this.toHide = this.toHide.not(this.toShow), this.hideErrors(), this.addWrapper(this.toShow).show() }, validElements: function () { return this.currentElements.not(this.invalidElements()) }, invalidElements: function () { return a(this.errorList).map(function () { return this.element }) }, showLabel: function (b, c) { var d, e, f, g, h = this.errorsFor(b), i = this.idOrName(b), j = a(b).attr("aria-describedby"); h.length ? (h.removeClass(this.settings.validClass).addClass(this.settings.errorClass), h.html(c)) : (h = a("<" + this.settings.errorElement + ">").attr("id", i + "-error").addClass(this.settings.errorClass).html(c || ""), d = h, this.settings.wrapper && (d = h.hide().show().wrap("<" + this.settings.wrapper + "/>").parent()), this.labelContainer.length ? this.labelContainer.append(d) : this.settings.errorPlacement ? this.settings.errorPlacement.call(this, d, a(b)) : d.insertAfter(b), h.is("label") ? h.attr("for", i) : 0 === h.parents("label[for='" + this.escapeCssMeta(i) + "']").length && (f = h.attr("id"), j ? j.match(new RegExp("\\b" + this.escapeCssMeta(f) + "\\b")) || (j += " " + f) : j = f, a(b).attr("aria-describedby", j), e = this.groups[b.name], e && (g = this, a.each(g.groups, function (b, c) { c === e && a("[name='" + g.escapeCssMeta(b) + "']", g.currentForm).attr("aria-describedby", h.attr("id")) })))), !c && this.settings.success && (h.text(""), "string" == typeof this.settings.success ? h.addClass(this.settings.success) : this.settings.success(h, b)), this.toShow = this.toShow.add(h) }, errorsFor: function (b) { var c = this.escapeCssMeta(this.idOrName(b)), d = a(b).attr("aria-describedby"), e = "label[for='" + c + "'], label[for='" + c + "'] *"; return d && (e = e + ", #" + this.escapeCssMeta(d).replace(/\s+/g, ", #")), this.errors().filter(e) }, escapeCssMeta: function (a) { return a.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g, "\\$1") }, idOrName: function (a) { return this.groups[a.name] || (this.checkable(a) ? a.name : a.id || a.name) }, validationTargetFor: function (b) { return this.checkable(b) && (b = this.findByName(b.name)), a(b).not(this.settings.ignore)[0] }, checkable: function (a) { return /radio|checkbox/i.test(a.type) }, findByName: function (b) { return a(this.currentForm).find("[name='" + this.escapeCssMeta(b) + "']") }, getLength: function (b, c) { switch (c.nodeName.toLowerCase()) { case "select": return a("option:selected", c).length; case "input": if (this.checkable(c)) return this.findByName(c.name).filter(":checked").length }return b.length }, depend: function (a, b) { return !this.dependTypes[typeof a] || this.dependTypes[typeof a](a, b) }, dependTypes: { "boolean": function (a) { return a }, string: function (b, c) { return !!a(b, c.form).length }, "function": function (a, b) { return a(b) } }, optional: function (b) { var c = this.elementValue(b); return !a.validator.methods.required.call(this, c, b) && "dependency-mismatch" }, startRequest: function (b) { this.pending[b.name] || (this.pendingRequest++ , a(b).addClass(this.settings.pendingClass), this.pending[b.name] = !0) }, stopRequest: function (b, c) { this.pendingRequest-- , this.pendingRequest < 0 && (this.pendingRequest = 0), delete this.pending[b.name], a(b).removeClass(this.settings.pendingClass), c && 0 === this.pendingRequest && this.formSubmitted && this.form() ? (a(this.currentForm).submit(), this.submitButton && a("input:hidden[name='" + this.submitButton.name + "']", this.currentForm).remove(), this.formSubmitted = !1) : !c && 0 === this.pendingRequest && this.formSubmitted && (a(this.currentForm).triggerHandler("invalid-form", [this]), this.formSubmitted = !1) }, previousValue: function (b, c) { return c = "string" == typeof c && c || "remote", a.data(b, "previousValue") || a.data(b, "previousValue", { old: null, valid: !0, message: this.defaultMessage(b, { method: c }) }) }, destroy: function () { this.resetForm(), a(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur") } }, classRuleSettings: { required: { required: !0 }, email: { email: !0 }, url: { url: !0 }, date: { date: !0 }, dateISO: { dateISO: !0 }, number: { number: !0 }, digits: { digits: !0 }, creditcard: { creditcard: !0 } }, addClassRules: function (b, c) { b.constructor === String ? this.classRuleSettings[b] = c : a.extend(this.classRuleSettings, b) }, classRules: function (b) { var c = {}, d = a(b).attr("class"); return d && a.each(d.split(" "), function () { this in a.validator.classRuleSettings && a.extend(c, a.validator.classRuleSettings[this]) }), c }, normalizeAttributeRule: function (a, b, c, d) { /min|max|step/.test(c) && (null === b || /number|range|text/.test(b)) && (d = Number(d), isNaN(d) && (d = void 0)), d || 0 === d ? a[c] = d : b === c && "range" !== b && (a[c] = !0) }, attributeRules: function (b) { var c, d, e = {}, f = a(b), g = b.getAttribute("type"); for (c in a.validator.methods) "required" === c ? (d = b.getAttribute(c), "" === d && (d = !0), d = !!d) : d = f.attr(c), this.normalizeAttributeRule(e, g, c, d); return e.maxlength && /-1|2147483647|524288/.test(e.maxlength) && delete e.maxlength, e }, dataRules: function (b) { var c, d, e = {}, f = a(b), g = b.getAttribute("type"); for (c in a.validator.methods) d = f.data("rule" + c.charAt(0).toUpperCase() + c.substring(1).toLowerCase()), this.normalizeAttributeRule(e, g, c, d); return e }, staticRules: function (b) { var c = {}, d = a.data(b.form, "validator"); return d.settings.rules && (c = a.validator.normalizeRule(d.settings.rules[b.name]) || {}), c }, normalizeRules: function (b, c) { return a.each(b, function (d, e) { if (e === !1) return void delete b[d]; if (e.param || e.depends) { var f = !0; switch (typeof e.depends) { case "string": f = !!a(e.depends, c.form).length; break; case "function": f = e.depends.call(c, c) }f ? b[d] = void 0 === e.param || e.param : (a.data(c.form, "validator").resetElements(a(c)), delete b[d]) } }), a.each(b, function (d, e) { b[d] = a.isFunction(e) && "normalizer" !== d ? e(c) : e }), a.each(["minlength", "maxlength"], function () { b[this] && (b[this] = Number(b[this])) }), a.each(["rangelength", "range"], function () { var c; b[this] && (a.isArray(b[this]) ? b[this] = [Number(b[this][0]), Number(b[this][1])] : "string" == typeof b[this] && (c = b[this].replace(/[\[\]]/g, "").split(/[\s,]+/), b[this] = [Number(c[0]), Number(c[1])])) }), a.validator.autoCreateRanges && (null != b.min && null != b.max && (b.range = [b.min, b.max], delete b.min, delete b.max), null != b.minlength && null != b.maxlength && (b.rangelength = [b.minlength, b.maxlength], delete b.minlength, delete b.maxlength)), b }, normalizeRule: function (b) { if ("string" == typeof b) { var c = {}; a.each(b.split(/\s/), function () { c[this] = !0 }), b = c } return b }, addMethod: function (b, c, d) { a.validator.methods[b] = c, a.validator.messages[b] = void 0 !== d ? d : a.validator.messages[b], c.length < 3 && a.validator.addClassRules(b, a.validator.normalizeRule(b)) }, methods: { required: function (b, c, d) { if (!this.depend(d, c)) return "dependency-mismatch"; if ("select" === c.nodeName.toLowerCase()) { var e = a(c).val(); return e && e.length > 0 } return this.checkable(c) ? this.getLength(b, c) > 0 : b.length > 0 }, email: function (a, b) { return this.optional(b) || /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a) }, url: function (a, b) { return this.optional(b) || /^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(a) }, date: function (a, b) { return this.optional(b) || !/Invalid|NaN/.test(new Date(a).toString()) }, dateISO: function (a, b) { return this.optional(b) || /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a) }, number: function (a, b) { return this.optional(b) || /^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a) }, digits: function (a, b) { return this.optional(b) || /^\d+$/.test(a) }, minlength: function (b, c, d) { var e = a.isArray(b) ? b.length : this.getLength(b, c); return this.optional(c) || e >= d }, maxlength: function (b, c, d) { var e = a.isArray(b) ? b.length : this.getLength(b, c); return this.optional(c) || e <= d }, rangelength: function (b, c, d) { var e = a.isArray(b) ? b.length : this.getLength(b, c); return this.optional(c) || e >= d[0] && e <= d[1] }, min: function (a, b, c) { return this.optional(b) || a >= c }, max: function (a, b, c) { return this.optional(b) || a <= c }, range: function (a, b, c) { return this.optional(b) || a >= c[0] && a <= c[1] }, step: function (b, c, d) { var e, f = a(c).attr("type"), g = "Step attribute on input type " + f + " is not supported.", h = ["text", "number", "range"], i = new RegExp("\\b" + f + "\\b"), j = f && !i.test(h.join()), k = function (a) { var b = ("" + a).match(/(?:\.(\d+))?$/); return b && b[1] ? b[1].length : 0 }, l = function (a) { return Math.round(a * Math.pow(10, e)) }, m = !0; if (j) throw new Error(g); return e = k(d), (k(b) > e || l(b) % l(d) !== 0) && (m = !1), this.optional(c) || m }, equalTo: function (b, c, d) { var e = a(d); return this.settings.onfocusout && e.not(".validate-equalTo-blur").length && e.addClass("validate-equalTo-blur").on("blur.validate-equalTo", function () { a(c).valid() }), b === e.val() }, remote: function (b, c, d, e) { if (this.optional(c)) return "dependency-mismatch"; e = "string" == typeof e && e || "remote"; var f, g, h, i = this.previousValue(c, e); return this.settings.messages[c.name] || (this.settings.messages[c.name] = {}), i.originalMessage = i.originalMessage || this.settings.messages[c.name][e], this.settings.messages[c.name][e] = i.message, d = "string" == typeof d && { url: d } || d, h = a.param(a.extend({ data: b }, d.data)), i.old === h ? i.valid : (i.old = h, f = this, this.startRequest(c), g = {}, g[c.name] = b, a.ajax(a.extend(!0, { mode: "abort", port: "validate" + c.name, dataType: "json", data: g, context: f.currentForm, success: function (a) { var d, g, h, j = a === !0 || "true" === a; f.settings.messages[c.name][e] = i.originalMessage, j ? (h = f.formSubmitted, f.resetInternals(), f.toHide = f.errorsFor(c), f.formSubmitted = h, f.successList.push(c), f.invalid[c.name] = !1, f.showErrors()) : (d = {}, g = a || f.defaultMessage(c, { method: e, parameters: b }), d[c.name] = i.message = g, f.invalid[c.name] = !0, f.showErrors(d)), i.valid = j, f.stopRequest(c, j) } }, d)), "pending") } } }); var b, c = {}; return a.ajaxPrefilter ? a.ajaxPrefilter(function (a, b, d) { var e = a.port; "abort" === a.mode && (c[e] && c[e].abort(), c[e] = d) }) : (b = a.ajax, a.ajax = function (d) { var e = ("mode" in d ? d : a.ajaxSettings).mode, f = ("port" in d ? d : a.ajaxSettings).port; return "abort" === e ? (c[f] && c[f].abort(), c[f] = b.apply(this, arguments), c[f]) : b.apply(this, arguments) }), a });
/*! jQuery & Zepto Lazy v1.7.6 - http://jquery.eisbehr.de/lazy - MIT&GPL-2.0 license - Copyright 2012-2017 Daniel 'Eisbehr' Kern */
!function (t, e) { "use strict"; function r(r, a, i, u, l) { function f() { L = t.devicePixelRatio > 1, i = c(i), a.delay >= 0 && setTimeout(function () { s(!0) }, a.delay), (a.delay < 0 || a.combined) && (u.e = v(a.throttle, function (t) { "resize" === t.type && (w = B = -1), s(t.all) }), u.a = function (t) { t = c(t), i.push.apply(i, t) }, u.g = function () { return i = n(i).filter(function () { return !n(this).data(a.loadedName) }) }, u.f = function (t) { for (var e = 0; e < t.length; e++) { var r = i.filter(function () { return this === t[e] }); r.length && s(!1, r) } }, s(), n(a.appendScroll).on("scroll." + l + " resize." + l, u.e)) } function c(t) { var i = a.defaultImage, o = a.placeholder, u = a.imageBase, l = a.srcsetAttribute, f = a.loaderAttribute, c = a._f || {}; t = n(t).filter(function () { var t = n(this), r = m(this); return !t.data(a.handledName) && (t.attr(a.attribute) || t.attr(l) || t.attr(f) || c[r] !== e) }).data("plugin_" + a.name, r); for (var s = 0, d = t.length; s < d; s++) { var A = n(t[s]), g = m(t[s]), h = A.attr(a.imageBaseAttribute) || u; g === N && h && A.attr(l) && A.attr(l, b(A.attr(l), h)), c[g] === e || A.attr(f) || A.attr(f, c[g]), g === N && i && !A.attr(E) ? A.attr(E, i) : g === N || !o || A.css(O) && "none" !== A.css(O) || A.css(O, "url('" + o + "')") } return t } function s(t, e) { if (!i.length) return void (a.autoDestroy && r.destroy()); for (var o = e || i, u = !1, l = a.imageBase || "", f = a.srcsetAttribute, c = a.handledName, s = 0; s < o.length; s++)if (t || e || A(o[s])) { var g = n(o[s]), h = m(o[s]), b = g.attr(a.attribute), v = g.attr(a.imageBaseAttribute) || l, p = g.attr(a.loaderAttribute); g.data(c) || a.visibleOnly && !g.is(":visible") || !((b || g.attr(f)) && (h === N && (v + b !== g.attr(E) || g.attr(f) !== g.attr(F)) || h !== N && v + b !== g.css(O)) || p) || (u = !0, g.data(c, !0), d(g, h, v, p)) } u && (i = n(i).filter(function () { return !n(this).data(c) })) } function d(t, e, r, i) { ++z; var o = function () { y("onError", t), p(), o = n.noop }; y("beforeLoad", t); var u = a.attribute, l = a.srcsetAttribute, f = a.sizesAttribute, c = a.retinaAttribute, s = a.removeAttribute, d = a.loadedName, A = t.attr(c); if (i) { var g = function () { s && t.removeAttr(a.loaderAttribute), t.data(d, !0), y(T, t), setTimeout(p, 1), g = n.noop }; t.off(I).one(I, o).one(D, g), y(i, t, function (e) { e ? (t.off(D), g()) : (t.off(I), o()) }) || t.trigger(I) } else { var h = n(new Image); h.one(I, o).one(D, function () { t.hide(), e === N ? t.attr(C, h.attr(C)).attr(F, h.attr(F)).attr(E, h.attr(E)) : t.css(O, "url('" + h.attr(E) + "')"), t[a.effect](a.effectTime), s && (t.removeAttr(u + " " + l + " " + c + " " + a.imageBaseAttribute), f !== C && t.removeAttr(f)), t.data(d, !0), y(T, t), h.remove(), p() }); var m = (L && A ? A : t.attr(u)) || ""; h.attr(C, t.attr(f)).attr(F, t.attr(l)).attr(E, m ? r + m : null), h.complete && h.trigger(D) } } function A(t) { var e = t.getBoundingClientRect(), r = a.scrollDirection, n = a.threshold, i = h() + n > e.top && -n < e.bottom, o = g() + n > e.left && -n < e.right; return "vertical" === r ? i : "horizontal" === r ? o : i && o } function g() { return w >= 0 ? w : w = n(t).width() } function h() { return B >= 0 ? B : B = n(t).height() } function m(t) { return t.tagName.toLowerCase() } function b(t, e) { if (e) { var r = t.split(","); t = ""; for (var a = 0, n = r.length; a < n; a++)t += e + r[a].trim() + (a !== n - 1 ? "," : "") } return t } function v(t, e) { var n, i = 0; return function (o, u) { function l() { i = +new Date, e.call(r, o) } var f = +new Date - i; n && clearTimeout(n), f > t || !a.enableThrottle || u ? l() : n = setTimeout(l, t - f) } } function p() { --z, i.length || z || y("onFinishedAll") } function y(t, e, n) { return !!(t = a[t]) && (t.apply(r, [].slice.call(arguments, 1)), !0) } var z = 0, w = -1, B = -1, L = !1, T = "afterLoad", D = "load", I = "error", N = "img", E = "src", F = "srcset", C = "sizes", O = "background-image"; "event" === a.bind || o ? f() : n(t).on(D + "." + l, f) } function a(a, o) { var u = this, l = n.extend({}, u.config, o), f = {}, c = l.name + "-" + ++i; return u.config = function (t, r) { return r === e ? l[t] : (l[t] = r, u) }, u.addItems = function (t) { return f.a && f.a("string" === n.type(t) ? n(t) : t), u }, u.getItems = function () { return f.g ? f.g() : {} }, u.update = function (t) { return f.e && f.e({}, !t), u }, u.force = function (t) { return f.f && f.f("string" === n.type(t) ? n(t) : t), u }, u.loadAll = function () { return f.e && f.e({ all: !0 }, !0), u }, u.destroy = function () { return n(l.appendScroll).off("." + c, f.e), n(t).off("." + c), f = {}, e }, r(u, l, a, f, c), l.chainable ? a : u } var n = t.jQuery || t.Zepto, i = 0, o = !1; n.fn.Lazy = n.fn.lazy = function (t) { return new a(this, t) }, n.Lazy = n.lazy = function (t, r, i) { if (n.isFunction(r) && (i = r, r = []), n.isFunction(i)) { t = n.isArray(t) ? t : [t], r = n.isArray(r) ? r : [r]; for (var o = a.prototype.config, u = o._f || (o._f = {}), l = 0, f = t.length; l < f; l++)(o[t[l]] === e || n.isFunction(o[t[l]])) && (o[t[l]] = i); for (var c = 0, s = r.length; c < s; c++)u[r[c]] = t[0] } }, a.prototype.config = { name: "lazy", chainable: !0, autoDestroy: !0, bind: "load", threshold: 500, visibleOnly: !1, appendScroll: t, scrollDirection: "both", imageBase: null, defaultImage: "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==", placeholder: null, delay: -1, combined: !1, attribute: "data-src", srcsetAttribute: "data-srcset", sizesAttribute: "data-sizes", retinaAttribute: "data-retina", loaderAttribute: "data-loader", imageBaseAttribute: "data-imagebase", removeAttribute: !0, handledName: "handled", loadedName: "loaded", effect: "show", effectTime: 0, enableThrottle: !0, throttle: 250, beforeLoad: e, afterLoad: e, onError: e, onFinishedAll: e }, n(t).on("load", function () { o = !0 }) }(window);
/*! tooltipster v4.2.5 */!function (a, b) { "function" == typeof define && define.amd ? define(["jquery"], function (a) { return b(a) }) : "object" == typeof exports ? module.exports = b(require("jquery")) : b(jQuery) }(this, function (a) {
    function b(a) { this.$container, this.constraints = null, this.__$tooltip, this.__init(a) } function c(b, c) { var d = !0; return a.each(b, function (a, e) { return void 0 === c[a] || b[a] !== c[a] ? (d = !1, !1) : void 0 }), d } function d(b) { var c = b.attr("id"), d = c ? h.window.document.getElementById(c) : null; return d ? d === b[0] : a.contains(h.window.document.body, b[0]) } function e() { if (!g) return !1; var a = g.document.body || g.document.documentElement, b = a.style, c = "transition", d = ["Moz", "Webkit", "Khtml", "O", "ms"]; if ("string" == typeof b[c]) return !0; c = c.charAt(0).toUpperCase() + c.substr(1); for (var e = 0; e < d.length; e++)if ("string" == typeof b[d[e] + c]) return !0; return !1 } var f = { animation: "fade", animationDuration: 350, content: null, contentAsHTML: !1, contentCloning: !1, debug: !0, delay: 300, delayTouch: [300, 500], functionInit: null, functionBefore: null, functionReady: null, functionAfter: null, functionFormat: null, IEmin: 6, interactive: !1, multiple: !1, parent: null, plugins: ["sideTip"], repositionOnScroll: !1, restoration: "none", selfDestruction: !0, theme: [], timer: 0, trackerInterval: 500, trackOrigin: !1, trackTooltip: !1, trigger: "hover", triggerClose: { click: !1, mouseleave: !1, originClick: !1, scroll: !1, tap: !1, touchleave: !1 }, triggerOpen: { click: !1, mouseenter: !1, tap: !1, touchstart: !1 }, updateAnimation: "rotate", zIndex: 9999999 }, g = "undefined" != typeof window ? window : null, h = { hasTouchCapability: !(!g || !("ontouchstart" in g || g.DocumentTouch && g.document instanceof g.DocumentTouch || g.navigator.maxTouchPoints)), hasTransitions: e(), IE: !1, semVer: "4.2.5", window: g }, i = function () { this.__$emitterPrivate = a({}), this.__$emitterPublic = a({}), this.__instancesLatestArr = [], this.__plugins = {}, this._env = h }; i.prototype = { __bridge: function (b, c, d) { if (!c[d]) { var e = function () { }; e.prototype = b; var g = new e; g.__init && g.__init(c), a.each(b, function (a, b) { 0 != a.indexOf("__") && (c[a] ? f.debug && console.log("The " + a + " method of the " + d + " plugin conflicts with another plugin or native methods") : (c[a] = function () { return g[a].apply(g, Array.prototype.slice.apply(arguments)) }, c[a].bridged = g)) }), c[d] = g } return this }, __setWindow: function (a) { return h.window = a, this }, _getRuler: function (a) { return new b(a) }, _off: function () { return this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _on: function () { return this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _one: function () { return this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _plugin: function (b) { var c = this; if ("string" == typeof b) { var d = b, e = null; return d.indexOf(".") > 0 ? e = c.__plugins[d] : a.each(c.__plugins, function (a, b) { return b.name.substring(b.name.length - d.length - 1) == "." + d ? (e = b, !1) : void 0 }), e } if (b.name.indexOf(".") < 0) throw new Error("Plugins must be namespaced"); return c.__plugins[b.name] = b, b.core && c.__bridge(b.core, c, b.name), this }, _trigger: function () { var a = Array.prototype.slice.apply(arguments); return "string" == typeof a[0] && (a[0] = { type: a[0] }), this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, a), this.__$emitterPublic.trigger.apply(this.__$emitterPublic, a), this }, instances: function (b) { var c = [], d = b || ".tooltipstered"; return a(d).each(function () { var b = a(this), d = b.data("tooltipster-ns"); d && a.each(d, function (a, d) { c.push(b.data(d)) }) }), c }, instancesLatest: function () { return this.__instancesLatestArr }, off: function () { return this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, on: function () { return this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, one: function () { return this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, origins: function (b) { var c = b ? b + " " : ""; return a(c + ".tooltipstered").toArray() }, setDefaults: function (b) { return a.extend(f, b), this }, triggerHandler: function () { return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this } }, a.tooltipster = new i, a.Tooltipster = function (b, c) { this.__callbacks = { close: [], open: [] }, this.__closingTime, this.__Content, this.__contentBcr, this.__destroyed = !1, this.__$emitterPrivate = a({}), this.__$emitterPublic = a({}), this.__enabled = !0, this.__garbageCollector, this.__Geometry, this.__lastPosition, this.__namespace = "tooltipster-" + Math.round(1e6 * Math.random()), this.__options, this.__$originParents, this.__pointerIsOverOrigin = !1, this.__previousThemes = [], this.__state = "closed", this.__timeouts = { close: [], open: null }, this.__touchEvents = [], this.__tracker = null, this._$origin, this._$tooltip, this.__init(b, c) }, a.Tooltipster.prototype = { __init: function (b, c) { var d = this; if (d._$origin = a(b), d.__options = a.extend(!0, {}, f, c), d.__optionsFormat(), !h.IE || h.IE >= d.__options.IEmin) { var e = null; if (void 0 === d._$origin.data("tooltipster-initialTitle") && (e = d._$origin.attr("title"), void 0 === e && (e = null), d._$origin.data("tooltipster-initialTitle", e)), null !== d.__options.content) d.__contentSet(d.__options.content); else { var g, i = d._$origin.attr("data-tooltip-content"); i && (g = a(i)), g && g[0] ? d.__contentSet(g.first()) : d.__contentSet(e) } d._$origin.removeAttr("title").addClass("tooltipstered"), d.__prepareOrigin(), d.__prepareGC(), a.each(d.__options.plugins, function (a, b) { d._plug(b) }), h.hasTouchCapability && a(h.window.document.body).on("touchmove." + d.__namespace + "-triggerOpen", function (a) { d._touchRecordEvent(a) }), d._on("created", function () { d.__prepareTooltip() })._on("repositioned", function (a) { d.__lastPosition = a.position }) } else d.__options.disabled = !0 }, __contentInsert: function () { var a = this, b = a._$tooltip.find(".tooltipster-content"), c = a.__Content, d = function (a) { c = a }; return a._trigger({ type: "format", content: a.__Content, format: d }), a.__options.functionFormat && (c = a.__options.functionFormat.call(a, a, { origin: a._$origin[0] }, a.__Content)), "string" != typeof c || a.__options.contentAsHTML ? b.empty().append(c) : b.text(c), a }, __contentSet: function (b) { return b instanceof a && this.__options.contentCloning && (b = b.clone(!0)), this.__Content = b, this._trigger({ type: "updated", content: b }), this }, __destroyError: function () { throw new Error("This tooltip has been destroyed and cannot execute your method call.") }, __geometry: function () { var b = this, c = b._$origin, d = b._$origin.is("area"); if (d) { var e = b._$origin.parent().attr("name"); c = a('img[usemap="#' + e + '"]') } var f = c[0].getBoundingClientRect(), g = a(h.window.document), i = a(h.window), j = c, k = { available: { document: null, window: null }, document: { size: { height: g.height(), width: g.width() } }, window: { scroll: { left: h.window.scrollX || h.window.document.documentElement.scrollLeft, top: h.window.scrollY || h.window.document.documentElement.scrollTop }, size: { height: i.height(), width: i.width() } }, origin: { fixedLineage: !1, offset: {}, size: { height: f.bottom - f.top, width: f.right - f.left }, usemapImage: d ? c[0] : null, windowOffset: { bottom: f.bottom, left: f.left, right: f.right, top: f.top } } }; if (d) { var l = b._$origin.attr("shape"), m = b._$origin.attr("coords"); if (m && (m = m.split(","), a.map(m, function (a, b) { m[b] = parseInt(a) })), "default" != l) switch (l) { case "circle": var n = m[0], o = m[1], p = m[2], q = o - p, r = n - p; k.origin.size.height = 2 * p, k.origin.size.width = k.origin.size.height, k.origin.windowOffset.left += r, k.origin.windowOffset.top += q; break; case "rect": var s = m[0], t = m[1], u = m[2], v = m[3]; k.origin.size.height = v - t, k.origin.size.width = u - s, k.origin.windowOffset.left += s, k.origin.windowOffset.top += t; break; case "poly": for (var w = 0, x = 0, y = 0, z = 0, A = "even", B = 0; B < m.length; B++) { var C = m[B]; "even" == A ? (C > y && (y = C, 0 === B && (w = y)), w > C && (w = C), A = "odd") : (C > z && (z = C, 1 == B && (x = z)), x > C && (x = C), A = "even") } k.origin.size.height = z - x, k.origin.size.width = y - w, k.origin.windowOffset.left += w, k.origin.windowOffset.top += x } } var D = function (a) { k.origin.size.height = a.height, k.origin.windowOffset.left = a.left, k.origin.windowOffset.top = a.top, k.origin.size.width = a.width }; for (b._trigger({ type: "geometry", edit: D, geometry: { height: k.origin.size.height, left: k.origin.windowOffset.left, top: k.origin.windowOffset.top, width: k.origin.size.width } }), k.origin.windowOffset.right = k.origin.windowOffset.left + k.origin.size.width, k.origin.windowOffset.bottom = k.origin.windowOffset.top + k.origin.size.height, k.origin.offset.left = k.origin.windowOffset.left + k.window.scroll.left, k.origin.offset.top = k.origin.windowOffset.top + k.window.scroll.top, k.origin.offset.bottom = k.origin.offset.top + k.origin.size.height, k.origin.offset.right = k.origin.offset.left + k.origin.size.width, k.available.document = { bottom: { height: k.document.size.height - k.origin.offset.bottom, width: k.document.size.width }, left: { height: k.document.size.height, width: k.origin.offset.left }, right: { height: k.document.size.height, width: k.document.size.width - k.origin.offset.right }, top: { height: k.origin.offset.top, width: k.document.size.width } }, k.available.window = { bottom: { height: Math.max(k.window.size.height - Math.max(k.origin.windowOffset.bottom, 0), 0), width: k.window.size.width }, left: { height: k.window.size.height, width: Math.max(k.origin.windowOffset.left, 0) }, right: { height: k.window.size.height, width: Math.max(k.window.size.width - Math.max(k.origin.windowOffset.right, 0), 0) }, top: { height: Math.max(k.origin.windowOffset.top, 0), width: k.window.size.width } }; "html" != j[0].tagName.toLowerCase();) { if ("fixed" == j.css("position")) { k.origin.fixedLineage = !0; break } j = j.parent() } return k }, __optionsFormat: function () { return "number" == typeof this.__options.animationDuration && (this.__options.animationDuration = [this.__options.animationDuration, this.__options.animationDuration]), "number" == typeof this.__options.delay && (this.__options.delay = [this.__options.delay, this.__options.delay]), "number" == typeof this.__options.delayTouch && (this.__options.delayTouch = [this.__options.delayTouch, this.__options.delayTouch]), "string" == typeof this.__options.theme && (this.__options.theme = [this.__options.theme]), null === this.__options.parent ? this.__options.parent = a(h.window.document.body) : "string" == typeof this.__options.parent && (this.__options.parent = a(this.__options.parent)), "hover" == this.__options.trigger ? (this.__options.triggerOpen = { mouseenter: !0, touchstart: !0 }, this.__options.triggerClose = { mouseleave: !0, originClick: !0, touchleave: !0 }) : "click" == this.__options.trigger && (this.__options.triggerOpen = { click: !0, tap: !0 }, this.__options.triggerClose = { click: !0, tap: !0 }), this._trigger("options"), this }, __prepareGC: function () { var b = this; return b.__options.selfDestruction ? b.__garbageCollector = setInterval(function () { var c = (new Date).getTime(); b.__touchEvents = a.grep(b.__touchEvents, function (a, b) { return c - a.time > 6e4 }), d(b._$origin) || b.close(function () { b.destroy() }) }, 2e4) : clearInterval(b.__garbageCollector), b }, __prepareOrigin: function () { var a = this; if (a._$origin.off("." + a.__namespace + "-triggerOpen"), h.hasTouchCapability && a._$origin.on("touchstart." + a.__namespace + "-triggerOpen touchend." + a.__namespace + "-triggerOpen touchcancel." + a.__namespace + "-triggerOpen", function (b) { a._touchRecordEvent(b) }), a.__options.triggerOpen.click || a.__options.triggerOpen.tap && h.hasTouchCapability) { var b = ""; a.__options.triggerOpen.click && (b += "click." + a.__namespace + "-triggerOpen "), a.__options.triggerOpen.tap && h.hasTouchCapability && (b += "touchend." + a.__namespace + "-triggerOpen"), a._$origin.on(b, function (b) { a._touchIsMeaningfulEvent(b) && a._open(b) }) } if (a.__options.triggerOpen.mouseenter || a.__options.triggerOpen.touchstart && h.hasTouchCapability) { var b = ""; a.__options.triggerOpen.mouseenter && (b += "mouseenter." + a.__namespace + "-triggerOpen "), a.__options.triggerOpen.touchstart && h.hasTouchCapability && (b += "touchstart." + a.__namespace + "-triggerOpen"), a._$origin.on(b, function (b) { !a._touchIsTouchEvent(b) && a._touchIsEmulatedEvent(b) || (a.__pointerIsOverOrigin = !0, a._openShortly(b)) }) } if (a.__options.triggerClose.mouseleave || a.__options.triggerClose.touchleave && h.hasTouchCapability) { var b = ""; a.__options.triggerClose.mouseleave && (b += "mouseleave." + a.__namespace + "-triggerOpen "), a.__options.triggerClose.touchleave && h.hasTouchCapability && (b += "touchend." + a.__namespace + "-triggerOpen touchcancel." + a.__namespace + "-triggerOpen"), a._$origin.on(b, function (b) { a._touchIsMeaningfulEvent(b) && (a.__pointerIsOverOrigin = !1) }) } return a }, __prepareTooltip: function () { var b = this, c = b.__options.interactive ? "auto" : ""; return b._$tooltip.attr("id", b.__namespace).css({ "pointer-events": c, zIndex: b.__options.zIndex }), a.each(b.__previousThemes, function (a, c) { b._$tooltip.removeClass(c) }), a.each(b.__options.theme, function (a, c) { b._$tooltip.addClass(c) }), b.__previousThemes = a.merge([], b.__options.theme), b }, __scrollHandler: function (b) { var c = this; if (c.__options.triggerClose.scroll) c._close(b); else if (d(c._$origin) && d(c._$tooltip)) { var e = null; if (b.target === h.window.document) c.__Geometry.origin.fixedLineage || c.__options.repositionOnScroll && c.reposition(b); else { e = c.__geometry(); var f = !1; if ("fixed" != c._$origin.css("position") && c.__$originParents.each(function (b, c) { var d = a(c), g = d.css("overflow-x"), h = d.css("overflow-y"); if ("visible" != g || "visible" != h) { var i = c.getBoundingClientRect(); if ("visible" != g && (e.origin.windowOffset.left < i.left || e.origin.windowOffset.right > i.right)) return f = !0, !1; if ("visible" != h && (e.origin.windowOffset.top < i.top || e.origin.windowOffset.bottom > i.bottom)) return f = !0, !1 } return "fixed" == d.css("position") ? !1 : void 0 }), f) c._$tooltip.css("visibility", "hidden"); else if (c._$tooltip.css("visibility", "visible"), c.__options.repositionOnScroll) c.reposition(b); else { var g = e.origin.offset.left - c.__Geometry.origin.offset.left, i = e.origin.offset.top - c.__Geometry.origin.offset.top; c._$tooltip.css({ left: c.__lastPosition.coord.left + g, top: c.__lastPosition.coord.top + i }) } } c._trigger({ type: "scroll", event: b, geo: e }) } return c }, __stateSet: function (a) { return this.__state = a, this._trigger({ type: "state", state: a }), this }, __timeoutsClear: function () { return clearTimeout(this.__timeouts.open), this.__timeouts.open = null, a.each(this.__timeouts.close, function (a, b) { clearTimeout(b) }), this.__timeouts.close = [], this }, __trackerStart: function () { var a = this, b = a._$tooltip.find(".tooltipster-content"); return a.__options.trackTooltip && (a.__contentBcr = b[0].getBoundingClientRect()), a.__tracker = setInterval(function () { if (d(a._$origin) && d(a._$tooltip)) { if (a.__options.trackOrigin) { var e = a.__geometry(), f = !1; c(e.origin.size, a.__Geometry.origin.size) && (a.__Geometry.origin.fixedLineage ? c(e.origin.windowOffset, a.__Geometry.origin.windowOffset) && (f = !0) : c(e.origin.offset, a.__Geometry.origin.offset) && (f = !0)), f || (a.__options.triggerClose.mouseleave ? a._close() : a.reposition()) } if (a.__options.trackTooltip) { var g = b[0].getBoundingClientRect(); g.height === a.__contentBcr.height && g.width === a.__contentBcr.width || (a.reposition(), a.__contentBcr = g) } } else a._close() }, a.__options.trackerInterval), a }, _close: function (b, c, d) { var e = this, f = !0; if (e._trigger({ type: "close", event: b, stop: function () { f = !1 } }), f || d) { c && e.__callbacks.close.push(c), e.__callbacks.open = [], e.__timeoutsClear(); var g = function () { a.each(e.__callbacks.close, function (a, c) { c.call(e, e, { event: b, origin: e._$origin[0] }) }), e.__callbacks.close = [] }; if ("closed" != e.__state) { var i = !0, j = new Date, k = j.getTime(), l = k + e.__options.animationDuration[1]; if ("disappearing" == e.__state && l > e.__closingTime && e.__options.animationDuration[1] > 0 && (i = !1), i) { e.__closingTime = l, "disappearing" != e.__state && e.__stateSet("disappearing"); var m = function () { clearInterval(e.__tracker), e._trigger({ type: "closing", event: b }), e._$tooltip.off("." + e.__namespace + "-triggerClose").removeClass("tooltipster-dying"), a(h.window).off("." + e.__namespace + "-triggerClose"), e.__$originParents.each(function (b, c) { a(c).off("scroll." + e.__namespace + "-triggerClose") }), e.__$originParents = null, a(h.window.document.body).off("." + e.__namespace + "-triggerClose"), e._$origin.off("." + e.__namespace + "-triggerClose"), e._off("dismissable"), e.__stateSet("closed"), e._trigger({ type: "after", event: b }), e.__options.functionAfter && e.__options.functionAfter.call(e, e, { event: b, origin: e._$origin[0] }), g() }; h.hasTransitions ? (e._$tooltip.css({ "-moz-animation-duration": e.__options.animationDuration[1] + "ms", "-ms-animation-duration": e.__options.animationDuration[1] + "ms", "-o-animation-duration": e.__options.animationDuration[1] + "ms", "-webkit-animation-duration": e.__options.animationDuration[1] + "ms", "animation-duration": e.__options.animationDuration[1] + "ms", "transition-duration": e.__options.animationDuration[1] + "ms" }), e._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"), e.__options.animationDuration[1] > 0 && e._$tooltip.delay(e.__options.animationDuration[1]), e._$tooltip.queue(m)) : e._$tooltip.stop().fadeOut(e.__options.animationDuration[1], m) } } else g() } return e }, _off: function () { return this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _on: function () { return this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _one: function () { return this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments)), this }, _open: function (b, c) { var e = this; if (!e.__destroying && d(e._$origin) && e.__enabled) { var f = !0; if ("closed" == e.__state && (e._trigger({ type: "before", event: b, stop: function () { f = !1 } }), f && e.__options.functionBefore && (f = e.__options.functionBefore.call(e, e, { event: b, origin: e._$origin[0] }))), f !== !1 && null !== e.__Content) { c && e.__callbacks.open.push(c), e.__callbacks.close = [], e.__timeoutsClear(); var g, i = function () { "stable" != e.__state && e.__stateSet("stable"), a.each(e.__callbacks.open, function (a, b) { b.call(e, e, { origin: e._$origin[0], tooltip: e._$tooltip[0] }) }), e.__callbacks.open = [] }; if ("closed" !== e.__state) g = 0, "disappearing" === e.__state ? (e.__stateSet("appearing"), h.hasTransitions ? (e._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"), e.__options.animationDuration[0] > 0 && e._$tooltip.delay(e.__options.animationDuration[0]), e._$tooltip.queue(i)) : e._$tooltip.stop().fadeIn(i)) : "stable" == e.__state && i(); else { if (e.__stateSet("appearing"), g = e.__options.animationDuration[0], e.__contentInsert(), e.reposition(b, !0), h.hasTransitions ? (e._$tooltip.addClass("tooltipster-" + e.__options.animation).addClass("tooltipster-initial").css({ "-moz-animation-duration": e.__options.animationDuration[0] + "ms", "-ms-animation-duration": e.__options.animationDuration[0] + "ms", "-o-animation-duration": e.__options.animationDuration[0] + "ms", "-webkit-animation-duration": e.__options.animationDuration[0] + "ms", "animation-duration": e.__options.animationDuration[0] + "ms", "transition-duration": e.__options.animationDuration[0] + "ms" }), setTimeout(function () { "closed" != e.__state && (e._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"), e.__options.animationDuration[0] > 0 && e._$tooltip.delay(e.__options.animationDuration[0]), e._$tooltip.queue(i)) }, 0)) : e._$tooltip.css("display", "none").fadeIn(e.__options.animationDuration[0], i), e.__trackerStart(), a(h.window).on("resize." + e.__namespace + "-triggerClose", function (b) { var c = a(document.activeElement); (c.is("input") || c.is("textarea")) && a.contains(e._$tooltip[0], c[0]) || e.reposition(b) }).on("scroll." + e.__namespace + "-triggerClose", function (a) { e.__scrollHandler(a) }), e.__$originParents = e._$origin.parents(), e.__$originParents.each(function (b, c) { a(c).on("scroll." + e.__namespace + "-triggerClose", function (a) { e.__scrollHandler(a) }) }), e.__options.triggerClose.mouseleave || e.__options.triggerClose.touchleave && h.hasTouchCapability) { e._on("dismissable", function (a) { a.dismissable ? a.delay ? (m = setTimeout(function () { e._close(a.event) }, a.delay), e.__timeouts.close.push(m)) : e._close(a) : clearTimeout(m) }); var j = e._$origin, k = "", l = "", m = null; e.__options.interactive && (j = j.add(e._$tooltip)), e.__options.triggerClose.mouseleave && (k += "mouseenter." + e.__namespace + "-triggerClose ", l += "mouseleave." + e.__namespace + "-triggerClose "), e.__options.triggerClose.touchleave && h.hasTouchCapability && (k += "touchstart." + e.__namespace + "-triggerClose", l += "touchend." + e.__namespace + "-triggerClose touchcancel." + e.__namespace + "-triggerClose"), j.on(l, function (a) { if (e._touchIsTouchEvent(a) || !e._touchIsEmulatedEvent(a)) { var b = "mouseleave" == a.type ? e.__options.delay : e.__options.delayTouch; e._trigger({ delay: b[1], dismissable: !0, event: a, type: "dismissable" }) } }).on(k, function (a) { !e._touchIsTouchEvent(a) && e._touchIsEmulatedEvent(a) || e._trigger({ dismissable: !1, event: a, type: "dismissable" }) }) } e.__options.triggerClose.originClick && e._$origin.on("click." + e.__namespace + "-triggerClose", function (a) { e._touchIsTouchEvent(a) || e._touchIsEmulatedEvent(a) || e._close(a) }), (e.__options.triggerClose.click || e.__options.triggerClose.tap && h.hasTouchCapability) && setTimeout(function () { if ("closed" != e.__state) { var b = "", c = a(h.window.document.body); e.__options.triggerClose.click && (b += "click." + e.__namespace + "-triggerClose "), e.__options.triggerClose.tap && h.hasTouchCapability && (b += "touchend." + e.__namespace + "-triggerClose"), c.on(b, function (b) { e._touchIsMeaningfulEvent(b) && (e._touchRecordEvent(b), e.__options.interactive && a.contains(e._$tooltip[0], b.target) || e._close(b)) }), e.__options.triggerClose.tap && h.hasTouchCapability && c.on("touchstart." + e.__namespace + "-triggerClose", function (a) { e._touchRecordEvent(a) }) } }, 0), e._trigger("ready"), e.__options.functionReady && e.__options.functionReady.call(e, e, { origin: e._$origin[0], tooltip: e._$tooltip[0] }) } if (e.__options.timer > 0) { var m = setTimeout(function () { e._close() }, e.__options.timer + g); e.__timeouts.close.push(m) } } } return e }, _openShortly: function (a) { var b = this, c = !0; if ("stable" != b.__state && "appearing" != b.__state && !b.__timeouts.open && (b._trigger({ type: "start", event: a, stop: function () { c = !1 } }), c)) { var d = 0 == a.type.indexOf("touch") ? b.__options.delayTouch : b.__options.delay; d[0] ? b.__timeouts.open = setTimeout(function () { b.__timeouts.open = null, b.__pointerIsOverOrigin && b._touchIsMeaningfulEvent(a) ? (b._trigger("startend"), b._open(a)) : b._trigger("startcancel") }, d[0]) : (b._trigger("startend"), b._open(a)) } return b }, _optionsExtract: function (b, c) { var d = this, e = a.extend(!0, {}, c), f = d.__options[b]; return f || (f = {}, a.each(c, function (a, b) { var c = d.__options[a]; void 0 !== c && (f[a] = c) })), a.each(e, function (b, c) { void 0 !== f[b] && ("object" != typeof c || c instanceof Array || null == c || "object" != typeof f[b] || f[b] instanceof Array || null == f[b] ? e[b] = f[b] : a.extend(e[b], f[b])) }), e }, _plug: function (b) { var c = a.tooltipster._plugin(b); if (!c) throw new Error('The "' + b + '" plugin is not defined'); return c.instance && a.tooltipster.__bridge(c.instance, this, c.name), this }, _touchIsEmulatedEvent: function (a) { for (var b = !1, c = (new Date).getTime(), d = this.__touchEvents.length - 1; d >= 0; d--) { var e = this.__touchEvents[d]; if (!(c - e.time < 500)) break; e.target === a.target && (b = !0) } return b }, _touchIsMeaningfulEvent: function (a) { return this._touchIsTouchEvent(a) && !this._touchSwiped(a.target) || !this._touchIsTouchEvent(a) && !this._touchIsEmulatedEvent(a) }, _touchIsTouchEvent: function (a) { return 0 == a.type.indexOf("touch") }, _touchRecordEvent: function (a) { return this._touchIsTouchEvent(a) && (a.time = (new Date).getTime(), this.__touchEvents.push(a)), this }, _touchSwiped: function (a) { for (var b = !1, c = this.__touchEvents.length - 1; c >= 0; c--) { var d = this.__touchEvents[c]; if ("touchmove" == d.type) { b = !0; break } if ("touchstart" == d.type && a === d.target) break } return b }, _trigger: function () { var b = Array.prototype.slice.apply(arguments); return "string" == typeof b[0] && (b[0] = { type: b[0] }), b[0].instance = this, b[0].origin = this._$origin ? this._$origin[0] : null, b[0].tooltip = this._$tooltip ? this._$tooltip[0] : null, this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, b), a.tooltipster._trigger.apply(a.tooltipster, b), this.__$emitterPublic.trigger.apply(this.__$emitterPublic, b), this }, _unplug: function (b) { var c = this; if (c[b]) { var d = a.tooltipster._plugin(b); d.instance && a.each(d.instance, function (a, d) { c[a] && c[a].bridged === c[b] && delete c[a] }), c[b].__destroy && c[b].__destroy(), delete c[b] } return c }, close: function (a) { return this.__destroyed ? this.__destroyError() : this._close(null, a), this }, content: function (a) { var b = this; if (void 0 === a) return b.__Content; if (b.__destroyed) b.__destroyError(); else if (b.__contentSet(a), null !== b.__Content) { if ("closed" !== b.__state && (b.__contentInsert(), b.reposition(), b.__options.updateAnimation)) if (h.hasTransitions) { var c = b.__options.updateAnimation; b._$tooltip.addClass("tooltipster-update-" + c), setTimeout(function () { "closed" != b.__state && b._$tooltip.removeClass("tooltipster-update-" + c) }, 1e3) } else b._$tooltip.fadeTo(200, .5, function () { "closed" != b.__state && b._$tooltip.fadeTo(200, 1) }) } else b._close(); return b }, destroy: function () { var b = this; if (b.__destroyed) b.__destroyError(); else { "closed" != b.__state ? b.option("animationDuration", 0)._close(null, null, !0) : b.__timeoutsClear(), b._trigger("destroy"), b.__destroyed = !0, b._$origin.removeData(b.__namespace).off("." + b.__namespace + "-triggerOpen"), a(h.window.document.body).off("." + b.__namespace + "-triggerOpen"); var c = b._$origin.data("tooltipster-ns"); if (c) if (1 === c.length) { var d = null; "previous" == b.__options.restoration ? d = b._$origin.data("tooltipster-initialTitle") : "current" == b.__options.restoration && (d = "string" == typeof b.__Content ? b.__Content : a("<div></div>").append(b.__Content).html()), d && b._$origin.attr("title", d), b._$origin.removeClass("tooltipstered"), b._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle") } else c = a.grep(c, function (a, c) { return a !== b.__namespace }), b._$origin.data("tooltipster-ns", c); b._trigger("destroyed"), b._off(), b.off(), b.__Content = null, b.__$emitterPrivate = null, b.__$emitterPublic = null, b.__options.parent = null, b._$origin = null, b._$tooltip = null, a.tooltipster.__instancesLatestArr = a.grep(a.tooltipster.__instancesLatestArr, function (a, c) { return b !== a }), clearInterval(b.__garbageCollector) } return b }, disable: function () { return this.__destroyed ? (this.__destroyError(), this) : (this._close(), this.__enabled = !1, this) }, elementOrigin: function () { return this.__destroyed ? void this.__destroyError() : this._$origin[0] }, elementTooltip: function () { return this._$tooltip ? this._$tooltip[0] : null }, enable: function () { return this.__enabled = !0, this }, hide: function (a) { return this.close(a) }, instance: function () { return this }, off: function () { return this.__destroyed || this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, on: function () { return this.__destroyed ? this.__destroyError() : this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, one: function () { return this.__destroyed ? this.__destroyError() : this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this }, open: function (a) { return this.__destroyed ? this.__destroyError() : this._open(null, a), this }, option: function (b, c) { return void 0 === c ? this.__options[b] : (this.__destroyed ? this.__destroyError() : (this.__options[b] = c, this.__optionsFormat(), a.inArray(b, ["trigger", "triggerClose", "triggerOpen"]) >= 0 && this.__prepareOrigin(), "selfDestruction" === b && this.__prepareGC()), this) }, reposition: function (a, b) { var c = this; return c.__destroyed ? c.__destroyError() : "closed" != c.__state && d(c._$origin) && (b || d(c._$tooltip)) && (b || c._$tooltip.detach(), c.__Geometry = c.__geometry(), c._trigger({ type: "reposition", event: a, helper: { geo: c.__Geometry } })), c }, show: function (a) { return this.open(a) }, status: function () { return { destroyed: this.__destroyed, enabled: this.__enabled, open: "closed" !== this.__state, state: this.__state } }, triggerHandler: function () { return this.__destroyed ? this.__destroyError() : this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments)), this } }, a.fn.tooltipster = function () { var b = Array.prototype.slice.apply(arguments), c = "You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE."; if (0 === this.length) return this; if ("string" == typeof b[0]) { var d = "#*$~&"; return this.each(function () { var e = a(this).data("tooltipster-ns"), f = e ? a(this).data(e[0]) : null; if (!f) throw new Error("You called Tooltipster's \"" + b[0] + '" method on an uninitialized element'); if ("function" != typeof f[b[0]]) throw new Error('Unknown method "' + b[0] + '"'); this.length > 1 && "content" == b[0] && (b[1] instanceof a || "object" == typeof b[1] && null != b[1] && b[1].tagName) && !f.__options.contentCloning && f.__options.debug && console.log(c); var g = f[b[0]](b[1], b[2]); return g !== f || "instance" === b[0] ? (d = g, !1) : void 0 }), "#*$~&" !== d ? d : this } a.tooltipster.__instancesLatestArr = []; var e = b[0] && void 0 !== b[0].multiple, g = e && b[0].multiple || !e && f.multiple, h = b[0] && void 0 !== b[0].content, i = h && b[0].content || !h && f.content, j = b[0] && void 0 !== b[0].contentCloning, k = j && b[0].contentCloning || !j && f.contentCloning, l = b[0] && void 0 !== b[0].debug, m = l && b[0].debug || !l && f.debug; return this.length > 1 && (i instanceof a || "object" == typeof i && null != i && i.tagName) && !k && m && console.log(c), this.each(function () { var c = !1, d = a(this), e = d.data("tooltipster-ns"), f = null; e ? g ? c = !0 : m && (console.log("Tooltipster: one or more tooltips are already attached to the element below. Ignoring."), console.log(this)) : c = !0, c && (f = new a.Tooltipster(this, b[0]), e || (e = []), e.push(f.__namespace), d.data("tooltipster-ns", e), d.data(f.__namespace, f), f.__options.functionInit && f.__options.functionInit.call(f, f, { origin: this }), f._trigger("init")), a.tooltipster.__instancesLatestArr.push(f) }), this }, b.prototype = { __init: function (b) { this.__$tooltip = b, this.__$tooltip.css({ left: 0, overflow: "hidden", position: "absolute", top: 0 }).find(".tooltipster-content").css("overflow", "auto"), this.$container = a('<div class="tooltipster-ruler"></div>').append(this.__$tooltip).appendTo(h.window.document.body) }, __forceRedraw: function () { var a = this.__$tooltip.parent(); this.__$tooltip.detach(), this.__$tooltip.appendTo(a) }, constrain: function (a, b) { return this.constraints = { width: a, height: b }, this.__$tooltip.css({ display: "block", height: "", overflow: "auto", width: a }), this }, destroy: function () { this.__$tooltip.detach().find(".tooltipster-content").css({ display: "", overflow: "" }), this.$container.remove() }, free: function () { return this.constraints = null, this.__$tooltip.css({ display: "", height: "", overflow: "visible", width: "" }), this }, measure: function () { this.__forceRedraw(); var a = this.__$tooltip[0].getBoundingClientRect(), b = { size: { height: a.height || a.bottom - a.top, width: a.width || a.right - a.left } }; if (this.constraints) { var c = this.__$tooltip.find(".tooltipster-content"), d = this.__$tooltip.outerHeight(), e = c[0].getBoundingClientRect(), f = { height: d <= this.constraints.height, width: a.width <= this.constraints.width && e.width >= c[0].scrollWidth - 1 }; b.fits = f.height && f.width } return h.IE && h.IE <= 11 && b.size.width !== h.window.document.documentElement.clientWidth && (b.size.width = Math.ceil(b.size.width) + 1), b } }; var j = navigator.userAgent.toLowerCase(); -1 != j.indexOf("msie") ? h.IE = parseInt(j.split("msie")[1]) : -1 !== j.toLowerCase().indexOf("trident") && -1 !== j.indexOf(" rv:11") ? h.IE = 11 : -1 != j.toLowerCase().indexOf("edge/") && (h.IE = parseInt(j.toLowerCase().split("edge/")[1])); var k = "tooltipster.sideTip"; return a.tooltipster._plugin({
        name: k, instance: {
            __defaults: function () { return { arrow: !0, distance: 6, functionPosition: null, maxWidth: null, minIntersection: 16, minWidth: 0, position: null, side: "top", viewportAware: !0 } }, __init: function (a) { var b = this; b.__instance = a, b.__namespace = "tooltipster-sideTip-" + Math.round(1e6 * Math.random()), b.__previousState = "closed", b.__options, b.__optionsFormat(), b.__instance._on("state." + b.__namespace, function (a) { "closed" == a.state ? b.__close() : "appearing" == a.state && "closed" == b.__previousState && b.__create(), b.__previousState = a.state }), b.__instance._on("options." + b.__namespace, function () { b.__optionsFormat() }), b.__instance._on("reposition." + b.__namespace, function (a) { b.__reposition(a.event, a.helper) }) }, __close: function () { this.__instance.content() instanceof a && this.__instance.content().detach(), this.__instance._$tooltip.remove(), this.__instance._$tooltip = null }, __create: function () {
                var b = a('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"></div></div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"></div><div class="tooltipster-arrow-background"></div></div></div></div>'); this.__options.arrow || b.find(".tooltipster-box").css("margin", 0).end().find(".tooltipster-arrow").hide(), this.__options.minWidth && b.css("min-width", this.__options.minWidth + "px"), this.__options.maxWidth && b.css("max-width", this.__options.maxWidth + "px"),
                    this.__instance._$tooltip = b, this.__instance._trigger("created")
            }, __destroy: function () { this.__instance._off("." + self.__namespace) }, __optionsFormat: function () { var b = this; if (b.__options = b.__instance._optionsExtract(k, b.__defaults()), b.__options.position && (b.__options.side = b.__options.position), "object" != typeof b.__options.distance && (b.__options.distance = [b.__options.distance]), b.__options.distance.length < 4 && (void 0 === b.__options.distance[1] && (b.__options.distance[1] = b.__options.distance[0]), void 0 === b.__options.distance[2] && (b.__options.distance[2] = b.__options.distance[0]), void 0 === b.__options.distance[3] && (b.__options.distance[3] = b.__options.distance[1]), b.__options.distance = { top: b.__options.distance[0], right: b.__options.distance[1], bottom: b.__options.distance[2], left: b.__options.distance[3] }), "string" == typeof b.__options.side) { var c = { top: "bottom", right: "left", bottom: "top", left: "right" }; b.__options.side = [b.__options.side, c[b.__options.side]], "left" == b.__options.side[0] || "right" == b.__options.side[0] ? b.__options.side.push("top", "bottom") : b.__options.side.push("right", "left") } 6 === a.tooltipster._env.IE && b.__options.arrow !== !0 && (b.__options.arrow = !1) }, __reposition: function (b, c) { var d, e = this, f = e.__targetFind(c), g = []; e.__instance._$tooltip.detach(); var h = e.__instance._$tooltip.clone(), i = a.tooltipster._getRuler(h), j = !1, k = e.__instance.option("animation"); switch (k && h.removeClass("tooltipster-" + k), a.each(["window", "document"], function (d, k) { var l = null; if (e.__instance._trigger({ container: k, helper: c, satisfied: j, takeTest: function (a) { l = a }, results: g, type: "positionTest" }), 1 == l || 0 != l && 0 == j && ("window" != k || e.__options.viewportAware)) for (var d = 0; d < e.__options.side.length; d++) { var m = { horizontal: 0, vertical: 0 }, n = e.__options.side[d]; "top" == n || "bottom" == n ? m.vertical = e.__options.distance[n] : m.horizontal = e.__options.distance[n], e.__sideChange(h, n), a.each(["natural", "constrained"], function (a, d) { if (l = null, e.__instance._trigger({ container: k, event: b, helper: c, mode: d, results: g, satisfied: j, side: n, takeTest: function (a) { l = a }, type: "positionTest" }), 1 == l || 0 != l && 0 == j) { var h = { container: k, distance: m, fits: null, mode: d, outerSize: null, side: n, size: null, target: f[n], whole: null }, o = "natural" == d ? i.free() : i.constrain(c.geo.available[k][n].width - m.horizontal, c.geo.available[k][n].height - m.vertical), p = o.measure(); if (h.size = p.size, h.outerSize = { height: p.size.height + m.vertical, width: p.size.width + m.horizontal }, "natural" == d ? c.geo.available[k][n].width >= h.outerSize.width && c.geo.available[k][n].height >= h.outerSize.height ? h.fits = !0 : h.fits = !1 : h.fits = p.fits, "window" == k && (h.fits ? "top" == n || "bottom" == n ? h.whole = c.geo.origin.windowOffset.right >= e.__options.minIntersection && c.geo.window.size.width - c.geo.origin.windowOffset.left >= e.__options.minIntersection : h.whole = c.geo.origin.windowOffset.bottom >= e.__options.minIntersection && c.geo.window.size.height - c.geo.origin.windowOffset.top >= e.__options.minIntersection : h.whole = !1), g.push(h), h.whole) j = !0; else if ("natural" == h.mode && (h.fits || h.size.width <= c.geo.available[k][n].width)) return !1 } }) } }), e.__instance._trigger({ edit: function (a) { g = a }, event: b, helper: c, results: g, type: "positionTested" }), g.sort(function (a, b) { if (a.whole && !b.whole) return -1; if (!a.whole && b.whole) return 1; if (a.whole && b.whole) { var c = e.__options.side.indexOf(a.side), d = e.__options.side.indexOf(b.side); return d > c ? -1 : c > d ? 1 : "natural" == a.mode ? -1 : 1 } if (a.fits && !b.fits) return -1; if (!a.fits && b.fits) return 1; if (a.fits && b.fits) { var c = e.__options.side.indexOf(a.side), d = e.__options.side.indexOf(b.side); return d > c ? -1 : c > d ? 1 : "natural" == a.mode ? -1 : 1 } return "document" == a.container && "bottom" == a.side && "natural" == a.mode ? -1 : 1 }), d = g[0], d.coord = {}, d.side) { case "left": case "right": d.coord.top = Math.floor(d.target - d.size.height / 2); break; case "bottom": case "top": d.coord.left = Math.floor(d.target - d.size.width / 2) }switch (d.side) { case "left": d.coord.left = c.geo.origin.windowOffset.left - d.outerSize.width; break; case "right": d.coord.left = c.geo.origin.windowOffset.right + d.distance.horizontal; break; case "top": d.coord.top = c.geo.origin.windowOffset.top - d.outerSize.height; break; case "bottom": d.coord.top = c.geo.origin.windowOffset.bottom + d.distance.vertical }"window" == d.container ? "top" == d.side || "bottom" == d.side ? d.coord.left < 0 ? c.geo.origin.windowOffset.right - this.__options.minIntersection >= 0 ? d.coord.left = 0 : d.coord.left = c.geo.origin.windowOffset.right - this.__options.minIntersection - 1 : d.coord.left > c.geo.window.size.width - d.size.width && (c.geo.origin.windowOffset.left + this.__options.minIntersection <= c.geo.window.size.width ? d.coord.left = c.geo.window.size.width - d.size.width : d.coord.left = c.geo.origin.windowOffset.left + this.__options.minIntersection + 1 - d.size.width) : d.coord.top < 0 ? c.geo.origin.windowOffset.bottom - this.__options.minIntersection >= 0 ? d.coord.top = 0 : d.coord.top = c.geo.origin.windowOffset.bottom - this.__options.minIntersection - 1 : d.coord.top > c.geo.window.size.height - d.size.height && (c.geo.origin.windowOffset.top + this.__options.minIntersection <= c.geo.window.size.height ? d.coord.top = c.geo.window.size.height - d.size.height : d.coord.top = c.geo.origin.windowOffset.top + this.__options.minIntersection + 1 - d.size.height) : (d.coord.left > c.geo.window.size.width - d.size.width && (d.coord.left = c.geo.window.size.width - d.size.width), d.coord.left < 0 && (d.coord.left = 0)), e.__sideChange(h, d.side), c.tooltipClone = h[0], c.tooltipParent = e.__instance.option("parent").parent[0], c.mode = d.mode, c.whole = d.whole, c.origin = e.__instance._$origin[0], c.tooltip = e.__instance._$tooltip[0], delete d.container, delete d.fits, delete d.mode, delete d.outerSize, delete d.whole, d.distance = d.distance.horizontal || d.distance.vertical; var l = a.extend(!0, {}, d); if (e.__instance._trigger({ edit: function (a) { d = a }, event: b, helper: c, position: l, type: "position" }), e.__options.functionPosition) { var m = e.__options.functionPosition.call(e, e.__instance, c, l); m && (d = m) } i.destroy(); var n, o; "top" == d.side || "bottom" == d.side ? (n = { prop: "left", val: d.target - d.coord.left }, o = d.size.width - this.__options.minIntersection) : (n = { prop: "top", val: d.target - d.coord.top }, o = d.size.height - this.__options.minIntersection), n.val < this.__options.minIntersection ? n.val = this.__options.minIntersection : n.val > o && (n.val = o); var p; p = c.geo.origin.fixedLineage ? c.geo.origin.windowOffset : { left: c.geo.origin.windowOffset.left + c.geo.window.scroll.left, top: c.geo.origin.windowOffset.top + c.geo.window.scroll.top }, d.coord = { left: p.left + (d.coord.left - c.geo.origin.windowOffset.left), top: p.top + (d.coord.top - c.geo.origin.windowOffset.top) }, e.__sideChange(e.__instance._$tooltip, d.side), c.geo.origin.fixedLineage ? e.__instance._$tooltip.css("position", "fixed") : e.__instance._$tooltip.css("position", ""), e.__instance._$tooltip.css({ left: d.coord.left, top: d.coord.top, height: d.size.height, width: d.size.width }).find(".tooltipster-arrow").css({ left: "", top: "" }).css(n.prop, n.val), e.__instance._$tooltip.appendTo(e.__instance.option("parent")), e.__instance._trigger({ type: "repositioned", event: b, position: d }) }, __sideChange: function (a, b) { a.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-" + b) }, __targetFind: function (a) { var b = {}, c = this.__instance._$origin[0].getClientRects(); if (c.length > 1) { var d = this.__instance._$origin.css("opacity"); 1 == d && (this.__instance._$origin.css("opacity", .99), c = this.__instance._$origin[0].getClientRects(), this.__instance._$origin.css("opacity", 1)) } if (c.length < 2) b.top = Math.floor(a.geo.origin.windowOffset.left + a.geo.origin.size.width / 2), b.bottom = b.top, b.left = Math.floor(a.geo.origin.windowOffset.top + a.geo.origin.size.height / 2), b.right = b.left; else { var e = c[0]; b.top = Math.floor(e.left + (e.right - e.left) / 2), e = c.length > 2 ? c[Math.ceil(c.length / 2) - 1] : c[0], b.right = Math.floor(e.top + (e.bottom - e.top) / 2), e = c[c.length - 1], b.bottom = Math.floor(e.left + (e.right - e.left) / 2), e = c.length > 2 ? c[Math.ceil((c.length + 1) / 2) - 1] : c[c.length - 1], b.left = Math.floor(e.top + (e.bottom - e.top) / 2) } return b }
        }
    }), a
});
/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery throttle / debounce: Sometimes, less is more!
//
// *Version: 1.1, Last updated: 3/7/2010*
// 
// Project Home - http://benalman.com/projects/jquery-throttle-debounce-plugin/
// GitHub       - http://github.com/cowboy/jquery-throttle-debounce/
// Source       - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.js
// (Minified)   - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.min.js (0.7kb)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// Throttle - http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/
// Debounce - http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - none, 1.3.2, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-throttle-debounce/unit/
// 
// About: Release History
// 
// 1.1 - (3/7/2010) Fixed a bug in <jQuery.throttle> where trailing callbacks
//       executed later than they should. Reworked a fair amount of internal
//       logic as well.
// 1.0 - (3/6/2010) Initial release as a stand-alone project. Migrated over
//       from jquery-misc repo v0.4 to jquery-throttle repo v1.0, added the
//       no_trailing throttle parameter and debounce functionality.
// 
// Topic: Note for non-jQuery users
// 
// jQuery isn't actually required for this plugin, because nothing internal
// uses any jQuery methods or properties. jQuery is just used as a namespace
// under which these methods can exist.
// 
// Since jQuery isn't actually required for this plugin, if jQuery doesn't exist
// when this plugin is loaded, the method described below will be created in
// the `Cowboy` namespace. Usage will be exactly the same, but instead of
// $.method() or jQuery.method(), you'll need to use Cowboy.method().

(function (window, undefined) {
    '$:nomunge'; // Used by YUI compressor.

    // Since jQuery really isn't required for this plugin, use `jQuery` as the
    // namespace only if it already exists, otherwise use the `Cowboy` namespace,
    // creating it if necessary.
    var $ = window.jQuery || window.Cowboy || (window.Cowboy = {}),

        // Internal method reference.
        jq_throttle;

    // Method: jQuery.throttle
    // 
    // Throttle execution of a function. Especially useful for rate limiting
    // execution of handlers on events like resize and scroll. If you want to
    // rate-limit execution of a function to a single time, see the
    // <jQuery.debounce> method.
    // 
    // In this visualization, | is a throttled-function call and X is the actual
    // callback execution:
    // 
    // > Throttled with `no_trailing` specified as false or unspecified:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // > X    X    X    X    X    X        X    X    X    X    X    X
    // > 
    // > Throttled with `no_trailing` specified as true:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // > X    X    X    X    X             X    X    X    X    X
    // 
    // Usage:
    // 
    // > var throttled = jQuery.throttle( delay, [ no_trailing, ] callback );
    // > 
    // > jQuery('selector').bind( 'someevent', throttled );
    // > jQuery('selector').unbind( 'someevent', throttled );
    // 
    // This also works in jQuery 1.4+:
    // 
    // > jQuery('selector').bind( 'someevent', jQuery.throttle( delay, [ no_trailing, ] callback ) );
    // > jQuery('selector').unbind( 'someevent', callback );
    // 
    // Arguments:
    // 
    //  delay - (Number) A zero-or-greater delay in milliseconds. For event
    //    callbacks, values around 100 or 250 (or even higher) are most useful.
    //  no_trailing - (Boolean) Optional, defaults to false. If no_trailing is
    //    true, callback will only execute every `delay` milliseconds while the
    //    throttled-function is being called. If no_trailing is false or
    //    unspecified, callback will be executed one final time after the last
    //    throttled-function call. (After the throttled-function has not been
    //    called for `delay` milliseconds, the internal counter is reset)
    //  callback - (Function) A function to be executed after delay milliseconds.
    //    The `this` context and all arguments are passed through, as-is, to
    //    `callback` when the throttled-function is executed.
    // 
    // Returns:
    // 
    //  (Function) A new, throttled, function.

    $.throttle = jq_throttle = function (delay, no_trailing, callback, debounce_mode) {
        // After wrapper has stopped being called, this timeout ensures that
        // `callback` is executed at the proper times in `throttle` and `end`
        // debounce modes.
        var timeout_id,

            // Keep track of the last time `callback` was executed.
            last_exec = 0;

        // `no_trailing` defaults to falsy.
        if (typeof no_trailing !== 'boolean') {
            debounce_mode = callback;
            callback = no_trailing;
            no_trailing = undefined;
        }

        // The `wrapper` function encapsulates all of the throttling / debouncing
        // functionality and when executed will limit the rate at which `callback`
        // is executed.
        function wrapper() {
            var that = this,
                elapsed = +new Date() - last_exec,
                args = arguments;

            // Execute `callback` and update the `last_exec` timestamp.
            function exec() {
                last_exec = +new Date();
                callback.apply(that, args);
            };

            // If `debounce_mode` is true (at_begin) this is used to clear the flag
            // to allow future `callback` executions.
            function clear() {
                timeout_id = undefined;
            };

            if (debounce_mode && !timeout_id) {
                // Since `wrapper` is being called for the first time and
                // `debounce_mode` is true (at_begin), execute `callback`.
                exec();
            }

            // Clear any existing timeout.
            timeout_id && clearTimeout(timeout_id);

            if (debounce_mode === undefined && elapsed > delay) {
                // In throttle mode, if `delay` time has been exceeded, execute
                // `callback`.
                exec();

            } else if (no_trailing !== true) {
                // In trailing throttle mode, since `delay` time has not been
                // exceeded, schedule `callback` to execute `delay` ms after most
                // recent execution.
                // 
                // If `debounce_mode` is true (at_begin), schedule `clear` to execute
                // after `delay` ms.
                // 
                // If `debounce_mode` is false (at end), schedule `callback` to
                // execute after `delay` ms.
                timeout_id = setTimeout(debounce_mode ? clear : exec, debounce_mode === undefined ? delay - elapsed : delay);
            }
        };

        // Set the guid of `wrapper` function to the same of original callback, so
        // it can be removed in jQuery 1.4+ .unbind or .die by using the original
        // callback as a reference.
        if ($.guid) {
            wrapper.guid = callback.guid = callback.guid || $.guid++;
        }

        // Return the wrapper function.
        return wrapper;
    };

    // Method: jQuery.debounce
    // 
    // Debounce execution of a function. Debouncing, unlike throttling,
    // guarantees that a function is only executed a single time, either at the
    // very beginning of a series of calls, or at the very end. If you want to
    // simply rate-limit execution of a function, see the <jQuery.throttle>
    // method.
    // 
    // In this visualization, | is a debounced-function call and X is the actual
    // callback execution:
    // 
    // > Debounced with `at_begin` specified as false or unspecified:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // >                          X                                 X
    // > 
    // > Debounced with `at_begin` specified as true:
    // > ||||||||||||||||||||||||| (pause) |||||||||||||||||||||||||
    // > X                                 X
    // 
    // Usage:
    // 
    // > var debounced = jQuery.debounce( delay, [ at_begin, ] callback );
    // > 
    // > jQuery('selector').bind( 'someevent', debounced );
    // > jQuery('selector').unbind( 'someevent', debounced );
    // 
    // This also works in jQuery 1.4+:
    // 
    // > jQuery('selector').bind( 'someevent', jQuery.debounce( delay, [ at_begin, ] callback ) );
    // > jQuery('selector').unbind( 'someevent', callback );
    // 
    // Arguments:
    // 
    //  delay - (Number) A zero-or-greater delay in milliseconds. For event
    //    callbacks, values around 100 or 250 (or even higher) are most useful.
    //  at_begin - (Boolean) Optional, defaults to false. If at_begin is false or
    //    unspecified, callback will only be executed `delay` milliseconds after
    //    the last debounced-function call. If at_begin is true, callback will be
    //    executed only at the first debounced-function call. (After the
    //    throttled-function has not been called for `delay` milliseconds, the
    //    internal counter is reset)
    //  callback - (Function) A function to be executed after delay milliseconds.
    //    The `this` context and all arguments are passed through, as-is, to
    //    `callback` when the debounced-function is executed.
    // 
    // Returns:
    // 
    //  (Function) A new, debounced, function.

    $.debounce = function (delay, at_begin, callback) {
        return callback === undefined
            ? jq_throttle(delay, at_begin, false)
            : jq_throttle(delay, callback, at_begin !== false);
    };

})(window);
(function ($) {

    $.fn.shuffle = function () {

        var allElems = this.get(),
            getRandom = function (max) {
                return Math.floor(Math.random() * max);
            },
            shuffled = $.map(allElems, function () {
                var random = getRandom(allElems.length),
                    randEl = $(allElems[random]).clone(true)[0];
                allElems.splice(random, 1);
                return randEl;
            });

        this.each(function (i) {
            $(this).replaceWith($(shuffled[i]));
        });

        return $(shuffled);

    };

})(jQuery);
/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */
  
!function (root, name, definition) {
    if (typeof module != 'undefined' && module.exports) module.exports = definition()
    else if (typeof define == 'function' && define.amd) define(name, definition)
    else {
        window[name] = definition()
    }
}(this, 'bowser', function () {
    /**
      * See useragents.js for examples of navigator.userAgent
      */

    var t = true

    function detect(ua) {

        function getFirstMatch(regex) {
            var match = ua.match(regex);
            return (match && match.length > 1 && match[1]) || '';
        }

        function getSecondMatch(regex) {
            var match = ua.match(regex);
            return (match && match.length > 1 && match[2]) || '';
        }

        var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()
            , likeAndroid = /like android/i.test(ua)
            , android = !likeAndroid && /android/i.test(ua)
            , nexusMobile = /nexus\s*[0-6]\s*/i.test(ua)
            , nexusTablet = !nexusMobile && /nexus\s*[0-9]+/i.test(ua)
            , chromeos = /CrOS/.test(ua)
            , silk = /silk/i.test(ua)
            , sailfish = /sailfish/i.test(ua)
            , tizen = /tizen/i.test(ua)
            , webos = /(web|hpw)(o|0)s/i.test(ua)
            , windowsphone = /windows phone/i.test(ua)
            , samsungBrowser = /SamsungBrowser/i.test(ua)
            , windows = !windowsphone && /windows/i.test(ua)
            , mac = !iosdevice && !silk && /macintosh/i.test(ua)
            , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)
            , edgeVersion = getSecondMatch(/edg([ea]|ios)\/(\d+(\.\d+)?)/i)
            , versionIdentifier = getFirstMatch(/version\/(\d+(\.\d+)?)/i)
            , tablet = /tablet/i.test(ua) && !/tablet pc/i.test(ua)
            , mobile = !tablet && /[^-]mobi/i.test(ua)
            , xbox = /xbox/i.test(ua)
            , result

        if (/opera/i.test(ua)) {
            //  an old Opera
            result = {
                name: 'Opera'
                , opera: t
                , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)
            }
        } else if (/opr\/|opios/i.test(ua)) {
            // a new Opera
            result = {
                name: 'Opera'
                , opera: t
                , version: getFirstMatch(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i) || versionIdentifier
            }
        }
        else if (/SamsungBrowser/i.test(ua)) {
            result = {
                name: 'Samsung Internet for Android'
                , samsungBrowser: t
                , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)
            }
        }
        else if (/Whale/i.test(ua)) {
            result = {
                name: 'NAVER Whale browser'
                , whale: t
                , version: getFirstMatch(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/MZBrowser/i.test(ua)) {
            result = {
                name: 'MZ Browser'
                , mzbrowser: t
                , version: getFirstMatch(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/coast/i.test(ua)) {
            result = {
                name: 'Opera Coast'
                , coast: t
                , version: versionIdentifier || getFirstMatch(/(?:coast)[\s\/](\d+(\.\d+)?)/i)
            }
        }
        else if (/focus/i.test(ua)) {
            result = {
                name: 'Focus'
                , focus: t
                , version: getFirstMatch(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/yabrowser/i.test(ua)) {
            result = {
                name: 'Yandex Browser'
                , yandexbrowser: t
                , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)
            }
        }
        else if (/ucbrowser/i.test(ua)) {
            result = {
                name: 'UC Browser'
                , ucbrowser: t
                , version: getFirstMatch(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/mxios/i.test(ua)) {
            result = {
                name: 'Maxthon'
                , maxthon: t
                , version: getFirstMatch(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/epiphany/i.test(ua)) {
            result = {
                name: 'Epiphany'
                , epiphany: t
                , version: getFirstMatch(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/puffin/i.test(ua)) {
            result = {
                name: 'Puffin'
                , puffin: t
                , version: getFirstMatch(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)
            }
        }
        else if (/sleipnir/i.test(ua)) {
            result = {
                name: 'Sleipnir'
                , sleipnir: t
                , version: getFirstMatch(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (/k-meleon/i.test(ua)) {
            result = {
                name: 'K-Meleon'
                , kMeleon: t
                , version: getFirstMatch(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)
            }
        }
        else if (windowsphone) {
            result = {
                name: 'Windows Phone'
                , osname: 'Windows Phone'
                , windowsphone: t
            }
            if (edgeVersion) {
                result.msedge = t
                result.version = edgeVersion
            }
            else {
                result.msie = t
                result.version = getFirstMatch(/iemobile\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/msie|trident/i.test(ua)) {
            result = {
                name: 'Internet Explorer'
                , msie: t
                , version: getFirstMatch(/(?:msie |rv:)(\d+(\.\d+)?)/i)
            }
        } else if (chromeos) {
            result = {
                name: 'Chrome'
                , osname: 'Chrome OS'
                , chromeos: t
                , chromeBook: t
                , chrome: t
                , version: getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)
            }
        } else if (/edg([ea]|ios)/i.test(ua)) {
            result = {
                name: 'Microsoft Edge'
                , msedge: t
                , version: edgeVersion
            }
        }
        else if (/vivaldi/i.test(ua)) {
            result = {
                name: 'Vivaldi'
                , vivaldi: t
                , version: getFirstMatch(/vivaldi\/(\d+(\.\d+)?)/i) || versionIdentifier
            }
        }
        else if (sailfish) {
            result = {
                name: 'Sailfish'
                , osname: 'Sailfish OS'
                , sailfish: t
                , version: getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/seamonkey\//i.test(ua)) {
            result = {
                name: 'SeaMonkey'
                , seamonkey: t
                , version: getFirstMatch(/seamonkey\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/firefox|iceweasel|fxios/i.test(ua)) {
            result = {
                name: 'Firefox'
                , firefox: t
                , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)
            }
            if (/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(ua)) {
                result.firefoxos = t
                result.osname = 'Firefox OS'
            }
        }
        else if (silk) {
            result = {
                name: 'Amazon Silk'
                , silk: t
                , version: getFirstMatch(/silk\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/phantom/i.test(ua)) {
            result = {
                name: 'PhantomJS'
                , phantom: t
                , version: getFirstMatch(/phantomjs\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/slimerjs/i.test(ua)) {
            result = {
                name: 'SlimerJS'
                , slimer: t
                , version: getFirstMatch(/slimerjs\/(\d+(\.\d+)?)/i)
            }
        }
        else if (/blackberry|\bbb\d+/i.test(ua) || /rim\stablet/i.test(ua)) {
            result = {
                name: 'BlackBerry'
                , osname: 'BlackBerry OS'
                , blackberry: t
                , version: versionIdentifier || getFirstMatch(/blackberry[\d]+\/(\d+(\.\d+)?)/i)
            }
        }
        else if (webos) {
            result = {
                name: 'WebOS'
                , osname: 'WebOS'
                , webos: t
                , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)
            };
            /touchpad\//i.test(ua) && (result.touchpad = t)
        }
        else if (/bada/i.test(ua)) {
            result = {
                name: 'Bada'
                , osname: 'Bada'
                , bada: t
                , version: getFirstMatch(/dolfin\/(\d+(\.\d+)?)/i)
            };
        }
        else if (tizen) {
            result = {
                name: 'Tizen'
                , osname: 'Tizen'
                , tizen: t
                , version: getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i) || versionIdentifier
            };
        }
        else if (/qupzilla/i.test(ua)) {
            result = {
                name: 'QupZilla'
                , qupzilla: t
                , version: getFirstMatch(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i) || versionIdentifier
            }
        }
        else if (/chromium/i.test(ua)) {
            result = {
                name: 'Chromium'
                , chromium: t
                , version: getFirstMatch(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i) || versionIdentifier
            }
        }
        else if (/chrome|crios|crmo/i.test(ua)) {
            result = {
                name: 'Chrome'
                , chrome: t
                , version: getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)
            }
        }
        else if (android) {
            result = {
                name: 'Android'
                , version: versionIdentifier
            }
        }
        else if (/safari|applewebkit/i.test(ua)) {
            result = {
                name: 'Safari'
                , safari: t
            }
            if (versionIdentifier) {
                result.version = versionIdentifier
            }
        }
        else if (iosdevice) {
            result = {
                name: iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'
            }
            // WTF: version is not part of user agent in web apps
            if (versionIdentifier) {
                result.version = versionIdentifier
            }
        }
        else if (/googlebot/i.test(ua)) {
            result = {
                name: 'Googlebot'
                , googlebot: t
                , version: getFirstMatch(/googlebot\/(\d+(\.\d+))/i) || versionIdentifier
            }
        }
        else {
            result = {
                name: getFirstMatch(/^(.*)\/(.*) /),
                version: getSecondMatch(/^(.*)\/(.*) /)
            };
        }

        // set webkit or gecko flag for browsers based on these engines
        if (!result.msedge && /(apple)?webkit/i.test(ua)) {
            if (/(apple)?webkit\/537\.36/i.test(ua)) {
                result.name = result.name || "Blink"
                result.blink = t
            } else {
                result.name = result.name || "Webkit"
                result.webkit = t
            }
            if (!result.version && versionIdentifier) {
                result.version = versionIdentifier
            }
        } else if (!result.opera && /gecko\//i.test(ua)) {
            result.name = result.name || "Gecko"
            result.gecko = t
            result.version = result.version || getFirstMatch(/gecko\/(\d+(\.\d+)?)/i)
        }

        // set OS flags for platforms that have multiple browsers
        if (!result.windowsphone && (android || result.silk)) {
            result.android = t
            result.osname = 'Android'
        } else if (!result.windowsphone && iosdevice) {
            result[iosdevice] = t
            result.ios = t
            result.osname = 'iOS'
        } else if (mac) {
            result.mac = t
            result.osname = 'macOS'
        } else if (xbox) {
            result.xbox = t
            result.osname = 'Xbox'
        } else if (windows) {
            result.windows = t
            result.osname = 'Windows'
        } else if (linux) {
            result.linux = t
            result.osname = 'Linux'
        }

        function getWindowsVersion(s) {
            switch (s) {
                case 'NT': return 'NT'
                case 'XP': return 'XP'
                case 'NT 5.0': return '2000'
                case 'NT 5.1': return 'XP'
                case 'NT 5.2': return '2003'
                case 'NT 6.0': return 'Vista'
                case 'NT 6.1': return '7'
                case 'NT 6.2': return '8'
                case 'NT 6.3': return '8.1'
                case 'NT 10.0': return '10'
                default: return undefined
            }
        }

        // OS version extraction
        var osVersion = '';
        if (result.windows) {
            osVersion = getWindowsVersion(getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i))
        } else if (result.windowsphone) {
            osVersion = getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i);
        } else if (result.mac) {
            osVersion = getFirstMatch(/Mac OS X (\d+([_\.\s]\d+)*)/i);
            osVersion = osVersion.replace(/[_\s]/g, '.');
        } else if (iosdevice) {
            osVersion = getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i);
            osVersion = osVersion.replace(/[_\s]/g, '.');
        } else if (android) {
            osVersion = getFirstMatch(/android[ \/-](\d+(\.\d+)*)/i);
        } else if (result.webos) {
            osVersion = getFirstMatch(/(?:web|hpw)os\/(\d+(\.\d+)*)/i);
        } else if (result.blackberry) {
            osVersion = getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i);
        } else if (result.bada) {
            osVersion = getFirstMatch(/bada\/(\d+(\.\d+)*)/i);
        } else if (result.tizen) {
            osVersion = getFirstMatch(/tizen[\/\s](\d+(\.\d+)*)/i);
        }
        if (osVersion) {
            result.osversion = osVersion;
        }

        // device type extraction
        var osMajorVersion = !result.windows && osVersion.split('.')[0];
        if (
            tablet
            || nexusTablet
            || iosdevice == 'ipad'
            || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))
            || result.silk
        ) {
            result.tablet = t
        } else if (
            mobile
            || iosdevice == 'iphone'
            || iosdevice == 'ipod'
            || android
            || nexusMobile
            || result.blackberry
            || result.webos
            || result.bada
        ) {
            result.mobile = t
        }

        // Graded Browser Support
        // http://developer.yahoo.com/yui/articles/gbs
        if (result.msedge ||
            (result.msie && result.version >= 10) ||
            (result.yandexbrowser && result.version >= 15) ||
            (result.vivaldi && result.version >= 1.0) ||
            (result.chrome && result.version >= 20) ||
            (result.samsungBrowser && result.version >= 4) ||
            (result.whale && compareVersions([result.version, '1.0']) === 1) ||
            (result.mzbrowser && compareVersions([result.version, '6.0']) === 1) ||
            (result.focus && compareVersions([result.version, '1.0']) === 1) ||
            (result.firefox && result.version >= 20.0) ||
            (result.safari && result.version >= 6) ||
            (result.opera && result.version >= 10.0) ||
            (result.ios && result.osversion && result.osversion.split(".")[0] >= 6) ||
            (result.blackberry && result.version >= 10.1)
            || (result.chromium && result.version >= 20)
        ) {
            result.a = t;
        }
        else if ((result.msie && result.version < 10) ||
            (result.chrome && result.version < 20) ||
            (result.firefox && result.version < 20.0) ||
            (result.safari && result.version < 6) ||
            (result.opera && result.version < 10.0) ||
            (result.ios && result.osversion && result.osversion.split(".")[0] < 6)
            || (result.chromium && result.version < 20)
        ) {
            result.c = t
        } else result.x = t

        return result
    }

    var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')

    bowser.test = function (browserList) {
        for (var i = 0; i < browserList.length; ++i) {
            var browserItem = browserList[i];
            if (typeof browserItem === 'string') {
                if (browserItem in bowser) {
                    return true;
                }
            }
        }
        return false;
    }

    /**
     * Get version precisions count
     *
     * @example
     *   getVersionPrecision("1.10.3") // 3
     *
     * @param  {string} version
     * @return {number}
     */
    function getVersionPrecision(version) {
        return version.split(".").length;
    }

    /**
     * Array::map polyfill
     *
     * @param  {Array} arr
     * @param  {Function} iterator
     * @return {Array}
     */
    function map(arr, iterator) {
        var result = [], i;
        if (Array.prototype.map) {
            return Array.prototype.map.call(arr, iterator);
        }
        for (i = 0; i < arr.length; i++) {
            result.push(iterator(arr[i]));
        }
        return result;
    }

    /**
     * Calculate browser version weight
     *
     * @example
     *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1
     *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1
     *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0
     *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1
     *
     * @param  {Array<String>} versions versions to compare
     * @return {Number} comparison result
     */
    function compareVersions(versions) {
        // 1) get common precision for both versions, for example for "10.0" and "9" it should be 2
        var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));
        var chunks = map(versions, function (version) {
            var delta = precision - getVersionPrecision(version);

            // 2) "9" -> "9.0" (for precision = 2)
            version = version + new Array(delta + 1).join(".0");

            // 3) "9.0" -> ["000000000"", "000000009"]
            return map(version.split("."), function (chunk) {
                return new Array(20 - chunk.length).join("0") + chunk;
            }).reverse();
        });

        // iterate in reverse order by reversed chunks array
        while (--precision >= 0) {
            // 4) compare: "000000009" > "000000010" = false (but "9" > "10" = true)
            if (chunks[0][precision] > chunks[1][precision]) {
                return 1;
            }
            else if (chunks[0][precision] === chunks[1][precision]) {
                if (precision === 0) {
                    // all version chunks are same
                    return 0;
                }
            }
            else {
                return -1;
            }
        }
    }

    /**
     * Check if browser is unsupported
     *
     * @example
     *   bowser.isUnsupportedBrowser({
     *     msie: "10",
     *     firefox: "23",
     *     chrome: "29",
     *     safari: "5.1",
     *     opera: "16",
     *     phantom: "534"
     *   });
     *
     * @param  {Object}  minVersions map of minimal version to browser
     * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map
     * @param  {String}  [ua] user agent string
     * @return {Boolean}
     */
    function isUnsupportedBrowser(minVersions, strictMode, ua) {
        var _bowser = bowser;

        // make strictMode param optional with ua param usage
        if (typeof strictMode === 'string') {
            ua = strictMode;
            strictMode = void (0);
        }

        if (strictMode === void (0)) {
            strictMode = false;
        }
        if (ua) {
            _bowser = detect(ua);
        }

        var version = "" + _bowser.version;
        for (var browser in minVersions) {
            if (minVersions.hasOwnProperty(browser)) {
                if (_bowser[browser]) {
                    if (typeof minVersions[browser] !== 'string') {
                        throw new Error('Browser version in the minVersion map should be a string: ' + browser + ': ' + String(minVersions));
                    }

                    // browser version and min supported version.
                    return compareVersions([version, minVersions[browser]]) < 0;
                }
            }
        }

        return strictMode; // not found
    }

    /**
     * Check if browser is supported
     *
     * @param  {Object} minVersions map of minimal version to browser
     * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map
     * @param  {String}  [ua] user agent string
     * @return {Boolean}
     */
    function check(minVersions, strictMode, ua) {
        return !isUnsupportedBrowser(minVersions, strictMode, ua);
    }

    bowser.isUnsupportedBrowser = isUnsupportedBrowser;
    bowser.compareVersions = compareVersions;
    bowser.check = check;

    /*
     * Set our detect method to the main bowser object so we can
     * reuse it to test other user agents.
     * This is needed to implement future tests.
     */
    bowser._detect = detect;

    /*
     * Set our detect public method to the main bowser object
     * This is needed to implement bowser in server side
     */
    bowser.detect = detect;
    return bowser
});
var app = app || {};

app.siteName = 'layoutr';

app.html = document.querySelector('html');
app.head = document.querySelector('head');
app.body = document.querySelector('body');
app.main = document.querySelector('main');
app.content = document.querySelector('#content > div');
app.header = document.querySelector('header');
app.footer = document.querySelector('footer');
app.left = document.querySelector('#left');
app.right = document.querySelector('#right');
app.loading = document.querySelector('#loading');
app.overflow = document.querySelector('#overflow');
app.modal = document.querySelector('#modal');
app.title = document.querySelector('#title');
app.authentication = document.querySelector('#authentication');
app.unauthenticated = app.authentication.querySelector('.unauthenticated');
app.authenticated = app.authentication.querySelector('.authenticated');
app.user = app.authentication.querySelector('div > .user');
app.userLinks = app.user.querySelector('.links');

app.cookie = document.querySelector('#cookie');
app.Focus = document.querySelector('#focus');

app.throttleInterval = 50;
app.debounceInterval = 50;

app.transitionTime = 400;
app.fadeOutTime = 500;
app.htmlOverflowEnabled = true;
app.smallBreakpoint = 732;
app.scrollbarWidth = 0;
app.loadingCount = 0;
app.document = document.documentElement;
app.fullscreen = false;
app.ajax = 'dist/ajax/';

app.navigation = [];

bowser.desktop = !bowser.mobile && !bowser.tablet;
var app = app || {};

app.guid = () => {
    let s4 = () => {
        return Math.floor((1 + Math.random()) * 0x10000)
            .toString(16)
            .substring(1);
    }
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
        s4() + '-' + s4() + s4() + s4();
};

app.isSmallBreakpoint = () => {
    return $(window).outerWidth() < 732 || app.isAsideLeft() && !app.isAsideLeftShrink() || app.isAsideRight() && !app.isAsideRightShrink();
};

app.isAside = () => {
    return app.html.attr('data-aside').length;
};

app.isAsideLeft = () => {
    return app.html.attr('data-aside') === 'left';
};

app.isAsideRight = () => {
    return app.html.attr('data-aside') === 'right';
};

app.isAsideLeftShrink = () => {
    return app.html.hasClass('left-shrink') && app.isAsideLeft();
};

app.isAsideRightShrink = () => {
    return app.html.hasClass('right-shrink') && app.isAsideRight();
};

app.isAsideLeftCloseOnClickOutside = () => {
    return app.html.hasClass('close-left-click-outside');
};
app.isAsideRightCloseOnClickOutside = () => {
    return app.html.hasClass('close-right-click-outside');
};

app.isModal = () => {
    return app.html.hasClass('modal');
};

app.isModalForm = () => {
    return app.html.attr('data-modal') === 'form';
};

app.isModalImage = () => {
    return app.html.attr('data-modal') === 'image';
};

app.isFocus = () => {
    return app.html.hasClass('focus') && app.html.attr('data-focus') === 'true';
}

app.isTTS = () => {
    return app.html.hasClass('tts');
}

app.isTTSEnabled = () => {
    return app.html.hasClass('tts') && app.html.attr('data-tts') === 'true';
}
app.isAuthentication = () => {
    return app.html.attr('data-authentication') !== '';
};

app.isLoading = () => {
    return app.html.hasClass('loading');
};

app.isScrollDisabled = () => {
    return app.html.hasClass('scroll-disabled');
};

app.isCloseLeftPageChange = () => {
    return app.html.hasClass('close-left-page-change');
};

app.isTransitions = () => {
    return app.html.hasClass('transitions');
};

app.isSwipe = () => {
    return app.html.hasClass('swipe');
};

app.isSiteLoaded = () => {
    return app.html.hasClass('site-loaded');
};

app.capitalize = (string) => {
    return string.charAt(0).toUpperCase() + string.slice(1);
};

app.scrollTop = () => {
    return Math.max(app.body.scrollTop(), app.main.scrollTop(), app.html.scrollTop());
};

app.tryParseInt = (str, defaultValue) => {
    let retValue = defaultValue;
    if (str !== undefined && str !== null && str.length > 0 && !isNaN(str)) {
        retValue = parseInt(str);
    }
    return retValue;
};

app.tryParseFloat = (str, defaultValue) => {
    let retValue = defaultValue;
    if (str !== undefined && str !== null && str.length > 0 && !isNaN(str)) {
        retValue = parseFloat(str);
    }
    return retValue;
};

app.tryParseJSON = (str, defaultValue) => {
    let retValue = defaultValue;
    try {
        retValue = JSON.parse(str);
    } catch (e) {
    }
    return retValue;
};

app.isTrue = (str) => {
    return str === 'true';
};

String.prototype.replaceAll = function (search, replacement) {
    var target = this;
    return target.replace(new RegExp(search, 'g'), replacement);
};
var app = app || {};

$(() => {
    if (bowser.msedge) {
        app.html.classList.add('msedge'); // used by app.enableScroll()
    } else if (bowser.msie) {
        app.html.classList.add('msie'); // not currently used for anything
    }
    if (bowser.mobile) {
        app.html.classList.add('mobile'); // disables fixed footer
    } else if (bowser.tablet) {
        app.html.classList.add('tablet'); // does nothing currently
    } else {
        app.html.classList.add('desktop'); // enables hover effects
    }

    if (bowser.android) {
        app.html.classList.add('android'); // used by modal
    } else if (bowser.ios) {
        app.html.classList.add('ios'); // used to apply focus
    }

    if (bowser.msie || bowser.msedge) {
        // disable smooth scrolling, since it causes element jumping/lagging on scroll
        // https://stackoverflow.com/questions/29416448/how-to-disable-smooth-scrolling-in-ie11
        app.body.on("mousewheel", (e) => {
            let target = $(e.target);
            if (!app.isModal() && event.ctrlKey !== true) {
                e.preventDefault();
                let aside = target.closest('aside > .content') || target.parents('aside .content'),
                    wheelDelta = e.originalEvent.wheelDelta,
                    currentScrollPosition;
                if (aside.length) {
                    currentScrollPosition = aside.scrollTop();
                    aside.scrollTop(currentScrollPosition - wheelDelta);
                } else {
                    currentScrollPosition = window.pageYOffset;
                    window.scrollTo(0, currentScrollPosition - wheelDelta);
                }
            }
        });

        // at some zoom levels edge/ie makes $(window) heigher than $(document)
        // it causes a gap between footer and the bottom of $(window).
        $(window).scroll(() => {
            let scrollTop = self.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
            if (scrollTop + $(window).height() >= $(document).height()) {
                app.html.classList.add('subpixel');
            } else {
                app.html.classList.remove('subpixel');
            }
        });
    }
});
var app = app || {};

$(() => {
    $.validator.setDefaults({
        submitHandler: () => {
            alert("Fake submitted!");
        }
    });

    $.validator.addMethod('password_regex', (value) => {
        return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(value);
    }, 'Password must contain at least eight characters, one uppercase letter, one lowercase letter and one number');
});

app.addValidation = (form, rules, messages) => {
    $(form).validate({
        rules: rules,
        messages: messages,
        errorElement: "em",
        errorPlacement: (error, element) => {
            element = element.parent();
            if (element.hasClass('checkbox') || element.hasClass('radio') || element.hasClass('input-group')) {
                element = element.parent();
            }
            element.append(error);
        },
        highlight: (element, errorClass, validClass) => {
            $(element).parents(".form-group").addClass("theme-danger");
        },
        unhighlight: (element, errorClass, validClass) => {
            $(element).parents(".form-group").removeClass("theme-danger");
        }
    });
    $(form).on('change', 'input, textarea, select', (e) => {
        $(e.currentTarget).valid();
    });
};
var app = app || {};

$.ajaxSetup({
    cache: true
});

app.footer.innerHTML = '<p>\u00A9 ' + new Date().getFullYear() + ' Frederik Nielsen</p>';

$(() => {

    //app.setHtmlScroll(); // outcomment if it can be disabled at first page load

    $.get(app.host + app.ajax + 'svg/base.html', (data) => {
        $(data).prependTo(app.body);
    });

    if (bowser.android) {
        // android doesn't handle vh correctly, so it gets converted to px
        $(window).resize(() => {
            if (app.isModal() && app.isModalImage()) {
                app.modal.find('#modal-img').css('max-height', window.innerHeight);
            }
        });
    }
});

$(window).click((e) => {
    let target = $(e.target),
        modal = target.closest(app.modal[0]);

    if (!app.isLoading() && !app.isFocus()) {
        if (bowser.ios) {
            // ios browsers doesn't apply :focus to buttons in many cases,
            // this forces :focus to be applied correctly.
            if (target.parents('button').length) {
                target.parents('button').focus();
            } else if (target.closest('button').length) {
                target.focus();
            }
        }

        if (app.isAuthentication() && !target.closest('#authentication').length && !target.closest('#modal').length) {
            app.html.attr('data-authentication', '');
        } else if (modal.length) {
            let image = app.isModalImage() && !target.closest('#modal-toggle').length && !target.closest('#modal-title').length && !target.closest('#modal-description').length,
                form = app.isModalForm() && !target.closest('#modal > div > div > div').length;
            if (image || form || target.closest('#modal-close').length) {
                app.closeModal();
            }
        } else {
            let isSmallBreakpoint = app.isSmallBreakpoint(),
                left = app.isAsideLeft() && (app.isAsideLeftCloseOnClickOutside() || isSmallBreakpoint) && !target.closest("#left").length,
                right = app.isAsideRight() && (app.isAsideRightCloseOnClickOutside() || isSmallBreakpoint) && !target.closest("#right").length,
                notTarget = !target.closest(".aside").length && !target.closest('.popup').length && !target.closest('#cookie').length;
            if ((left || right) && notTarget && !app.isLoading()) {
                app.enableScroll();
                app.toggleAside(undefined, false);
            }
        }
    }
});
var app = app || {};

app.contentLoaded = (element) => {
    app.checkResponsiveBackground(element.find('.rb'));
    app.checkLazy(element.find('.lazy'));
    app.checkAccordion(element.find('.accordion'));
    app.checkDropdown(element.find('select.dropdown'));
    app.checkTooltip(element.find('.tooltip'));
    app.checkAssignment(element.find('.assignment'));
    app.checkMath(element.find('.math'));
    app.checkMedia(element.find('audio, video'));
    app.checkMap(element.find('.map'));
    app.checkDatatable(element.find('.dataTable'));
    app.checkSwiper(element.find('.swiper'));
}

app.pageLoaded = (initial) => {
    app.main.css('overflow', 'auto');
    app.main.scrollTop(0);
    app.main.css('overflow', '');
    app.html.animate({ scrollTop: 0 }, 0);
    setTimeout(() => {
        if (!initial && app.isCloseLeftPageChange()) {
            app.toggleAside(undefined, true);
        }
    }, 200);

    if (initial) {
        let awaitInterval = setInterval(() => {
            if (app.fontsLoaded) {
                clearInterval(awaitInterval);
                app.hideLoading();
                app.html.addClass('site-loaded');
                app.responsiveHeader();
                app.contentLoaded(app.content);

                let scroll = JSON.parse(localStorage.getItem("scroll"));

                if (scroll !== null && window.location.href === scroll.href) {
                    app.body.scrollTop(app.body[0].scrollHeight >= scroll.scrollTop ? scroll.scrollTop : app.body[0].scrollHeight); // edge, safari
                    app.html.scrollTop(app.html[0].scrollHeight >= scroll.scrollTop ? scroll.scrollTop : app.html[0].scrollHeight); // chrome, firefox, ie
                }
            }
        }, app.awaitInterval);
    } else {
        app.hideLoading();
        app.contentLoaded(app.content);
    }
};
var app = app || {};
var fullscreenScrollTop;

app.requestFullScreen = () => {
    if (!app.fullscreen && bowser.desktop) {
        fullscreenScrollTop = app.scrollTop();
        if (app.document.requestFullscreen) {
            app.document.requestFullscreen();
        }
        else if (app.document.msRequestFullscreen) {
            app.document.msRequestFullscreen();
        }
        else if (app.document.mozRequestFullScreen) {
            app.document.mozRequestFullScreen();
        }
        else if (app.document.webkitRequestFullscreen) {
            app.document.webkitRequestFullscreen();
        }
    }
};

document.addEventListener('webkitfullscreenchange', fullscreenChange, false);
document.addEventListener('mozfullscreenchange', fullscreenChange, false);
document.addEventListener('fullscreenchange', fullscreenChange, false);
document.addEventListener('MSFullscreenChange', fullscreenChange, false);

function fullscreenChange(e) {
    app.fullscreen = !app.fullscreen;
    if (!app.fullscreen && bowser.desktop) {
        if (app.isModal()) {
            app.closeModal();
        }
        app.body.scrollTop(fullscreenScrollTop);
        app.html.scrollTop(fullscreenScrollTop);
    }
};

app.exitFullScreen = () => {
    if (app.fullscreen && bowser.desktop) {
        if (document.exitFullscreen) {
            document.exitFullscreen();
        }
        else if (document.msExitFullscreen) {
            document.msExitFullscreen();
        }
        else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
        }
        else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
        }
    }
};

app.toggleFullScreen = (element) => {
    if (app.fullscreen)
        exitFullScreen();
    else
        requestFullScreen(element);
};
var app = app || {};

var scrollbarWidth = () => {
    app.body.insertAdjacentHTML('beforeend', '<div id="scrollbar-width"></div>');
    let element = app.body.querySelector('#scrollbar-width');
    element.style.overflow = 'scroll';
    element.style.visibility = 'hidden';
    element.style.position = 'absolute';
    element.style.width = '100px';
    element.style.height = '100px';
    app.scrollbarWidth = element.offsetWidth - element.clientWidth;
    element.remove();
};

app.disableScroll = () => {
    if (app.htmlOverflowEnabled) {
        app.htmlOverflowEnabled = false;
        if (app.isModal()) {
            app.checkModal();
            app.modal.focus();
        }
        let scrollTop = app.scrollTop();
        app.html.addClass('scroll-disabled');
        app.body.scrollTop(scrollTop);
        app.main.scrollTop(scrollTop);
    }
};

app.enableScroll = () => {
    if (!app.htmlOverflowEnabled) {
        app.htmlOverflowEnabled = true;
        if (app.isSiteLoaded()) {
            let scrollTop = app.scrollTop();
            app.html.removeClass('scroll-disabled modal');
            app.main.focus();
            app.body.scrollTop(scrollTop); // edge, safari
            app.html.scrollTop(scrollTop); // chrome, firefox, ie
        } else {
            app.html.removeClass('scroll-disabled modal');
        }
    }
};

app.setHtmlScroll = () => {
    if (!app.isModal() && !app.isLoading() && !app.htmlOverflowEnabled && (!app.isSmallBreakpoint() || app.isSmallBreakpoint() && !app.isAsideLeft() && !app.isAsideRight())) {
        app.enableScroll();
    } else if (app.isModal() || app.isSmallBreakpoint() && app.htmlOverflowEnabled && (app.isAsideLeft() || app.isAsideRight())) {
        app.disableScroll();
    }
};

$(() => {
    scrollbarWidth();
});

$(window).resize($.throttle(app.throttleInterval, false, () => {
    app.checkModal();
    app.setHtmlScroll();
    scrollbarWidth();
    setScrollTop();
}));

var setScrollTop = () => {
    let scrollTop = app.scrollTop();

    let entry = {
        href: window.location.href,
        scrollTop: scrollTop
    };

    localStorage.setItem('scroll', JSON.stringify(entry));
};

$(window).scroll($.throttle(app.throttleInterval, false, () => {
    setScrollTop();
}));
var app = app || {};

app.showLoading = () => {
    app.loadingCount++;
    app.disableScroll();
    app.html.addClass('loading');
};

app.hideLoading = () => {
    app.loadingCount--;
    if (app.loadingCount <= 0) {
        app.loadingCount = 0;
        app.html.removeClass('loading');
        app.setHtmlScroll();
    }
};
var app = app || {};
let transitionLock = false;

app.asideChanged = () => {
    let trigger = () => {
        app.html.trigger('aside-changed.datatables');
        app.html.trigger('aside-changed.rb');
        app.html.trigger('aside-changed.map');
    }

    if (app.isTransitions()) {
        let awaitInterval = setInterval(() => {
            if (!transitionLock) {
                clearInterval(awaitInterval);
            } else {
                trigger();
            }
        }, app.awaitInterval);
        setTimeout(function () {
            transitionLock = false;
        }, app.transitionTime);
    } else {
        transitionLock = false;
        trigger();
    }
}

app.toggleAside = (aside, pageChanged) => {
    if (!transitionLock) {
        transitionLock = true;
        app.html.attr('data-authentication', '');
        let currentAside = app.html.attr('data-aside');
        if (currentAside.length) {
            if (aside === undefined || currentAside === aside) {
                let scrollTop = app.scrollTop();
                app.html.attr('data-aside', '');
                app.main.focus();
                app.body.scrollTop(scrollTop); // edge, safari
                app.html.scrollTop(scrollTop); // chrome, firefox, ie
            } else {
                app.html.attr('data-aside', aside);
            }
        } else {
            app.html.attr('data-aside', aside);
        }
        if (aside === 'left') {
            app.left.focus();
        } else if (aside === 'right') {
            app.right.focus();
        }

        app.asideChanged();
        app.setHtmlScroll();
    }
};

app.main.querySelector('.aside.left').addEventListener('click', () => {
    app.toggleAside('left');
});

app.main.querySelector('.aside.right').addEventListener('click', () => {
    app.toggleAside('right');
});
var app = app || {};

app.authentication.addEventListener('click', (e) => {
    if (e.target.matches('> div > button')) {
        let $this = $(e.currentTarget),
            type = $this.attr('data-type');
        if (app.html.attr('data-authentication') === type) {
            app.html.attr('data-authentication', '');
        } else {
            app.html.attr('data-authentication', type);
            app.authentication.children(':last-child').focus();
        }
    }
});

app.userLinks.addEventListener('click', (e) => {
    if (e.target.matches('> a')) {
        e.preventDefault();
    }
});

app.addValidation(
    app.authentication.querySelector('.register > form'),
    {
        register_username: {
            required: true,
            minlength: 2
        },
        register_password: {
            required: true,
            password_regex: true
        },
        register_confirm_password: {
            required: true,
            equalTo: "#register_password"
        },
        register_email: {
            required: true,
            email: true
        }
    },
    {
        register_username: {
            required: "Please enter your username"
        },
        register_password: {
            required: "Please enter your password"
        },
        register_confirm_password: {
            required: "Please provide a password",
            equalTo: "Please enter the same password as above"
        },
        register_email: "Please enter a valid email address"
    }
);

app.addValidation(
    app.authentication.querySelector('.login > form'),
    {
        username: {
            required: true
        },
        password: {
            required: true
        }
    },
    {
        username: {
            required: "Please enter your username"
        },
        password: {
            required: "Please enter your password"
        }
    }
);
var app = app || {};

app.cookie.addEventListener('click', () => {
    if (e.target.matches('#cookie-accept')) {
        localStorage.setItem('cookie', 'cookie');
        app.html.removeClass('cookie');
    }
});

let cookie = localStorage.getItem("cookie");
if (cookie === null) {
    app.html.classList.add('cookie');
}
var app = app || {};

app.loadPage = (url, pushState, initial) => {
    app.showLoading();
    app.content.load(app.host + app.ajax + 'pages' + (url === '/' ? '/home' : url) + '.html', (response, status, xhr) => {
        let q = url.indexOf('?');
        url = url.substring(0, q !== -1 ? q : url.length);
        app.left.find('.tree a.label.active').removeClass('active');
        app.left.find('a.label[href="' + url + '"]').addClass('active');
        app.html.attr('data-status', status);
        let statusCode = xhr.status;
        app.title.html('');
        document.title = app.siteName;
        if (statusCode === 200) {
            if (url === '/') {
                if (app.body.children('#svg-browser').length === 0) {
                    $.get(app.host + app.ajax + 'svg/browser.html', (data) => {
                        $(data).prependTo(app.body);
                    });
                }
                if (app.body.children('#svg-os').length === 0) {
                    $.get(app.host + app.ajax + 'svg/os.html', (data) => {
                        $(data).prependTo(app.body);
                    });
                }
            } else {
                let title = app.capitalize(url.replace('/', '').replaceAll('-', ' '));
                app.title.html(title);
                document.title = title + ' - ' + app.siteName;
                if (url === '/form') {
                    app.pageForm();
                }
            }
            app.html.trigger('header-changed.responsiveHeader');
        } else {
            app.content.load(app.host + app.ajax + 'pages/error.html', () => {
                document.title = statusCode + ' - ' + app.siteName;
                let title = statusCode + ' - ';
                if (statusCode === 404) {
                    title += 'Page not found';
                } else if (statusCode === 500) {
                    title += 'Server error';
                } else {
                    title += statusText;
                }
                app.content.find('#error-title').html(title);
                app.html.trigger('header-changed.responsiveHeader');
            });
        }

        let awaitInterval = setInterval(() => {
            if (app.cssLoaded) {
                clearInterval(awaitInterval);
                app.pageLoaded(initial);
            }
        }, app.awaitInterval);
    });
    let historyUrl = (app.isLocalhost ? '' : '/' + window.location.pathname.split('/')[1]) + url;
    if (pushState) {
        window.history.pushState(null, null, historyUrl);
        loadPage = true;
    }
};

app.internalLinkClick = (href, e) => {
    if (!e.ctrlKey) {
        e.preventDefault();
        app.loadPage(href, true, false);
    }
};

(function (l) {
    if (l.search) {
        app.url = {};
        l.search.slice(1).split('&').forEach((v) => {
            let a = v.split('=');
            app.url[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
        });
        if (app.url.p !== undefined) {
            window.history.replaceState(null, null,
                l.pathname.slice(0, -1) + app.url.p +
                (app.url.q ? '?' + app.url.q : '') +
                l.hash
            );
        }
    }
}(window.location));

let loadPage = window.history.state;
window.onpopstate = (e) => {
    if (loadPage) {
        let url = location.pathname;
        if (!app.isLocalhost) {
            url = url.substring(url.indexOf("/", url.indexOf("/") + 1));
        }
        app.loadPage(url, false, true);
    }
};

app.applyNavigation = (id, value, set) => {
    if (set) {
        let entry = {
            "id": id,
            "value": value
        },
            exists = $.grep(app.navigation, (e) => { return e.name === name; });
        if (exists.length === 0) {
            // not found
            app.navigation.push(entry);
        } else if (exists.length === 1) {
            // found
            exists[0].value = value;
        }
        localStorage.setItem('navigation', JSON.stringify(app.navigation));
    } else {
        app.left.find('#' + id).prop('checked', value);
    }
};

$(function () {
    app.left.find('> .content > div').load(app.host + app.ajax + 'layout/navigation.html', () => {
        app.navigationTree = app.left.find('.tree');
        app.navigation = JSON.parse(localStorage.getItem("navigation"));
        if (app.navigation === null) app.navigation = [];
        $.each(app.navigation, function (i, entry) {
            app.applyNavigation(entry.id, entry.value, false);
        });
        app.navigationTree.on('change', 'input[type=checkbox]', (e) => {
            let $this = $(e.currentTarget),
                id = $this.attr('id'),
                value = $this.is(':checked');
            app.applyNavigation(id, value, true);
        });
        app.header.find('.aside.left').addClass('loaded');
        if (app.url && app.url.p) {
            app.navigationTree.find('a.label[href="' + app.url.p.replace(/^\/+/g, '') + '"]').addClass('active');
        } else {
            app.navigationTree.find('a.label[href=""]').addClass('active');
        }
    });
    if (app.url && app.url.p) {
        app.loadPage(app.url.p, true, true);
    } else {
        var l = window.location;
        var segmentCount = l.origin.endsWith('github.io') ? 1 : 0;
        var url = '/' + l.pathname.slice(1).split('/').slice(segmentCount);
        app.loadPage(url, true, true);
    }
    app.left.on('click', '.tree a.label:not(.active)', (e) => {
        app.internalLinkClick($(e.currentTarget).attr('href'), e);
    });

    app.body.on('click', '.internal-link', (e) => {
        app.internalLinkClick($(e.currentTarget).attr('href'), e);
    });

    app.left.on('click', '#navigation-expand', () => {
        app.navigationTree.find('input[type=checkbox]:not(:checked)').click();
    });

    app.left.on('click', '#navigation-collapse', () => {
        app.navigationTree.find('input[type=checkbox]:checked').click();
    });
});
var app = app || {};

app.applySettings = (id, name, type, value, set) => {
    if (set) {
        let entry = {
            "id": id,
            "name": name,
            "type": type,
            "value": value
        },
            exists = $.grep(app.settings, (e) => { return e.name === name; });
        if (exists.length === 0) {
            // not found
            app.settings.push(entry);
        } else if (exists.length === 1) {
            // found
            exists[0].id = id;
            exists[0].value = value;
        }
        localStorage.setItem('settings', JSON.stringify(app.settings));
    } else {
        if (type === "checkbox" || type === "radio") {
            app.right.find('#settings-' + id).prop('checked', value);
        } else if (type === "slider") {
            app.right.find('#settings-' + id).slider('setValue', value);
        }
    }
    if (type === 'checkbox' || type === "radio") {
        if (type === 'radio') {
            $.each(app.right.find('input[type=radio][name="settings-' + name + '"]:not(#settings-' + id + ')'), (i, radio) => {
                app.html.removeClass($(radio).attr('id').replace('settings-', ''));
            });
        }
        if (name === 'theme') {
            app.loadTheme(id);
        }
        if (name === 'focus' && value) {
            app.enableFocus();
        } else if (name === 'tts' && value) {
            app.enableTTS();
        } else if (name === 'swipe' && value) {
            app.enableSwipe();
        }
        if (value) {
            app.html.addClass(id);
        } else {
            app.html.removeClass(id);
        }
        if (id === 'two-columns') {
            app.html.trigger('columns-changed.rb');
        }
        if (id === 'signed-in' || id === 'focus' || id === 'tts') {
            app.html.trigger('header-changed.responsiveHeader');
        }
        if (name === 'aside-left' || 'aside-right') {
            app.asideChanged();
        }
    }
};

$(() => {
    app.right.find('> .content > div').load(app.host + app.ajax + 'layout/settings.html', function () {
        let awaitInterval = setInterval(() => {
            if (app.cssLoaded) {
                clearInterval(awaitInterval);
                $.each(app.settings, (i, entry) => {
                    app.applySettings(entry.id, entry.name, entry.type, entry.value, false);
                });
                app.header.find('.aside.right').addClass('loaded');
                $(this).on('change', 'input[type=checkbox], input[type=radio]', (e) => {
                    let $this = $(e.currentTarget),
                        id = $this.attr('id').replace('settings-', ''),
                        name = $this.attr('name').replace('settings-', ''),
                        type = $this.attr('type'),
                        value = $this.is(':checked');
                    app.applySettings(id, name, type, value, true);
                    if (id === 'left-shrink' || id === 'right-shrink' ||
                        id === 'left-push' || id === 'right-push' ||
                        id === 'left-overlay' || id === 'right-overlay') {
                        app.setHtmlScroll();
                    }
                });
            }
        }, app.awaitInterval);
    });

    app.right.on('click', '#settings-clear-localstorage', () => {
        localStorage.clear();
        location.reload();
    });
});
var app = app || {};

$(function () {
    app.body.on("keydown", (e) => {
        let target = $(e.target),
            parent = target.parent();
        if (app.isLoading()) {
            if (e.which === 9 || e.ctrlKey && e.keyCode === 65) { // tab ||  ctrl + a
                e.preventDefault();
            }
        } else {
            if (e.which === 37 && !app.isFocus() && !app.isModal()) { // left
                if (app.isAsideLeft()) {
                    app.toggleAside(); // closes right
                } else if (!app.isAsideRight()) {
                    app.toggleAside('right'); // opens right
                }
            } else if (e.which === 39 && !app.isFocus() && !app.isModal()) { // right
                if (app.isAsideRight()) {
                    app.toggleAside(); // closes left
                } else if (!app.isAsideLeft()) {
                    app.toggleAside('left'); // opens left
                }
            } else if (e.which === 27) { // esc
                e.stopPropagation();
                if (app.tts !== undefined && app.tts.IsSpeaking()) {
                    app.stopTTS();
                } else if (app.isFocus()) {
                    app.hideFocus();
                } else if (app.isModal()) {
                    app.closeModal();
                } else {
                    if (app.isAside()) {
                        app.toggleAside(); // closes aside
                    }
                    let popups = app.body.children('.popup');
                    if (popups.length) {
                        popups.fadeOut(app.fadeOutTime, () => {
                            popups.remove();
                        });
                    }
                    let dropdowns = app.content.find('div.dropdown.open');
                    if (dropdowns.length) {
                        dropdowns.removeClass('open');
                    }
                    app.html.attr('data-authentication', '');
                }
            }
            if (e.which === 13) { // enter
                let dropdown = target.parents('div.dropdown');
                if (dropdown.length || parent.parent().hasClass('accordion')) {
                    target.click();
                    e.preventDefault();
                    if (dropdown.length) {
                        dropdown.children('div').focus();
                    }
                } else if (parent.hasClass('checkbox') || parent.hasClass('radio') || parent.hasClass('switch') || target.hasClass('toggle')) {
                    target.siblings('input').click();
                    e.preventDefault();
                }
            }
        }
    });

    app.body.on('keyup', (e) => {
        if (!app.isLoading() && !app.isFocus()) {
            if (e.which === 9) { // tab
                let target = $(e.target);
                if (!target.parents('div.dropdown.open').length) {
                    $('div.dropdown.open').removeClass('open');
                }
                if (!target.parents('#authenticated.open').length || target.closest('#authenticated > button').length) {
                    $('#authenticated.open').removeClass('open');
                }
                if (app.isModal()) {
                    if (!target.parents('#modal').length) {
                        app.closeModal();
                    }
                } else {
                    let aside = target.parents('aside');
                    if (aside.length === 0 && target.is('aside')) {
                        aside = target;
                    }
                    if (aside.length && aside.attr('id') !== app.html.attr('data-aside')) {
                        app.toggleAside(aside.attr('id'));
                    } else if (!aside.length && app.isAside()) {
                        app.toggleAside();
                    }
                }
            }
        }
    });
});
var app = app || {};

app.showModal = (type) => {
    app.html.attr('data-modal', type);
    app.html.addClass('modal');
    app.hideLoading();
    app.checkModal();
    app.modal.focus();
};

app.closeModal = () => {
    if (app.fullscreen) {
        app.exitFullScreen();
    } else {
        app.html.removeClass('modal').attr('data-modal', '');
        app.modal.removeClass('info-shown').empty();
        app.checkModal();
        app.setHtmlScroll();
    }
};

app.checkModal = () => {
    if (app.isModal()) {
        app.body.css('padding-right', app.scrollbarWidth);
        if (app.html.attr('data-aside') === 'right') {
            app.right.css('margin-right', app.scrollbarWidth);
        }
        app.body.children('.popup').css('margin-right', app.scrollbarWidth);
    } else {
        app.body.css('padding-right', 0);
        app.right.css('margin-right', 0);
        app.body.children('.popup').css('margin-right', 0);
    }
    app.html.trigger('model-check');
};

$(function () {
    app.body.on('click', '.modal', (e) => {
        let $this = $(e.currentTarget),
            type = $this.attr('data-modal');
        if (type !== undefined && type.length && (type === 'image' || type === 'form')) {
            app.showLoading();
            let id = $this.attr('data-modal-id'),
                html = [],
                dataTitle = $this.attr('data-modal-title'),
                dataContent = $this.attr('data-modal-content'),
                dataFullscreen = $this.attr('data-modal-fullscreen') === 'true';
            html.push('<div><div><div id="modal-container">');
            if (type === 'image' && $this.attr('data-modal-img').length) {
                if (dataTitle !== undefined || dataContent !== undefined) {
                    app.modal.addClass('has-info');
                    html.push('<button id="modal-toggle" class="btn" aria-label="Toggle info">');
                    html.push('<svg focusable="false"><use xlink:href="#svg-info"></use></svg>');
                    html.push('</button>');
                }
                if (dataTitle !== undefined) {
                    html.push('<div id="modal-title">' + dataTitle + '</div>');
                }
                if (dataContent !== undefined) {
                    html.push('<div id="modal-content">' + dataContent + '</div>');
                }
                html.push('<img id="modal-img" />');
            } else if (type === 'form') {
                html.push('<div class="header">');
                if (dataTitle !== undefined) {
                    html.push('<span class="title">' + dataTitle + '</span>');
                }
                html.push('<button id="modal-close" class="close expand" aria-label="Close ' + (dataTitle !== undefined ? dataTitle : '') + '"><svg focusable="false"><use xlink:href="#svg-close"></use></svg></button >');
                html.push('</div><div class="content">');
            }
            html.push('</div></div></div></div>');
            let div = html.join("");
            app.modal.html(div);
            if (type === 'image') {
                let image = app.modal.find('#modal-img');
                image.on('load', () => {
                    if (bowser.android) {
                        image.css('max-height', window.innerHeight);
                    }
                    app.showModal(type);
                });
                image.attr('src', $this.attr('data-modal-img'));
            } else {
                let dataSize = $this.attr('data-modal-size');
                if (dataSize !== undefined) {
                    app.modal.children('div').attr('data-modal-size', dataSize);
                }
                let content = app.modal.find('#modal-container > .content');
                content.append(dataContent);
                app.contentLoaded(content);
                app.showModal(type);
            }
            if (dataFullscreen) {
                app.requestFullScreen();
            }
        }
    });

    app.body.on('click', '#modal-toggle', () => {
        app.modal.toggleClass('info-shown');
    });
});
var app = app || {};

app.responsiveHeader = () => {
    let h1 = app.header.find('h1'),
        link = h1.children('a');

    let check = () => {
        h1.addClass('show-title');
        app.unauthenticated.addClass('show-text');
        if (h1.outerWidth() < link.outerWidth()) {
            app.unauthenticated.removeClass('show-text');
            if (h1.outerWidth() < link.outerWidth()) {
                h1.removeClass('show-title');
            }
        }
    }

    $(window).on('resize', () => {
        check();
    });

    check();

    app.html.on('header-changed.responsiveHeader', () => {
        check();
    });
};
var app = app || {};

app.enableFocus = () => {
    let component = app.Focus.find('> .component > div');

    $.getScript('dist/js/focus.js', () => {
        component
            .draggable({
                axis: "y",
                containment: "parent",
                handle: ".move"
            })
            .resizable({
                handles: {
                    n: '.ui-resizable-n',
                    s: '.ui-resizable-s'
                },
                containment: "parent"
            }).on('resize', function (e) {
                e.stopPropagation();
            });

        app.Focus.on('click', '.close', () => {
            app.hideFocus();
        });

        app.main.find('.focus').click(() => {
            app.showFocus();
        });

        let height = $(window).height(); 
        $(window).resize(() => {
            // do nothing if the height is the same
            if ($(window).height() === height) return;
            height = $(window).height();
            component.removeAttr('style');
        });
    });
};

app.showFocus = () => {
    app.html.attr('data-authentication', '');
    app.html.attr('data-focus', true);
    app.Focus.focus();
};
app.hideFocus = () => {
    let scrollTop = app.scrollTop();
    app.html.attr('data-focus', false);
    app.main.focus();
    app.body.scrollTop(scrollTop); // edge, safari
    app.html.scrollTop(scrollTop); // chrome, firefox, ie
};
var app = app || {};

app.enableSwipe = () => {
    if (bowser.android) {
        let xDown = null,
            yDown = null,
            offsetBefore;

        let handleTouchStart = (e) => {
            if (app.isSwipe()) {
                xDown = e.touches[0].clientX;
                yDown = e.touches[0].clientY;

                offsetBefore = $(e.target).offset().left;
            }
        };

        let handleTouchMove = (e) => {
            if (app.isSwipe()) {
                let offsetAfter = $(e.target).offset().left;
                if (!xDown || !yDown || offsetBefore !== offsetAfter) {
                    return;
                }
                let xUp = e.changedTouches[0].clientX,
                    yUp = e.changedTouches[0].clientY,
                    xDiff = xDown - xUp,
                    yDiff = yDown - yUp;
                if (Math.abs(xDiff) > Math.abs(yDiff)) {
                    let distance = parseInt($(window).width() / 2);
                    if (yDiff > -100 || yDiff < 100) {
                        let currentAside;
                        if (xDiff > distance) {
                            /* left swipe */
                            if (!app.isModal() && !app.isLoading()) {
                                currentAside = app.html.attr('data-aside');
                                if (currentAside === 'left' && currentAside !== 'right') {
                                    app.toggleAside();
                                } else if (currentAside !== 'right') {
                                    app.toggleAside('right');
                                }
                            }
                        } else if (xDiff < -distance) {
                            /* right swipe */
                            if (!app.isModal() && !app.isLoading()) {
                                currentAside = app.html.attr('data-aside');
                                if (currentAside === 'right' && currentAside !== 'left') {
                                    app.toggleAside();
                                } else if (currentAside !== 'left') {
                                    app.toggleAside('left');
                                }
                            }
                        }
                    }

                }
                /* reset values */
                xDown = null;
                yDown = null;
            }
        };
        document.addEventListener('touchstart', handleTouchStart, false);
        document.addEventListener('touchend', handleTouchMove, false);
    }
};
var app = app || {};

app.clearSelection = () => {
    let selection = window.getSelection();
    selection.removeAllRanges();
    selection.addRange(document.createRange());
}

app.stopTTS = () => {
    app.clearSelection();
    if (app.tts && app.tts.IsSpeaking()) {
        app.tts.ShutUp();
    }
};

app.enableTTS = () => {
    if (bowser.desktop && !bowser.msie) {
        let snapSelectionToWord = () => {
            let selection = window.getSelection();
            if (!selection.isCollapsed) {
                let range = selection.getRangeAt(0);
                if (range.collapsed || range.toString().length === 0) {
                    return;
                }

                try {
                    // select full start word
                    while (range.startOffset > 0 && range.toString()[0].match(/[^\s]/)) {
                        range.setStart(range.startContainer, range.startOffset - 1);
                    }
                    // remove space as first selected
                    let start = range.startContainer.data.substring(range.startOffset).charAt(0);
                    if (start === ' ') {
                        range.setStart(range.startContainer, range.startOffset + 1);
                    }
                } catch (e) {

                }

                try {
                    // select full end word
                    while (range.endOffset < range.endContainer.length && range.toString()[range.toString().length - 1].match(/[^\s]/)) {
                        range.setEnd(range.endContainer, range.endOffset + 1);
                    }
                    // remove space as last selected
                    let end = range.endContainer.data.substring(0, range.endOffset).slice(-1);
                    if (end === ' ') {
                        range.setEnd(range.endContainer, range.endOffset - 1);
                    }
                } catch (e) {

                }

                selection.removeAllRanges();
                selection.addRange(range);
            }
            return selection;
        }

        let getText = (node, selection) => {
            let text = [],
                nonWhitespaceMatcher = /\S/,
                getTextNodes = (node) => {
                    let parent = $(node.parentNode),
                        special = false;

                    if (selection.containsNode(node, false) && (node.nodeName.toLowerCase() === 'input' ||
                        node.nodeName.toLowerCase() === 'textarea') && nonWhitespaceMatcher.test(node.value)) {
                        special = true;
                    }
                    
                    if (!special &&
                        selection.containsNode(node, true) &&
                        node.nodeType === 3 &&
                        nonWhitespaceMatcher.test(node.nodeValue) &&
                        parent.is(':visible') &&
                        parent.css('user-select') !== 'none' &&
                        parent.parents().css('user-select') !== 'none' &&
                        node.parentNode.tagName !== 'SCRIPT'
                    ) {
                        if (!(selection.extentNode.nodeType !== 3 && $(selection.extentNode).is(parent))) {
                            if (!node.nodeValue.match(/\.\s*$/) && node.nextElementSibling === null && parent.is('h1 span, h1, h2, h3, h4, h5, h6, p, th, td, .dataTable th span')) {
                                text.push(node.nodeValue + '. ');
                            } else {
                                text.push(node.nodeValue);
                            }
                        }
                        if (text.length === 1) {
                            if ($(selection.anchorNode).is(selection.focusNode)) {
                                text[0] = text[0].substring(0, selection.focusOffset).substring(selection.baseOffset);
                            } else {
                                text[0] = text[0].substring(selection.baseOffset);
                            }
                            if (text[0] === '. ' || text[0] === ' ') {
                                text[0] = '';
                            }
                        }
                    } else {
                        for (let i = 0; i < node.childNodes.length; i++) {
                            getTextNodes(node.childNodes[i]);
                        }
                    }
                }

            getTextNodes(node);
            if (text.length && text.length > 1) {
                text[text.length - 1] = text[text.length - 1].substring(0, selection.focusOffset);
            }
            text = text.join(' ').replace(/(?:\r\n|\r|\n)/g, ' ').replace(/ +\./g, '. ').replace(/\s\s+/g, ' ').replace(',.', '.').trim();
            return text;
        }

        if (bowser.msie) {
            if (!app.html.hasClass('polyfills-loaded')) {
                app.head.append($('<script src="dist/js/polyfills.js"></script>'));
                app.html.addClass('polyfills-loaded')
            }
        }

        $.getScript('dist/js/tts.js', () => {
            let awsCredentials = new AWS.Credentials('AKIAI5JMCVBZ4CWSSOOQ', 'FM7j9FbQLkUU8u3tHScv0IOG4IoayUkp/RNNNNni'),
                settings = {
                    awsCredentials: awsCredentials,
                    awsRegion: 'eu-central-1',
                    pollyVoiceId: 'Russell'
                };

            app.tts = ChattyKathy(settings);

            app.html.attr('data-tts', true);

            $(window).on('mousedown touchstart', (e) => {
                if (!app.isLoading() && !app.isFocus() && app.isTTS() && app.isTTSEnabled()) {
                    app.clearSelection();
                }
            });

            $(window).on('mouseup touchend', (e) => {
                if (!$(document.activeElement).is('input, textarea, button, select, .dropdown')) {
                    if (!app.isLoading() && !app.isFocus() && app.isTTS() && app.isTTSEnabled() && e.originalEvent.detail < 3) {
                        setTimeout(() => {
                            let selection = snapSelectionToWord(),
                                text = getText(selection.getRangeAt(0).commonAncestorContainer, selection);

                            if (text.length) {
                                app.tts.SpeakWithPromise(text).then(() => {
                                    app.clearSelection();
                                });
                            } else {
                                app.stopTTS();
                            }
                        });
                    }
                }
            });

            app.header.find('.tts').click(() => {
                if (app.html.attr('data-tts') === 'true') {
                    app.html.attr('data-tts', false);
                    app.stopTTS();
                } else {
                    app.html.attr('data-tts', true);
                }
            });
        });
    }
};
var app = app || {};

$(() => {
    app.html.on('model-check', () => {
        let contentHeader = app.content.children('.content-header:not(.full)');
        if (contentHeader.length) {
            if (app.isModal() && contentHeader.css('position') === 'fixed') {
                let halfOverflowY = app.scrollbarWidth / 2;
                contentHeader.children().css('width', 'calc(100% - ' + halfOverflowY + 'px)');
            } else {
                contentHeader.children().css('width', '');
            }
        }
    });
});
var app = app || {};

app.loadTheme = (id) => {

    let loadStyleSheet = (path, fn, scope) => {
        var body = app.body[0],
            link = document.createElement('link');

        link.setAttribute('href', path);
        link.setAttribute('rel', 'stylesheet');
        link.setAttribute('type', 'text/css');

        var sheet, cssRules;

        // get the correct properties to check for depending on the browser
        if ('sheet' in link) {
            sheet = 'sheet';
            cssRules = 'cssRules';
        }
        else {
            sheet = 'styleSheet';
            cssRules = 'rules';
        }

        let interval_id = setInterval(function () {
            try {
                if (link[sheet] && link[sheet][cssRules].length) {
                    clearInterval(interval_id);
                    clearTimeout(timeout_id);
                    fn.call(scope || window, true, link);
                }
            } catch (e) { } finally { }
        }, 10),
            timeout_id = setTimeout(function () {
                clearInterval(interval_id);
                clearTimeout(timeout_id);
                body.removeChild(link);
                fn.call(scope || window, false, link);
            }, 15000);

        body.appendChild(link);

        return link;
    }

    app.showLoading();
    let stylesheet = app.body.children('link[rel="stylesheet"][href^="' + app.host + 'dist/css/theme/"]'),
        href = stylesheet.attr('href'),
        split1 = href.split('/'),
        split2 = split1[split1.length - 1].split('.');
    href = [];
    for (let i = 0; i < split1.length - 1; i++) {
        href.push(split1[i] + '/');
    }
    let theme = id.substring(id.indexOf("-") + 1);
    href.push(theme);

    for (let i = 1; i < split2.length; i++) {
        href.push('.' + split2[i]);
    }
    href = href.join("");
    loadStyleSheet(href, (success, link) => {
        if (success) {
            stylesheet.remove();
        }
        else {
            app.showPopupAlert('Failed to load theme', 'danger');
        }
        app.hideLoading();
    });
}
var app = app || {};

app.setOnline = () => {
    let online = navigator.onLine;

    app.body.find('.alert[data-type="connected"]').remove();
    if (online) {
        app.showPopupAlert('You are online', 'success', 'bottom right', 'connected');
    } else {
        app.showPopupAlert('You are offline', 'danger', 'bottom right', 'connected');
    }
}

$(() => {
    window.addEventListener('online', app.setOnline);
    window.addEventListener('offline', app.setOnline);

    if (!navigator.onLine) {
        app.setOnline();
    }
});
var app = app || {};

app.checkDropdown = (dropdowns) => {
    dropdowns.each((i, e) => {
        let $this = $(e),
            selected = $this.children('option:selected'),
            html = [],
            attr = $this.attr('class'),
            theme = '',
            width = $this.attr('data-width');
        if (selected.length !== 1) {
            selected = $this.children().first();
        }
        html.push('<div class="dropdown' +
            ($this.hasClass('not-first') ? ' not-first' : '') +
            ($this.hasClass('nowrap') ? ' nowrap' : '') +
            ($this.hasClass('check') ? ' check' : '') +
            ($this.hasClass('ellipsis') ? ' ellipsis' : '') +
            ($this.hasClass('align-left') ? ' align-left' : '') +
            ($this.hasClass('align-right') ? ' align-right' : '') +
            ($this.hasClass('direction-up') ? ' direction-up' : '') +
            '"' +
            (width !== undefined ? ' style="width:' + width + 'px"' : '')
            + '> ');
        
        if (typeof attr !== typeof undefined && attr !== false) {
            let temp = attr.split(' ');
            temp = $.grep(temp, function (item, index) {
                return item.trim().match(/^theme-/);
            });
            if (temp.length === 1) {
                theme = temp[0];
            }
        }
        html.push('<div tabindex="0" class="' + theme + '"><label>' + selected.text() + '</label><svg focusable="false"><use xlink:href="#svg-arrow"></use></svg></div>');
        html.push('<ul class="' + theme + '">');
        $this.children().each((i, e) => { /* ':not([value=""])' */
            let $that = $(e),
                text = $that.text();
            if (!text.length) {
                text = '&nbsp;';
            }
            if (text.indexOf('$$') === 0) {
                $that.attr('data-math', text);
            }

            html.push('<li data-id="' + $that.val() + '"' + ($that.is(':selected') ? ' class="selected"' : '') + '><div tabindex="0" class="theme-light"><label>' + text + '</label><svg focusable="false"><use xlink:href="#svg-checkmark"></use></svg></div></li>');
        });
        html.push('</ul>');
        html.push('</div>');
        let dropdown = html.join("");
        $this.after(dropdown);
        dropdown = $this.next();


        if ($this.hasClass('nowrap')) {
            let top = dropdown.children().eq(0),
                bottom = dropdown.children().eq(1),
                topWidth = top.width(),
                bottomWidth = bottom.width();
            if (bottomWidth > topWidth) {
                top.css('min-width', bottomWidth);
            }
        }

        dropdown.on('click', '> div', (e) => {
            let $that = $(e.currentTarget);
            $that.parent().toggleClass('open');
        });
        dropdown.on('click', 'li', (e) => {
            let $that = $(e.currentTarget);
            if (!$that.hasClass('selected')) {
                $that.siblings('.selected').removeClass('selected');
                $that.addClass('selected');
                let option = $this.children('[value="' + $that.attr('data-id') + '"]'),
                    text = $that.text(),
                    math = option.attr('data-math');
                if (math !== undefined) {
                    text = math;
                }
                let label = dropdown.children('div').children('label');
                label.text(text);
                if (math !== undefined) {
                    renderMathInElement(label[0]);
                }
                $this.children(':selected').removeAttr('selected');
                option.attr('selected', 'selected');
                $this.change();
            }
            dropdown.removeClass('open');
        });
    });
};

$(window).click((e) => {
    let target = $(e.target);
    if (target.closest("div.dropdown").length) {
        $('div.dropdown').not(target.closest("div.dropdown")).removeClass('open');
    }

    if (!target.closest(".dropdown").length) {
        $('div.dropdown').removeClass('open');
    }
});
var app = app || {};

app.checkAccordion = (elements) => {
    elements.on("click", ".headline", (e) => {
        let content = $(e.currentTarget).next();
        if (content.hasClass('open')) {
            content
                .removeClass('open')
                .slideUp("800");
        } else {
            content
                .addClass("open")
                .slideToggle("800")
                .parents('.accordion').find(".content.open").not(content).removeClass('open').slideUp("800");
        }
    });
};
var app = app || {};

var closeAlert = (target) => {
    target.fadeOut(app.fadeOutTime, () => {
        let parent = target.parent();
        if (parent.hasClass('popup') && parent.children().length === 1) {
            parent.remove();
        } else {
            target.remove();
        }
    });
}

$(function () {
    app.body.on('click', '.alert .close', (e) => {
        let target = $(e.currentTarget).parent();
        closeAlert(target);
    });
});
var app = app || {},
    google;

app.checkMap = (maps) => {
    app.head.find('script[src^="https://maps.googleapis.com/maps-api-"]').remove();
    if (maps.length) {
        if (!app.html.hasClass('map-loaded')) {
            app.head.append($('<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBEcomDjRS4Nu3RQCkkSIQ0nrBhuQM0gng"></script>'));
            app.html.addClass('map-loaded');
        }

        let timeout = 100;
        let checkGoogle = () => {
            if (google !== undefined) {
                maps.each((i, e) => {
                    let $this = $(e),
                        lat = app.tryParseFloat($this.attr('data-lat'), 37.4029937),
                        lng = app.tryParseFloat($this.attr('data-lng'), -122.1811793),
                        zoom = app.tryParseInt($this.attr('data-zoom'), 4),
                        cords = { lat: lat, lng: lng };

                    let map = new google.maps.Map($this[0], {
                        zoom: zoom,
                        center: cords
                    });

                    let marker = new google.maps.Marker({
                        position: cords,
                        map: map
                    });
                    
                    $(window).bind('resize.map', $.throttle(app.throttleInterval, false, () => {
                        google.maps.event.trigger($this[0], 'resize');
                    }));

                    app.html.on('aside-changed.map', () => {
                        google.maps.event.trigger($this[0], 'resize');
                    });
                });
                return;
            }
            setTimeout(checkGoogle, timeout);
        };
        checkGoogle();
    } else {
        $(window).unbind('resize.map');
        app.html.off('aside-changed.map');
    }
};
var app = app || {};

app.checkMath = (math) => {
    if (math.length) {
        if (!app.html.hasClass('math-loaded')) {
            app.head.append($('<link rel="stylesheet"href="dist/css/katex.css">'));
            app.html.addClass('math-loaded');
        }

        $.getScript('dist/js/katex.js', () => {
            math.each((i, e) => {
                let $this = $(e);
                renderMathInElement($this[0]);
                setTimeout(() => {
                    $this.removeClass('math');
                });
            });
        });
    }
};
var app = app || {};

app.checkMedia = (media) => {
    if (media.length) {
        if (!app.html.hasClass('media-loaded')) {
            app.head.append($('<link rel="stylesheet" href="dist/css/plyr.css">'));
            app.html.addClass('media-loaded');
        }

        $.getScript('dist/js/plyr.js', () => {
            media.each(function (i, item) {
                new Plyr(item);
            });
        });
    }
};
var app = app || {};

app.checkLazy = (elements) => {
    elements.lazy({
        afterLoad: (element) => {
            element.removeClass('lazy');
        }
    });
};
var app = app || {};

$(() => {
    app.body.on('click', '.show-popup-alert', (e) => {
        let $this = $(e.currentTarget),
            title = $this.attr('data-popup-title'),
            theme = $this.attr('data-popup-theme'),
            position = $this.attr('data-popup-position');
        app.showPopupAlert(title, theme, position);
    });
});

app.showPopupAlert = (title, theme = 'light', position = 'top left', type = 'default') => {
    if (title !== undefined) {
        let alert = [],
            popup = app.body.children('.popup[data-position="' + position + '"]');
        alert.push('<div class="alert theme-' + theme + '" data-type="' + type + '">');
        alert.push('<div><p>' + title + '</p></div>');
        alert.push('<button class="close" aria-label="Close popup"><svg focusable="false"><use xlink:href="#svg-close"></use></svg></button>');
        alert.push('</div>');
        alert = alert.join('');
        if (popup.length) {
            popup.append(alert);
        } else {
            let html = [];
            html.push('<div class="popup position ' + position + '" data-position="' + position + '">');
            html.push(alert);
            html.push('</div>');
            html = html.join("");
            app.body.prepend(html);
        }
    }
}
var app = app || {};

// responsive-background
app.checkResponsiveBackground = (elements) => {
    let setRb = (element) => {
        let image = element.attr('data-rb-image'),
            filetype = element.attr('data-rb-image-filetype'),
            sizesWidth = element.attr('data-rb-sizes'),
            current = element.attr('data-rb-current'),
            aspectRatio = element.attr('data-rb-aspect-ratio');
        if (image !== undefined && image.length &&
            filetype !== undefined && filetype.length &&
            sizesWidth !== undefined && sizesWidth.length &&
            aspectRatio !== undefined && aspectRatio.length) {
            if ((filetype === 'jpg' || filetype === 'jpeg' || filetype === 'png') &&
                (aspectRatio === '21by9' || aspectRatio === '16by9' || aspectRatio === '4by3' || aspectRatio === '1by1')) {
                sizesWidth = sizesWidth.replace(/\s/g, '').split(',').sort((a, b) => { return a - b; });
                let goalWidth = element.width(),
                    goalHeight = element.height(),
                    closestWidth,
                    closestHeight,
                    heightPercentage;

                function getHeightInPercentage(num, amount) {
                    return num * 100 / amount;
                };

                if (aspectRatio === '21by9') {
                    heightPercentage = getHeightInPercentage(9, 21);
                } else if (aspectRatio === '16by9') {
                    heightPercentage = getHeightInPercentage(9, 16);

                } else if (aspectRatio === '4by3') {
                    heightPercentage = getHeightInPercentage(3, 4);

                } else if (aspectRatio === '1by1') {
                    heightPercentage = 100;
                }

                function getHeightInPixels(num, amount) {
                    return num * amount / 100;
                };

                $.each(sizesWidth, (i, e) => {
                    let width = parseInt(e),
                        height = getHeightInPixels(heightPercentage, width);
                    if (closestWidth === undefined || width < goalWidth || closestWidth < goalWidth ||
                        closestHeight === undefined || height < goalHeight || closestHeight < goalHeight) {
                        closestWidth = width;
                        closestHeight = height;
                    }
                });

                if (current !== undefined && current.length && parseInt(current) < closestWidth || current === undefined || current.length === 0) {
                    app.body.append('<img id="rb" class="hidden" src="' + image + '-' + closestWidth + '.' + filetype + '" />');
                    let tempImage = app.body.children('#rb');
                    tempImage.on('load', () => {
                        tempImage.remove();
                        let src = 'url(' + image + '-' + closestWidth + '.' + filetype + ')';
                        element.css('background-image', src);
                        element.attr('data-rb-current', closestWidth);
                    });
                }
            }
        }
    }

    if(elements.length) {
        elements.each((i, e) => {
            let element = $(e);

            setRb(element);

            $(window).on('resize.rb', () => {
                setRb(element);
            });

            app.html.on('columns-changed.rb', () => {
                setRb(element);
            });

            app.html.on('aside-changed.rb', () => {
                setRb(element);
            });
        });

    } else {
        $(window).off('resize.rb');
        app.html.off('columns-changed.rb');
        app.html.off('aside-changed.rb');
    }
    
};
var app = app || {};

app.checkTooltip = (tooltips) => {
    tooltips.each((i, e) => {
        let $this = $(e),
            interactive = $this.hasClass('interactive');
        $this.tooltipster({
            animationDuration: 0,
            interactive: interactive,
            trigger: 'custom',
            triggerOpen: {
                mouseenter: true,
                touchstart: true
            },
            triggerClose: {
                mouseleave: true,
                tap: true,
                scroll: true
            }
        });
    });
};
var app = app || {};

app.checkDatatable = (tables) => {
    if (tables.length) {
        let count = 0;
        app.showLoading();
        $.getScript('dist/js/datatables.js', () => {
            let spacing = 'space-3';

            let table_header_input = (instance) => {
                let columns = instance.columns().header();
                let elements = jQuery.grep(columns, (e) => {
                    let column = $(e);
                    return column.hasClass('dropdown') || column.hasClass('text');
                });
                instance.columns().every(function () {
                    let th = this.header(),
                        text = th.innerText,
                        column = $(th),
                        style = '';


                    let minWidth = column.attr('data-min-width');
                    if (minWidth) {
                        style += 'min-width: ' + minWidth + 'px;';
                    }

                    column.empty().append('<div style="' + style + '"><div><span>' + text + '</span></div>' + (elements.length ? '<div></div>' : '') + '</div>');
                    let index = column.index();

                    if (column.hasClass('dropdown')) {
                        let select = $('<select class="dropdown align-left nowrap"><option value=""></option></select>')
                            .appendTo(column.find('> div > div:last-child'))
                            .on('change', (e) => {
                                instance.column(index).search(e.currentTarget.value).draw();
                            });

                        this.data().unique().sort().each((d, j) => {
                            select.append('<option value="' + d + '">' + d + '</option>');
                        });
                    } else if (column.hasClass('text')) {
                        let input = $('<input type="text" />')
                            .appendTo(column.find('> div > div:last-child'))
                            .on('keyup change', (e) => {
                                instance.column(index).search(e.currentTarget.value).draw();
                            });
                        input.parent().addClass('form-group');
                    }
                });
            }
            let table_header_sort = (instance, wrapper) => {
                let th = wrapper.find('thead th');
                th.unbind('click');
                th.find('> div > div:first-child').append('<span class="sort-btn"></span>');
                th.click((e) => {
                    let $this = $(e.target);
                    if (!$this.closest('div.dropdown').length && !$this.closest('input').length) {
                        let parent = $this.parents('th'),
                            index = parent.index();
                        if (parent.hasClass('sorting_asc')) {
                            instance.column(index).order('desc').draw();

                        } else {
                            instance.column(index).order('asc').draw();
                        }
                    }
                });
            }
            let table_header_length = (wrapper, header) => {
                let length = wrapper.find('.dataTables_length'),
                    dropdown = length.find('select');

                length.append(dropdown);
                length.children('label').remove();
                dropdown.addClass('dropdown').attr('data-width', 100);
                header.append(length);
            }
            let table_header_buttons = (wrapper, header) => {
                let container = wrapper.find('.dt-buttons');

                container.append('<div class="flex column wrap ' + spacing + '"></div>');

                let div = container.children('div'),
                    buttons = container.children('button');

                container.append(div);
                buttons.addClass('btn');
                div.append(buttons);
                header.append(container);
            }
            let table_header_filter = (wrapper, header) => {
                let filter = wrapper.find('.dataTables_filter');

                filter.addClass('input-group');
                filter.find('input').appendTo(filter);
                filter.append('<div class="input-group-addon"><svg focusable="false"><use xlink:href="#svg-search"></use></svg></div>');
                filter.find('label').remove();
                header.append(filter);
            }
            let table_content = (wrapper, content) => {
                let table = wrapper.find('table');
                content.append(table);
                return table;
            }
            let table_footer_info = (wrapper, footer) => {
                let info = wrapper.find('.dataTables_info');
                footer.append(info);
            }
            let paginateFix = (paginate) => {
                let span = paginate.children('span'),
                    prev = paginate.find('.paginate_button.previous'),
                    next = paginate.find('.paginate_button.next');

                prev.html('<svg focusable="false"><use xlink:href="#svg-arrow"></use></svg>');
                next.html('<svg focusable="false"><use xlink:href="#svg-arrow"></use></svg>');

                prev.prependTo(span);
                next.appendTo(span);
            }
            let table_footer_paginate = (wrapper, footer, paginate) => {
                paginate.addClass('flex column wrap');
                footer.append('<div class="dataTables_paginate_container"></div>');
                let container = footer.find('.dataTables_paginate_container');
                paginateFix(paginate);
                container.append(paginate);
            }
            let table_dropdowns = (wrapper) => {
                let dropdowns = wrapper.find('select.dropdown');
                app.checkDropdown(dropdowns);
            }

            tables.each((i, e) => {
                let $this = $(e);
                $this.addClass('nowrap');
                $this.DataTable({
                    "dom": 'lBfrtip',
                    "bSortCellsTop": true,
                    buttons: [
                        //'copy', 'excel', 'csv'
                        {
                            extend: 'copyHtml5',
                            footer: false

                        },
                        {
                            extend: 'excelHtml5',
                            footer: false,
                            exportOptions: {
                                "format": {
                                    header: function (text, index, th) {
                                        return $(th).find('span:first').html();
                                    }
                                }
                            }
                        },
                        {
                            extend: 'csvHtml5',
                            footer: false,
                            exportOptions: {
                                "format": {
                                    header: function (text, index, th) {
                                        return $(th).find('span:first').html();
                                    }
                                }
                            }
                        }
                    ],
                    responsive: true,
                    initComplete: function (settings, json) {
                        let instance = this.api(),
                            wrapper = $(settings.nTableWrapper);

                        wrapper.append('<div class="dataTables_header flex grow"><div class="flex column wrap ' + spacing + '"></div></div>');
                        let header = wrapper.find('> .dataTables_header > div');

                        wrapper.append('<div class="dataTables_content table"></div>');
                        let content = wrapper.find('> .dataTables_content');

                        wrapper.append('<div class="dataTables_footer"><div class="flex column wrap vertical-center ' + spacing + '"></div></div>');
                        let footer = wrapper.find('> .dataTables_footer > div');

                        table_header_input(instance);
                        table_header_sort(instance, wrapper);
                        table_header_length(wrapper, header);
                        table_header_buttons(wrapper, header);
                        table_header_filter(wrapper, header);

                        let table = table_content(wrapper, content);

                        table_footer_info(wrapper, footer);

                        let paginate = wrapper.find('.dataTables_paginate');
                        table_footer_paginate(wrapper, footer, paginate);

                        table_dropdowns(wrapper);

                        count++;
                        if (count = tables.length) {
                            app.hideLoading();
                        }

                        $this.on('draw.dt', function () {
                            paginateFix(paginate);
                            let columns = instance.columns().responsiveHidden();
                            $this.trigger('responsive-resize.dt', [this, columns]);
                        });

                        app.html.on('aside-changed.datatables', () => {
                            instance.responsive.recalc();
                        });

                        $this.on('responsive-resize.dt', (e, datatable, columns) => {
                            let count = columns.reduce((a, b) => {
                                return b === false ? a + 1 : a;
                            }, 0);

                            let elements = table.find('tbody tr:not(.child) > *:first-child:not(.dataTables_empty)');
                            elements.removeAttr('tabindex');

                            elements.children('i').remove();
                            if (count) {
                                elements.prepend('<i tabindex="0"><svg focusable="false"><use xlink:href="#svg-plus"></use></svg><svg focusable="false"><use xlink:href="#svg-minus"></use></svg></i>');
                            }
                        });

                    }
                });
            });
        });
    } else {
        app.html.off('aside-changed.datatables');
    }
};
var app = app || {};

app.checkSwiper = (swiper) => {
    if (swiper.length) {
        if (!app.html.hasClass('swiper-loaded')) {
            app.head.append($('<link rel="stylesheet"href="dist/css/swiper.css">'));
            app.html.addClass('swiper-loaded');
        }

        $.getScript('dist/js/swiper.js', () => {
            swiper.each((i, e) => {

                let $this = $(e);
                if (!$this.hasClass('loaded')) {
                    $this.append('<div class="swiper-footer"></div>');
                    $this.children('.swiper-footer').append('<div></div>')

                    let footer = $this.find('> .swiper-footer > div'),
                        pagination = $this.hasClass('pagination'),
                        dynamicBullets = $this.hasClass('dynamic-bullets'),
                        navigation = $this.hasClass('navigation'),
                        loop = app.isTrue($this.attr('data-loop')),
                        spaceBetween = $this.hasClass('space-between'),
                        slidesPerView = app.tryParseInt($this.attr('data-slides-per-view'), 1),
                        breakpoints = app.tryParseJSON($this.attr('data-breakpoints'), {});

                    footer.addClass('flex column wrap space-3 center');

                    if (pagination || dynamicBullets) {
                        footer.append('<div class="swiper-pagination"><div class="flex column wrap space-1 center"></div></div>');
                    }

                    if (navigation) {
                        footer.append('<button class="btn square circle prev theme-dark"><svg focusable="false"><use xlink:href="#svg-arrow"></use></svg></button>');
                        footer.append('<button class="btn square circle next theme-dark"><svg focusable="false"><use xlink:href="#svg-arrow"></use></svg></button>');
                    }

                    if (spaceBetween) {
                        spaceBetween = 16;
                    }

                    var swiper = new Swiper($this[0], {
                        loop: loop,
                        slidesPerView: slidesPerView,
                        spaceBetween: spaceBetween,

                        // If we need pagination
                        pagination: {
                            el: '.swiper-pagination > div',
                            dynamicBullets: dynamicBullets
                        },

                        // Navigation arrows
                        navigation: {
                            nextEl: '.swiper-footer .next',
                            prevEl: '.swiper-footer .prev',
                        },

                        // And if we need scrollbar
                        scrollbar: {
                            el: '.swiper-scrollbar',
                        },
                        breakpoints: breakpoints,
                        on: {
                            init: () => {
                                $this.addClass('loaded');
                            },
                            slideChange: () => {
                                app.checkLazy($this.find('.lazy'));
                            },
                            paginationRender: (el) => {
                                //if (navigation) {
                                //    $(el).append(footer.children('.btn'))
                                //}
                            }
                        }
                    });
                }
            });
        });
    }
};
var app = app || {};

app.getAssignmentItem = (items, id) => {
    return $($.map(items, (item) => {
        if (item.getAttribute("data-id") === id) {
            return item;
        }
    }));
};

app.checkAssignment = (assignments) => {
    if (assignments.length) {
        $.getScript('dist/js/assignments.js', () => {
            $(assignments).each((i, assignment) => {
                assignment = $(assignment);
                app.checkAssignmentSort(assignment);
                app.checkAssignmentDragAndDrop(assignment);
                app.checkAssignmentColor(assignment);
            });
        });
    }
};
var app = app || {};

app.pageForm = () => {
    app.addValidation(
        app.content.find('#form'),
        {
            firstName: {
                required: true,
                minlength: 2
            },
            lastName: {
                required: true,
                minlength: 2
            },
            username: {
                required: true,
                minlength: 2
            },
            password: {
                required: true,
                password_regex: true
            },
            confirm_password: {
                required: true,
                equalTo: "#password"
            },
            email: {
                required: true,
                email: true
            },
            dropdown_1: "required",
            dropdown_2: "required",
            dropdown_3: "required",
            dropdown_4: "required",
            dropdown_5: "required",
            dropdown_6: "required",
            gender: "required",
            interests: "required",
            agree: "required",
            font_size: "required"
        },
        {
            firstName: {
                required: "Please enter your first name",
                minlength: "Your first name must consist of at least 2 characters"
            },
            lastName: {
                required: "Please enter your last name",
                minlength: "Your last name must consist of at least 2 characters"
            },
            username: {
                required: "Please enter a username",
                minlength: "Your username must consist of at least 2 characters"
            },
            password: {
                required: "Please provide a password"
            },
            confirm_password: {
                required: "Please provide a password",
                equalTo: "Please enter the same password as above"
            },
            email: "Please enter a valid email address",
            dropdown_1: "Please select an option",
            dropdown_2: "Please select an option",
            dropdown_3: "Please select an option",
            dropdown_4: "Please select an option",
            dropdown_5: "Please select an option",
            dropdown_6: "Please select an option",
            gender: "Please select your gender",
            interests: "Please select at least one interest",
            agree: "Please accept our policy"
        }
    );
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS0zLjEuMS5taW4uanMiLCJqcXVlcnkudmFsaWRhdGUubWluLmpzIiwianF1ZXJ5LmxhenkubWluLmpzIiwidG9vbHRpcHN0ZXIubWluLmpzIiwianF1ZXJ5LmJhLXRocm90dGxlLWRlYm91bmNlLmpzIiwianF1ZXJ5LnNodWZmbGUuanMiLCJib3dzZXIuanMiLCJfdmFyaWFibGVzLmpzIiwiX2Z1bmN0aW9ucy5qcyIsIl9ib3dzZXIuanMiLCJfZm9ybS5qcyIsIl9hcHAuanMiLCJsb2FkZWQuanMiLCJmdWxsc2NyZWVuLmpzIiwic2Nyb2xsLmpzIiwibG9hZGluZy5qcyIsImFzaWRlLmpzIiwiYXV0aGVudGljYXRpb24uanMiLCJjb29raWUuanMiLCJuYXZpZ2F0aW9uLmpzIiwic2V0dGluZ3MuanMiLCJrZXlib2FyZC5qcyIsIm1vZGFsLmpzIiwicmVzcG9uc2l2ZUhlYWRlci5qcyIsImZvY3VzLmpzIiwic3dpcGUuanMiLCJ0dHMuanMiLCJjb250ZW50SGVhZGVyLmpzIiwidGhlbWUuanMiLCJjb25uZWN0ZWQuanMiLCJkcm9wZG93bi5qcyIsImFjY29yZGlvbi5qcyIsImFsZXJ0LmpzIiwibWFwLmpzIiwibWF0aC5qcyIsIm1lZGlhLmpzIiwibGF6eS5qcyIsInBvcHVwLmpzIiwicmVzcG9uc2l2ZUJhY2tncm91bmQuanMiLCJ0b29sdGlwLmpzIiwiZGF0YXRhYmxlcy5qcyIsInN3aXBlci5qcyIsIl9hc3NpZ25tZW50cy5qcyIsImZvcm0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FDSEE7QUFDQTtBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3RJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3RLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM1RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBqUXVlcnkgdjMuMS4xIHwgKGMpIGpRdWVyeSBGb3VuZGF0aW9uIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovXHJcbiFmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gYihhKX06YihhKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO3ZhciBjPVtdLGQ9YS5kb2N1bWVudCxlPU9iamVjdC5nZXRQcm90b3R5cGVPZixmPWMuc2xpY2UsZz1jLmNvbmNhdCxoPWMucHVzaCxpPWMuaW5kZXhPZixqPXt9LGs9ai50b1N0cmluZyxsPWouaGFzT3duUHJvcGVydHksbT1sLnRvU3RyaW5nLG49bS5jYWxsKE9iamVjdCksbz17fTtmdW5jdGlvbiBwKGEsYil7Yj1ifHxkO3ZhciBjPWIuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtjLnRleHQ9YSxiLmhlYWQuYXBwZW5kQ2hpbGQoYykucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKX12YXIgcT1cIjMuMS4xXCIscj1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgci5mbi5pbml0KGEsYil9LHM9L15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLHQ9L14tbXMtLyx1PS8tKFthLXpdKS9nLHY9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtyLmZuPXIucHJvdG90eXBlPXtqcXVlcnk6cSxjb25zdHJ1Y3RvcjpyLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZi5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/Zi5jYWxsKHRoaXMpOmE8MD90aGlzW2ErdGhpcy5sZW5ndGhdOnRoaXNbYV19LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1yLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYn0sZWFjaDpmdW5jdGlvbihhKXtyZXR1cm4gci5lYWNoKHRoaXMsYSl9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soci5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhmLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKGE8MD9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZjPGI/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcigpfSxwdXNoOmgsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxyLmV4dGVuZD1yLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksXCJvYmplY3RcIj09dHlwZW9mIGd8fHIuaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aDxpO2grKylpZihudWxsIT0oYT1hcmd1bWVudHNbaF0pKWZvcihiIGluIGEpYz1nW2JdLGQ9YVtiXSxnIT09ZCYmKGomJmQmJihyLmlzUGxhaW5PYmplY3QoZCl8fChlPXIuaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmci5pc0FycmF5KGMpP2M6W10pOmY9YyYmci5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1yLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sci5leHRlbmQoe2V4cGFuZG86XCJqUXVlcnlcIisocStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1yLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7dmFyIGI9ci50eXBlKGEpO3JldHVybihcIm51bWJlclwiPT09Ynx8XCJzdHJpbmdcIj09PWIpJiYhaXNOYU4oYS1wYXJzZUZsb2F0KGEpKX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXt2YXIgYixjO3JldHVybiEoIWF8fFwiW29iamVjdCBPYmplY3RdXCIhPT1rLmNhbGwoYSkpJiYoIShiPWUoYSkpfHwoYz1sLmNhbGwoYixcImNvbnN0cnVjdG9yXCIpJiZiLmNvbnN0cnVjdG9yLFwiZnVuY3Rpb25cIj09dHlwZW9mIGMmJm0uY2FsbChjKT09PW4pKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYT9qW2suY2FsbChhKV18fFwib2JqZWN0XCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7cChhKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UodCxcIm1zLVwiKS5yZXBsYWNlKHUsdil9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MDtpZih3KGEpKXtmb3IoYz1hLmxlbmd0aDtkPGM7ZCsrKWlmKGIuY2FsbChhW2RdLGQsYVtkXSk9PT0hMSlicmVha31lbHNlIGZvcihkIGluIGEpaWYoYi5jYWxsKGFbZF0sZCxhW2RdKT09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6KGErXCJcIikucmVwbGFjZShzLFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHcoT2JqZWN0KGEpKT9yLm1lcmdlKGMsXCJzdHJpbmdcIj09dHlwZW9mIGE/W2FdOmEpOmguY2FsbChjLGEpKSxjfSxpbkFycmF5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbnVsbD09Yj8tMTppLmNhbGwoYixhLGMpfSxtZXJnZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7ZDxjO2QrKylhW2UrK109YltkXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfSxncmVwOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aCxoPSFjO2Y8ZztmKyspZD0hYihhW2ZdLGYpLGQhPT1oJiZlLnB1c2goYVtmXSk7cmV0dXJuIGV9LG1hcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPTAsaD1bXTtpZih3KGEpKWZvcihkPWEubGVuZ3RoO2Y8ZDtmKyspZT1iKGFbZl0sZixjKSxudWxsIT1lJiZoLnB1c2goZSk7ZWxzZSBmb3IoZiBpbiBhKWU9YihhW2ZdLGYsYyksbnVsbCE9ZSYmaC5wdXNoKGUpO3JldHVybiBnLmFwcGx5KFtdLGgpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGImJihjPWFbYl0sYj1hLGE9Yyksci5pc0Z1bmN0aW9uKGEpKXJldHVybiBkPWYuY2FsbChhcmd1bWVudHMsMiksZT1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsZC5jb25jYXQoZi5jYWxsKGFyZ3VtZW50cykpKX0sZS5ndWlkPWEuZ3VpZD1hLmd1aWR8fHIuZ3VpZCsrLGV9LG5vdzpEYXRlLm5vdyxzdXBwb3J0Om99KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihyLmZuW1N5bWJvbC5pdGVyYXRvcl09Y1tTeW1ib2wuaXRlcmF0b3JdKSxyLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbFwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2pbXCJbb2JqZWN0IFwiK2IrXCJdXCJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHcoYSl7dmFyIGI9ISFhJiZcImxlbmd0aFwiaW4gYSYmYS5sZW5ndGgsYz1yLnR5cGUoYSk7cmV0dXJuXCJmdW5jdGlvblwiIT09YyYmIXIuaXNXaW5kb3coYSkmJihcImFycmF5XCI9PT1jfHwwPT09Ynx8XCJudW1iZXJcIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGEpfXZhciB4PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9XCJzaXp6bGVcIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9aGEoKSx6PWhhKCksQT1oYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPXt9Lmhhc093blByb3BlcnR5LEQ9W10sRT1ELnBvcCxGPUQucHVzaCxHPUQucHVzaCxIPUQuc2xpY2UsST1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sSj1cImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsSz1cIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsTD1cIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcMC1cXFxceGEwXSkrXCIsTT1cIlxcXFxbXCIrSytcIiooXCIrTCtcIikoPzpcIitLK1wiKihbKl4kfCF+XT89KVwiK0srXCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIitMK1wiKSl8KVwiK0srXCIqXFxcXF1cIixOPVwiOihcIitMK1wiKSg/OlxcXFwoKCgnKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIitNK1wiKSopfC4qKVxcXFwpfClcIixPPW5ldyBSZWdFeHAoSytcIitcIixcImdcIiksUD1uZXcgUmVnRXhwKFwiXlwiK0srXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiK0srXCIrJFwiLFwiZ1wiKSxRPW5ldyBSZWdFeHAoXCJeXCIrSytcIiosXCIrSytcIipcIiksUj1uZXcgUmVnRXhwKFwiXlwiK0srXCIqKFs+K35dfFwiK0srXCIpXCIrSytcIipcIiksUz1uZXcgUmVnRXhwKFwiPVwiK0srXCIqKFteXFxcXF0nXFxcIl0qPylcIitLK1wiKlxcXFxdXCIsXCJnXCIpLFQ9bmV3IFJlZ0V4cChOKSxVPW5ldyBSZWdFeHAoXCJeXCIrTCtcIiRcIiksVj17SUQ6bmV3IFJlZ0V4cChcIl4jKFwiK0wrXCIpXCIpLENMQVNTOm5ldyBSZWdFeHAoXCJeXFxcXC4oXCIrTCtcIilcIiksVEFHOm5ldyBSZWdFeHAoXCJeKFwiK0wrXCJ8WypdKVwiKSxBVFRSOm5ldyBSZWdFeHAoXCJeXCIrTSksUFNFVURPOm5ldyBSZWdFeHAoXCJeXCIrTiksQ0hJTEQ6bmV3IFJlZ0V4cChcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIrSytcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiK0srXCIqKD86KFsrLV18KVwiK0srXCIqKFxcXFxkKyl8KSlcIitLK1wiKlxcXFwpfClcIixcImlcIiksYm9vbDpuZXcgUmVnRXhwKFwiXig/OlwiK0orXCIpJFwiLFwiaVwiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cChcIl5cIitLK1wiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIitLK1wiKigoPzotXFxcXGQpP1xcXFxkKilcIitLK1wiKlxcXFwpfCkoPz1bXi1dfCQpXCIsXCJpXCIpfSxXPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksWD0vXmhcXGQkL2ksWT0vXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLFo9L14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sJD0vWyt+XS8sXz1uZXcgUmVnRXhwKFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIrSytcIj98KFwiK0srXCIpfC4pXCIsXCJpZ1wiKSxhYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9XCIweFwiK2ItNjU1MzY7cmV0dXJuIGQhPT1kfHxjP2I6ZDwwP1N0cmluZy5mcm9tQ2hhckNvZGUoZCs2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZShkPj4xMHw1NTI5NiwxMDIzJmR8NTYzMjApfSxiYT0vKFtcXDAtXFx4MWZcXHg3Zl18Xi0/XFxkKXxeLSR8W15cXDAtXFx4MWZcXHg3Zi1cXHVGRkZGXFx3LV0vZyxjYT1mdW5jdGlvbihhLGIpe3JldHVybiBiP1wiXFwwXCI9PT1hP1wiXFx1ZmZmZFwiOmEuc2xpY2UoMCwtMSkrXCJcXFxcXCIrYS5jaGFyQ29kZUF0KGEubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KStcIiBcIjpcIlxcXFxcIithfSxkYT1mdW5jdGlvbigpe20oKX0sZWE9dGEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMCYmKFwiZm9ybVwiaW4gYXx8XCJsYWJlbFwiaW4gYSl9LHtkaXI6XCJwYXJlbnROb2RlXCIsbmV4dDpcImxlZ2VuZFwifSk7dHJ5e0cuYXBwbHkoRD1ILmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLERbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZmEpe0c9e2FwcGx5OkQubGVuZ3RoP2Z1bmN0aW9uKGEsYil7Ri5hcHBseShhLEguY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGdhKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHM9YiYmYi5vd25lckRvY3VtZW50LHc9Yj9iLm5vZGVUeXBlOjk7aWYoZD1kfHxbXSxcInN0cmluZ1wiIT10eXBlb2YgYXx8IWF8fDEhPT13JiY5IT09dyYmMTEhPT13KXJldHVybiBkO2lmKCFlJiYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4scCkpe2lmKDExIT09dyYmKGw9Wi5leGVjKGEpKSlpZihmPWxbMV0pe2lmKDk9PT13KXtpZighKGo9Yi5nZXRFbGVtZW50QnlJZChmKSkpcmV0dXJuIGQ7aWYoai5pZD09PWYpcmV0dXJuIGQucHVzaChqKSxkfWVsc2UgaWYocyYmKGo9cy5nZXRFbGVtZW50QnlJZChmKSkmJnQoYixqKSYmai5pZD09PWYpcmV0dXJuIGQucHVzaChqKSxkfWVsc2V7aWYobFsyXSlyZXR1cm4gRy5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGY9bFszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBHLmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGYpKSxkfWlmKGMucXNhJiYhQVthK1wiIFwiXSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYoMSE9PXcpcz1iLHI9YTtlbHNlIGlmKFwib2JqZWN0XCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpeyhrPWIuZ2V0QXR0cmlidXRlKFwiaWRcIikpP2s9ay5yZXBsYWNlKGJhLGNhKTpiLnNldEF0dHJpYnV0ZShcImlkXCIsaz11KSxvPWcoYSksaD1vLmxlbmd0aDt3aGlsZShoLS0pb1toXT1cIiNcIitrK1wiIFwiK3NhKG9baF0pO3I9by5qb2luKFwiLFwiKSxzPSQudGVzdChhKSYmcWEoYi5wYXJlbnROb2RlKXx8Yn1pZihyKXRyeXtyZXR1cm4gRy5hcHBseShkLHMucXVlcnlTZWxlY3RvckFsbChyKSksZH1jYXRjaCh4KXt9ZmluYWxseXtrPT09dSYmYi5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKX19fXJldHVybiBpKGEucmVwbGFjZShQLFwiJDFcIiksYixkLGUpfWZ1bmN0aW9uIGhhKCl7dmFyIGE9W107ZnVuY3Rpb24gYihjLGUpe3JldHVybiBhLnB1c2goYytcIiBcIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrXCIgXCJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaWEoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBqYShhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKTt0cnl7cmV0dXJuISFhKGIpfWNhdGNoKGMpe3JldHVybiExfWZpbmFsbHl7Yi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYiksYj1udWxsfX1mdW5jdGlvbiBrYShhLGIpe3ZhciBjPWEuc3BsaXQoXCJ8XCIpLGU9Yy5sZW5ndGg7d2hpbGUoZS0tKWQuYXR0ckhhbmRsZVtjW2VdXT1ifWZ1bmN0aW9uIGxhKGEsYil7dmFyIGM9YiYmYSxkPWMmJjE9PT1hLm5vZGVUeXBlJiYxPT09Yi5ub2RlVHlwZSYmYS5zb3VyY2VJbmRleC1iLnNvdXJjZUluZGV4O2lmKGQpcmV0dXJuIGQ7aWYoYyl3aGlsZShjPWMubmV4dFNpYmxpbmcpaWYoYz09PWIpcmV0dXJuLTE7cmV0dXJuIGE/MTotMX1mdW5jdGlvbiBtYShhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWMmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuKFwiaW5wdXRcIj09PWN8fFwiYnV0dG9uXCI9PT1jKSYmYi50eXBlPT09YX19ZnVuY3Rpb24gb2EoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVyblwiZm9ybVwiaW4gYj9iLnBhcmVudE5vZGUmJmIuZGlzYWJsZWQ9PT0hMT9cImxhYmVsXCJpbiBiP1wibGFiZWxcImluIGIucGFyZW50Tm9kZT9iLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT1hOmIuZGlzYWJsZWQ9PT1hOmIuaXNEaXNhYmxlZD09PWF8fGIuaXNEaXNhYmxlZCE9PSFhJiZlYShiKT09PWE6Yi5kaXNhYmxlZD09PWE6XCJsYWJlbFwiaW4gYiYmYi5kaXNhYmxlZD09PWF9fWZ1bmN0aW9uIHBhKGEpe3JldHVybiBpYShmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixpYShmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBhJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSYmYX1jPWdhLnN1cHBvcnQ9e30sZj1nYS5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj1hJiYoYS5vd25lckRvY3VtZW50fHxhKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuISFiJiZcIkhUTUxcIiE9PWIubm9kZU5hbWV9LG09Z2Euc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZSxnPWE/YS5vd25lckRvY3VtZW50fHxhOnY7cmV0dXJuIGchPT1uJiY5PT09Zy5ub2RlVHlwZSYmZy5kb2N1bWVudEVsZW1lbnQ/KG49ZyxvPW4uZG9jdW1lbnRFbGVtZW50LHA9IWYobiksdiE9PW4mJihlPW4uZGVmYXVsdFZpZXcpJiZlLnRvcCE9PWUmJihlLmFkZEV2ZW50TGlzdGVuZXI/ZS5hZGRFdmVudExpc3RlbmVyKFwidW5sb2FkXCIsZGEsITEpOmUuYXR0YWNoRXZlbnQmJmUuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGRhKSksYy5hdHRyaWJ1dGVzPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzTmFtZT1cImlcIiwhYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIil9KSxjLmdldEVsZW1lbnRzQnlUYWdOYW1lPWphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmFwcGVuZENoaWxkKG4uY3JlYXRlQ29tbWVudChcIlwiKSksIWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aH0pLGMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT1ZLnRlc3Qobi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSxjLmdldEJ5SWQ9amEoZnVuY3Rpb24oYSl7cmV0dXJuIG8uYXBwZW5kQ2hpbGQoYSkuaWQ9dSwhbi5nZXRFbGVtZW50c0J5TmFtZXx8IW4uZ2V0RWxlbWVudHNCeU5hbWUodSkubGVuZ3RofSksYy5nZXRCeUlkPyhkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoXyxhYSk7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcImlkXCIpPT09Yn19LGQuZmluZC5JRD1mdW5jdGlvbihhLGIpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRCeUlkJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjP1tjXTpbXX19KTooZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKF8sYWEpO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGVOb2RlJiZhLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSxkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5nZXRFbGVtZW50QnlJZCYmcCl7dmFyIGMsZCxlLGY9Yi5nZXRFbGVtZW50QnlJZChhKTtpZihmKXtpZihjPWYuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpLGMmJmMudmFsdWU9PT1hKXJldHVybltmXTtlPWIuZ2V0RWxlbWVudHNCeU5hbWUoYSksZD0wO3doaWxlKGY9ZVtkKytdKWlmKGM9Zi5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIiksYyYmYy52YWx1ZT09PWEpcmV0dXJuW2ZdfXJldHVybltdfX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6Yy5xc2E/Yi5xdWVyeVNlbGVjdG9yQWxsKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoXCIqXCI9PT1hKXt3aGlsZShjPWZbZSsrXSkxPT09Yy5ub2RlVHlwZSYmZC5wdXNoKGMpO3JldHVybiBkfXJldHVybiBmfSxkLmZpbmQuQ0xBU1M9Yy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhLGIpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJnApcmV0dXJuIGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKX0scj1bXSxxPVtdLChjLnFzYT1ZLnRlc3Qobi5xdWVyeVNlbGVjdG9yQWxsKSkmJihqYShmdW5jdGlvbihhKXtvLmFwcGVuZENoaWxkKGEpLmlubmVySFRNTD1cIjxhIGlkPSdcIit1K1wiJz48L2E+PHNlbGVjdCBpZD0nXCIrdStcIi1cXHJcXFxcJyBtc2FsbG93Y2FwdHVyZT0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiLGEucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCYmcS5wdXNoKFwiWypeJF09XCIrSytcIiooPzonJ3xcXFwiXFxcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGh8fHEucHVzaChcIlxcXFxbXCIrSytcIiooPzp2YWx1ZXxcIitKK1wiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaWR+PVwiK3UrXCItXVwiKS5sZW5ndGh8fHEucHVzaChcIn49XCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmNoZWNrZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiYSNcIit1K1wiKypcIikubGVuZ3RofHxxLnB1c2goXCIuIy4rWyt+XVwiKX0pLGphKGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPVwiPGEgaHJlZj0nJyBkaXNhYmxlZD0nZGlzYWJsZWQnPjwvYT48c2VsZWN0IGRpc2FibGVkPSdkaXNhYmxlZCc+PG9wdGlvbi8+PC9zZWxlY3Q+XCI7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJEXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCYmcS5wdXNoKFwibmFtZVwiK0srXCIqWypeJHwhfl0/PVwiKSwyIT09YS5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoJiZxLnB1c2goXCI6ZW5hYmxlZFwiLFwiOmRpc2FibGVkXCIpLG8uYXBwZW5kQ2hpbGQoYSkuZGlzYWJsZWQ9ITAsMiE9PWEucXVlcnlTZWxlY3RvckFsbChcIjpkaXNhYmxlZFwiKS5sZW5ndGgmJnEucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSxxLnB1c2goXCIsLio6XCIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj1ZLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmphKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsXCIqXCIpLHMuY2FsbChhLFwiW3MhPScnXTp4XCIpLHIucHVzaChcIiE9XCIsTil9KSxxPXEubGVuZ3RoJiZuZXcgUmVnRXhwKHEuam9pbihcInxcIikpLHI9ci5sZW5ndGgmJm5ldyBSZWdFeHAoci5qb2luKFwifFwiKSksYj1ZLnRlc3Qoby5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksdD1ifHxZLnRlc3Qoby5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYz05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGQ9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09ZHx8ISghZHx8MSE9PWQubm9kZVR5cGV8fCEoYy5jb250YWlucz9jLmNvbnRhaW5zKGQpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZCkpKX06ZnVuY3Rpb24oYSxiKXtpZihiKXdoaWxlKGI9Yi5wYXJlbnROb2RlKWlmKGI9PT1hKXJldHVybiEwO3JldHVybiExfSxCPWI/ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBkPSFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBkP2Q6KGQ9KGEub3duZXJEb2N1bWVudHx8YSk9PT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjEsMSZkfHwhYy5zb3J0RGV0YWNoZWQmJmIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYSk9PT1kP2E9PT1ufHxhLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYSk/LTE6Yj09PW58fGIub3duZXJEb2N1bWVudD09PXYmJnQodixiKT8xOms/SShrLGEpLUkoayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxlPWEucGFyZW50Tm9kZSxmPWIucGFyZW50Tm9kZSxnPVthXSxoPVtiXTtpZighZXx8IWYpcmV0dXJuIGE9PT1uPy0xOmI9PT1uPzE6ZT8tMTpmPzE6az9JKGssYSktSShrLGIpOjA7aWYoZT09PWYpcmV0dXJuIGxhKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWcudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaC51bnNoaWZ0KGMpO3doaWxlKGdbZF09PT1oW2RdKWQrKztyZXR1cm4gZD9sYShnW2RdLGhbZF0pOmdbZF09PT12Py0xOmhbZF09PT12PzE6MH0sbik6bn0sZ2EubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBnYShhLG51bGwsbnVsbCxiKX0sZ2EubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFMsXCI9JyQxJ11cIiksYy5tYXRjaGVzU2VsZWN0b3ImJnAmJiFBW2IrXCIgXCJdJiYoIXJ8fCFyLnRlc3QoYikpJiYoIXF8fCFxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBnYShiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxnYS5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGdhLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZDLmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxnYS5lc2NhcGU9ZnVuY3Rpb24oYSl7cmV0dXJuKGErXCJcIikucmVwbGFjZShiYSxjYSl9LGdhLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiK2EpfSxnYS51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9Z2EuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPVwiXCIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1nYS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzppYSxtYXRjaDpWLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7XCI+XCI6e2RpcjpcInBhcmVudE5vZGVcIixmaXJzdDohMH0sXCIgXCI6e2RpcjpcInBhcmVudE5vZGVcIn0sXCIrXCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wiLGZpcnN0OiEwfSxcIn5cIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKF8sYWEpLGFbM109KGFbM118fGFbNF18fGFbNV18fFwiXCIpLnJlcGxhY2UoXyxhYSksXCJ+PVwiPT09YVsyXSYmKGFbM109XCIgXCIrYVszXStcIiBcIiksYS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8Z2EuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooXCJldmVuXCI9PT1hWzNdfHxcIm9kZFwiPT09YVszXSkpLGFbNV09KyhhWzddK2FbOF18fFwib2RkXCI9PT1hWzNdKSk6YVszXSYmZ2EuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFYuQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8XCJcIjpjJiZULnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoXCIpXCIsYy5sZW5ndGgtYiktYy5sZW5ndGgpJiYoYVswXT1hWzBdLnNsaWNlKDAsYiksYVsyXT1jLnNsaWNlKDAsYikpLGEuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoXyxhYSkudG9Mb3dlckNhc2UoKTtyZXR1cm5cIipcIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErXCIgXCJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKFwiKF58XCIrSytcIilcIithK1wiKFwiK0srXCJ8JClcIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdChcInN0cmluZ1wiPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHxcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpfSl9LEFUVFI6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1nYS5hdHRyKGQsYSk7cmV0dXJuIG51bGw9PWU/XCIhPVwiPT09YjohYnx8KGUrPVwiXCIsXCI9XCI9PT1iP2U9PT1jOlwiIT1cIj09PWI/ZSE9PWM6XCJePVwiPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOlwiKj1cIj09PWI/YyYmZS5pbmRleE9mKGMpPi0xOlwiJD1cIj09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09YzpcIn49XCI9PT1iPyhcIiBcIitlLnJlcGxhY2UoTyxcIiBcIikrXCIgXCIpLmluZGV4T2YoYyk+LTE6XCJ8PVwiPT09YiYmKGU9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jK1wiLVwiKSl9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPVwibnRoXCIhPT1hLnNsaWNlKDAsMyksZz1cImxhc3RcIiE9PWEuc2xpY2UoLTQpLGg9XCJvZi10eXBlXCI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz9cIm5leHRTaWJsaW5nXCI6XCJwcmV2aW91c1NpYmxpbmdcIixxPWIucGFyZW50Tm9kZSxyPWgmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxzPSFpJiYhaCx0PSExO2lmKHEpe2lmKGYpe3doaWxlKHApe209Yjt3aGlsZShtPW1bcF0paWYoaD9tLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1tLm5vZGVUeXBlKXJldHVybiExO289cD1cIm9ubHlcIj09PWEmJiFvJiZcIm5leHRTaWJsaW5nXCJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe209cSxsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sdD1uJiZqWzJdLG09biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKG09KytuJiZtJiZtW3BdfHwodD1uPTApfHxvLnBvcCgpKWlmKDE9PT1tLm5vZGVUeXBlJiYrK3QmJm09PT1iKXtrW2FdPVt3LG4sdF07YnJlYWt9fWVsc2UgaWYocyYmKG09YixsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sdD1uKSx0PT09ITEpd2hpbGUobT0rK24mJm0mJm1bcF18fCh0PW49MCl8fG8ucG9wKCkpaWYoKGg/bS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bS5ub2RlVHlwZSkmJisrdCYmKHMmJihsPW1bdV18fChtW3VdPXt9KSxrPWxbbS51bmlxdWVJRF18fChsW20udW5pcXVlSURdPXt9KSxrW2FdPVt3LHRdKSxtPT09YikpYnJlYWs7cmV0dXJuIHQtPWUsdD09PWR8fHQlZD09PTAmJnQvZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGdhLmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSxcIlwiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1JKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShQLFwiJDFcIikpO3JldHVybiBkW3VdP2lhKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLGJbMF09bnVsbCwhYy5wb3AoKX19KSxoYXM6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBnYShhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShfLGFhKSxmdW5jdGlvbihiKXtyZXR1cm4oYi50ZXh0Q29udGVudHx8Yi5pbm5lclRleHR8fGUoYikpLmluZGV4T2YoYSk+LTF9fSksbGFuZzppYShmdW5jdGlvbihhKXtyZXR1cm4gVS50ZXN0KGF8fFwiXCIpfHxnYS5lcnJvcihcInVuc3VwcG9ydGVkIGxhbmc6IFwiK2EpLGE9YS5yZXBsYWNlKF8sYWEpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHxiLmdldEF0dHJpYnV0ZShcImxhbmdcIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErXCItXCIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6b2EoITEpLGRpc2FibGVkOm9hKCEwKSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiYhIWEuY2hlY2tlZHx8XCJvcHRpb25cIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBYLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBXLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmXCJidXR0b25cIj09PWEudHlwZXx8XCJidXR0b25cIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuXCJpbnB1dFwiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZcInRleHRcIj09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSl8fFwidGV4dFwiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6cGEoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OnBhKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpwYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuW2M8MD9jK2I6Y119KSxldmVuOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOnBhKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7YzxiO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6cGEoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1jPDA/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpwYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPWM8MD9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcmEoKXt9cmEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyByYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErXCIgXCJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7YyYmIShlPVEuZXhlYyhoKSl8fChlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVIuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUCxcIiBcIil9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtmb3IoZyBpbiBkLmZpbHRlcikhKGU9VltnXS5leGVjKGgpKXx8altnXSYmIShlPWpbZ10oZSkpfHwoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZyxtYXRjaGVzOmV9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtpZighYylicmVha31yZXR1cm4gYj9oLmxlbmd0aDpoP2dhLmVycm9yKGEpOnooYSxpKS5zbGljZSgwKX07ZnVuY3Rpb24gc2EoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aCxkPVwiXCI7YjxjO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHRhKGEsYixjKXt2YXIgZD1iLmRpcixlPWIubmV4dCxmPWV8fGQsZz1jJiZcInBhcmVudE5vZGVcIj09PWYsaD14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGUpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZylyZXR1cm4gYShiLGMsZSk7cmV0dXJuITF9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbT1bdyxoXTtpZihpKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxnKSYmYShiLGMsaSkpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGcpaWYobD1iW3VdfHwoYlt1XT17fSksaz1sW2IudW5pcXVlSURdfHwobFtiLnVuaXF1ZUlEXT17fSksZSYmZT09PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSliPWJbZF18fGI7ZWxzZXtpZigoaj1rW2ZdKSYmalswXT09PXcmJmpbMV09PT1oKXJldHVybiBtWzJdPWpbMl07aWYoa1tmXT1tLG1bMl09YShiLGMsaSkpcmV0dXJuITB9cmV0dXJuITF9fWZ1bmN0aW9uIHVhKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHZhKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspZ2EoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHdhKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2g8aTtoKyspKGY9YVtoXSkmJihjJiYhYyhmLGQsZSl8fChnLnB1c2goZiksaiYmYi5wdXNoKGgpKSk7cmV0dXJuIGd9ZnVuY3Rpb24geGEoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9eGEoZCkpLGUmJiFlW3VdJiYoZT14YShlLGYpKSxpYShmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx2YShifHxcIipcIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOndhKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj13YShyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/SShmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9d2Eocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkcuYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHlhKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbXCIgXCJdLGk9Zz8xOjAsaz10YShmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9dGEoZnVuY3Rpb24oYSl7cmV0dXJuIEkoYixhKT4tMX0saCwhMCksbT1bZnVuY3Rpb24oYSxjLGQpe3ZhciBlPSFnJiYoZHx8YyE9PWopfHwoKGI9Yykubm9kZVR5cGU/ayhhLGMsZCk6bChhLGMsZCkpO3JldHVybiBiPW51bGwsZX1dO2k8ZjtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bdGEodWEobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7ZTxmO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHhhKGk+MSYmdWEobSksaT4xJiZzYShhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOlwiIFwiPT09YVtpLTJdLnR5cGU/XCIqXCI6XCJcIn0pKS5yZXBsYWNlKFAsXCIkMVwiKSxjLGk8ZSYmeWEoYS5zbGljZShpLGUpKSxlPGYmJnlhKGE9YS5zbGljZShlKSksZTxmJiZzYShhKSl9bS5wdXNoKGMpfXJldHVybiB1YShtKX1mdW5jdGlvbiB6YShhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxvLHEscj0wLHM9XCIwXCIsdD1mJiZbXSx1PVtdLHY9aix4PWZ8fGUmJmQuZmluZC5UQUcoXCIqXCIsaykseT13Kz1udWxsPT12PzE6TWF0aC5yYW5kb20oKXx8LjEsej14Lmxlbmd0aDtmb3IoayYmKGo9Zz09PW58fGd8fGspO3MhPT16JiZudWxsIT0obD14W3NdKTtzKyspe2lmKGUmJmwpe289MCxnfHxsLm93bmVyRG9jdW1lbnQ9PT1ufHwobShsKSxoPSFwKTt3aGlsZShxPWFbbysrXSlpZihxKGwsZ3x8bixoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXkpfWMmJigobD0hcSYmbCkmJnItLSxmJiZ0LnB1c2gobCkpfWlmKHIrPXMsYyYmcyE9PXIpe289MDt3aGlsZShxPWJbbysrXSlxKHQsdSxnLGgpO2lmKGYpe2lmKHI+MCl3aGlsZShzLS0pdFtzXXx8dVtzXXx8KHVbc109RS5jYWxsKGkpKTt1PXdhKHUpfUcuYXBwbHkoaSx1KSxrJiYhZiYmdS5sZW5ndGg+MCYmcitiLmxlbmd0aD4xJiZnYS51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz15LGo9diksdH07cmV0dXJuIGM/aWEoZik6Zn1yZXR1cm4gaD1nYS5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthK1wiIFwiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj15YShiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEsemEoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWdhLnNlbGVjdD1mdW5jdGlvbihhLGIsYyxlKXt2YXIgZixpLGosayxsLG09XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYSxuPSFlJiZnKGE9bS5zZWxlY3Rvcnx8YSk7aWYoYz1jfHxbXSwxPT09bi5sZW5ndGgpe2lmKGk9blswXT1uWzBdLnNsaWNlKDApLGkubGVuZ3RoPjImJlwiSURcIj09PShqPWlbMF0pLnR5cGUmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2lbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChqLm1hdGNoZXNbMF0ucmVwbGFjZShfLGFhKSxiKXx8W10pWzBdLCFiKXJldHVybiBjO20mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGkuc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWY9Vi5uZWVkc0NvbnRleHQudGVzdChhKT8wOmkubGVuZ3RoO3doaWxlKGYtLSl7aWYoaj1pW2ZdLGQucmVsYXRpdmVbaz1qLnR5cGVdKWJyZWFrO2lmKChsPWQuZmluZFtrXSkmJihlPWwoai5tYXRjaGVzWzBdLnJlcGxhY2UoXyxhYSksJC50ZXN0KGlbMF0udHlwZSkmJnFhKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoaS5zcGxpY2UoZiwxKSxhPWUubGVuZ3RoJiZzYShpKSwhYSlyZXR1cm4gRy5hcHBseShjLGUpLGM7YnJlYWt9fX1yZXR1cm4obXx8aChhLG4pKShlLGIsIXAsYywhYnx8JC50ZXN0KGEpJiZxYShiLnBhcmVudE5vZGUpfHxiKSxjfSxjLnNvcnRTdGFibGU9dS5zcGxpdChcIlwiKS5zb3J0KEIpLmpvaW4oXCJcIik9PT11LGMuZGV0ZWN0RHVwbGljYXRlcz0hIWwsbSgpLGMuc29ydERldGFjaGVkPWphKGZ1bmN0aW9uKGEpe3JldHVybiAxJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24obi5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIikpfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGEgaHJlZj0nIyc+PC9hPlwiLFwiI1wiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIil9KXx8a2EoXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsZnVuY3Rpb24oYSxiLGMpe2lmKCFjKXJldHVybiBhLmdldEF0dHJpYnV0ZShiLFwidHlwZVwiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmphKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxpbnB1dC8+XCIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJcIiksXCJcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKX0pfHxrYShcInZhbHVlXCIsZnVuY3Rpb24oYSxiLGMpe2lmKCFjJiZcImlucHV0XCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuIGEuZGVmYXVsdFZhbHVlfSksamEoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIil9KXx8a2EoSixmdW5jdGlvbihhLGIsYyl7dmFyIGQ7aWYoIWMpcmV0dXJuIGFbYl09PT0hMD9iLnRvTG93ZXJDYXNlKCk6KGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZC5zcGVjaWZpZWQ/ZC52YWx1ZTpudWxsfSksZ2F9KGEpO3IuZmluZD14LHIuZXhwcj14LnNlbGVjdG9ycyxyLmV4cHJbXCI6XCJdPXIuZXhwci5wc2V1ZG9zLHIudW5pcXVlU29ydD1yLnVuaXF1ZT14LnVuaXF1ZVNvcnQsci50ZXh0PXguZ2V0VGV4dCxyLmlzWE1MRG9jPXguaXNYTUwsci5jb250YWlucz14LmNvbnRhaW5zLHIuZXNjYXBlU2VsZWN0b3I9eC5lc2NhcGU7dmFyIHk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9dm9pZCAwIT09Yzt3aGlsZSgoYT1hW2JdKSYmOSE9PWEubm9kZVR5cGUpaWYoMT09PWEubm9kZVR5cGUpe2lmKGUmJnIoYSkuaXMoYykpYnJlYWs7ZC5wdXNoKGEpfXJldHVybiBkfSx6PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7YT1hLm5leHRTaWJsaW5nKTE9PT1hLm5vZGVUeXBlJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfSxBPXIuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsQj0vXjwoW2Etel1bXlxcL1xcMD46XFx4MjBcXHRcXHJcXG5cXGZdKilbXFx4MjBcXHRcXHJcXG5cXGZdKlxcLz8+KD86PFxcL1xcMT58KSQvaSxDPS9eLlteOiNcXFtcXC4sXSokLztmdW5jdGlvbiBEKGEsYixjKXtyZXR1cm4gci5pc0Z1bmN0aW9uKGIpP3IuZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pOmIubm9kZVR5cGU/ci5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1iIT09Y30pOlwic3RyaW5nXCIhPXR5cGVvZiBiP3IuZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBpLmNhbGwoYixhKT4tMSE9PWN9KTpDLnRlc3QoYik/ci5maWx0ZXIoYixhLGMpOihiPXIuZmlsdGVyKGIsYSksci5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGkuY2FsbChiLGEpPi0xIT09YyYmMT09PWEubm9kZVR5cGV9KSl9ci5maWx0ZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbMF07cmV0dXJuIGMmJihhPVwiOm5vdChcIithK1wiKVwiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP3IuZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106ci5maW5kLm1hdGNoZXMoYSxyLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LHIuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZD10aGlzLmxlbmd0aCxlPXRoaXM7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIHRoaXMucHVzaFN0YWNrKHIoYSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGI9MDtiPGQ7YisrKWlmKHIuY29udGFpbnMoZVtiXSx0aGlzKSlyZXR1cm4hMH0pKTtmb3IoYz10aGlzLnB1c2hTdGFjayhbXSksYj0wO2I8ZDtiKyspci5maW5kKGEsZVtiXSxjKTtyZXR1cm4gZD4xP3IudW5pcXVlU29ydChjKTpjfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKEQodGhpcyxhfHxbXSwhMSkpfSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKEQodGhpcyxhfHxbXSwhMCkpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIUQodGhpcyxcInN0cmluZ1wiPT10eXBlb2YgYSYmQS50ZXN0KGEpP3IoYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgRSxGPS9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSspKSQvLEc9ci5mbi5pbml0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZSxmO2lmKCFhKXJldHVybiB0aGlzO2lmKGM9Y3x8RSxcInN0cmluZ1wiPT10eXBlb2YgYSl7aWYoZT1cIjxcIj09PWFbMF0mJlwiPlwiPT09YVthLmxlbmd0aC0xXSYmYS5sZW5ndGg+PTM/W251bGwsYSxudWxsXTpGLmV4ZWMoYSksIWV8fCFlWzFdJiZiKXJldHVybiFifHxiLmpxdWVyeT8oYnx8YykuZmluZChhKTp0aGlzLmNvbnN0cnVjdG9yKGIpLmZpbmQoYSk7aWYoZVsxXSl7aWYoYj1iIGluc3RhbmNlb2Ygcj9iWzBdOmIsci5tZXJnZSh0aGlzLHIucGFyc2VIVE1MKGVbMV0sYiYmYi5ub2RlVHlwZT9iLm93bmVyRG9jdW1lbnR8fGI6ZCwhMCkpLEIudGVzdChlWzFdKSYmci5pc1BsYWluT2JqZWN0KGIpKWZvcihlIGluIGIpci5pc0Z1bmN0aW9uKHRoaXNbZV0pP3RoaXNbZV0oYltlXSk6dGhpcy5hdHRyKGUsYltlXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGY9ZC5nZXRFbGVtZW50QnlJZChlWzJdKSxmJiYodGhpc1swXT1mLHRoaXMubGVuZ3RoPTEpLHRoaXN9cmV0dXJuIGEubm9kZVR5cGU/KHRoaXNbMF09YSx0aGlzLmxlbmd0aD0xLHRoaXMpOnIuaXNGdW5jdGlvbihhKT92b2lkIDAhPT1jLnJlYWR5P2MucmVhZHkoYSk6YShyKTpyLm1ha2VBcnJheShhLHRoaXMpfTtHLnByb3RvdHlwZT1yLmZuLEU9cihkKTt2YXIgSD0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxJPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O3IuZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oYSl7dmFyIGI9cihhLHRoaXMpLGM9Yi5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTxjO2ErKylpZihyLmNvbnRhaW5zKHRoaXMsYlthXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MCxlPXRoaXMubGVuZ3RoLGY9W10sZz1cInN0cmluZ1wiIT10eXBlb2YgYSYmcihhKTtpZighQS50ZXN0KGEpKWZvcig7ZDxlO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJnIuZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9yLnVuaXF1ZVNvcnQoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhP1wic3RyaW5nXCI9PXR5cGVvZiBhP2kuY2FsbChyKGEpLHRoaXNbMF0pOmkuY2FsbCh0aGlzLGEuanF1ZXJ5P2FbMF06YSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soci51bmlxdWVTb3J0KHIubWVyZ2UodGhpcy5nZXQoKSxyKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEooYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfXIuZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4geShhLFwicGFyZW50Tm9kZVwiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4geShhLFwicGFyZW50Tm9kZVwiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBKKGEsXCJuZXh0U2libGluZ1wiKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gSihhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiB5KGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4geShhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB5KGEsXCJuZXh0U2libGluZ1wiLGMpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB5KGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIHooKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiB6KGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8ci5tZXJnZShbXSxhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtyLmZuW2FdPWZ1bmN0aW9uKGMsZCl7dmFyIGU9ci5tYXAodGhpcyxiLGMpO3JldHVyblwiVW50aWxcIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiZcInN0cmluZ1wiPT10eXBlb2YgZCYmKGU9ci5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKElbYV18fHIudW5pcXVlU29ydChlKSxILnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgSz0vW15cXHgyMFxcdFxcclxcblxcZl0rL2c7ZnVuY3Rpb24gTChhKXt2YXIgYj17fTtyZXR1cm4gci5lYWNoKGEubWF0Y2goSyl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9ci5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT1cInN0cmluZ1wiPT10eXBlb2YgYT9MKGEpOnIuZXh0ZW5kKHt9LGEpO3ZhciBiLGMsZCxlLGY9W10sZz1bXSxoPS0xLGk9ZnVuY3Rpb24oKXtmb3IoZT1hLm9uY2UsZD1iPSEwO2cubGVuZ3RoO2g9LTEpe2M9Zy5zaGlmdCgpO3doaWxlKCsraDxmLmxlbmd0aClmW2hdLmFwcGx5KGNbMF0sY1sxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSYmKGg9Zi5sZW5ndGgsYz0hMSl9YS5tZW1vcnl8fChjPSExKSxiPSExLGUmJihmPWM/W106XCJcIil9LGo9e2FkZDpmdW5jdGlvbigpe3JldHVybiBmJiYoYyYmIWImJihoPWYubGVuZ3RoLTEsZy5wdXNoKGMpKSxmdW5jdGlvbiBkKGIpe3IuZWFjaChiLGZ1bmN0aW9uKGIsYyl7ci5pc0Z1bmN0aW9uKGMpP2EudW5pcXVlJiZqLmhhcyhjKXx8Zi5wdXNoKGMpOmMmJmMubGVuZ3RoJiZcInN0cmluZ1wiIT09ci50eXBlKGMpJiZkKGMpfSl9KGFyZ3VtZW50cyksYyYmIWImJmkoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHIuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1yLmluQXJyYXkoYixmLGMpKT4tMSlmLnNwbGljZShjLDEpLGM8PWgmJmgtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9yLmluQXJyYXkoYSxmKT4tMTpmLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBmJiYoZj1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sZj1jPVwiXCIsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hZn0sbG9jazpmdW5jdGlvbigpe3JldHVybiBlPWc9W10sY3x8Ynx8KGY9Yz1cIlwiKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWV9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGV8fChjPWN8fFtdLGM9W2EsYy5zbGljZT9jLnNsaWNlKCk6Y10sZy5wdXNoKGMpLGJ8fGkoKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBqLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZH19O3JldHVybiBqfTtmdW5jdGlvbiBNKGEpe3JldHVybiBhfWZ1bmN0aW9uIE4oYSl7dGhyb3cgYX1mdW5jdGlvbiBPKGEsYixjKXt2YXIgZDt0cnl7YSYmci5pc0Z1bmN0aW9uKGQ9YS5wcm9taXNlKT9kLmNhbGwoYSkuZG9uZShiKS5mYWlsKGMpOmEmJnIuaXNGdW5jdGlvbihkPWEudGhlbik/ZC5jYWxsKGEsYixjKTpiLmNhbGwodm9pZCAwLGEpfWNhdGNoKGEpe2MuY2FsbCh2b2lkIDAsYSl9fXIuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihiKXt2YXIgYz1bW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLHIuQ2FsbGJhY2tzKFwibWVtb3J5XCIpLHIuQ2FsbGJhY2tzKFwibWVtb3J5XCIpLDJdLFtcInJlc29sdmVcIixcImRvbmVcIixyLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksMCxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLHIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksci5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwxLFwicmVqZWN0ZWRcIl1dLGQ9XCJwZW5kaW5nXCIsZT17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gZH0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGYuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSxcImNhdGNoXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIGUudGhlbihudWxsLGEpfSxwaXBlOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiByLkRlZmVycmVkKGZ1bmN0aW9uKGIpe3IuZWFjaChjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9ci5pc0Z1bmN0aW9uKGFbZFs0XV0pJiZhW2RbNF1dO2ZbZFsxXV0oZnVuY3Rpb24oKXt2YXIgYT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZyLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5wcm9ncmVzcyhiLm5vdGlmeSkuZG9uZShiLnJlc29sdmUpLmZhaWwoYi5yZWplY3QpOmJbZFswXStcIldpdGhcIl0odGhpcyxlP1thXTphcmd1bWVudHMpfSl9KSxhPW51bGx9KS5wcm9taXNlKCl9LHRoZW46ZnVuY3Rpb24oYixkLGUpe3ZhciBmPTA7ZnVuY3Rpb24gZyhiLGMsZCxlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaD10aGlzLGk9YXJndW1lbnRzLGo9ZnVuY3Rpb24oKXt2YXIgYSxqO2lmKCEoYjxmKSl7aWYoYT1kLmFwcGx5KGgsaSksYT09PWMucHJvbWlzZSgpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb25cIik7aj1hJiYoXCJvYmplY3RcIj09dHlwZW9mIGF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGEpJiZhLnRoZW4sci5pc0Z1bmN0aW9uKGopP2U/ai5jYWxsKGEsZyhmLGMsTSxlKSxnKGYsYyxOLGUpKTooZisrLGouY2FsbChhLGcoZixjLE0sZSksZyhmLGMsTixlKSxnKGYsYyxNLGMubm90aWZ5V2l0aCkpKTooZCE9PU0mJihoPXZvaWQgMCxpPVthXSksKGV8fGMucmVzb2x2ZVdpdGgpKGgsaSkpfX0saz1lP2o6ZnVuY3Rpb24oKXt0cnl7aigpfWNhdGNoKGEpe3IuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayYmci5EZWZlcnJlZC5leGNlcHRpb25Ib29rKGEsay5zdGFja1RyYWNlKSxiKzE+PWYmJihkIT09TiYmKGg9dm9pZCAwLGk9W2FdKSxjLnJlamVjdFdpdGgoaCxpKSl9fTtiP2soKTooci5EZWZlcnJlZC5nZXRTdGFja0hvb2smJihrLnN0YWNrVHJhY2U9ci5EZWZlcnJlZC5nZXRTdGFja0hvb2soKSksYS5zZXRUaW1lb3V0KGspKX19cmV0dXJuIHIuRGVmZXJyZWQoZnVuY3Rpb24oYSl7Y1swXVszXS5hZGQoZygwLGEsci5pc0Z1bmN0aW9uKGUpP2U6TSxhLm5vdGlmeVdpdGgpKSxjWzFdWzNdLmFkZChnKDAsYSxyLmlzRnVuY3Rpb24oYik/YjpNKSksY1syXVszXS5hZGQoZygwLGEsci5pc0Z1bmN0aW9uKGQpP2Q6TikpfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP3IuZXh0ZW5kKGEsZSk6ZX19LGY9e307cmV0dXJuIHIuZWFjaChjLGZ1bmN0aW9uKGEsYil7dmFyIGc9YlsyXSxoPWJbNV07ZVtiWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2Q9aH0sY1szLWFdWzJdLmRpc2FibGUsY1swXVsyXS5sb2NrKSxnLmFkZChiWzNdLmZpcmUpLGZbYlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZltiWzBdK1wiV2l0aFwiXSh0aGlzPT09Zj92b2lkIDA6dGhpcyxhcmd1bWVudHMpLHRoaXN9LGZbYlswXStcIldpdGhcIl09Zy5maXJlV2l0aH0pLGUucHJvbWlzZShmKSxiJiZiLmNhbGwoZixmKSxmfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPWFyZ3VtZW50cy5sZW5ndGgsYz1iLGQ9QXJyYXkoYyksZT1mLmNhbGwoYXJndW1lbnRzKSxnPXIuRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjKXtkW2FdPXRoaXMsZVthXT1hcmd1bWVudHMubGVuZ3RoPjE/Zi5jYWxsKGFyZ3VtZW50cyk6YywtLWJ8fGcucmVzb2x2ZVdpdGgoZCxlKX19O2lmKGI8PTEmJihPKGEsZy5kb25lKGgoYykpLnJlc29sdmUsZy5yZWplY3QpLFwicGVuZGluZ1wiPT09Zy5zdGF0ZSgpfHxyLmlzRnVuY3Rpb24oZVtjXSYmZVtjXS50aGVuKSkpcmV0dXJuIGcudGhlbigpO3doaWxlKGMtLSlPKGVbY10saChjKSxnLnJlamVjdCk7cmV0dXJuIGcucHJvbWlzZSgpfX0pO3ZhciBQPS9eKEV2YWx8SW50ZXJuYWx8UmFuZ2V8UmVmZXJlbmNlfFN5bnRheHxUeXBlfFVSSSlFcnJvciQvO3IuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihiLGMpe2EuY29uc29sZSYmYS5jb25zb2xlLndhcm4mJmImJlAudGVzdChiLm5hbWUpJiZhLmNvbnNvbGUud2FybihcImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246IFwiK2IubWVzc2FnZSxiLnN0YWNrLGMpfSxyLnJlYWR5RXhjZXB0aW9uPWZ1bmN0aW9uKGIpe2Euc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGJ9KX07dmFyIFE9ci5EZWZlcnJlZCgpO3IuZm4ucmVhZHk9ZnVuY3Rpb24oYSl7cmV0dXJuIFEudGhlbihhKVtcImNhdGNoXCJdKGZ1bmN0aW9uKGEpe3IucmVhZHlFeGNlcHRpb24oYSl9KSx0aGlzfSxyLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9yLnJlYWR5V2FpdCsrOnIucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tci5yZWFkeVdhaXQ6ci5pc1JlYWR5KXx8KHIuaXNSZWFkeT0hMCxhIT09ITAmJi0tci5yZWFkeVdhaXQ+MHx8US5yZXNvbHZlV2l0aChkLFtyXSkpfX0pLHIucmVhZHkudGhlbj1RLnRoZW47ZnVuY3Rpb24gUigpe2QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixSKSxcclxuYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLFIpLHIucmVhZHkoKX1cImNvbXBsZXRlXCI9PT1kLnJlYWR5U3RhdGV8fFwibG9hZGluZ1wiIT09ZC5yZWFkeVN0YXRlJiYhZC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGw/YS5zZXRUaW1lb3V0KHIucmVhZHkpOihkLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsUiksYS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLFIpKTt2YXIgUz1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKFwib2JqZWN0XCI9PT1yLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYylTKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLHIuaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChyKGEpLGMpfSkpLGIpKWZvcig7aDxpO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9LFQ9ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfHw5PT09YS5ub2RlVHlwZXx8ISthLm5vZGVUeXBlfTtmdW5jdGlvbiBVKCl7dGhpcy5leHBhbmRvPXIuZXhwYW5kbytVLnVpZCsrfVUudWlkPTEsVS5wcm90b3R5cGU9e2NhY2hlOmZ1bmN0aW9uKGEpe3ZhciBiPWFbdGhpcy5leHBhbmRvXTtyZXR1cm4gYnx8KGI9e30sVChhKSYmKGEubm9kZVR5cGU/YVt0aGlzLmV4cGFuZG9dPWI6T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsdGhpcy5leHBhbmRvLHt2YWx1ZTpiLGNvbmZpZ3VyYWJsZTohMH0pKSksYn0sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMuY2FjaGUoYSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZVtyLmNhbWVsQ2FzZShiKV09YztlbHNlIGZvcihkIGluIGIpZVtyLmNhbWVsQ2FzZShkKV09YltkXTtyZXR1cm4gZX0sZ2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHZvaWQgMD09PWI/dGhpcy5jYWNoZShhKTphW3RoaXMuZXhwYW5kb10mJmFbdGhpcy5leHBhbmRvXVtyLmNhbWVsQ2FzZShiKV19LGFjY2VzczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHZvaWQgMD09PWJ8fGImJlwic3RyaW5nXCI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jP3RoaXMuZ2V0KGEsYik6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9YVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PWQpe2lmKHZvaWQgMCE9PWIpe3IuaXNBcnJheShiKT9iPWIubWFwKHIuY2FtZWxDYXNlKTooYj1yLmNhbWVsQ2FzZShiKSxiPWIgaW4gZD9bYl06Yi5tYXRjaChLKXx8W10pLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWRlbGV0ZSBkW2JbY11dfSh2b2lkIDA9PT1ifHxyLmlzRW1wdHlPYmplY3QoZCkpJiYoYS5ub2RlVHlwZT9hW3RoaXMuZXhwYW5kb109dm9pZCAwOmRlbGV0ZSBhW3RoaXMuZXhwYW5kb10pfX0saGFzRGF0YTpmdW5jdGlvbihhKXt2YXIgYj1hW3RoaXMuZXhwYW5kb107cmV0dXJuIHZvaWQgMCE9PWImJiFyLmlzRW1wdHlPYmplY3QoYil9fTt2YXIgVj1uZXcgVSxXPW5ldyBVLFg9L14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLFk9L1tBLVpdL2c7ZnVuY3Rpb24gWihhKXtyZXR1cm5cInRydWVcIj09PWF8fFwiZmFsc2VcIiE9PWEmJihcIm51bGxcIj09PWE/bnVsbDphPT09K2ErXCJcIj8rYTpYLnRlc3QoYSk/SlNPTi5wYXJzZShhKTphKX1mdW5jdGlvbiAkKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPVwiZGF0YS1cIitiLnJlcGxhY2UoWSxcIi0kJlwiKS50b0xvd2VyQ2FzZSgpLGM9YS5nZXRBdHRyaWJ1dGUoZCksXCJzdHJpbmdcIj09dHlwZW9mIGMpe3RyeXtjPVooYyl9Y2F0Y2goZSl7fVcuc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfXIuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBXLmhhc0RhdGEoYSl8fFYuaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIFcuYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1cucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gVi5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe1YucmVtb3ZlKGEsYil9fSksci5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1XLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIVYuZ2V0KGYsXCJoYXNEYXRhQXR0cnNcIikpKXtjPWcubGVuZ3RoO3doaWxlKGMtLSlnW2NdJiYoZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZihcImRhdGEtXCIpJiYoZD1yLmNhbWVsQ2FzZShkLnNsaWNlKDUpKSwkKGYsZCxlW2RdKSkpO1Yuc2V0KGYsXCJoYXNEYXRhQXR0cnNcIiwhMCl9cmV0dXJuIGV9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Vy5zZXQodGhpcyxhKX0pOlModGhpcyxmdW5jdGlvbihiKXt2YXIgYztpZihmJiZ2b2lkIDA9PT1iKXtpZihjPVcuZ2V0KGYsYSksdm9pZCAwIT09YylyZXR1cm4gYztpZihjPSQoZixhKSx2b2lkIDAhPT1jKXJldHVybiBjfWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Vy5zZXQodGhpcyxhLGIpfSl9LG51bGwsYixhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMCl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1cucmVtb3ZlKHRoaXMsYSl9KX19KSxyLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGEpcmV0dXJuIGI9KGJ8fFwiZnhcIikrXCJxdWV1ZVwiLGQ9Vi5nZXQoYSxiKSxjJiYoIWR8fHIuaXNBcnJheShjKT9kPVYuYWNjZXNzKGEsYixyLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXX0sZGVxdWV1ZTpmdW5jdGlvbihhLGIpe2I9Ynx8XCJmeFwiO3ZhciBjPXIucXVldWUoYSxiKSxkPWMubGVuZ3RoLGU9Yy5zaGlmdCgpLGY9ci5fcXVldWVIb29rcyhhLGIpLGc9ZnVuY3Rpb24oKXtyLmRlcXVldWUoYSxiKX07XCJpbnByb2dyZXNzXCI9PT1lJiYoZT1jLnNoaWZ0KCksZC0tKSxlJiYoXCJmeFwiPT09YiYmYy51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxkZWxldGUgZi5zdG9wLGUuY2FsbChhLGcsZikpLCFkJiZmJiZmLmVtcHR5LmZpcmUoKX0sX3F1ZXVlSG9va3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iK1wicXVldWVIb29rc1wiO3JldHVybiBWLmdldChhLGMpfHxWLmFjY2VzcyhhLGMse2VtcHR5OnIuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIikuYWRkKGZ1bmN0aW9uKCl7Vi5yZW1vdmUoYSxbYitcInF1ZXVlXCIsY10pfSl9KX19KSxyLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0yO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9XCJmeFwiLGMtLSksYXJndW1lbnRzLmxlbmd0aDxjP3IucXVldWUodGhpc1swXSxhKTp2b2lkIDA9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9ci5xdWV1ZSh0aGlzLGEsYik7ci5fcXVldWVIb29rcyh0aGlzLGEpLFwiZnhcIj09PWEmJlwiaW5wcm9ncmVzc1wiIT09Y1swXSYmci5kZXF1ZXVlKHRoaXMsYSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ci5kZXF1ZXVlKHRoaXMsYSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD0xLGU9ci5EZWZlcnJlZCgpLGY9dGhpcyxnPXRoaXMubGVuZ3RoLGg9ZnVuY3Rpb24oKXstLWR8fGUucmVzb2x2ZVdpdGgoZixbZl0pfTtcInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYT1hfHxcImZ4XCI7d2hpbGUoZy0tKWM9Vi5nZXQoZltnXSxhK1wicXVldWVIb29rc1wiKSxjJiZjLmVtcHR5JiYoZCsrLGMuZW1wdHkuYWRkKGgpKTtyZXR1cm4gaCgpLGUucHJvbWlzZShiKX19KTt2YXIgXz0vWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLy5zb3VyY2UsYWE9bmV3IFJlZ0V4cChcIl4oPzooWystXSk9fCkoXCIrXytcIikoW2EteiVdKikkXCIsXCJpXCIpLGJhPVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxjYT1mdW5jdGlvbihhLGIpe3JldHVybiBhPWJ8fGEsXCJub25lXCI9PT1hLnN0eWxlLmRpc3BsYXl8fFwiXCI9PT1hLnN0eWxlLmRpc3BsYXkmJnIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpJiZcIm5vbmVcIj09PXIuY3NzKGEsXCJkaXNwbGF5XCIpfSxkYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07ZnVuY3Rpb24gZWEoYSxiLGMsZCl7dmFyIGUsZj0xLGc9MjAsaD1kP2Z1bmN0aW9uKCl7cmV0dXJuIGQuY3VyKCl9OmZ1bmN0aW9uKCl7cmV0dXJuIHIuY3NzKGEsYixcIlwiKX0saT1oKCksaj1jJiZjWzNdfHwoci5jc3NOdW1iZXJbYl0/XCJcIjpcInB4XCIpLGs9KHIuY3NzTnVtYmVyW2JdfHxcInB4XCIhPT1qJiYraSkmJmFhLmV4ZWMoci5jc3MoYSxiKSk7aWYoayYma1szXSE9PWope2o9anx8a1szXSxjPWN8fFtdLGs9K2l8fDE7ZG8gZj1mfHxcIi41XCIsay89ZixyLnN0eWxlKGEsYixrK2opO3doaWxlKGYhPT0oZj1oKCkvaSkmJjEhPT1mJiYtLWcpfXJldHVybiBjJiYoaz0ra3x8K2l8fDAsZT1jWzFdP2srKGNbMV0rMSkqY1syXTorY1syXSxkJiYoZC51bml0PWosZC5zdGFydD1rLGQuZW5kPWUpKSxlfXZhciBmYT17fTtmdW5jdGlvbiBnYShhKXt2YXIgYixjPWEub3duZXJEb2N1bWVudCxkPWEubm9kZU5hbWUsZT1mYVtkXTtyZXR1cm4gZT9lOihiPWMuYm9keS5hcHBlbmRDaGlsZChjLmNyZWF0ZUVsZW1lbnQoZCkpLGU9ci5jc3MoYixcImRpc3BsYXlcIiksYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLFwibm9uZVwiPT09ZSYmKGU9XCJibG9ja1wiKSxmYVtkXT1lLGUpfWZ1bmN0aW9uIGhhKGEsYil7Zm9yKHZhciBjLGQsZT1bXSxmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKWQ9YVtmXSxkLnN0eWxlJiYoYz1kLnN0eWxlLmRpc3BsYXksYj8oXCJub25lXCI9PT1jJiYoZVtmXT1WLmdldChkLFwiZGlzcGxheVwiKXx8bnVsbCxlW2ZdfHwoZC5zdHlsZS5kaXNwbGF5PVwiXCIpKSxcIlwiPT09ZC5zdHlsZS5kaXNwbGF5JiZjYShkKSYmKGVbZl09Z2EoZCkpKTpcIm5vbmVcIiE9PWMmJihlW2ZdPVwibm9uZVwiLFYuc2V0KGQsXCJkaXNwbGF5XCIsYykpKTtmb3IoZj0wO2Y8ZztmKyspbnVsbCE9ZVtmXSYmKGFbZl0uc3R5bGUuZGlzcGxheT1lW2ZdKTtyZXR1cm4gYX1yLmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbigpe3JldHVybiBoYSh0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBoYSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYT9hP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe2NhKHRoaXMpP3IodGhpcykuc2hvdygpOnIodGhpcykuaGlkZSgpfSl9fSk7dmFyIGlhPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLGphPS88KFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKykvaSxrYT0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGxhPXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX07bGEub3B0Z3JvdXA9bGEub3B0aW9uLGxhLnRib2R5PWxhLnRmb290PWxhLmNvbGdyb3VwPWxhLmNhcHRpb249bGEudGhlYWQsbGEudGg9bGEudGQ7ZnVuY3Rpb24gbWEoYSxiKXt2YXIgYztyZXR1cm4gYz1cInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGJ8fFwiKlwiKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHxcIipcIik6W10sdm9pZCAwPT09Ynx8YiYmci5ub2RlTmFtZShhLGIpP3IubWVyZ2UoW2FdLGMpOmN9ZnVuY3Rpb24gbmEoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspVi5zZXQoYVtjXSxcImdsb2JhbEV2YWxcIiwhYnx8Vi5nZXQoYltjXSxcImdsb2JhbEV2YWxcIikpfXZhciBvYT0vPHwmIz9cXHcrOy87ZnVuY3Rpb24gcGEoYSxiLGMsZCxlKXtmb3IodmFyIGYsZyxoLGksaixrLGw9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbT1bXSxuPTAsbz1hLmxlbmd0aDtuPG87bisrKWlmKGY9YVtuXSxmfHwwPT09ZilpZihcIm9iamVjdFwiPT09ci50eXBlKGYpKXIubWVyZ2UobSxmLm5vZGVUeXBlP1tmXTpmKTtlbHNlIGlmKG9hLnRlc3QoZikpe2c9Z3x8bC5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGg9KGphLmV4ZWMoZil8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpLGk9bGFbaF18fGxhLl9kZWZhdWx0LGcuaW5uZXJIVE1MPWlbMV0rci5odG1sUHJlZmlsdGVyKGYpK2lbMl0saz1pWzBdO3doaWxlKGstLSlnPWcubGFzdENoaWxkO3IubWVyZ2UobSxnLmNoaWxkTm9kZXMpLGc9bC5maXJzdENoaWxkLGcudGV4dENvbnRlbnQ9XCJcIn1lbHNlIG0ucHVzaChiLmNyZWF0ZVRleHROb2RlKGYpKTtsLnRleHRDb250ZW50PVwiXCIsbj0wO3doaWxlKGY9bVtuKytdKWlmKGQmJnIuaW5BcnJheShmLGQpPi0xKWUmJmUucHVzaChmKTtlbHNlIGlmKGo9ci5jb250YWlucyhmLm93bmVyRG9jdW1lbnQsZiksZz1tYShsLmFwcGVuZENoaWxkKGYpLFwic2NyaXB0XCIpLGomJm5hKGcpLGMpe2s9MDt3aGlsZShmPWdbaysrXSlrYS50ZXN0KGYudHlwZXx8XCJcIikmJmMucHVzaChmKX1yZXR1cm4gbH0hZnVuY3Rpb24oKXt2YXIgYT1kLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxiPWEuYXBwZW5kQ2hpbGQoZC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxjPWQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Muc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIiksYy5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsXCJjaGVja2VkXCIpLGMuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwidFwiKSxiLmFwcGVuZENoaWxkKGMpLG8uY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD1cIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIixvLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIHFhPWQuZG9jdW1lbnRFbGVtZW50LHJhPS9ea2V5LyxzYT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sdGE9L14oW14uXSopKD86XFwuKC4rKXwpLztmdW5jdGlvbiB1YSgpe3JldHVybiEwfWZ1bmN0aW9uIHZhKCl7cmV0dXJuITF9ZnVuY3Rpb24gd2EoKXt0cnl7cmV0dXJuIGQuYWN0aXZlRWxlbWVudH1jYXRjaChhKXt9fWZ1bmN0aW9uIHhhKGEsYixjLGQsZSxmKXt2YXIgZyxoO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBiKXtcInN0cmluZ1wiIT10eXBlb2YgYyYmKGQ9ZHx8YyxjPXZvaWQgMCk7Zm9yKGggaW4gYil4YShhLGgsYyxkLGJbaF0sZik7cmV0dXJuIGF9aWYobnVsbD09ZCYmbnVsbD09ZT8oZT1jLGQ9Yz12b2lkIDApOm51bGw9PWUmJihcInN0cmluZ1wiPT10eXBlb2YgYz8oZT1kLGQ9dm9pZCAwKTooZT1kLGQ9YyxjPXZvaWQgMCkpLGU9PT0hMSllPXZhO2Vsc2UgaWYoIWUpcmV0dXJuIGE7cmV0dXJuIDE9PT1mJiYoZz1lLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHIoKS5vZmYoYSksZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUuZ3VpZD1nLmd1aWR8fChnLmd1aWQ9ci5ndWlkKyspKSxhLmVhY2goZnVuY3Rpb24oKXtyLmV2ZW50LmFkZCh0aGlzLGIsZSxkLGMpfSl9ci5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbixvLHAscT1WLmdldChhKTtpZihxKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxlJiZyLmZpbmQubWF0Y2hlc1NlbGVjdG9yKHFhLGUpLGMuZ3VpZHx8KGMuZ3VpZD1yLmd1aWQrKyksKGk9cS5ldmVudHMpfHwoaT1xLmV2ZW50cz17fSksKGc9cS5oYW5kbGUpfHwoZz1xLmhhbmRsZT1mdW5jdGlvbihiKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgciYmci5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/ci5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8XCJcIikubWF0Y2goSyl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPXRhLmV4ZWMoYltqXSl8fFtdLG49cD1oWzFdLG89KGhbMl18fFwiXCIpLnNwbGl0KFwiLlwiKS5zb3J0KCksbiYmKGw9ci5ldmVudC5zcGVjaWFsW25dfHx7fSxuPShlP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxuLGw9ci5ldmVudC5zcGVjaWFsW25dfHx7fSxrPXIuZXh0ZW5kKHt0eXBlOm4sb3JpZ1R5cGU6cCxkYXRhOmQsaGFuZGxlcjpjLGd1aWQ6Yy5ndWlkLHNlbGVjdG9yOmUsbmVlZHNDb250ZXh0OmUmJnIuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChlKSxuYW1lc3BhY2U6by5qb2luKFwiLlwiKX0sZiksKG09aVtuXSl8fChtPWlbbl09W10sbS5kZWxlZ2F0ZUNvdW50PTAsbC5zZXR1cCYmbC5zZXR1cC5jYWxsKGEsZCxvLGcpIT09ITF8fGEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKG4sZykpLGwuYWRkJiYobC5hZGQuY2FsbChhLGspLGsuaGFuZGxlci5ndWlkfHwoay5oYW5kbGVyLmd1aWQ9Yy5ndWlkKSksZT9tLnNwbGljZShtLmRlbGVnYXRlQ291bnQrKywwLGspOm0ucHVzaChrKSxyLmV2ZW50Lmdsb2JhbFtuXT0hMCl9fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnLGgsaSxqLGssbCxtLG4sbyxwLHE9Vi5oYXNEYXRhKGEpJiZWLmdldChhKTtpZihxJiYoaT1xLmV2ZW50cykpe2I9KGJ8fFwiXCIpLm1hdGNoKEspfHxbXCJcIl0saj1iLmxlbmd0aDt3aGlsZShqLS0paWYoaD10YS5leGVjKGJbal0pfHxbXSxuPXA9aFsxXSxvPShoWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG4pe2w9ci5ldmVudC5zcGVjaWFsW25dfHx7fSxuPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxuLG09aVtuXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrby5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIiksZz1mPW0ubGVuZ3RoO3doaWxlKGYtLSlrPW1bZl0sIWUmJnAhPT1rLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1rLmd1aWR8fGgmJiFoLnRlc3Qoay5uYW1lc3BhY2UpfHxkJiZkIT09ay5zZWxlY3RvciYmKFwiKipcIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEsbyxxLmhhbmRsZSkhPT0hMXx8ci5yZW1vdmVFdmVudChhLG4scS5oYW5kbGUpLGRlbGV0ZSBpW25dKX1lbHNlIGZvcihuIGluIGkpci5ldmVudC5yZW1vdmUoYSxuK2Jbal0sYyxkLCEwKTtyLmlzRW1wdHlPYmplY3QoaSkmJlYucmVtb3ZlKGEsXCJoYW5kbGUgZXZlbnRzXCIpfX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dmFyIGI9ci5ldmVudC5maXgoYSksYyxkLGUsZixnLGgsaT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksaj0oVi5nZXQodGhpcyxcImV2ZW50c1wiKXx8e30pW2IudHlwZV18fFtdLGs9ci5ldmVudC5zcGVjaWFsW2IudHlwZV18fHt9O2ZvcihpWzBdPWIsYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspaVtjXT1hcmd1bWVudHNbY107aWYoYi5kZWxlZ2F0ZVRhcmdldD10aGlzLCFrLnByZURpc3BhdGNofHxrLnByZURpc3BhdGNoLmNhbGwodGhpcyxiKSE9PSExKXtoPXIuZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGIsaiksYz0wO3doaWxlKChmPWhbYysrXSkmJiFiLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2IuY3VycmVudFRhcmdldD1mLmVsZW0sZD0wO3doaWxlKChnPWYuaGFuZGxlcnNbZCsrXSkmJiFiLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpYi5ybmFtZXNwYWNlJiYhYi5ybmFtZXNwYWNlLnRlc3QoZy5uYW1lc3BhY2UpfHwoYi5oYW5kbGVPYmo9ZyxiLmRhdGE9Zy5kYXRhLGU9KChyLmV2ZW50LnNwZWNpYWxbZy5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGcuaGFuZGxlcikuYXBwbHkoZi5lbGVtLGkpLHZvaWQgMCE9PWUmJihiLnJlc3VsdD1lKT09PSExJiYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gay5wb3N0RGlzcGF0Y2gmJmsucG9zdERpc3BhdGNoLmNhbGwodGhpcyxiKSxiLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZyxoPVtdLGk9Yi5kZWxlZ2F0ZUNvdW50LGo9YS50YXJnZXQ7aWYoaSYmai5ub2RlVHlwZSYmIShcImNsaWNrXCI9PT1hLnR5cGUmJmEuYnV0dG9uPj0xKSlmb3IoO2ohPT10aGlzO2o9ai5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT1qLm5vZGVUeXBlJiYoXCJjbGlja1wiIT09YS50eXBlfHxqLmRpc2FibGVkIT09ITApKXtmb3IoZj1bXSxnPXt9LGM9MDtjPGk7YysrKWQ9YltjXSxlPWQuc2VsZWN0b3IrXCIgXCIsdm9pZCAwPT09Z1tlXSYmKGdbZV09ZC5uZWVkc0NvbnRleHQ/cihlLHRoaXMpLmluZGV4KGopPi0xOnIuZmluZChlLHRoaXMsbnVsbCxbal0pLmxlbmd0aCksZ1tlXSYmZi5wdXNoKGQpO2YubGVuZ3RoJiZoLnB1c2goe2VsZW06aixoYW5kbGVyczpmfSl9cmV0dXJuIGo9dGhpcyxpPGIubGVuZ3RoJiZoLnB1c2goe2VsZW06aixoYW5kbGVyczpiLnNsaWNlKGkpfSksaH0sYWRkUHJvcDpmdW5jdGlvbihhLGIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLkV2ZW50LnByb3RvdHlwZSxhLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ci5pc0Z1bmN0aW9uKGIpP2Z1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXJldHVybiBiKHRoaXMub3JpZ2luYWxFdmVudCl9OmZ1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXJldHVybiB0aGlzLm9yaWdpbmFsRXZlbnRbYV19LHNldDpmdW5jdGlvbihiKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxhLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpifSl9fSl9LGZpeDpmdW5jdGlvbihhKXtyZXR1cm4gYVtyLmV4cGFuZG9dP2E6bmV3IHIuRXZlbnQoYSl9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXMhPT13YSgpJiZ0aGlzLmZvY3VzKXJldHVybiB0aGlzLmZvY3VzKCksITF9LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKHRoaXM9PT13YSgpJiZ0aGlzLmJsdXIpcmV0dXJuIHRoaXMuYmx1cigpLCExfSxkZWxlZ2F0ZVR5cGU6XCJmb2N1c291dFwifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe2lmKFwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmdGhpcy5jbGljayYmci5ub2RlTmFtZSh0aGlzLFwiaW5wdXRcIikpcmV0dXJuIHRoaXMuY2xpY2soKSwhMX0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHIubm9kZU5hbWUoYS50YXJnZXQsXCJhXCIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX19LHIucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYyl9LHIuRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHIuRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP3VhOnZhLHRoaXMudGFyZ2V0PWEudGFyZ2V0JiYzPT09YS50YXJnZXQubm9kZVR5cGU/YS50YXJnZXQucGFyZW50Tm9kZTphLnRhcmdldCx0aGlzLmN1cnJlbnRUYXJnZXQ9YS5jdXJyZW50VGFyZ2V0LHRoaXMucmVsYXRlZFRhcmdldD1hLnJlbGF0ZWRUYXJnZXQpOnRoaXMudHlwZT1hLGImJnIuZXh0ZW5kKHRoaXMsYiksdGhpcy50aW1lU3RhbXA9YSYmYS50aW1lU3RhbXB8fHIubm93KCksdm9pZCh0aGlzW3IuZXhwYW5kb109ITApKTpuZXcgci5FdmVudChhLGIpfSxyLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6ci5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6dmEsaXNQcm9wYWdhdGlvblN0b3BwZWQ6dmEsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6dmEsaXNTaW11bGF0ZWQ6ITEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9dWEsYSYmIXRoaXMuaXNTaW11bGF0ZWQmJmEucHJldmVudERlZmF1bHQoKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9dWEsYSYmIXRoaXMuaXNTaW11bGF0ZWQmJmEuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPXVhLGEmJiF0aGlzLmlzU2ltdWxhdGVkJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxyLmVhY2goe2FsdEtleTohMCxidWJibGVzOiEwLGNhbmNlbGFibGU6ITAsY2hhbmdlZFRvdWNoZXM6ITAsY3RybEtleTohMCxkZXRhaWw6ITAsZXZlbnRQaGFzZTohMCxtZXRhS2V5OiEwLHBhZ2VYOiEwLHBhZ2VZOiEwLHNoaWZ0S2V5OiEwLHZpZXc6ITAsXCJjaGFyXCI6ITAsY2hhckNvZGU6ITAsa2V5OiEwLGtleUNvZGU6ITAsYnV0dG9uOiEwLGJ1dHRvbnM6ITAsY2xpZW50WDohMCxjbGllbnRZOiEwLG9mZnNldFg6ITAsb2Zmc2V0WTohMCxwb2ludGVySWQ6ITAscG9pbnRlclR5cGU6ITAsc2NyZWVuWDohMCxzY3JlZW5ZOiEwLHRhcmdldFRvdWNoZXM6ITAsdG9FbGVtZW50OiEwLHRvdWNoZXM6ITAsd2hpY2g6ZnVuY3Rpb24oYSl7dmFyIGI9YS5idXR0b247cmV0dXJuIG51bGw9PWEud2hpY2gmJnJhLnRlc3QoYS50eXBlKT9udWxsIT1hLmNoYXJDb2RlP2EuY2hhckNvZGU6YS5rZXlDb2RlOiFhLndoaWNoJiZ2b2lkIDAhPT1iJiZzYS50ZXN0KGEudHlwZSk/MSZiPzE6MiZiPzM6NCZiPzI6MDphLndoaWNofX0sci5ldmVudC5hZGRQcm9wKSxyLmVhY2goe21vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIixtb3VzZWxlYXZlOlwibW91c2VvdXRcIixwb2ludGVyZW50ZXI6XCJwb2ludGVyb3ZlclwiLHBvaW50ZXJsZWF2ZTpcInBvaW50ZXJvdXRcIn0sZnVuY3Rpb24oYSxiKXtyLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjLGQ9dGhpcyxlPWEucmVsYXRlZFRhcmdldCxmPWEuaGFuZGxlT2JqO3JldHVybiBlJiYoZT09PWR8fHIuY29udGFpbnMoZCxlKSl8fChhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLHIuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4geGEodGhpcyxhLGIsYyxkKX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB4YSh0aGlzLGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixyKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlK1wiLlwiK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybiBiIT09ITEmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGJ8fChjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9dmEpLHRoaXMuZWFjaChmdW5jdGlvbigpe3IuZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9fSk7dmFyIHlhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKilbXj5dKilcXC8+L2dpLHphPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLEFhPS9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksQmE9L150cnVlXFwvKC4qKS8sQ2E9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO2Z1bmN0aW9uIERhKGEsYil7cmV0dXJuIHIubm9kZU5hbWUoYSxcInRhYmxlXCIpJiZyLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCxcInRyXCIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXXx8YTphfWZ1bmN0aW9uIEVhKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpK1wiL1wiK2EudHlwZSxhfWZ1bmN0aW9uIEZhKGEpe3ZhciBiPUJhLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksYX1mdW5jdGlvbiBHYShhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKFYuaGFzRGF0YShhKSYmKGY9Vi5hY2Nlc3MoYSksZz1WLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7YzxkO2MrKylyLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9Vy5oYXNEYXRhKGEpJiYoaD1XLmFjY2VzcyhhKSxpPXIuZXh0ZW5kKHt9LGgpLFcuc2V0KGIsaSkpfX1mdW5jdGlvbiBIYShhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImlucHV0XCI9PT1jJiZpYS50ZXN0KGEudHlwZSk/Yi5jaGVja2VkPWEuY2hlY2tlZDpcImlucHV0XCIhPT1jJiZcInRleHRhcmVhXCIhPT1jfHwoYi5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0VmFsdWUpfWZ1bmN0aW9uIElhKGEsYixjLGQpe2I9Zy5hcHBseShbXSxiKTt2YXIgZSxmLGgsaSxqLGssbD0wLG09YS5sZW5ndGgsbj1tLTEscT1iWzBdLHM9ci5pc0Z1bmN0aW9uKHEpO2lmKHN8fG0+MSYmXCJzdHJpbmdcIj09dHlwZW9mIHEmJiFvLmNoZWNrQ2xvbmUmJkFhLnRlc3QocSkpcmV0dXJuIGEuZWFjaChmdW5jdGlvbihlKXt2YXIgZj1hLmVxKGUpO3MmJihiWzBdPXEuY2FsbCh0aGlzLGUsZi5odG1sKCkpKSxJYShmLGIsYyxkKX0pO2lmKG0mJihlPXBhKGIsYVswXS5vd25lckRvY3VtZW50LCExLGEsZCksZj1lLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPWYpLGZ8fGQpKXtmb3IoaD1yLm1hcChtYShlLFwic2NyaXB0XCIpLEVhKSxpPWgubGVuZ3RoO2w8bTtsKyspaj1lLGwhPT1uJiYoaj1yLmNsb25lKGosITAsITApLGkmJnIubWVyZ2UoaCxtYShqLFwic2NyaXB0XCIpKSksYy5jYWxsKGFbbF0saixsKTtpZihpKWZvcihrPWhbaC5sZW5ndGgtMV0ub3duZXJEb2N1bWVudCxyLm1hcChoLEZhKSxsPTA7bDxpO2wrKylqPWhbbF0sa2EudGVzdChqLnR5cGV8fFwiXCIpJiYhVi5hY2Nlc3MoaixcImdsb2JhbEV2YWxcIikmJnIuY29udGFpbnMoayxqKSYmKGouc3JjP3IuX2V2YWxVcmwmJnIuX2V2YWxVcmwoai5zcmMpOnAoai50ZXh0Q29udGVudC5yZXBsYWNlKENhLFwiXCIpLGspKX1yZXR1cm4gYX1mdW5jdGlvbiBKYShhLGIsYyl7Zm9yKHZhciBkLGU9Yj9yLmZpbHRlcihiLGEpOmEsZj0wO251bGwhPShkPWVbZl0pO2YrKyljfHwxIT09ZC5ub2RlVHlwZXx8ci5jbGVhbkRhdGEobWEoZCkpLGQucGFyZW50Tm9kZSYmKGMmJnIuY29udGFpbnMoZC5vd25lckRvY3VtZW50LGQpJiZuYShtYShkLFwic2NyaXB0XCIpKSxkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCkpO3JldHVybiBhfXIuZXh0ZW5kKHtodG1sUHJlZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoeWEsXCI8JDE+PC8kMj5cIil9LGNsb25lOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY2xvbmVOb2RlKCEwKSxpPXIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpO2lmKCEoby5ub0Nsb25lQ2hlY2tlZHx8MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8ci5pc1hNTERvYyhhKSkpZm9yKGc9bWEoaCksZj1tYShhKSxkPTAsZT1mLmxlbmd0aDtkPGU7ZCsrKUhhKGZbZF0sZ1tkXSk7aWYoYilpZihjKWZvcihmPWZ8fG1hKGEpLGc9Z3x8bWEoaCksZD0wLGU9Zi5sZW5ndGg7ZDxlO2QrKylHYShmW2RdLGdbZF0pO2Vsc2UgR2EoYSxoKTtyZXR1cm4gZz1tYShoLFwic2NyaXB0XCIpLGcubGVuZ3RoPjAmJm5hKGcsIWkmJm1hKGEsXCJzY3JpcHRcIikpLGh9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkLGU9ci5ldmVudC5zcGVjaWFsLGY9MDt2b2lkIDAhPT0oYz1hW2ZdKTtmKyspaWYoVChjKSl7aWYoYj1jW1YuZXhwYW5kb10pe2lmKGIuZXZlbnRzKWZvcihkIGluIGIuZXZlbnRzKWVbZF0/ci5ldmVudC5yZW1vdmUoYyxkKTpyLnJlbW92ZUV2ZW50KGMsZCxiLmhhbmRsZSk7Y1tWLmV4cGFuZG9dPXZvaWQgMH1jW1cuZXhwYW5kb10mJihjW1cuZXhwYW5kb109dm9pZCAwKX19fSksci5mbi5leHRlbmQoe2RldGFjaDpmdW5jdGlvbihhKXtyZXR1cm4gSmEodGhpcyxhLCEwKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiBKYSh0aGlzLGEpfSx0ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBTKHRoaXMsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/ci50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fCh0aGlzLnRleHRDb250ZW50PWEpfSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIElhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1EYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPURhKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gSWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gSWEodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0sZW1wdHk6ZnVuY3Rpb24oKXtmb3IodmFyIGEsYj0wO251bGwhPShhPXRoaXNbYl0pO2IrKykxPT09YS5ub2RlVHlwZSYmKHIuY2xlYW5EYXRhKG1hKGEsITEpKSxhLnRleHRDb250ZW50PVwiXCIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPW51bGwhPWEmJmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiByLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBTKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYhemEudGVzdChhKSYmIWxhWyhqYS5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9ci5odG1sUHJlZmlsdGVyKGEpO3RyeXtmb3IoO2M8ZDtjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKHIuY2xlYW5EYXRhKG1hKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIElhKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMucGFyZW50Tm9kZTtyLmluQXJyYXkodGhpcyxhKTwwJiYoci5jbGVhbkRhdGEobWEodGhpcykpLGMmJmMucmVwbGFjZUNoaWxkKGIsdGhpcykpfSxhKX19KSxyLmVhY2goe2FwcGVuZFRvOlwiYXBwZW5kXCIscHJlcGVuZFRvOlwicHJlcGVuZFwiLGluc2VydEJlZm9yZTpcImJlZm9yZVwiLGluc2VydEFmdGVyOlwiYWZ0ZXJcIixyZXBsYWNlQWxsOlwicmVwbGFjZVdpdGhcIn0sZnVuY3Rpb24oYSxiKXtyLmZuW2FdPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVtdLGU9cihhKSxmPWUubGVuZ3RoLTEsZz0wO2c8PWY7ZysrKWM9Zz09PWY/dGhpczp0aGlzLmNsb25lKCEwKSxyKGVbZ10pW2JdKGMpLGguYXBwbHkoZCxjLmdldCgpKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZCl9fSk7dmFyIEthPS9ebWFyZ2luLyxMYT1uZXcgUmVnRXhwKFwiXihcIitfK1wiKSg/IXB4KVthLXolXSskXCIsXCJpXCIpLE1hPWZ1bmN0aW9uKGIpe3ZhciBjPWIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm4gYyYmYy5vcGVuZXJ8fChjPWEpLGMuZ2V0Q29tcHV0ZWRTdHlsZShiKX07IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2lmKGkpe2kuc3R5bGUuY3NzVGV4dD1cImJveC1zaXppbmc6Ym9yZGVyLWJveDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7dG9wOjElO3dpZHRoOjUwJVwiLGkuaW5uZXJIVE1MPVwiXCIscWEuYXBwZW5kQ2hpbGQoaCk7dmFyIGI9YS5nZXRDb21wdXRlZFN0eWxlKGkpO2M9XCIxJVwiIT09Yi50b3AsZz1cIjJweFwiPT09Yi5tYXJnaW5MZWZ0LGU9XCI0cHhcIj09PWIud2lkdGgsaS5zdHlsZS5tYXJnaW5SaWdodD1cIjUwJVwiLGY9XCI0cHhcIj09PWIubWFyZ2luUmlnaHQscWEucmVtb3ZlQ2hpbGQoaCksaT1udWxsfX12YXIgYyxlLGYsZyxoPWQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxpPWQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLnN0eWxlJiYoaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cImNvbnRlbnQtYm94XCIsaS5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiXCIsby5jbGVhckNsb25lU3R5bGU9XCJjb250ZW50LWJveFwiPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxoLnN0eWxlLmNzc1RleHQ9XCJib3JkZXI6MDt3aWR0aDo4cHg7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O3BhZGRpbmc6MDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGguYXBwZW5kQ2hpbGQoaSksci5leHRlbmQobyx7cGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBiKCksY30sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGV9LHBpeGVsTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gYigpLGZ9LHJlbGlhYmxlTWFyZ2luTGVmdDpmdW5jdGlvbigpe3JldHVybiBiKCksZ319KSl9KCk7ZnVuY3Rpb24gTmEoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHxNYShhKSxjJiYoZz1jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl0sXCJcIiE9PWd8fHIuY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1yLnN0eWxlKGEsYikpLCFvLnBpeGVsTWFyZ2luUmlnaHQoKSYmTGEudGVzdChnKSYmS2EudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nK1wiXCI6Z31mdW5jdGlvbiBPYShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX12YXIgUGE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFFhPXtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwiLGRpc3BsYXk6XCJibG9ja1wifSxSYT17bGV0dGVyU3BhY2luZzpcIjBcIixmb250V2VpZ2h0OlwiNDAwXCJ9LFNhPVtcIldlYmtpdFwiLFwiTW96XCIsXCJtc1wiXSxUYT1kLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuc3R5bGU7ZnVuY3Rpb24gVWEoYSl7aWYoYSBpbiBUYSlyZXR1cm4gYTt2YXIgYj1hWzBdLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxjPVNhLmxlbmd0aDt3aGlsZShjLS0paWYoYT1TYVtjXStiLGEgaW4gVGEpcmV0dXJuIGF9ZnVuY3Rpb24gVmEoYSxiLGMpe3ZhciBkPWFhLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzJdLShjfHwwKSkrKGRbM118fFwicHhcIik6Yn1mdW5jdGlvbiBXYShhLGIsYyxkLGUpe3ZhciBmLGc9MDtmb3IoZj1jPT09KGQ/XCJib3JkZXJcIjpcImNvbnRlbnRcIik/NDpcIndpZHRoXCI9PT1iPzE6MDtmPDQ7Zis9MilcIm1hcmdpblwiPT09YyYmKGcrPXIuY3NzKGEsYytiYVtmXSwhMCxlKSksZD8oXCJjb250ZW50XCI9PT1jJiYoZy09ci5jc3MoYSxcInBhZGRpbmdcIitiYVtmXSwhMCxlKSksXCJtYXJnaW5cIiE9PWMmJihnLT1yLmNzcyhhLFwiYm9yZGVyXCIrYmFbZl0rXCJXaWR0aFwiLCEwLGUpKSk6KGcrPXIuY3NzKGEsXCJwYWRkaW5nXCIrYmFbZl0sITAsZSksXCJwYWRkaW5nXCIhPT1jJiYoZys9ci5jc3MoYSxcImJvcmRlclwiK2JhW2ZdK1wiV2lkdGhcIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIFhhKGEsYixjKXt2YXIgZCxlPSEwLGY9TWEoYSksZz1cImJvcmRlci1ib3hcIj09PXIuY3NzKGEsXCJib3hTaXppbmdcIiwhMSxmKTtpZihhLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiYoZD1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW2JdKSxkPD0wfHxudWxsPT1kKXtpZihkPU5hKGEsYixmKSwoZDwwfHxudWxsPT1kKSYmKGQ9YS5zdHlsZVtiXSksTGEudGVzdChkKSlyZXR1cm4gZDtlPWcmJihvLmJveFNpemluZ1JlbGlhYmxlKCl8fGQ9PT1hLnN0eWxlW2JdKSxkPXBhcnNlRmxvYXQoZCl8fDB9cmV0dXJuIGQrV2EoYSxiLGN8fChnP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpLGUsZikrXCJweFwifXIuZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9TmEoYSxcIm9wYWNpdHlcIik7cmV0dXJuXCJcIj09PWM/XCIxXCI6Y319fX0sY3NzTnVtYmVyOnthbmltYXRpb25JdGVyYXRpb25Db3VudDohMCxjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7XCJmbG9hdFwiOlwiY3NzRmxvYXRcIn0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1yLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7cmV0dXJuIGI9ci5jc3NQcm9wc1toXXx8KHIuY3NzUHJvcHNbaF09VWEoaCl8fGgpLGc9ci5jc3NIb29rc1tiXXx8ci5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsXCJzdHJpbmdcIj09PWYmJihlPWFhLmV4ZWMoYykpJiZlWzFdJiYoYz1lYShhLGIsZSksZj1cIm51bWJlclwiKSxudWxsIT1jJiZjPT09YyYmKFwibnVtYmVyXCI9PT1mJiYoYys9ZSYmZVszXXx8KHIuY3NzTnVtYmVyW2hdP1wiXCI6XCJweFwiKSksby5jbGVhckNsb25lU3R5bGV8fFwiXCIhPT1jfHwwIT09Yi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKXx8KGlbYl09XCJpbmhlcml0XCIpLGcmJlwic2V0XCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpfHwoaVtiXT1jKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1yLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1yLmNzc1Byb3BzW2hdfHwoci5jc3NQcm9wc1toXT1VYShoKXx8aCksZz1yLmNzc0hvb2tzW2JdfHxyLmNzc0hvb2tzW2hdLGcmJlwiZ2V0XCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT1OYShhLGIsZCkpLFwibm9ybWFsXCI9PT1lJiZiIGluIFJhJiYoZT1SYVtiXSksXCJcIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fGlzRmluaXRlKGYpP2Z8fDA6ZSk6ZX19KSxyLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihhLGIpe3IuY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7aWYoYylyZXR1cm4hUGEudGVzdChyLmNzcyhhLFwiZGlzcGxheVwiKSl8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgmJmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg/WGEoYSxiLGQpOmRhKGEsUWEsZnVuY3Rpb24oKXtyZXR1cm4gWGEoYSxiLGQpfSl9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZj1kJiZNYShhKSxnPWQmJldhKGEsYixkLFwiYm9yZGVyLWJveFwiPT09ci5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpLGYpO3JldHVybiBnJiYoZT1hYS5leGVjKGMpKSYmXCJweFwiIT09KGVbM118fFwicHhcIikmJihhLnN0eWxlW2JdPWMsYz1yLmNzcyhhLGIpKSxWYShhLGMsZyl9fX0pLHIuY3NzSG9va3MubWFyZ2luTGVmdD1PYShvLnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihhLGIpe2lmKGIpcmV0dXJuKHBhcnNlRmxvYXQoTmEoYSxcIm1hcmdpbkxlZnRcIikpfHxhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtZGEoYSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrXCJweFwifSksci5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtyLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdO2Q8NDtkKyspZVthK2JhW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LEthLnRlc3QoYSl8fChyLmNzc0hvb2tzW2ErYl0uc2V0PVZhKX0pLHIuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKHIuaXNBcnJheShiKSl7Zm9yKGQ9TWEoYSksZT1iLmxlbmd0aDtnPGU7ZysrKWZbYltnXV09ci5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP3Iuc3R5bGUoYSxiLGMpOnIuY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfX0pO2Z1bmN0aW9uIFlhKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBZYS5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfXIuVHdlZW49WWEsWWEucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpZYSxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxyLmVhc2luZy5fZGVmYXVsdCx0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KHIuY3NzTnVtYmVyW2NdP1wiXCI6XCJweFwiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9WWEucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOllhLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPVlhLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9Yj1yLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz1iPWEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6WWEucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sWWEucHJvdG90eXBlLmluaXQucHJvdG90eXBlPVlhLnByb3RvdHlwZSxZYS5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIDEhPT1hLmVsZW0ubm9kZVR5cGV8fG51bGwhPWEuZWxlbVthLnByb3BdJiZudWxsPT1hLmVsZW0uc3R5bGVbYS5wcm9wXT9hLmVsZW1bYS5wcm9wXTooYj1yLmNzcyhhLmVsZW0sYS5wcm9wLFwiXCIpLGImJlwiYXV0b1wiIT09Yj9iOjApfSxzZXQ6ZnVuY3Rpb24oYSl7ci5meC5zdGVwW2EucHJvcF0/ci5meC5zdGVwW2EucHJvcF0oYSk6MSE9PWEuZWxlbS5ub2RlVHlwZXx8bnVsbD09YS5lbGVtLnN0eWxlW3IuY3NzUHJvcHNbYS5wcm9wXV0mJiFyLmNzc0hvb2tzW2EucHJvcF0/YS5lbGVtW2EucHJvcF09YS5ub3c6ci5zdHlsZShhLmVsZW0sYS5wcm9wLGEubm93K2EudW5pdCl9fX0sWWEucHJvcEhvb2tzLnNjcm9sbFRvcD1ZYS5wcm9wSG9va3Muc2Nyb2xsTGVmdD17c2V0OmZ1bmN0aW9uKGEpe2EuZWxlbS5ub2RlVHlwZSYmYS5lbGVtLnBhcmVudE5vZGUmJihhLmVsZW1bYS5wcm9wXT1hLm5vdyl9fSxyLmVhc2luZz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LF9kZWZhdWx0Olwic3dpbmdcIn0sci5meD1ZYS5wcm90b3R5cGUuaW5pdCxyLmZ4LnN0ZXA9e307dmFyIFphLCRhLF9hPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxhYj0vcXVldWVIb29rcyQvO2Z1bmN0aW9uIGJiKCl7JGEmJihhLnJlcXVlc3RBbmltYXRpb25GcmFtZShiYiksci5meC50aWNrKCkpfWZ1bmN0aW9uIGNiKCl7cmV0dXJuIGEuc2V0VGltZW91dChmdW5jdGlvbigpe1phPXZvaWQgMH0pLFphPXIubm93KCl9ZnVuY3Rpb24gZGIoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowO2Q8NDtkKz0yLWIpYz1iYVtkXSxlW1wibWFyZ2luXCIrY109ZVtcInBhZGRpbmdcIitjXT1hO3JldHVybiBiJiYoZS5vcGFjaXR5PWUud2lkdGg9YSksZX1mdW5jdGlvbiBlYihhLGIsYyl7Zm9yKHZhciBkLGU9KGhiLnR3ZWVuZXJzW2JdfHxbXSkuY29uY2F0KGhiLnR3ZWVuZXJzW1wiKlwiXSksZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gZmIoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD1cIndpZHRoXCJpbiBifHxcImhlaWdodFwiaW4gYixtPXRoaXMsbj17fSxvPWEuc3R5bGUscD1hLm5vZGVUeXBlJiZjYShhKSxxPVYuZ2V0KGEsXCJmeHNob3dcIik7Yy5xdWV1ZXx8KGc9ci5fcXVldWVIb29rcyhhLFwiZnhcIiksbnVsbD09Zy51bnF1ZXVlZCYmKGcudW5xdWV1ZWQ9MCxoPWcuZW1wdHkuZmlyZSxnLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtnLnVucXVldWVkfHxoKCl9KSxnLnVucXVldWVkKyssbS5hbHdheXMoZnVuY3Rpb24oKXttLmFsd2F5cyhmdW5jdGlvbigpe2cudW5xdWV1ZWQtLSxyLnF1ZXVlKGEsXCJmeFwiKS5sZW5ndGh8fGcuZW1wdHkuZmlyZSgpfSl9KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sX2EudGVzdChlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHxcInRvZ2dsZVwiPT09ZSxlPT09KHA/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bltkXT1xJiZxW2RdfHxyLnN0eWxlKGEsZCl9aWYoaT0hci5pc0VtcHR5T2JqZWN0KGIpLGl8fCFyLmlzRW1wdHlPYmplY3Qobikpe2wmJjE9PT1hLm5vZGVUeXBlJiYoYy5vdmVyZmxvdz1bby5vdmVyZmxvdyxvLm92ZXJmbG93WCxvLm92ZXJmbG93WV0saj1xJiZxLmRpc3BsYXksbnVsbD09aiYmKGo9Vi5nZXQoYSxcImRpc3BsYXlcIikpLGs9ci5jc3MoYSxcImRpc3BsYXlcIiksXCJub25lXCI9PT1rJiYoaj9rPWo6KGhhKFthXSwhMCksaj1hLnN0eWxlLmRpc3BsYXl8fGosaz1yLmNzcyhhLFwiZGlzcGxheVwiKSxoYShbYV0pKSksKFwiaW5saW5lXCI9PT1rfHxcImlubGluZS1ibG9ja1wiPT09ayYmbnVsbCE9aikmJlwibm9uZVwiPT09ci5jc3MoYSxcImZsb2F0XCIpJiYoaXx8KG0uZG9uZShmdW5jdGlvbigpe28uZGlzcGxheT1qfSksbnVsbD09aiYmKGs9by5kaXNwbGF5LGo9XCJub25lXCI9PT1rP1wiXCI6aykpLG8uZGlzcGxheT1cImlubGluZS1ibG9ja1wiKSksYy5vdmVyZmxvdyYmKG8ub3ZlcmZsb3c9XCJoaWRkZW5cIixtLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSksaT0hMTtmb3IoZCBpbiBuKWl8fChxP1wiaGlkZGVuXCJpbiBxJiYocD1xLmhpZGRlbik6cT1WLmFjY2VzcyhhLFwiZnhzaG93XCIse2Rpc3BsYXk6an0pLGYmJihxLmhpZGRlbj0hcCkscCYmaGEoW2FdLCEwKSxtLmRvbmUoZnVuY3Rpb24oKXtwfHxoYShbYV0pLFYucmVtb3ZlKGEsXCJmeHNob3dcIik7Zm9yKGQgaW4gbilyLnN0eWxlKGEsZCxuW2RdKX0pKSxpPWViKHA/cVtkXTowLGQsbSksZCBpbiBxfHwocVtkXT1pLnN0YXJ0LHAmJihpLmVuZD1pLnN0YXJ0LGkuc3RhcnQ9MCkpfX1mdW5jdGlvbiBnYihhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPXIuY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sci5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1yLmNzc0hvb2tzW2RdLGcmJlwiZXhwYW5kXCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24gaGIoYSxiLGMpe3ZhciBkLGUsZj0wLGc9aGIucHJlZmlsdGVycy5sZW5ndGgsaD1yLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIGkuZWxlbX0pLGk9ZnVuY3Rpb24oKXtpZihlKXJldHVybiExO2Zvcih2YXIgYj1aYXx8Y2IoKSxjPU1hdGgubWF4KDAsai5zdGFydFRpbWUrai5kdXJhdGlvbi1iKSxkPWMvai5kdXJhdGlvbnx8MCxmPTEtZCxnPTAsaT1qLnR3ZWVucy5sZW5ndGg7ZzxpO2crKylqLnR3ZWVuc1tnXS5ydW4oZik7cmV0dXJuIGgubm90aWZ5V2l0aChhLFtqLGYsY10pLGY8MSYmaT9jOihoLnJlc29sdmVXaXRoKGEsW2pdKSwhMSl9LGo9aC5wcm9taXNlKHtlbGVtOmEscHJvcHM6ci5leHRlbmQoe30sYiksb3B0czpyLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6ci5lYXNpbmcuX2RlZmF1bHR9LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTpaYXx8Y2IoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPXIuVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7YzxkO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/KGgubm90aWZ5V2l0aChhLFtqLDEsMF0pLGgucmVzb2x2ZVdpdGgoYSxbaixiXSkpOmgucmVqZWN0V2l0aChhLFtqLGJdKSx0aGlzfX0pLGs9ai5wcm9wcztmb3IoZ2IoayxqLm9wdHMuc3BlY2lhbEVhc2luZyk7ZjxnO2YrKylpZihkPWhiLnByZWZpbHRlcnNbZl0uY2FsbChqLGEsayxqLm9wdHMpKXJldHVybiByLmlzRnVuY3Rpb24oZC5zdG9wKSYmKHIuX3F1ZXVlSG9va3Moai5lbGVtLGoub3B0cy5xdWV1ZSkuc3RvcD1yLnByb3h5KGQuc3RvcCxkKSksZDtyZXR1cm4gci5tYXAoayxlYixqKSxyLmlzRnVuY3Rpb24oai5vcHRzLnN0YXJ0KSYmai5vcHRzLnN0YXJ0LmNhbGwoYSxqKSxyLmZ4LnRpbWVyKHIuZXh0ZW5kKGkse2VsZW06YSxhbmltOmoscXVldWU6ai5vcHRzLnF1ZXVlfSkpLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpfXIuQW5pbWF0aW9uPXIuZXh0ZW5kKGhiLHt0d2VlbmVyczp7XCIqXCI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpO3JldHVybiBlYShjLmVsZW0sYSxhYS5leGVjKGIpLGMpLGN9XX0sdHdlZW5lcjpmdW5jdGlvbihhLGIpe3IuaXNGdW5jdGlvbihhKT8oYj1hLGE9W1wiKlwiXSk6YT1hLm1hdGNoKEspO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtkPGU7ZCsrKWM9YVtkXSxoYi50d2VlbmVyc1tjXT1oYi50d2VlbmVyc1tjXXx8W10saGIudHdlZW5lcnNbY10udW5zaGlmdChiKX0scHJlZmlsdGVyczpbZmJdLHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/aGIucHJlZmlsdGVycy51bnNoaWZ0KGEpOmhiLnByZWZpbHRlcnMucHVzaChhKX19KSxyLnNwZWVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZT1hJiZcIm9iamVjdFwiPT10eXBlb2YgYT9yLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fHIuaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhci5pc0Z1bmN0aW9uKGIpJiZifTtyZXR1cm4gci5meC5vZmZ8fGQuaGlkZGVuP2UuZHVyYXRpb249MDpcIm51bWJlclwiIT10eXBlb2YgZS5kdXJhdGlvbiYmKGUuZHVyYXRpb24gaW4gci5meC5zcGVlZHM/ZS5kdXJhdGlvbj1yLmZ4LnNwZWVkc1tlLmR1cmF0aW9uXTplLmR1cmF0aW9uPXIuZnguc3BlZWRzLl9kZWZhdWx0KSxudWxsIT1lLnF1ZXVlJiZlLnF1ZXVlIT09ITB8fChlLnF1ZXVlPVwiZnhcIiksZS5vbGQ9ZS5jb21wbGV0ZSxlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7ci5pc0Z1bmN0aW9uKGUub2xkKSYmZS5vbGQuY2FsbCh0aGlzKSxlLnF1ZXVlJiZyLmRlcXVldWUodGhpcyxlLnF1ZXVlKX0sZX0sci5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5maWx0ZXIoY2EpLmNzcyhcIm9wYWNpdHlcIiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ci5pc0VtcHR5T2JqZWN0KGEpLGY9ci5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPWhiKHRoaXMsci5leHRlbmQoe30sYSksZik7KGV8fFYuZ2V0KHRoaXMsXCJmaW5pc2hcIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErXCJxdWV1ZUhvb2tzXCIsZj1yLnRpbWVycyxnPVYuZ2V0KHRoaXMpO2lmKGUpZ1tlXSYmZ1tlXS5zdG9wJiZkKGdbZV0pO2Vsc2UgZm9yKGUgaW4gZylnW2VdJiZnW2VdLnN0b3AmJmFiLnRlc3QoZSkmJmQoZ1tlXSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOylmW2VdLmVsZW0hPT10aGlzfHxudWxsIT1hJiZmW2VdLnF1ZXVlIT09YXx8KGZbZV0uYW5pbS5zdG9wKGMpLGI9ITEsZi5zcGxpY2UoZSwxKSk7IWImJmN8fHIuZGVxdWV1ZSh0aGlzLGEpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4gYSE9PSExJiYoYT1hfHxcImZ4XCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiLGM9Vi5nZXQodGhpcyksZD1jW2ErXCJxdWV1ZVwiXSxlPWNbYStcInF1ZXVlSG9va3NcIl0sZj1yLnRpbWVycyxnPWQ/ZC5sZW5ndGg6MDtmb3IoYy5maW5pc2g9ITAsci5xdWV1ZSh0aGlzLGEsW10pLGUmJmUuc3RvcCYmZS5zdG9wLmNhbGwodGhpcywhMCksYj1mLmxlbmd0aDtiLS07KWZbYl0uZWxlbT09PXRoaXMmJmZbYl0ucXVldWU9PT1hJiYoZltiXS5hbmltLnN0b3AoITApLGYuc3BsaWNlKGIsMSkpO2ZvcihiPTA7YjxnO2IrKylkW2JdJiZkW2JdLmZpbmlzaCYmZFtiXS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgYy5maW5pc2h9KX19KSxyLmVhY2goW1widG9nZ2xlXCIsXCJzaG93XCIsXCJoaWRlXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9ci5mbltiXTtyLmZuW2JdPWZ1bmN0aW9uKGEsZCxlKXtyZXR1cm4gbnVsbD09YXx8XCJib29sZWFuXCI9PXR5cGVvZiBhP2MuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShkYihiLCEwKSxhLGQsZSl9fSksci5lYWNoKHtzbGlkZURvd246ZGIoXCJzaG93XCIpLHNsaWRlVXA6ZGIoXCJoaWRlXCIpLHNsaWRlVG9nZ2xlOmRiKFwidG9nZ2xlXCIpLGZhZGVJbjp7b3BhY2l0eTpcInNob3dcIn0sZmFkZU91dDp7b3BhY2l0eTpcImhpZGVcIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eTpcInRvZ2dsZVwifX0sZnVuY3Rpb24oYSxiKXtyLmZuW2FdPWZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gdGhpcy5hbmltYXRlKGIsYSxjLGQpfX0pLHIudGltZXJzPVtdLHIuZngudGljaz1mdW5jdGlvbigpe3ZhciBhLGI9MCxjPXIudGltZXJzO2ZvcihaYT1yLm5vdygpO2I8Yy5sZW5ndGg7YisrKWE9Y1tiXSxhKCl8fGNbYl0hPT1hfHxjLnNwbGljZShiLS0sMSk7Yy5sZW5ndGh8fHIuZnguc3RvcCgpLFphPXZvaWQgMH0sci5meC50aW1lcj1mdW5jdGlvbihhKXtyLnRpbWVycy5wdXNoKGEpLGEoKT9yLmZ4LnN0YXJ0KCk6ci50aW1lcnMucG9wKCl9LHIuZnguaW50ZXJ2YWw9MTMsci5meC5zdGFydD1mdW5jdGlvbigpeyRhfHwoJGE9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU/YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYmIpOmEuc2V0SW50ZXJ2YWwoci5meC50aWNrLHIuZnguaW50ZXJ2YWwpKX0sci5meC5zdG9wPWZ1bmN0aW9uKCl7YS5jYW5jZWxBbmltYXRpb25GcmFtZT9hLmNhbmNlbEFuaW1hdGlvbkZyYW1lKCRhKTphLmNsZWFySW50ZXJ2YWwoJGEpLCRhPW51bGx9LHIuZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHIuZm4uZGVsYXk9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYj1yLmZ4P3IuZnguc3BlZWRzW2JdfHxiOmIsYz1jfHxcImZ4XCIsdGhpcy5xdWV1ZShjLGZ1bmN0aW9uKGMsZCl7dmFyIGU9YS5zZXRUaW1lb3V0KGMsYik7ZC5zdG9wPWZ1bmN0aW9uKCl7YS5jbGVhclRpbWVvdXQoZSl9fSl9LGZ1bmN0aW9uKCl7dmFyIGE9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYj1kLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksYz1iLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSk7YS50eXBlPVwiY2hlY2tib3hcIixvLmNoZWNrT249XCJcIiE9PWEudmFsdWUsby5vcHRTZWxlY3RlZD1jLnNlbGVjdGVkLGE9ZC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYS52YWx1ZT1cInRcIixhLnR5cGU9XCJyYWRpb1wiLG8ucmFkaW9WYWx1ZT1cInRcIj09PWEudmFsdWV9KCk7dmFyIGliLGpiPXIuZXhwci5hdHRySGFuZGxlO3IuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIFModGhpcyxyLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3IucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksci5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGEuZ2V0QXR0cmlidXRlP3IucHJvcChhLGIsYyk6KDE9PT1mJiZyLmlzWE1MRG9jKGEpfHwoZT1yLmF0dHJIb29rc1tiLnRvTG93ZXJDYXNlKCldfHwoci5leHByLm1hdGNoLmJvb2wudGVzdChiKT9pYjp2b2lkIDApKSxcclxudm9pZCAwIT09Yz9udWxsPT09Yz92b2lkIHIucmVtb3ZlQXR0cihhLGIpOmUmJlwic2V0XCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6KGEuc2V0QXR0cmlidXRlKGIsYytcIlwiKSxjKTplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6KGQ9ci5maW5kLmF0dHIoYSxiKSxudWxsPT1kP3ZvaWQgMDpkKSl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoIW8ucmFkaW9WYWx1ZSYmXCJyYWRpb1wiPT09YiYmci5ub2RlTmFtZShhLFwiaW5wdXRcIikpe3ZhciBjPWEudmFsdWU7cmV0dXJuIGEuc2V0QXR0cmlidXRlKFwidHlwZVwiLGIpLGMmJihhLnZhbHVlPWMpLGJ9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTAsZT1iJiZiLm1hdGNoKEspO2lmKGUmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZVtkKytdKWEucmVtb3ZlQXR0cmlidXRlKGMpfX0pLGliPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/ci5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sci5lYWNoKHIuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXFx3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPWpiW2JdfHxyLmZpbmQuYXR0cjtqYltiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZixnPWIudG9Mb3dlckNhc2UoKTtyZXR1cm4gZHx8KGY9amJbZ10samJbZ109ZSxlPW51bGwhPWMoYSxiLGQpP2c6bnVsbCxqYltnXT1mKSxlfX0pO3ZhciBrYj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLGxiPS9eKD86YXxhcmVhKSQvaTtyLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihhLGIpe3JldHVybiBTKHRoaXMsci5wcm9wLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1tyLnByb3BGaXhbYV18fGFdfSl9fSksci5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKDMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIDE9PT1mJiZyLmlzWE1MRG9jKGEpfHwoYj1yLnByb3BGaXhbYl18fGIsZT1yLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXIuZmluZC5hdHRyKGEsXCJ0YWJpbmRleFwiKTtyZXR1cm4gYj9wYXJzZUludChiLDEwKTprYi50ZXN0KGEubm9kZU5hbWUpfHxsYi50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDotMX19fSxwcm9wRml4OntcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwifX0pLG8ub3B0U2VsZWN0ZWR8fChyLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfSxzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO2ImJihiLnNlbGVjdGVkSW5kZXgsYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCl9fSksci5lYWNoKFtcInRhYkluZGV4XCIsXCJyZWFkT25seVwiLFwibWF4TGVuZ3RoXCIsXCJjZWxsU3BhY2luZ1wiLFwiY2VsbFBhZGRpbmdcIixcInJvd1NwYW5cIixcImNvbFNwYW5cIixcInVzZU1hcFwiLFwiZnJhbWVCb3JkZXJcIixcImNvbnRlbnRFZGl0YWJsZVwiXSxmdW5jdGlvbigpe3IucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTtmdW5jdGlvbiBtYihhKXt2YXIgYj1hLm1hdGNoKEspfHxbXTtyZXR1cm4gYi5qb2luKFwiIFwiKX1mdW5jdGlvbiBuYihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUmJmEuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCJ9ci5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihyLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtyKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsbmIodGhpcykpKX0pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhKXtiPWEubWF0Y2goSyl8fFtdO3doaWxlKGM9dGhpc1tpKytdKWlmKGU9bmIoYyksZD0xPT09Yy5ub2RlVHlwZSYmXCIgXCIrbWIoZSkrXCIgXCIpe2c9MDt3aGlsZShmPWJbZysrXSlkLmluZGV4T2YoXCIgXCIrZitcIiBcIik8MCYmKGQrPWYrXCIgXCIpO2g9bWIoZCksZSE9PWgmJmMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixoKX19cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGk9MDtpZihyLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtyKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsbmIodGhpcykpKX0pO2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLmF0dHIoXCJjbGFzc1wiLFwiXCIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhKXtiPWEubWF0Y2goSyl8fFtdO3doaWxlKGM9dGhpc1tpKytdKWlmKGU9bmIoYyksZD0xPT09Yy5ub2RlVHlwZSYmXCIgXCIrbWIoZSkrXCIgXCIpe2c9MDt3aGlsZShmPWJbZysrXSl3aGlsZShkLmluZGV4T2YoXCIgXCIrZitcIiBcIik+LTEpZD1kLnJlcGxhY2UoXCIgXCIrZitcIiBcIixcIiBcIik7aD1tYihkKSxlIT09aCYmYy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGgpfX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGImJlwic3RyaW5nXCI9PT1jP2I/dGhpcy5hZGRDbGFzcyhhKTp0aGlzLnJlbW92ZUNsYXNzKGEpOnIuaXNGdW5jdGlvbihhKT90aGlzLmVhY2goZnVuY3Rpb24oYyl7cih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLG5iKHRoaXMpLGIpLGIpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsZCxlLGY7aWYoXCJzdHJpbmdcIj09PWMpe2Q9MCxlPXIodGhpcyksZj1hLm1hdGNoKEspfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlIHZvaWQgMCE9PWEmJlwiYm9vbGVhblwiIT09Y3x8KGI9bmIodGhpcyksYiYmVi5zZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIixiKSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGJ8fGE9PT0hMT9cIlwiOlYuZ2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIpfHxcIlwiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPTA7Yj1cIiBcIithK1wiIFwiO3doaWxlKGM9dGhpc1tkKytdKWlmKDE9PT1jLm5vZGVUeXBlJiYoXCIgXCIrbWIobmIoYykpK1wiIFwiKS5pbmRleE9mKGIpPi0xKXJldHVybiEwO3JldHVybiExfX0pO3ZhciBvYj0vXFxyL2c7ci5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPXIuaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxyKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT1cIlwiOlwibnVtYmVyXCI9PXR5cGVvZiBlP2UrPVwiXCI6ci5pc0FycmF5KGUpJiYoZT1yLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6YStcIlwifSkpLGI9ci52YWxIb29rc1t0aGlzLnR5cGVdfHxyLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJzZXRcImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSxcInZhbHVlXCIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPXIudmFsSG9va3NbZS50eXBlXXx8ci52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwiZ2V0XCJpbiBiJiZ2b2lkIDAhPT0oYz1iLmdldChlLFwidmFsdWVcIikpP2M6KGM9ZS52YWx1ZSxcInN0cmluZ1wiPT10eXBlb2YgYz9jLnJlcGxhY2Uob2IsXCJcIik6bnVsbD09Yz9cIlwiOmMpfX19KSxyLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXIuZmluZC5hdHRyKGEsXCJ2YWx1ZVwiKTtyZXR1cm4gbnVsbCE9Yj9iOm1iKHIudGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT1hLm9wdGlvbnMsZj1hLnNlbGVjdGVkSW5kZXgsZz1cInNlbGVjdC1vbmVcIj09PWEudHlwZSxoPWc/bnVsbDpbXSxpPWc/ZisxOmUubGVuZ3RoO2ZvcihkPWY8MD9pOmc/ZjowO2Q8aTtkKyspaWYoYz1lW2RdLChjLnNlbGVjdGVkfHxkPT09ZikmJiFjLmRpc2FibGVkJiYoIWMucGFyZW50Tm9kZS5kaXNhYmxlZHx8IXIubm9kZU5hbWUoYy5wYXJlbnROb2RlLFwib3B0Z3JvdXBcIikpKXtpZihiPXIoYykudmFsKCksZylyZXR1cm4gYjtoLnB1c2goYil9cmV0dXJuIGh9LHNldDpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT1hLm9wdGlvbnMsZj1yLm1ha2VBcnJheShiKSxnPWUubGVuZ3RoO3doaWxlKGctLSlkPWVbZ10sKGQuc2VsZWN0ZWQ9ci5pbkFycmF5KHIudmFsSG9va3Mub3B0aW9uLmdldChkKSxmKT4tMSkmJihjPSEwKTtyZXR1cm4gY3x8KGEuc2VsZWN0ZWRJbmRleD0tMSksZn19fX0pLHIuZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXtyLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtpZihyLmlzQXJyYXkoYikpcmV0dXJuIGEuY2hlY2tlZD1yLmluQXJyYXkocihhKS52YWwoKSxiKT4tMX19LG8uY2hlY2tPbnx8KHIudmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKT9cIm9uXCI6YS52YWx1ZX0pfSk7dmFyIHBiPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLztyLmV4dGVuZChyLmV2ZW50LHt0cmlnZ2VyOmZ1bmN0aW9uKGIsYyxlLGYpe3ZhciBnLGgsaSxqLGssbSxuLG89W2V8fGRdLHA9bC5jYWxsKGIsXCJ0eXBlXCIpP2IudHlwZTpiLHE9bC5jYWxsKGIsXCJuYW1lc3BhY2VcIik/Yi5uYW1lc3BhY2Uuc3BsaXQoXCIuXCIpOltdO2lmKGg9aT1lPWV8fGQsMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiYhcGIudGVzdChwK3IuZXZlbnQudHJpZ2dlcmVkKSYmKHAuaW5kZXhPZihcIi5cIik+LTEmJihxPXAuc3BsaXQoXCIuXCIpLHA9cS5zaGlmdCgpLHEuc29ydCgpKSxrPXAuaW5kZXhPZihcIjpcIik8MCYmXCJvblwiK3AsYj1iW3IuZXhwYW5kb10/YjpuZXcgci5FdmVudChwLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1mPzI6MyxiLm5hbWVzcGFjZT1xLmpvaW4oXCIuXCIpLGIucm5hbWVzcGFjZT1iLm5hbWVzcGFjZT9uZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrcS5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIik6bnVsbCxiLnJlc3VsdD12b2lkIDAsYi50YXJnZXR8fChiLnRhcmdldD1lKSxjPW51bGw9PWM/W2JdOnIubWFrZUFycmF5KGMsW2JdKSxuPXIuZXZlbnQuc3BlY2lhbFtwXXx8e30sZnx8IW4udHJpZ2dlcnx8bi50cmlnZ2VyLmFwcGx5KGUsYykhPT0hMSkpe2lmKCFmJiYhbi5ub0J1YmJsZSYmIXIuaXNXaW5kb3coZSkpe2ZvcihqPW4uZGVsZWdhdGVUeXBlfHxwLHBiLnRlc3QoaitwKXx8KGg9aC5wYXJlbnROb2RlKTtoO2g9aC5wYXJlbnROb2RlKW8ucHVzaChoKSxpPWg7aT09PShlLm93bmVyRG9jdW1lbnR8fGQpJiZvLnB1c2goaS5kZWZhdWx0Vmlld3x8aS5wYXJlbnRXaW5kb3d8fGEpfWc9MDt3aGlsZSgoaD1vW2crK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1nPjE/ajpuLmJpbmRUeXBlfHxwLG09KFYuZ2V0KGgsXCJldmVudHNcIil8fHt9KVtiLnR5cGVdJiZWLmdldChoLFwiaGFuZGxlXCIpLG0mJm0uYXBwbHkoaCxjKSxtPWsmJmhba10sbSYmbS5hcHBseSYmVChoKSYmKGIucmVzdWx0PW0uYXBwbHkoaCxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO3JldHVybiBiLnR5cGU9cCxmfHxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxuLl9kZWZhdWx0JiZuLl9kZWZhdWx0LmFwcGx5KG8ucG9wKCksYykhPT0hMXx8IVQoZSl8fGsmJnIuaXNGdW5jdGlvbihlW3BdKSYmIXIuaXNXaW5kb3coZSkmJihpPWVba10saSYmKGVba109bnVsbCksci5ldmVudC50cmlnZ2VyZWQ9cCxlW3BdKCksci5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGkmJihlW2tdPWkpKSxiLnJlc3VsdH19LHNpbXVsYXRlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1yLmV4dGVuZChuZXcgci5FdmVudCxjLHt0eXBlOmEsaXNTaW11bGF0ZWQ6ITB9KTtyLmV2ZW50LnRyaWdnZXIoZCxudWxsLGIpfX0pLHIuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3IuZXZlbnQudHJpZ2dlcihhLGIsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzWzBdO2lmKGMpcmV0dXJuIHIuZXZlbnQudHJpZ2dlcihhLGIsYywhMCl9fSksci5lYWNoKFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe3IuZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLHIuZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX19KSxvLmZvY3VzaW49XCJvbmZvY3VzaW5cImluIGEsby5mb2N1c2lufHxyLmVhY2goe2ZvY3VzOlwiZm9jdXNpblwiLGJsdXI6XCJmb2N1c291dFwifSxmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEpe3IuZXZlbnQuc2ltdWxhdGUoYixhLnRhcmdldCxyLmV2ZW50LmZpeChhKSl9O3IuZXZlbnQuc3BlY2lhbFtiXT17c2V0dXA6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1WLmFjY2VzcyhkLGIpO2V8fGQuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITApLFYuYWNjZXNzKGQsYiwoZXx8MCkrMSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9Vi5hY2Nlc3MoZCxiKS0xO2U/Vi5hY2Nlc3MoZCxiLGUpOihkLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCEwKSxWLnJlbW92ZShkLGIpKX19fSk7dmFyIHFiPWEubG9jYXRpb24scmI9ci5ub3coKSxzYj0vXFw/LztyLnBhcnNlWE1MPWZ1bmN0aW9uKGIpe3ZhciBjO2lmKCFifHxcInN0cmluZ1wiIT10eXBlb2YgYilyZXR1cm4gbnVsbDt0cnl7Yz0obmV3IGEuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYixcInRleHQveG1sXCIpfWNhdGNoKGQpe2M9dm9pZCAwfXJldHVybiBjJiYhYy5nZXRFbGVtZW50c0J5VGFnTmFtZShcInBhcnNlcmVycm9yXCIpLmxlbmd0aHx8ci5lcnJvcihcIkludmFsaWQgWE1MOiBcIitiKSxjfTt2YXIgdGI9L1xcW1xcXSQvLHViPS9cXHI/XFxuL2csdmI9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLHdiPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiB4YihhLGIsYyxkKXt2YXIgZTtpZihyLmlzQXJyYXkoYikpci5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx0Yi50ZXN0KGEpP2QoYSxlKTp4YihhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9ZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PXIudHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKXhiKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9ci5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe3ZhciBjPXIuaXNGdW5jdGlvbihiKT9iKCk6YjtkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KG51bGw9PWM/XCJcIjpjKX07aWYoci5pc0FycmF5KGEpfHxhLmpxdWVyeSYmIXIuaXNQbGFpbk9iamVjdChhKSlyLmVhY2goYSxmdW5jdGlvbigpe2UodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IoYyBpbiBhKXhiKGMsYVtjXSxiLGUpO3JldHVybiBkLmpvaW4oXCImXCIpfSxyLmZuLmV4dGVuZCh7c2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHIucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT1yLnByb3AodGhpcyxcImVsZW1lbnRzXCIpO3JldHVybiBhP3IubWFrZUFycmF5KGEpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgYT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXIodGhpcykuaXMoXCI6ZGlzYWJsZWRcIikmJndiLnRlc3QodGhpcy5ub2RlTmFtZSkmJiF2Yi50ZXN0KGEpJiYodGhpcy5jaGVja2VkfHwhaWEudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1yKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6ci5pc0FycmF5KGMpP3IubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZSh1YixcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKHViLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pO3ZhciB5Yj0vJTIwL2csemI9LyMuKiQvLEFiPS8oWz8mXSlfPVteJl0qLyxCYj0vXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL2dtLENiPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLERiPS9eKD86R0VUfEhFQUQpJC8sRWI9L15cXC9cXC8vLEZiPXt9LEdiPXt9LEhiPVwiKi9cIi5jb25jYXQoXCIqXCIpLEliPWQuY3JlYXRlRWxlbWVudChcImFcIik7SWIuaHJlZj1xYi5ocmVmO2Z1bmN0aW9uIEpiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1iLGI9XCIqXCIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChLKXx8W107aWYoci5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKVwiK1wiPT09ZFswXT8oZD1kLnNsaWNlKDEpfHxcIipcIiwoYVtkXT1hW2RdfHxbXSkudW5zaGlmdChjKSk6KGFbZF09YVtkXXx8W10pLnB1c2goYyl9fWZ1bmN0aW9uIEtiKGEsYixjLGQpe3ZhciBlPXt9LGY9YT09PUdiO2Z1bmN0aW9uIGcoaCl7dmFyIGk7cmV0dXJuIGVbaF09ITAsci5lYWNoKGFbaF18fFtdLGZ1bmN0aW9uKGEsaCl7dmFyIGo9aChiLGMsZCk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlW1wiKlwiXSYmZyhcIipcIil9ZnVuY3Rpb24gTGIoYSxiKXt2YXIgYyxkLGU9ci5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihjIGluIGIpdm9pZCAwIT09YltjXSYmKChlW2NdP2E6ZHx8KGQ9e30pKVtjXT1iW2NdKTtyZXR1cm4gZCYmci5leHRlbmQoITAsYSxkKSxhfWZ1bmN0aW9uIE1iKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY29udGVudHMsaT1hLmRhdGFUeXBlczt3aGlsZShcIipcIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO2lmKGQpZm9yKGUgaW4gaClpZihoW2VdJiZoW2VdLnRlc3QoZCkpe2kudW5zaGlmdChlKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZSBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2UrXCIgXCIraVswXV0pe2Y9ZTticmVha31nfHwoZz1lKX1mPWZ8fGd9aWYoZilyZXR1cm4gZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdfWZ1bmN0aW9uIE5iKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj17fSxrPWEuZGF0YVR5cGVzLnNsaWNlKCk7aWYoa1sxXSlmb3IoZyBpbiBhLmNvbnZlcnRlcnMpaltnLnRvTG93ZXJDYXNlKCldPWEuY29udmVydGVyc1tnXTtmPWsuc2hpZnQoKTt3aGlsZShmKWlmKGEucmVzcG9uc2VGaWVsZHNbZl0mJihjW2EucmVzcG9uc2VGaWVsZHNbZl1dPWIpLCFpJiZkJiZhLmRhdGFGaWx0ZXImJihiPWEuZGF0YUZpbHRlcihiLGEuZGF0YVR5cGUpKSxpPWYsZj1rLnNoaWZ0KCkpaWYoXCIqXCI9PT1mKWY9aTtlbHNlIGlmKFwiKlwiIT09aSYmaSE9PWYpe2lmKGc9altpK1wiIFwiK2ZdfHxqW1wiKiBcIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdChcIiBcIiksaFsxXT09PWYmJihnPWpbaStcIiBcIitoWzBdXXx8altcIiogXCIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhW1widGhyb3dzXCJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjpnP2w6XCJObyBjb252ZXJzaW9uIGZyb20gXCIraStcIiB0byBcIitmfX19cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6Yn19ci5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOnFiLmhyZWYsdHlwZTpcIkdFVFwiLGlzTG9jYWw6Q2IudGVzdChxYi5wcm90b2NvbCksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsYWNjZXB0czp7XCIqXCI6SGIsdGV4dDpcInRleHQvcGxhaW5cIixodG1sOlwidGV4dC9odG1sXCIseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGpzb246XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIn0sY29udGVudHM6e3htbDovXFxieG1sXFxiLyxodG1sOi9cXGJodG1sLyxqc29uOi9cXGJqc29uXFxiL30scmVzcG9uc2VGaWVsZHM6e3htbDpcInJlc3BvbnNlWE1MXCIsdGV4dDpcInJlc3BvbnNlVGV4dFwiLGpzb246XCJyZXNwb25zZUpTT05cIn0sY29udmVydGVyczp7XCIqIHRleHRcIjpTdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOkpTT04ucGFyc2UsXCJ0ZXh0IHhtbFwiOnIucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe3JldHVybiBiP0xiKExiKGEsci5hamF4U2V0dGluZ3MpLGIpOkxiKHIuYWpheFNldHRpbmdzLGEpfSxhamF4UHJlZmlsdGVyOkpiKEZiKSxhamF4VHJhbnNwb3J0OkpiKEdiKSxhamF4OmZ1bmN0aW9uKGIsYyl7XCJvYmplY3RcIj09dHlwZW9mIGImJihjPWIsYj12b2lkIDApLGM9Y3x8e307dmFyIGUsZixnLGgsaSxqLGssbCxtLG4sbz1yLmFqYXhTZXR1cCh7fSxjKSxwPW8uY29udGV4dHx8byxxPW8uY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT9yKHApOnIuZXZlbnQscz1yLkRlZmVycmVkKCksdD1yLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHU9by5zdGF0dXNDb2RlfHx7fSx2PXt9LHc9e30seD1cImNhbmNlbGVkXCIseT17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKGspe2lmKCFoKXtoPXt9O3doaWxlKGI9QmIuZXhlYyhnKSloW2JbMV0udG9Mb3dlckNhc2UoKV09YlsyXX1iPWhbYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09Yj9udWxsOmJ9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiBrP2c6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1rJiYoYT13W2EudG9Mb3dlckNhc2UoKV09d1thLnRvTG93ZXJDYXNlKCldfHxhLHZbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09ayYmKG8ubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKGspeS5hbHdheXMoYVt5LnN0YXR1c10pO2Vsc2UgZm9yKGIgaW4gYSl1W2JdPVt1W2JdLGFbYl1dO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXt2YXIgYj1hfHx4O3JldHVybiBlJiZlLmFib3J0KGIpLEEoMCxiKSx0aGlzfX07aWYocy5wcm9taXNlKHkpLG8udXJsPSgoYnx8by51cmx8fHFiLmhyZWYpK1wiXCIpLnJlcGxhY2UoRWIscWIucHJvdG9jb2wrXCIvL1wiKSxvLnR5cGU9Yy5tZXRob2R8fGMudHlwZXx8by5tZXRob2R8fG8udHlwZSxvLmRhdGFUeXBlcz0oby5kYXRhVHlwZXx8XCIqXCIpLnRvTG93ZXJDYXNlKCkubWF0Y2goSyl8fFtcIlwiXSxudWxsPT1vLmNyb3NzRG9tYWluKXtqPWQuY3JlYXRlRWxlbWVudChcImFcIik7dHJ5e2ouaHJlZj1vLnVybCxqLmhyZWY9ai5ocmVmLG8uY3Jvc3NEb21haW49SWIucHJvdG9jb2wrXCIvL1wiK0liLmhvc3QhPWoucHJvdG9jb2wrXCIvL1wiK2ouaG9zdH1jYXRjaCh6KXtvLmNyb3NzRG9tYWluPSEwfX1pZihvLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJlwic3RyaW5nXCIhPXR5cGVvZiBvLmRhdGEmJihvLmRhdGE9ci5wYXJhbShvLmRhdGEsby50cmFkaXRpb25hbCkpLEtiKEZiLG8sYyx5KSxrKXJldHVybiB5O2w9ci5ldmVudCYmby5nbG9iYWwsbCYmMD09PXIuYWN0aXZlKysmJnIuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKSxvLnR5cGU9by50eXBlLnRvVXBwZXJDYXNlKCksby5oYXNDb250ZW50PSFEYi50ZXN0KG8udHlwZSksZj1vLnVybC5yZXBsYWNlKHpiLFwiXCIpLG8uaGFzQ29udGVudD9vLmRhdGEmJm8ucHJvY2Vzc0RhdGEmJjA9PT0oby5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmKG8uZGF0YT1vLmRhdGEucmVwbGFjZSh5YixcIitcIikpOihuPW8udXJsLnNsaWNlKGYubGVuZ3RoKSxvLmRhdGEmJihmKz0oc2IudGVzdChmKT9cIiZcIjpcIj9cIikrby5kYXRhLGRlbGV0ZSBvLmRhdGEpLG8uY2FjaGU9PT0hMSYmKGY9Zi5yZXBsYWNlKEFiLFwiJDFcIiksbj0oc2IudGVzdChmKT9cIiZcIjpcIj9cIikrXCJfPVwiK3JiKysgK24pLG8udXJsPWYrbiksby5pZk1vZGlmaWVkJiYoci5sYXN0TW9kaWZpZWRbZl0mJnkuc2V0UmVxdWVzdEhlYWRlcihcIklmLU1vZGlmaWVkLVNpbmNlXCIsci5sYXN0TW9kaWZpZWRbZl0pLHIuZXRhZ1tmXSYmeS5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTm9uZS1NYXRjaFwiLHIuZXRhZ1tmXSkpLChvLmRhdGEmJm8uaGFzQ29udGVudCYmby5jb250ZW50VHlwZSE9PSExfHxjLmNvbnRlbnRUeXBlKSYmeS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsby5jb250ZW50VHlwZSkseS5zZXRSZXF1ZXN0SGVhZGVyKFwiQWNjZXB0XCIsby5kYXRhVHlwZXNbMF0mJm8uYWNjZXB0c1tvLmRhdGFUeXBlc1swXV0/by5hY2NlcHRzW28uZGF0YVR5cGVzWzBdXSsoXCIqXCIhPT1vLmRhdGFUeXBlc1swXT9cIiwgXCIrSGIrXCI7IHE9MC4wMVwiOlwiXCIpOm8uYWNjZXB0c1tcIipcIl0pO2ZvcihtIGluIG8uaGVhZGVycyl5LnNldFJlcXVlc3RIZWFkZXIobSxvLmhlYWRlcnNbbV0pO2lmKG8uYmVmb3JlU2VuZCYmKG8uYmVmb3JlU2VuZC5jYWxsKHAseSxvKT09PSExfHxrKSlyZXR1cm4geS5hYm9ydCgpO2lmKHg9XCJhYm9ydFwiLHQuYWRkKG8uY29tcGxldGUpLHkuZG9uZShvLnN1Y2Nlc3MpLHkuZmFpbChvLmVycm9yKSxlPUtiKEdiLG8sYyx5KSl7aWYoeS5yZWFkeVN0YXRlPTEsbCYmcS50cmlnZ2VyKFwiYWpheFNlbmRcIixbeSxvXSksaylyZXR1cm4geTtvLmFzeW5jJiZvLnRpbWVvdXQ+MCYmKGk9YS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eS5hYm9ydChcInRpbWVvdXRcIil9LG8udGltZW91dCkpO3RyeXtrPSExLGUuc2VuZCh2LEEpfWNhdGNoKHope2lmKGspdGhyb3cgejtBKC0xLHopfX1lbHNlIEEoLTEsXCJObyBUcmFuc3BvcnRcIik7ZnVuY3Rpb24gQShiLGMsZCxoKXt2YXIgaixtLG4sdix3LHg9YztrfHwoaz0hMCxpJiZhLmNsZWFyVGltZW91dChpKSxlPXZvaWQgMCxnPWh8fFwiXCIseS5yZWFkeVN0YXRlPWI+MD80OjAsaj1iPj0yMDAmJmI8MzAwfHwzMDQ9PT1iLGQmJih2PU1iKG8seSxkKSksdj1OYihvLHYseSxqKSxqPyhvLmlmTW9kaWZpZWQmJih3PXkuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpLHcmJihyLmxhc3RNb2RpZmllZFtmXT13KSx3PXkuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpLHcmJihyLmV0YWdbZl09dykpLDIwND09PWJ8fFwiSEVBRFwiPT09by50eXBlP3g9XCJub2NvbnRlbnRcIjozMDQ9PT1iP3g9XCJub3Rtb2RpZmllZFwiOih4PXYuc3RhdGUsbT12LmRhdGEsbj12LmVycm9yLGo9IW4pKToobj14LCFiJiZ4fHwoeD1cImVycm9yXCIsYjwwJiYoYj0wKSkpLHkuc3RhdHVzPWIseS5zdGF0dXNUZXh0PShjfHx4KStcIlwiLGo/cy5yZXNvbHZlV2l0aChwLFttLHgseV0pOnMucmVqZWN0V2l0aChwLFt5LHgsbl0pLHkuc3RhdHVzQ29kZSh1KSx1PXZvaWQgMCxsJiZxLnRyaWdnZXIoaj9cImFqYXhTdWNjZXNzXCI6XCJhamF4RXJyb3JcIixbeSxvLGo/bTpuXSksdC5maXJlV2l0aChwLFt5LHhdKSxsJiYocS50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW3ksb10pLC0tci5hY3RpdmV8fHIuZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpKSl9cmV0dXJuIHl9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiByLmdldChhLGIsYyxcImpzb25cIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiByLmdldChhLHZvaWQgMCxiLFwic2NyaXB0XCIpfX0pLHIuZWFjaChbXCJnZXRcIixcInBvc3RcIl0sZnVuY3Rpb24oYSxiKXtyW2JdPWZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiByLmlzRnVuY3Rpb24oYykmJihlPWV8fGQsZD1jLGM9dm9pZCAwKSxyLmFqYXgoci5leHRlbmQoe3VybDphLHR5cGU6YixkYXRhVHlwZTplLGRhdGE6YyxzdWNjZXNzOmR9LHIuaXNQbGFpbk9iamVjdChhKSYmYSkpfX0pLHIuX2V2YWxVcmw9ZnVuY3Rpb24oYSl7cmV0dXJuIHIuYWpheCh7dXJsOmEsdHlwZTpcIkdFVFwiLGRhdGFUeXBlOlwic2NyaXB0XCIsY2FjaGU6ITAsYXN5bmM6ITEsZ2xvYmFsOiExLFwidGhyb3dzXCI6ITB9KX0sci5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIHRoaXNbMF0mJihyLmlzRnVuY3Rpb24oYSkmJihhPWEuY2FsbCh0aGlzWzBdKSksYj1yKGEsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCksdGhpc1swXS5wYXJlbnROb2RlJiZiLmluc2VydEJlZm9yZSh0aGlzWzBdKSxiLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXM7d2hpbGUoYS5maXJzdEVsZW1lbnRDaGlsZClhPWEuZmlyc3RFbGVtZW50Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcykpLHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gci5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtyKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1yKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPXIuaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3IodGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wYXJlbnQoYSkubm90KFwiYm9keVwiKS5lYWNoKGZ1bmN0aW9uKCl7cih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSksdGhpc319KSxyLmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIXIuZXhwci5wc2V1ZG9zLnZpc2libGUoYSl9LHIuZXhwci5wc2V1ZG9zLnZpc2libGU9ZnVuY3Rpb24oYSl7cmV0dXJuISEoYS5vZmZzZXRXaWR0aHx8YS5vZmZzZXRIZWlnaHR8fGEuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpfSxyLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319O3ZhciBPYj17MDoyMDAsMTIyMzoyMDR9LFBiPXIuYWpheFNldHRpbmdzLnhocigpO28uY29ycz0hIVBiJiZcIndpdGhDcmVkZW50aWFsc1wiaW4gUGIsby5hamF4PVBiPSEhUGIsci5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGIpe3ZhciBjLGQ7aWYoby5jb3JzfHxQYiYmIWIuY3Jvc3NEb21haW4pcmV0dXJue3NlbmQ6ZnVuY3Rpb24oZSxmKXt2YXIgZyxoPWIueGhyKCk7aWYoaC5vcGVuKGIudHlwZSxiLnVybCxiLmFzeW5jLGIudXNlcm5hbWUsYi5wYXNzd29yZCksYi54aHJGaWVsZHMpZm9yKGcgaW4gYi54aHJGaWVsZHMpaFtnXT1iLnhockZpZWxkc1tnXTtiLm1pbWVUeXBlJiZoLm92ZXJyaWRlTWltZVR5cGUmJmgub3ZlcnJpZGVNaW1lVHlwZShiLm1pbWVUeXBlKSxiLmNyb3NzRG9tYWlufHxlW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGVbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7Zm9yKGcgaW4gZSloLnNldFJlcXVlc3RIZWFkZXIoZyxlW2ddKTtjPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2MmJihjPWQ9aC5vbmxvYWQ9aC5vbmVycm9yPWgub25hYm9ydD1oLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLFwiYWJvcnRcIj09PWE/aC5hYm9ydCgpOlwiZXJyb3JcIj09PWE/XCJudW1iZXJcIiE9dHlwZW9mIGguc3RhdHVzP2YoMCxcImVycm9yXCIpOmYoaC5zdGF0dXMsaC5zdGF0dXNUZXh0KTpmKE9iW2guc3RhdHVzXXx8aC5zdGF0dXMsaC5zdGF0dXNUZXh0LFwidGV4dFwiIT09KGgucmVzcG9uc2VUeXBlfHxcInRleHRcIil8fFwic3RyaW5nXCIhPXR5cGVvZiBoLnJlc3BvbnNlVGV4dD97YmluYXJ5OmgucmVzcG9uc2V9Ont0ZXh0OmgucmVzcG9uc2VUZXh0fSxoLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxoLm9ubG9hZD1jKCksZD1oLm9uZXJyb3I9YyhcImVycm9yXCIpLHZvaWQgMCE9PWgub25hYm9ydD9oLm9uYWJvcnQ9ZDpoLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1oLnJlYWR5U3RhdGUmJmEuc2V0VGltZW91dChmdW5jdGlvbigpe2MmJmQoKX0pfSxjPWMoXCJhYm9ydFwiKTt0cnl7aC5zZW5kKGIuaGFzQ29udGVudCYmYi5kYXRhfHxudWxsKX1jYXRjaChpKXtpZihjKXRocm93IGl9fSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19fSksci5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uKGEpe2EuY3Jvc3NEb21haW4mJihhLmNvbnRlbnRzLnNjcmlwdD0hMSl9KSxyLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OlwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIn0sY29udGVudHM6e3NjcmlwdDovXFxiKD86amF2YXxlY21hKXNjcmlwdFxcYi99LGNvbnZlcnRlcnM6e1widGV4dCBzY3JpcHRcIjpmdW5jdGlvbihhKXtyZXR1cm4gci5nbG9iYWxFdmFsKGEpLGF9fX0pLHIuYWpheFByZWZpbHRlcihcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe3ZvaWQgMD09PWEuY2FjaGUmJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPVwiR0VUXCIpfSksci5hamF4VHJhbnNwb3J0KFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7aWYoYS5jcm9zc0RvbWFpbil7dmFyIGIsYztyZXR1cm57c2VuZDpmdW5jdGlvbihlLGYpe2I9cihcIjxzY3JpcHQ+XCIpLnByb3Aoe2NoYXJzZXQ6YS5zY3JpcHRDaGFyc2V0LHNyYzphLnVybH0pLm9uKFwibG9hZCBlcnJvclwiLGM9ZnVuY3Rpb24oYSl7Yi5yZW1vdmUoKSxjPW51bGwsYSYmZihcImVycm9yXCI9PT1hLnR5cGU/NDA0OjIwMCxhLnR5cGUpfSksZC5oZWFkLmFwcGVuZENoaWxkKGJbMF0pfSxhYm9ydDpmdW5jdGlvbigpe2MmJmMoKX19fX0pO3ZhciBRYj1bXSxSYj0vKD0pXFw/KD89JnwkKXxcXD9cXD8vO3IuYWpheFNldHVwKHtqc29ucDpcImNhbGxiYWNrXCIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPVFiLnBvcCgpfHxyLmV4cGFuZG8rXCJfXCIrcmIrKztyZXR1cm4gdGhpc1thXT0hMCxhfX0pLHIuYWpheFByZWZpbHRlcihcImpzb24ganNvbnBcIixmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnLGg9Yi5qc29ucCE9PSExJiYoUmIudGVzdChiLnVybCk/XCJ1cmxcIjpcInN0cmluZ1wiPT10eXBlb2YgYi5kYXRhJiYwPT09KGIuY29udGVudFR5cGV8fFwiXCIpLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikmJlJiLnRlc3QoYi5kYXRhKSYmXCJkYXRhXCIpO2lmKGh8fFwianNvbnBcIj09PWIuZGF0YVR5cGVzWzBdKXJldHVybiBlPWIuanNvbnBDYWxsYmFjaz1yLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShSYixcIiQxXCIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShzYi50ZXN0KGIudXJsKT9cIiZcIjpcIj9cIikrYi5qc29ucCtcIj1cIitlKSxiLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBnfHxyLmVycm9yKGUrXCIgd2FzIG5vdCBjYWxsZWRcIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09XCJqc29uXCIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXt2b2lkIDA9PT1mP3IoYSkucmVtb3ZlUHJvcChlKTphW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssUWIucHVzaChlKSksZyYmci5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSxcInNjcmlwdFwifSksby5jcmVhdGVIVE1MRG9jdW1lbnQ9ZnVuY3Rpb24oKXt2YXIgYT1kLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKS5ib2R5O3JldHVybiBhLmlubmVySFRNTD1cIjxmb3JtPjwvZm9ybT48Zm9ybT48L2Zvcm0+XCIsMj09PWEuY2hpbGROb2Rlcy5sZW5ndGh9KCksci5wYXJzZUhUTUw9ZnVuY3Rpb24oYSxiLGMpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybltdO1wiYm9vbGVhblwiPT10eXBlb2YgYiYmKGM9YixiPSExKTt2YXIgZSxmLGc7cmV0dXJuIGJ8fChvLmNyZWF0ZUhUTUxEb2N1bWVudD8oYj1kLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKSxlPWIuY3JlYXRlRWxlbWVudChcImJhc2VcIiksZS5ocmVmPWQubG9jYXRpb24uaHJlZixiLmhlYWQuYXBwZW5kQ2hpbGQoZSkpOmI9ZCksZj1CLmV4ZWMoYSksZz0hYyYmW10sZj9bYi5jcmVhdGVFbGVtZW50KGZbMV0pXTooZj1wYShbYV0sYixnKSxnJiZnLmxlbmd0aCYmcihnKS5yZW1vdmUoKSxyLm1lcmdlKFtdLGYuY2hpbGROb2RlcykpfSxyLmZuLmxvYWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPXRoaXMsaD1hLmluZGV4T2YoXCIgXCIpO3JldHVybiBoPi0xJiYoZD1tYihhLnNsaWNlKGgpKSxhPWEuc2xpY2UoMCxoKSksci5pc0Z1bmN0aW9uKGIpPyhjPWIsYj12b2lkIDApOmImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoZT1cIlBPU1RcIiksZy5sZW5ndGg+MCYmci5hamF4KHt1cmw6YSx0eXBlOmV8fFwiR0VUXCIsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9yKFwiPGRpdj5cIikuYXBwZW5kKHIucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuYWx3YXlzKGMmJmZ1bmN0aW9uKGEsYil7Zy5lYWNoKGZ1bmN0aW9uKCl7Yy5hcHBseSh0aGlzLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pfSksdGhpc30sci5lYWNoKFtcImFqYXhTdGFydFwiLFwiYWpheFN0b3BcIixcImFqYXhDb21wbGV0ZVwiLFwiYWpheEVycm9yXCIsXCJhamF4U3VjY2Vzc1wiLFwiYWpheFNlbmRcIl0sZnVuY3Rpb24oYSxiKXtyLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksci5leHByLnBzZXVkb3MuYW5pbWF0ZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHIuZ3JlcChyLnRpbWVycyxmdW5jdGlvbihiKXtyZXR1cm4gYT09PWIuZWxlbX0pLmxlbmd0aH07ZnVuY3Rpb24gU2IoYSl7cmV0dXJuIHIuaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31yLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPXIuY3NzKGEsXCJwb3NpdGlvblwiKSxsPXIoYSksbT17fTtcInN0YXRpY1wiPT09ayYmKGEuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxoPWwub2Zmc2V0KCksZj1yLmNzcyhhLFwidG9wXCIpLGk9ci5jc3MoYSxcImxlZnRcIiksaj0oXCJhYnNvbHV0ZVwiPT09a3x8XCJmaXhlZFwiPT09aykmJihmK2kpLmluZGV4T2YoXCJhdXRvXCIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxyLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsci5leHRlbmQoe30saCkpKSxudWxsIT1iLnRvcCYmKG0udG9wPWIudG9wLWgudG9wK2cpLG51bGwhPWIubGVmdCYmKG0ubGVmdD1iLmxlZnQtaC5sZWZ0K2UpLFwidXNpbmdcImluIGI/Yi51c2luZy5jYWxsKGEsbSk6bC5jc3MobSl9fSxyLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKGEpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PWE/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oYil7ci5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsYSxiKX0pO3ZhciBiLGMsZCxlLGY9dGhpc1swXTtpZihmKXJldHVybiBmLmdldENsaWVudFJlY3RzKCkubGVuZ3RoPyhkPWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZC53aWR0aHx8ZC5oZWlnaHQ/KGU9Zi5vd25lckRvY3VtZW50LGM9U2IoZSksYj1lLmRvY3VtZW50RWxlbWVudCx7dG9wOmQudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDpkLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTpkKTp7dG9wOjAsbGVmdDowfX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgYSxiLGM9dGhpc1swXSxkPXt0b3A6MCxsZWZ0OjB9O3JldHVyblwiZml4ZWRcIj09PXIuY3NzKGMsXCJwb3NpdGlvblwiKT9iPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGE9dGhpcy5vZmZzZXRQYXJlbnQoKSxiPXRoaXMub2Zmc2V0KCksci5ub2RlTmFtZShhWzBdLFwiaHRtbFwiKXx8KGQ9YS5vZmZzZXQoKSksZD17dG9wOmQudG9wK3IuY3NzKGFbMF0sXCJib3JkZXJUb3BXaWR0aFwiLCEwKSxsZWZ0OmQubGVmdCtyLmNzcyhhWzBdLFwiYm9yZGVyTGVmdFdpZHRoXCIsITApfSkse3RvcDpiLnRvcC1kLnRvcC1yLmNzcyhjLFwibWFyZ2luVG9wXCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1yLmNzcyhjLFwibWFyZ2luTGVmdFwiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShhJiZcInN0YXRpY1wiPT09ci5jc3MoYSxcInBvc2l0aW9uXCIpKWE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGF8fHFhfSl9fSksci5lYWNoKHtzY3JvbGxMZWZ0OlwicGFnZVhPZmZzZXRcIixzY3JvbGxUb3A6XCJwYWdlWU9mZnNldFwifSxmdW5jdGlvbihhLGIpe3ZhciBjPVwicGFnZVlPZmZzZXRcIj09PWI7ci5mblthXT1mdW5jdGlvbihkKXtyZXR1cm4gUyh0aGlzLGZ1bmN0aW9uKGEsZCxlKXt2YXIgZj1TYihhKTtyZXR1cm4gdm9pZCAwPT09ZT9mP2ZbYl06YVtkXTp2b2lkKGY/Zi5zY3JvbGxUbyhjP2YucGFnZVhPZmZzZXQ6ZSxjP2U6Zi5wYWdlWU9mZnNldCk6YVtkXT1lKX0sYSxkLGFyZ3VtZW50cy5sZW5ndGgpfX0pLHIuZWFjaChbXCJ0b3BcIixcImxlZnRcIl0sZnVuY3Rpb24oYSxiKXtyLmNzc0hvb2tzW2JdPU9hKG8ucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihhLGMpe2lmKGMpcmV0dXJuIGM9TmEoYSxiKSxMYS50ZXN0KGMpP3IoYSkucG9zaXRpb24oKVtiXStcInB4XCI6Y30pfSksci5lYWNoKHtIZWlnaHQ6XCJoZWlnaHRcIixXaWR0aDpcIndpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7ci5lYWNoKHtwYWRkaW5nOlwiaW5uZXJcIithLGNvbnRlbnQ6YixcIlwiOlwib3V0ZXJcIithfSxmdW5jdGlvbihjLGQpe3IuZm5bZF09ZnVuY3Rpb24oZSxmKXt2YXIgZz1hcmd1bWVudHMubGVuZ3RoJiYoY3x8XCJib29sZWFuXCIhPXR5cGVvZiBlKSxoPWN8fChlPT09ITB8fGY9PT0hMD9cIm1hcmdpblwiOlwiYm9yZGVyXCIpO3JldHVybiBTKHRoaXMsZnVuY3Rpb24oYixjLGUpe3ZhciBmO3JldHVybiByLmlzV2luZG93KGIpPzA9PT1kLmluZGV4T2YoXCJvdXRlclwiKT9iW1wiaW5uZXJcIithXTpiLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhmPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGZbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxmW1wib2Zmc2V0XCIrYV0sZltcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZT9yLmNzcyhiLGMsaCk6ci5zdHlsZShiLGMsZSxoKX0sYixnP2U6dm9pZCAwLGcpfX0pfSksci5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsXCIqKlwiKTp0aGlzLm9mZihiLGF8fFwiKipcIixjKX19KSxyLnBhcnNlSlNPTj1KU09OLnBhcnNlLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKFwianF1ZXJ5XCIsW10sZnVuY3Rpb24oKXtyZXR1cm4gcn0pO3ZhciBUYj1hLmpRdWVyeSxVYj1hLiQ7cmV0dXJuIHIubm9Db25mbGljdD1mdW5jdGlvbihiKXtyZXR1cm4gYS4kPT09ciYmKGEuJD1VYiksYiYmYS5qUXVlcnk9PT1yJiYoYS5qUXVlcnk9VGIpLHJ9LGJ8fChhLmpRdWVyeT1hLiQ9cikscn0pO1xyXG4iLCIvKiEgalF1ZXJ5IFZhbGlkYXRpb24gUGx1Z2luIC0gdjEuMTcuMCAtIDcvMjkvMjAxN1xyXG4gKiBodHRwczovL2pxdWVyeXZhbGlkYXRpb24ub3JnL1xyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgSsO2cm4gWmFlZmZlcmVyOyBMaWNlbnNlZCBNSVQgKi9cclxuIWZ1bmN0aW9uIChhKSB7IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoW1wianF1ZXJ5XCJdLCBhKSA6IFwib2JqZWN0XCIgPT0gdHlwZW9mIG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cyA/IG1vZHVsZS5leHBvcnRzID0gYShyZXF1aXJlKFwianF1ZXJ5XCIpKSA6IGEoalF1ZXJ5KSB9KGZ1bmN0aW9uIChhKSB7IGEuZXh0ZW5kKGEuZm4sIHsgdmFsaWRhdGU6IGZ1bmN0aW9uIChiKSB7IGlmICghdGhpcy5sZW5ndGgpIHJldHVybiB2b2lkIChiICYmIGIuZGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKFwiTm90aGluZyBzZWxlY3RlZCwgY2FuJ3QgdmFsaWRhdGUsIHJldHVybmluZyBub3RoaW5nLlwiKSk7IHZhciBjID0gYS5kYXRhKHRoaXNbMF0sIFwidmFsaWRhdG9yXCIpOyByZXR1cm4gYyA/IGMgOiAodGhpcy5hdHRyKFwibm92YWxpZGF0ZVwiLCBcIm5vdmFsaWRhdGVcIiksIGMgPSBuZXcgYS52YWxpZGF0b3IoYiwgdGhpc1swXSksIGEuZGF0YSh0aGlzWzBdLCBcInZhbGlkYXRvclwiLCBjKSwgYy5zZXR0aW5ncy5vbnN1Ym1pdCAmJiAodGhpcy5vbihcImNsaWNrLnZhbGlkYXRlXCIsIFwiOnN1Ym1pdFwiLCBmdW5jdGlvbiAoYikgeyBjLnN1Ym1pdEJ1dHRvbiA9IGIuY3VycmVudFRhcmdldCwgYSh0aGlzKS5oYXNDbGFzcyhcImNhbmNlbFwiKSAmJiAoYy5jYW5jZWxTdWJtaXQgPSAhMCksIHZvaWQgMCAhPT0gYSh0aGlzKS5hdHRyKFwiZm9ybW5vdmFsaWRhdGVcIikgJiYgKGMuY2FuY2VsU3VibWl0ID0gITApIH0pLCB0aGlzLm9uKFwic3VibWl0LnZhbGlkYXRlXCIsIGZ1bmN0aW9uIChiKSB7IGZ1bmN0aW9uIGQoKSB7IHZhciBkLCBlOyByZXR1cm4gYy5zdWJtaXRCdXR0b24gJiYgKGMuc2V0dGluZ3Muc3VibWl0SGFuZGxlciB8fCBjLmZvcm1TdWJtaXR0ZWQpICYmIChkID0gYShcIjxpbnB1dCB0eXBlPSdoaWRkZW4nLz5cIikuYXR0cihcIm5hbWVcIiwgYy5zdWJtaXRCdXR0b24ubmFtZSkudmFsKGEoYy5zdWJtaXRCdXR0b24pLnZhbCgpKS5hcHBlbmRUbyhjLmN1cnJlbnRGb3JtKSksICFjLnNldHRpbmdzLnN1Ym1pdEhhbmRsZXIgfHwgKGUgPSBjLnNldHRpbmdzLnN1Ym1pdEhhbmRsZXIuY2FsbChjLCBjLmN1cnJlbnRGb3JtLCBiKSwgZCAmJiBkLnJlbW92ZSgpLCB2b2lkIDAgIT09IGUgJiYgZSkgfSByZXR1cm4gYy5zZXR0aW5ncy5kZWJ1ZyAmJiBiLnByZXZlbnREZWZhdWx0KCksIGMuY2FuY2VsU3VibWl0ID8gKGMuY2FuY2VsU3VibWl0ID0gITEsIGQoKSkgOiBjLmZvcm0oKSA/IGMucGVuZGluZ1JlcXVlc3QgPyAoYy5mb3JtU3VibWl0dGVkID0gITAsICExKSA6IGQoKSA6IChjLmZvY3VzSW52YWxpZCgpLCAhMSkgfSkpLCBjKSB9LCB2YWxpZDogZnVuY3Rpb24gKCkgeyB2YXIgYiwgYywgZDsgcmV0dXJuIGEodGhpc1swXSkuaXMoXCJmb3JtXCIpID8gYiA9IHRoaXMudmFsaWRhdGUoKS5mb3JtKCkgOiAoZCA9IFtdLCBiID0gITAsIGMgPSBhKHRoaXNbMF0uZm9ybSkudmFsaWRhdGUoKSwgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgYiA9IGMuZWxlbWVudCh0aGlzKSAmJiBiLCBiIHx8IChkID0gZC5jb25jYXQoYy5lcnJvckxpc3QpKSB9KSwgYy5lcnJvckxpc3QgPSBkKSwgYiB9LCBydWxlczogZnVuY3Rpb24gKGIsIGMpIHsgdmFyIGQsIGUsIGYsIGcsIGgsIGksIGogPSB0aGlzWzBdOyBpZiAobnVsbCAhPSBqICYmICghai5mb3JtICYmIGouaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpICYmIChqLmZvcm0gPSB0aGlzLmNsb3Nlc3QoXCJmb3JtXCIpWzBdLCBqLm5hbWUgPSB0aGlzLmF0dHIoXCJuYW1lXCIpKSwgbnVsbCAhPSBqLmZvcm0pKSB7IGlmIChiKSBzd2l0Y2ggKGQgPSBhLmRhdGEoai5mb3JtLCBcInZhbGlkYXRvclwiKS5zZXR0aW5ncywgZSA9IGQucnVsZXMsIGYgPSBhLnZhbGlkYXRvci5zdGF0aWNSdWxlcyhqKSwgYikgeyBjYXNlIFwiYWRkXCI6IGEuZXh0ZW5kKGYsIGEudmFsaWRhdG9yLm5vcm1hbGl6ZVJ1bGUoYykpLCBkZWxldGUgZi5tZXNzYWdlcywgZVtqLm5hbWVdID0gZiwgYy5tZXNzYWdlcyAmJiAoZC5tZXNzYWdlc1tqLm5hbWVdID0gYS5leHRlbmQoZC5tZXNzYWdlc1tqLm5hbWVdLCBjLm1lc3NhZ2VzKSk7IGJyZWFrOyBjYXNlIFwicmVtb3ZlXCI6IHJldHVybiBjID8gKGkgPSB7fSwgYS5lYWNoKGMuc3BsaXQoL1xccy8pLCBmdW5jdGlvbiAoYSwgYikgeyBpW2JdID0gZltiXSwgZGVsZXRlIGZbYl0gfSksIGkpIDogKGRlbGV0ZSBlW2oubmFtZV0sIGYpIH1yZXR1cm4gZyA9IGEudmFsaWRhdG9yLm5vcm1hbGl6ZVJ1bGVzKGEuZXh0ZW5kKHt9LCBhLnZhbGlkYXRvci5jbGFzc1J1bGVzKGopLCBhLnZhbGlkYXRvci5hdHRyaWJ1dGVSdWxlcyhqKSwgYS52YWxpZGF0b3IuZGF0YVJ1bGVzKGopLCBhLnZhbGlkYXRvci5zdGF0aWNSdWxlcyhqKSksIGopLCBnLnJlcXVpcmVkICYmIChoID0gZy5yZXF1aXJlZCwgZGVsZXRlIGcucmVxdWlyZWQsIGcgPSBhLmV4dGVuZCh7IHJlcXVpcmVkOiBoIH0sIGcpKSwgZy5yZW1vdGUgJiYgKGggPSBnLnJlbW90ZSwgZGVsZXRlIGcucmVtb3RlLCBnID0gYS5leHRlbmQoZywgeyByZW1vdGU6IGggfSkpLCBnIH0gfSB9KSwgYS5leHRlbmQoYS5leHByLnBzZXVkb3MgfHwgYS5leHByW1wiOlwiXSwgeyBibGFuazogZnVuY3Rpb24gKGIpIHsgcmV0dXJuICFhLnRyaW0oXCJcIiArIGEoYikudmFsKCkpIH0sIGZpbGxlZDogZnVuY3Rpb24gKGIpIHsgdmFyIGMgPSBhKGIpLnZhbCgpOyByZXR1cm4gbnVsbCAhPT0gYyAmJiAhIWEudHJpbShcIlwiICsgYykgfSwgdW5jaGVja2VkOiBmdW5jdGlvbiAoYikgeyByZXR1cm4gIWEoYikucHJvcChcImNoZWNrZWRcIikgfSB9KSwgYS52YWxpZGF0b3IgPSBmdW5jdGlvbiAoYiwgYykgeyB0aGlzLnNldHRpbmdzID0gYS5leHRlbmQoITAsIHt9LCBhLnZhbGlkYXRvci5kZWZhdWx0cywgYiksIHRoaXMuY3VycmVudEZvcm0gPSBjLCB0aGlzLmluaXQoKSB9LCBhLnZhbGlkYXRvci5mb3JtYXQgPSBmdW5jdGlvbiAoYiwgYykgeyByZXR1cm4gMSA9PT0gYXJndW1lbnRzLmxlbmd0aCA/IGZ1bmN0aW9uICgpIHsgdmFyIGMgPSBhLm1ha2VBcnJheShhcmd1bWVudHMpOyByZXR1cm4gYy51bnNoaWZ0KGIpLCBhLnZhbGlkYXRvci5mb3JtYXQuYXBwbHkodGhpcywgYykgfSA6IHZvaWQgMCA9PT0gYyA/IGIgOiAoYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYy5jb25zdHJ1Y3RvciAhPT0gQXJyYXkgJiYgKGMgPSBhLm1ha2VBcnJheShhcmd1bWVudHMpLnNsaWNlKDEpKSwgYy5jb25zdHJ1Y3RvciAhPT0gQXJyYXkgJiYgKGMgPSBbY10pLCBhLmVhY2goYywgZnVuY3Rpb24gKGEsIGMpIHsgYiA9IGIucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXHtcIiArIGEgKyBcIlxcXFx9XCIsIFwiZ1wiKSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gYyB9KSB9KSwgYikgfSwgYS5leHRlbmQoYS52YWxpZGF0b3IsIHsgZGVmYXVsdHM6IHsgbWVzc2FnZXM6IHt9LCBncm91cHM6IHt9LCBydWxlczoge30sIGVycm9yQ2xhc3M6IFwiZXJyb3JcIiwgcGVuZGluZ0NsYXNzOiBcInBlbmRpbmdcIiwgdmFsaWRDbGFzczogXCJ2YWxpZFwiLCBlcnJvckVsZW1lbnQ6IFwibGFiZWxcIiwgZm9jdXNDbGVhbnVwOiAhMSwgZm9jdXNJbnZhbGlkOiAhMCwgZXJyb3JDb250YWluZXI6IGEoW10pLCBlcnJvckxhYmVsQ29udGFpbmVyOiBhKFtdKSwgb25zdWJtaXQ6ICEwLCBpZ25vcmU6IFwiOmhpZGRlblwiLCBpZ25vcmVUaXRsZTogITEsIG9uZm9jdXNpbjogZnVuY3Rpb24gKGEpIHsgdGhpcy5sYXN0QWN0aXZlID0gYSwgdGhpcy5zZXR0aW5ncy5mb2N1c0NsZWFudXAgJiYgKHRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQgJiYgdGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodC5jYWxsKHRoaXMsIGEsIHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcywgdGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKSwgdGhpcy5oaWRlVGhlc2UodGhpcy5lcnJvcnNGb3IoYSkpKSB9LCBvbmZvY3Vzb3V0OiBmdW5jdGlvbiAoYSkgeyB0aGlzLmNoZWNrYWJsZShhKSB8fCAhKGEubmFtZSBpbiB0aGlzLnN1Ym1pdHRlZCkgJiYgdGhpcy5vcHRpb25hbChhKSB8fCB0aGlzLmVsZW1lbnQoYSkgfSwgb25rZXl1cDogZnVuY3Rpb24gKGIsIGMpIHsgdmFyIGQgPSBbMTYsIDE3LCAxOCwgMjAsIDM1LCAzNiwgMzcsIDM4LCAzOSwgNDAsIDQ1LCAxNDQsIDIyNV07IDkgPT09IGMud2hpY2ggJiYgXCJcIiA9PT0gdGhpcy5lbGVtZW50VmFsdWUoYikgfHwgYS5pbkFycmF5KGMua2V5Q29kZSwgZCkgIT09IC0xIHx8IChiLm5hbWUgaW4gdGhpcy5zdWJtaXR0ZWQgfHwgYi5uYW1lIGluIHRoaXMuaW52YWxpZCkgJiYgdGhpcy5lbGVtZW50KGIpIH0sIG9uY2xpY2s6IGZ1bmN0aW9uIChhKSB7IGEubmFtZSBpbiB0aGlzLnN1Ym1pdHRlZCA/IHRoaXMuZWxlbWVudChhKSA6IGEucGFyZW50Tm9kZS5uYW1lIGluIHRoaXMuc3VibWl0dGVkICYmIHRoaXMuZWxlbWVudChhLnBhcmVudE5vZGUpIH0sIGhpZ2hsaWdodDogZnVuY3Rpb24gKGIsIGMsIGQpIHsgXCJyYWRpb1wiID09PSBiLnR5cGUgPyB0aGlzLmZpbmRCeU5hbWUoYi5uYW1lKS5hZGRDbGFzcyhjKS5yZW1vdmVDbGFzcyhkKSA6IGEoYikuYWRkQ2xhc3MoYykucmVtb3ZlQ2xhc3MoZCkgfSwgdW5oaWdobGlnaHQ6IGZ1bmN0aW9uIChiLCBjLCBkKSB7IFwicmFkaW9cIiA9PT0gYi50eXBlID8gdGhpcy5maW5kQnlOYW1lKGIubmFtZSkucmVtb3ZlQ2xhc3MoYykuYWRkQ2xhc3MoZCkgOiBhKGIpLnJlbW92ZUNsYXNzKGMpLmFkZENsYXNzKGQpIH0gfSwgc2V0RGVmYXVsdHM6IGZ1bmN0aW9uIChiKSB7IGEuZXh0ZW5kKGEudmFsaWRhdG9yLmRlZmF1bHRzLCBiKSB9LCBtZXNzYWdlczogeyByZXF1aXJlZDogXCJUaGlzIGZpZWxkIGlzIHJlcXVpcmVkLlwiLCByZW1vdGU6IFwiUGxlYXNlIGZpeCB0aGlzIGZpZWxkLlwiLCBlbWFpbDogXCJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLlwiLCB1cmw6IFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgVVJMLlwiLCBkYXRlOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGRhdGUuXCIsIGRhdGVJU086IFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgZGF0ZSAoSVNPKS5cIiwgbnVtYmVyOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIG51bWJlci5cIiwgZGlnaXRzOiBcIlBsZWFzZSBlbnRlciBvbmx5IGRpZ2l0cy5cIiwgZXF1YWxUbzogXCJQbGVhc2UgZW50ZXIgdGhlIHNhbWUgdmFsdWUgYWdhaW4uXCIsIG1heGxlbmd0aDogYS52YWxpZGF0b3IuZm9ybWF0KFwiUGxlYXNlIGVudGVyIG5vIG1vcmUgdGhhbiB7MH0gY2hhcmFjdGVycy5cIiksIG1pbmxlbmd0aDogYS52YWxpZGF0b3IuZm9ybWF0KFwiUGxlYXNlIGVudGVyIGF0IGxlYXN0IHswfSBjaGFyYWN0ZXJzLlwiKSwgcmFuZ2VsZW5ndGg6IGEudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBhIHZhbHVlIGJldHdlZW4gezB9IGFuZCB7MX0gY2hhcmFjdGVycyBsb25nLlwiKSwgcmFuZ2U6IGEudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBhIHZhbHVlIGJldHdlZW4gezB9IGFuZCB7MX0uXCIpLCBtYXg6IGEudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBhIHZhbHVlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB7MH0uXCIpLCBtaW46IGEudmFsaWRhdG9yLmZvcm1hdChcIlBsZWFzZSBlbnRlciBhIHZhbHVlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB7MH0uXCIpLCBzdGVwOiBhLnZhbGlkYXRvci5mb3JtYXQoXCJQbGVhc2UgZW50ZXIgYSBtdWx0aXBsZSBvZiB7MH0uXCIpIH0sIGF1dG9DcmVhdGVSYW5nZXM6ICExLCBwcm90b3R5cGU6IHsgaW5pdDogZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBiKGIpIHsgIXRoaXMuZm9ybSAmJiB0aGlzLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRlZGl0YWJsZVwiKSAmJiAodGhpcy5mb3JtID0gYSh0aGlzKS5jbG9zZXN0KFwiZm9ybVwiKVswXSwgdGhpcy5uYW1lID0gYSh0aGlzKS5hdHRyKFwibmFtZVwiKSk7IHZhciBjID0gYS5kYXRhKHRoaXMuZm9ybSwgXCJ2YWxpZGF0b3JcIiksIGQgPSBcIm9uXCIgKyBiLnR5cGUucmVwbGFjZSgvXnZhbGlkYXRlLywgXCJcIiksIGUgPSBjLnNldHRpbmdzOyBlW2RdICYmICFhKHRoaXMpLmlzKGUuaWdub3JlKSAmJiBlW2RdLmNhbGwoYywgdGhpcywgYikgfSB0aGlzLmxhYmVsQ29udGFpbmVyID0gYSh0aGlzLnNldHRpbmdzLmVycm9yTGFiZWxDb250YWluZXIpLCB0aGlzLmVycm9yQ29udGV4dCA9IHRoaXMubGFiZWxDb250YWluZXIubGVuZ3RoICYmIHRoaXMubGFiZWxDb250YWluZXIgfHwgYSh0aGlzLmN1cnJlbnRGb3JtKSwgdGhpcy5jb250YWluZXJzID0gYSh0aGlzLnNldHRpbmdzLmVycm9yQ29udGFpbmVyKS5hZGQodGhpcy5zZXR0aW5ncy5lcnJvckxhYmVsQ29udGFpbmVyKSwgdGhpcy5zdWJtaXR0ZWQgPSB7fSwgdGhpcy52YWx1ZUNhY2hlID0ge30sIHRoaXMucGVuZGluZ1JlcXVlc3QgPSAwLCB0aGlzLnBlbmRpbmcgPSB7fSwgdGhpcy5pbnZhbGlkID0ge30sIHRoaXMucmVzZXQoKTsgdmFyIGMsIGQgPSB0aGlzLmdyb3VwcyA9IHt9OyBhLmVhY2godGhpcy5zZXR0aW5ncy5ncm91cHMsIGZ1bmN0aW9uIChiLCBjKSB7IFwic3RyaW5nXCIgPT0gdHlwZW9mIGMgJiYgKGMgPSBjLnNwbGl0KC9cXHMvKSksIGEuZWFjaChjLCBmdW5jdGlvbiAoYSwgYykgeyBkW2NdID0gYiB9KSB9KSwgYyA9IHRoaXMuc2V0dGluZ3MucnVsZXMsIGEuZWFjaChjLCBmdW5jdGlvbiAoYiwgZCkgeyBjW2JdID0gYS52YWxpZGF0b3Iubm9ybWFsaXplUnVsZShkKSB9KSwgYSh0aGlzLmN1cnJlbnRGb3JtKS5vbihcImZvY3VzaW4udmFsaWRhdGUgZm9jdXNvdXQudmFsaWRhdGUga2V5dXAudmFsaWRhdGVcIiwgXCI6dGV4dCwgW3R5cGU9J3Bhc3N3b3JkJ10sIFt0eXBlPSdmaWxlJ10sIHNlbGVjdCwgdGV4dGFyZWEsIFt0eXBlPSdudW1iZXInXSwgW3R5cGU9J3NlYXJjaCddLCBbdHlwZT0ndGVsJ10sIFt0eXBlPSd1cmwnXSwgW3R5cGU9J2VtYWlsJ10sIFt0eXBlPSdkYXRldGltZSddLCBbdHlwZT0nZGF0ZSddLCBbdHlwZT0nbW9udGgnXSwgW3R5cGU9J3dlZWsnXSwgW3R5cGU9J3RpbWUnXSwgW3R5cGU9J2RhdGV0aW1lLWxvY2FsJ10sIFt0eXBlPSdyYW5nZSddLCBbdHlwZT0nY29sb3InXSwgW3R5cGU9J3JhZGlvJ10sIFt0eXBlPSdjaGVja2JveCddLCBbY29udGVudGVkaXRhYmxlXSwgW3R5cGU9J2J1dHRvbiddXCIsIGIpLm9uKFwiY2xpY2sudmFsaWRhdGVcIiwgXCJzZWxlY3QsIG9wdGlvbiwgW3R5cGU9J3JhZGlvJ10sIFt0eXBlPSdjaGVja2JveCddXCIsIGIpLCB0aGlzLnNldHRpbmdzLmludmFsaWRIYW5kbGVyICYmIGEodGhpcy5jdXJyZW50Rm9ybSkub24oXCJpbnZhbGlkLWZvcm0udmFsaWRhdGVcIiwgdGhpcy5zZXR0aW5ncy5pbnZhbGlkSGFuZGxlcikgfSwgZm9ybTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5jaGVja0Zvcm0oKSwgYS5leHRlbmQodGhpcy5zdWJtaXR0ZWQsIHRoaXMuZXJyb3JNYXApLCB0aGlzLmludmFsaWQgPSBhLmV4dGVuZCh7fSwgdGhpcy5lcnJvck1hcCksIHRoaXMudmFsaWQoKSB8fCBhKHRoaXMuY3VycmVudEZvcm0pLnRyaWdnZXJIYW5kbGVyKFwiaW52YWxpZC1mb3JtXCIsIFt0aGlzXSksIHRoaXMuc2hvd0Vycm9ycygpLCB0aGlzLnZhbGlkKCkgfSwgY2hlY2tGb3JtOiBmdW5jdGlvbiAoKSB7IHRoaXMucHJlcGFyZUZvcm0oKTsgZm9yICh2YXIgYSA9IDAsIGIgPSB0aGlzLmN1cnJlbnRFbGVtZW50cyA9IHRoaXMuZWxlbWVudHMoKTsgYlthXTsgYSsrKXRoaXMuY2hlY2soYlthXSk7IHJldHVybiB0aGlzLnZhbGlkKCkgfSwgZWxlbWVudDogZnVuY3Rpb24gKGIpIHsgdmFyIGMsIGQsIGUgPSB0aGlzLmNsZWFuKGIpLCBmID0gdGhpcy52YWxpZGF0aW9uVGFyZ2V0Rm9yKGUpLCBnID0gdGhpcywgaCA9ICEwOyByZXR1cm4gdm9pZCAwID09PSBmID8gZGVsZXRlIHRoaXMuaW52YWxpZFtlLm5hbWVdIDogKHRoaXMucHJlcGFyZUVsZW1lbnQoZiksIHRoaXMuY3VycmVudEVsZW1lbnRzID0gYShmKSwgZCA9IHRoaXMuZ3JvdXBzW2YubmFtZV0sIGQgJiYgYS5lYWNoKHRoaXMuZ3JvdXBzLCBmdW5jdGlvbiAoYSwgYikgeyBiID09PSBkICYmIGEgIT09IGYubmFtZSAmJiAoZSA9IGcudmFsaWRhdGlvblRhcmdldEZvcihnLmNsZWFuKGcuZmluZEJ5TmFtZShhKSkpLCBlICYmIGUubmFtZSBpbiBnLmludmFsaWQgJiYgKGcuY3VycmVudEVsZW1lbnRzLnB1c2goZSksIGggPSBnLmNoZWNrKGUpICYmIGgpKSB9KSwgYyA9IHRoaXMuY2hlY2soZikgIT09ICExLCBoID0gaCAmJiBjLCBjID8gdGhpcy5pbnZhbGlkW2YubmFtZV0gPSAhMSA6IHRoaXMuaW52YWxpZFtmLm5hbWVdID0gITAsIHRoaXMubnVtYmVyT2ZJbnZhbGlkcygpIHx8ICh0aGlzLnRvSGlkZSA9IHRoaXMudG9IaWRlLmFkZCh0aGlzLmNvbnRhaW5lcnMpKSwgdGhpcy5zaG93RXJyb3JzKCksIGEoYikuYXR0cihcImFyaWEtaW52YWxpZFwiLCAhYykpLCBoIH0sIHNob3dFcnJvcnM6IGZ1bmN0aW9uIChiKSB7IGlmIChiKSB7IHZhciBjID0gdGhpczsgYS5leHRlbmQodGhpcy5lcnJvck1hcCwgYiksIHRoaXMuZXJyb3JMaXN0ID0gYS5tYXAodGhpcy5lcnJvck1hcCwgZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIHsgbWVzc2FnZTogYSwgZWxlbWVudDogYy5maW5kQnlOYW1lKGIpWzBdIH0gfSksIHRoaXMuc3VjY2Vzc0xpc3QgPSBhLmdyZXAodGhpcy5zdWNjZXNzTGlzdCwgZnVuY3Rpb24gKGEpIHsgcmV0dXJuICEoYS5uYW1lIGluIGIpIH0pIH0gdGhpcy5zZXR0aW5ncy5zaG93RXJyb3JzID8gdGhpcy5zZXR0aW5ncy5zaG93RXJyb3JzLmNhbGwodGhpcywgdGhpcy5lcnJvck1hcCwgdGhpcy5lcnJvckxpc3QpIDogdGhpcy5kZWZhdWx0U2hvd0Vycm9ycygpIH0sIHJlc2V0Rm9ybTogZnVuY3Rpb24gKCkgeyBhLmZuLnJlc2V0Rm9ybSAmJiBhKHRoaXMuY3VycmVudEZvcm0pLnJlc2V0Rm9ybSgpLCB0aGlzLmludmFsaWQgPSB7fSwgdGhpcy5zdWJtaXR0ZWQgPSB7fSwgdGhpcy5wcmVwYXJlRm9ybSgpLCB0aGlzLmhpZGVFcnJvcnMoKTsgdmFyIGIgPSB0aGlzLmVsZW1lbnRzKCkucmVtb3ZlRGF0YShcInByZXZpb3VzVmFsdWVcIikucmVtb3ZlQXR0cihcImFyaWEtaW52YWxpZFwiKTsgdGhpcy5yZXNldEVsZW1lbnRzKGIpIH0sIHJlc2V0RWxlbWVudHM6IGZ1bmN0aW9uIChhKSB7IHZhciBiOyBpZiAodGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodCkgZm9yIChiID0gMDsgYVtiXTsgYisrKXRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQuY2FsbCh0aGlzLCBhW2JdLCB0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MsIFwiXCIpLCB0aGlzLmZpbmRCeU5hbWUoYVtiXS5uYW1lKS5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpOyBlbHNlIGEucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzKS5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpIH0sIG51bWJlck9mSW52YWxpZHM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMub2JqZWN0TGVuZ3RoKHRoaXMuaW52YWxpZCkgfSwgb2JqZWN0TGVuZ3RoOiBmdW5jdGlvbiAoYSkgeyB2YXIgYiwgYyA9IDA7IGZvciAoYiBpbiBhKSB2b2lkIDAgIT09IGFbYl0gJiYgbnVsbCAhPT0gYVtiXSAmJiBhW2JdICE9PSAhMSAmJiBjKys7IHJldHVybiBjIH0sIGhpZGVFcnJvcnM6IGZ1bmN0aW9uICgpIHsgdGhpcy5oaWRlVGhlc2UodGhpcy50b0hpZGUpIH0sIGhpZGVUaGVzZTogZnVuY3Rpb24gKGEpIHsgYS5ub3QodGhpcy5jb250YWluZXJzKS50ZXh0KFwiXCIpLCB0aGlzLmFkZFdyYXBwZXIoYSkuaGlkZSgpIH0sIHZhbGlkOiBmdW5jdGlvbiAoKSB7IHJldHVybiAwID09PSB0aGlzLnNpemUoKSB9LCBzaXplOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmVycm9yTGlzdC5sZW5ndGggfSwgZm9jdXNJbnZhbGlkOiBmdW5jdGlvbiAoKSB7IGlmICh0aGlzLnNldHRpbmdzLmZvY3VzSW52YWxpZCkgdHJ5IHsgYSh0aGlzLmZpbmRMYXN0QWN0aXZlKCkgfHwgdGhpcy5lcnJvckxpc3QubGVuZ3RoICYmIHRoaXMuZXJyb3JMaXN0WzBdLmVsZW1lbnQgfHwgW10pLmZpbHRlcihcIjp2aXNpYmxlXCIpLmZvY3VzKCkudHJpZ2dlcihcImZvY3VzaW5cIikgfSBjYXRjaCAoYikgeyB9IH0sIGZpbmRMYXN0QWN0aXZlOiBmdW5jdGlvbiAoKSB7IHZhciBiID0gdGhpcy5sYXN0QWN0aXZlOyByZXR1cm4gYiAmJiAxID09PSBhLmdyZXAodGhpcy5lcnJvckxpc3QsIGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLmVsZW1lbnQubmFtZSA9PT0gYi5uYW1lIH0pLmxlbmd0aCAmJiBiIH0sIGVsZW1lbnRzOiBmdW5jdGlvbiAoKSB7IHZhciBiID0gdGhpcywgYyA9IHt9OyByZXR1cm4gYSh0aGlzLmN1cnJlbnRGb3JtKS5maW5kKFwiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIFtjb250ZW50ZWRpdGFibGVdXCIpLm5vdChcIjpzdWJtaXQsIDpyZXNldCwgOmltYWdlLCA6ZGlzYWJsZWRcIikubm90KHRoaXMuc2V0dGluZ3MuaWdub3JlKS5maWx0ZXIoZnVuY3Rpb24gKCkgeyB2YXIgZCA9IHRoaXMubmFtZSB8fCBhKHRoaXMpLmF0dHIoXCJuYW1lXCIpOyByZXR1cm4gIWQgJiYgYi5zZXR0aW5ncy5kZWJ1ZyAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLmVycm9yKFwiJW8gaGFzIG5vIG5hbWUgYXNzaWduZWRcIiwgdGhpcyksIHRoaXMuaGFzQXR0cmlidXRlKFwiY29udGVudGVkaXRhYmxlXCIpICYmICh0aGlzLmZvcm0gPSBhKHRoaXMpLmNsb3Nlc3QoXCJmb3JtXCIpWzBdLCB0aGlzLm5hbWUgPSBkKSwgIShkIGluIGMgfHwgIWIub2JqZWN0TGVuZ3RoKGEodGhpcykucnVsZXMoKSkpICYmIChjW2RdID0gITAsICEwKSB9KSB9LCBjbGVhbjogZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGEoYilbMF0gfSwgZXJyb3JzOiBmdW5jdGlvbiAoKSB7IHZhciBiID0gdGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzLnNwbGl0KFwiIFwiKS5qb2luKFwiLlwiKTsgcmV0dXJuIGEodGhpcy5zZXR0aW5ncy5lcnJvckVsZW1lbnQgKyBcIi5cIiArIGIsIHRoaXMuZXJyb3JDb250ZXh0KSB9LCByZXNldEludGVybmFsczogZnVuY3Rpb24gKCkgeyB0aGlzLnN1Y2Nlc3NMaXN0ID0gW10sIHRoaXMuZXJyb3JMaXN0ID0gW10sIHRoaXMuZXJyb3JNYXAgPSB7fSwgdGhpcy50b1Nob3cgPSBhKFtdKSwgdGhpcy50b0hpZGUgPSBhKFtdKSB9LCByZXNldDogZnVuY3Rpb24gKCkgeyB0aGlzLnJlc2V0SW50ZXJuYWxzKCksIHRoaXMuY3VycmVudEVsZW1lbnRzID0gYShbXSkgfSwgcHJlcGFyZUZvcm06IGZ1bmN0aW9uICgpIHsgdGhpcy5yZXNldCgpLCB0aGlzLnRvSGlkZSA9IHRoaXMuZXJyb3JzKCkuYWRkKHRoaXMuY29udGFpbmVycykgfSwgcHJlcGFyZUVsZW1lbnQ6IGZ1bmN0aW9uIChhKSB7IHRoaXMucmVzZXQoKSwgdGhpcy50b0hpZGUgPSB0aGlzLmVycm9yc0ZvcihhKSB9LCBlbGVtZW50VmFsdWU6IGZ1bmN0aW9uIChiKSB7IHZhciBjLCBkLCBlID0gYShiKSwgZiA9IGIudHlwZTsgcmV0dXJuIFwicmFkaW9cIiA9PT0gZiB8fCBcImNoZWNrYm94XCIgPT09IGYgPyB0aGlzLmZpbmRCeU5hbWUoYi5uYW1lKS5maWx0ZXIoXCI6Y2hlY2tlZFwiKS52YWwoKSA6IFwibnVtYmVyXCIgPT09IGYgJiYgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgYi52YWxpZGl0eSA/IGIudmFsaWRpdHkuYmFkSW5wdXQgPyBcIk5hTlwiIDogZS52YWwoKSA6IChjID0gYi5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIikgPyBlLnRleHQoKSA6IGUudmFsKCksIFwiZmlsZVwiID09PSBmID8gXCJDOlxcXFxmYWtlcGF0aFxcXFxcIiA9PT0gYy5zdWJzdHIoMCwgMTIpID8gYy5zdWJzdHIoMTIpIDogKGQgPSBjLmxhc3RJbmRleE9mKFwiL1wiKSwgZCA+PSAwID8gYy5zdWJzdHIoZCArIDEpIDogKGQgPSBjLmxhc3RJbmRleE9mKFwiXFxcXFwiKSwgZCA+PSAwID8gYy5zdWJzdHIoZCArIDEpIDogYykpIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgYyA/IGMucmVwbGFjZSgvXFxyL2csIFwiXCIpIDogYykgfSwgY2hlY2s6IGZ1bmN0aW9uIChiKSB7IGIgPSB0aGlzLnZhbGlkYXRpb25UYXJnZXRGb3IodGhpcy5jbGVhbihiKSk7IHZhciBjLCBkLCBlLCBmLCBnID0gYShiKS5ydWxlcygpLCBoID0gYS5tYXAoZywgZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGIgfSkubGVuZ3RoLCBpID0gITEsIGogPSB0aGlzLmVsZW1lbnRWYWx1ZShiKTsgaWYgKFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZy5ub3JtYWxpemVyID8gZiA9IGcubm9ybWFsaXplciA6IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5zZXR0aW5ncy5ub3JtYWxpemVyICYmIChmID0gdGhpcy5zZXR0aW5ncy5ub3JtYWxpemVyKSwgZikgeyBpZiAoaiA9IGYuY2FsbChiLCBqKSwgXCJzdHJpbmdcIiAhPSB0eXBlb2YgaikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBub3JtYWxpemVyIHNob3VsZCByZXR1cm4gYSBzdHJpbmcgdmFsdWUuXCIpOyBkZWxldGUgZy5ub3JtYWxpemVyIH0gZm9yIChkIGluIGcpIHsgZSA9IHsgbWV0aG9kOiBkLCBwYXJhbWV0ZXJzOiBnW2RdIH07IHRyeSB7IGlmIChjID0gYS52YWxpZGF0b3IubWV0aG9kc1tkXS5jYWxsKHRoaXMsIGosIGIsIGUucGFyYW1ldGVycyksIFwiZGVwZW5kZW5jeS1taXNtYXRjaFwiID09PSBjICYmIDEgPT09IGgpIHsgaSA9ICEwOyBjb250aW51ZSB9IGlmIChpID0gITEsIFwicGVuZGluZ1wiID09PSBjKSByZXR1cm4gdm9pZCAodGhpcy50b0hpZGUgPSB0aGlzLnRvSGlkZS5ub3QodGhpcy5lcnJvcnNGb3IoYikpKTsgaWYgKCFjKSByZXR1cm4gdGhpcy5mb3JtYXRBbmRBZGQoYiwgZSksICExIH0gY2F0Y2ggKGspIHsgdGhyb3cgdGhpcy5zZXR0aW5ncy5kZWJ1ZyAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLmxvZyhcIkV4Y2VwdGlvbiBvY2N1cnJlZCB3aGVuIGNoZWNraW5nIGVsZW1lbnQgXCIgKyBiLmlkICsgXCIsIGNoZWNrIHRoZSAnXCIgKyBlLm1ldGhvZCArIFwiJyBtZXRob2QuXCIsIGspLCBrIGluc3RhbmNlb2YgVHlwZUVycm9yICYmIChrLm1lc3NhZ2UgKz0gXCIuICBFeGNlcHRpb24gb2NjdXJyZWQgd2hlbiBjaGVja2luZyBlbGVtZW50IFwiICsgYi5pZCArIFwiLCBjaGVjayB0aGUgJ1wiICsgZS5tZXRob2QgKyBcIicgbWV0aG9kLlwiKSwgayB9IH0gaWYgKCFpKSByZXR1cm4gdGhpcy5vYmplY3RMZW5ndGgoZykgJiYgdGhpcy5zdWNjZXNzTGlzdC5wdXNoKGIpLCAhMCB9LCBjdXN0b21EYXRhTWVzc2FnZTogZnVuY3Rpb24gKGIsIGMpIHsgcmV0dXJuIGEoYikuZGF0YShcIm1zZ1wiICsgYy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGMuc3Vic3RyaW5nKDEpLnRvTG93ZXJDYXNlKCkpIHx8IGEoYikuZGF0YShcIm1zZ1wiKSB9LCBjdXN0b21NZXNzYWdlOiBmdW5jdGlvbiAoYSwgYikgeyB2YXIgYyA9IHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbYV07IHJldHVybiBjICYmIChjLmNvbnN0cnVjdG9yID09PSBTdHJpbmcgPyBjIDogY1tiXSkgfSwgZmluZERlZmluZWQ6IGZ1bmN0aW9uICgpIHsgZm9yICh2YXIgYSA9IDA7IGEgPCBhcmd1bWVudHMubGVuZ3RoOyBhKyspaWYgKHZvaWQgMCAhPT0gYXJndW1lbnRzW2FdKSByZXR1cm4gYXJndW1lbnRzW2FdIH0sIGRlZmF1bHRNZXNzYWdlOiBmdW5jdGlvbiAoYiwgYykgeyBcInN0cmluZ1wiID09IHR5cGVvZiBjICYmIChjID0geyBtZXRob2Q6IGMgfSk7IHZhciBkID0gdGhpcy5maW5kRGVmaW5lZCh0aGlzLmN1c3RvbU1lc3NhZ2UoYi5uYW1lLCBjLm1ldGhvZCksIHRoaXMuY3VzdG9tRGF0YU1lc3NhZ2UoYiwgYy5tZXRob2QpLCAhdGhpcy5zZXR0aW5ncy5pZ25vcmVUaXRsZSAmJiBiLnRpdGxlIHx8IHZvaWQgMCwgYS52YWxpZGF0b3IubWVzc2FnZXNbYy5tZXRob2RdLCBcIjxzdHJvbmc+V2FybmluZzogTm8gbWVzc2FnZSBkZWZpbmVkIGZvciBcIiArIGIubmFtZSArIFwiPC9zdHJvbmc+XCIpLCBlID0gL1xcJD9cXHsoXFxkKylcXH0vZzsgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZCA/IGQgPSBkLmNhbGwodGhpcywgYy5wYXJhbWV0ZXJzLCBiKSA6IGUudGVzdChkKSAmJiAoZCA9IGEudmFsaWRhdG9yLmZvcm1hdChkLnJlcGxhY2UoZSwgXCJ7JDF9XCIpLCBjLnBhcmFtZXRlcnMpKSwgZCB9LCBmb3JtYXRBbmRBZGQ6IGZ1bmN0aW9uIChhLCBiKSB7IHZhciBjID0gdGhpcy5kZWZhdWx0TWVzc2FnZShhLCBiKTsgdGhpcy5lcnJvckxpc3QucHVzaCh7IG1lc3NhZ2U6IGMsIGVsZW1lbnQ6IGEsIG1ldGhvZDogYi5tZXRob2QgfSksIHRoaXMuZXJyb3JNYXBbYS5uYW1lXSA9IGMsIHRoaXMuc3VibWl0dGVkW2EubmFtZV0gPSBjIH0sIGFkZFdyYXBwZXI6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0aGlzLnNldHRpbmdzLndyYXBwZXIgJiYgKGEgPSBhLmFkZChhLnBhcmVudCh0aGlzLnNldHRpbmdzLndyYXBwZXIpKSksIGEgfSwgZGVmYXVsdFNob3dFcnJvcnM6IGZ1bmN0aW9uICgpIHsgdmFyIGEsIGIsIGM7IGZvciAoYSA9IDA7IHRoaXMuZXJyb3JMaXN0W2FdOyBhKyspYyA9IHRoaXMuZXJyb3JMaXN0W2FdLCB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodCAmJiB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodC5jYWxsKHRoaXMsIGMuZWxlbWVudCwgdGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzLCB0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpLCB0aGlzLnNob3dMYWJlbChjLmVsZW1lbnQsIGMubWVzc2FnZSk7IGlmICh0aGlzLmVycm9yTGlzdC5sZW5ndGggJiYgKHRoaXMudG9TaG93ID0gdGhpcy50b1Nob3cuYWRkKHRoaXMuY29udGFpbmVycykpLCB0aGlzLnNldHRpbmdzLnN1Y2Nlc3MpIGZvciAoYSA9IDA7IHRoaXMuc3VjY2Vzc0xpc3RbYV07IGErKyl0aGlzLnNob3dMYWJlbCh0aGlzLnN1Y2Nlc3NMaXN0W2FdKTsgaWYgKHRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQpIGZvciAoYSA9IDAsIGIgPSB0aGlzLnZhbGlkRWxlbWVudHMoKTsgYlthXTsgYSsrKXRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQuY2FsbCh0aGlzLCBiW2FdLCB0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MsIHRoaXMuc2V0dGluZ3MudmFsaWRDbGFzcyk7IHRoaXMudG9IaWRlID0gdGhpcy50b0hpZGUubm90KHRoaXMudG9TaG93KSwgdGhpcy5oaWRlRXJyb3JzKCksIHRoaXMuYWRkV3JhcHBlcih0aGlzLnRvU2hvdykuc2hvdygpIH0sIHZhbGlkRWxlbWVudHM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuY3VycmVudEVsZW1lbnRzLm5vdCh0aGlzLmludmFsaWRFbGVtZW50cygpKSB9LCBpbnZhbGlkRWxlbWVudHM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGEodGhpcy5lcnJvckxpc3QpLm1hcChmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmVsZW1lbnQgfSkgfSwgc2hvd0xhYmVsOiBmdW5jdGlvbiAoYiwgYykgeyB2YXIgZCwgZSwgZiwgZywgaCA9IHRoaXMuZXJyb3JzRm9yKGIpLCBpID0gdGhpcy5pZE9yTmFtZShiKSwgaiA9IGEoYikuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIik7IGgubGVuZ3RoID8gKGgucmVtb3ZlQ2xhc3ModGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MpLCBoLmh0bWwoYykpIDogKGggPSBhKFwiPFwiICsgdGhpcy5zZXR0aW5ncy5lcnJvckVsZW1lbnQgKyBcIj5cIikuYXR0cihcImlkXCIsIGkgKyBcIi1lcnJvclwiKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MpLmh0bWwoYyB8fCBcIlwiKSwgZCA9IGgsIHRoaXMuc2V0dGluZ3Mud3JhcHBlciAmJiAoZCA9IGguaGlkZSgpLnNob3coKS53cmFwKFwiPFwiICsgdGhpcy5zZXR0aW5ncy53cmFwcGVyICsgXCIvPlwiKS5wYXJlbnQoKSksIHRoaXMubGFiZWxDb250YWluZXIubGVuZ3RoID8gdGhpcy5sYWJlbENvbnRhaW5lci5hcHBlbmQoZCkgOiB0aGlzLnNldHRpbmdzLmVycm9yUGxhY2VtZW50ID8gdGhpcy5zZXR0aW5ncy5lcnJvclBsYWNlbWVudC5jYWxsKHRoaXMsIGQsIGEoYikpIDogZC5pbnNlcnRBZnRlcihiKSwgaC5pcyhcImxhYmVsXCIpID8gaC5hdHRyKFwiZm9yXCIsIGkpIDogMCA9PT0gaC5wYXJlbnRzKFwibGFiZWxbZm9yPSdcIiArIHRoaXMuZXNjYXBlQ3NzTWV0YShpKSArIFwiJ11cIikubGVuZ3RoICYmIChmID0gaC5hdHRyKFwiaWRcIiksIGogPyBqLm1hdGNoKG5ldyBSZWdFeHAoXCJcXFxcYlwiICsgdGhpcy5lc2NhcGVDc3NNZXRhKGYpICsgXCJcXFxcYlwiKSkgfHwgKGogKz0gXCIgXCIgKyBmKSA6IGogPSBmLCBhKGIpLmF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIsIGopLCBlID0gdGhpcy5ncm91cHNbYi5uYW1lXSwgZSAmJiAoZyA9IHRoaXMsIGEuZWFjaChnLmdyb3VwcywgZnVuY3Rpb24gKGIsIGMpIHsgYyA9PT0gZSAmJiBhKFwiW25hbWU9J1wiICsgZy5lc2NhcGVDc3NNZXRhKGIpICsgXCInXVwiLCBnLmN1cnJlbnRGb3JtKS5hdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiLCBoLmF0dHIoXCJpZFwiKSkgfSkpKSksICFjICYmIHRoaXMuc2V0dGluZ3Muc3VjY2VzcyAmJiAoaC50ZXh0KFwiXCIpLCBcInN0cmluZ1wiID09IHR5cGVvZiB0aGlzLnNldHRpbmdzLnN1Y2Nlc3MgPyBoLmFkZENsYXNzKHRoaXMuc2V0dGluZ3Muc3VjY2VzcykgOiB0aGlzLnNldHRpbmdzLnN1Y2Nlc3MoaCwgYikpLCB0aGlzLnRvU2hvdyA9IHRoaXMudG9TaG93LmFkZChoKSB9LCBlcnJvcnNGb3I6IGZ1bmN0aW9uIChiKSB7IHZhciBjID0gdGhpcy5lc2NhcGVDc3NNZXRhKHRoaXMuaWRPck5hbWUoYikpLCBkID0gYShiKS5hdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiKSwgZSA9IFwibGFiZWxbZm9yPSdcIiArIGMgKyBcIiddLCBsYWJlbFtmb3I9J1wiICsgYyArIFwiJ10gKlwiOyByZXR1cm4gZCAmJiAoZSA9IGUgKyBcIiwgI1wiICsgdGhpcy5lc2NhcGVDc3NNZXRhKGQpLnJlcGxhY2UoL1xccysvZywgXCIsICNcIikpLCB0aGlzLmVycm9ycygpLmZpbHRlcihlKSB9LCBlc2NhcGVDc3NNZXRhOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS5yZXBsYWNlKC8oW1xcXFwhXCIjJCUmJygpKissLlxcLzo7PD0+P0BcXFtcXF1eYHt8fX5dKS9nLCBcIlxcXFwkMVwiKSB9LCBpZE9yTmFtZTogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHRoaXMuZ3JvdXBzW2EubmFtZV0gfHwgKHRoaXMuY2hlY2thYmxlKGEpID8gYS5uYW1lIDogYS5pZCB8fCBhLm5hbWUpIH0sIHZhbGlkYXRpb25UYXJnZXRGb3I6IGZ1bmN0aW9uIChiKSB7IHJldHVybiB0aGlzLmNoZWNrYWJsZShiKSAmJiAoYiA9IHRoaXMuZmluZEJ5TmFtZShiLm5hbWUpKSwgYShiKS5ub3QodGhpcy5zZXR0aW5ncy5pZ25vcmUpWzBdIH0sIGNoZWNrYWJsZTogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIC9yYWRpb3xjaGVja2JveC9pLnRlc3QoYS50eXBlKSB9LCBmaW5kQnlOYW1lOiBmdW5jdGlvbiAoYikgeyByZXR1cm4gYSh0aGlzLmN1cnJlbnRGb3JtKS5maW5kKFwiW25hbWU9J1wiICsgdGhpcy5lc2NhcGVDc3NNZXRhKGIpICsgXCInXVwiKSB9LCBnZXRMZW5ndGg6IGZ1bmN0aW9uIChiLCBjKSB7IHN3aXRjaCAoYy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSB7IGNhc2UgXCJzZWxlY3RcIjogcmV0dXJuIGEoXCJvcHRpb246c2VsZWN0ZWRcIiwgYykubGVuZ3RoOyBjYXNlIFwiaW5wdXRcIjogaWYgKHRoaXMuY2hlY2thYmxlKGMpKSByZXR1cm4gdGhpcy5maW5kQnlOYW1lKGMubmFtZSkuZmlsdGVyKFwiOmNoZWNrZWRcIikubGVuZ3RoIH1yZXR1cm4gYi5sZW5ndGggfSwgZGVwZW5kOiBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gIXRoaXMuZGVwZW5kVHlwZXNbdHlwZW9mIGFdIHx8IHRoaXMuZGVwZW5kVHlwZXNbdHlwZW9mIGFdKGEsIGIpIH0sIGRlcGVuZFR5cGVzOiB7IFwiYm9vbGVhblwiOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYSB9LCBzdHJpbmc6IGZ1bmN0aW9uIChiLCBjKSB7IHJldHVybiAhIWEoYiwgYy5mb3JtKS5sZW5ndGggfSwgXCJmdW5jdGlvblwiOiBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYShiKSB9IH0sIG9wdGlvbmFsOiBmdW5jdGlvbiAoYikgeyB2YXIgYyA9IHRoaXMuZWxlbWVudFZhbHVlKGIpOyByZXR1cm4gIWEudmFsaWRhdG9yLm1ldGhvZHMucmVxdWlyZWQuY2FsbCh0aGlzLCBjLCBiKSAmJiBcImRlcGVuZGVuY3ktbWlzbWF0Y2hcIiB9LCBzdGFydFJlcXVlc3Q6IGZ1bmN0aW9uIChiKSB7IHRoaXMucGVuZGluZ1tiLm5hbWVdIHx8ICh0aGlzLnBlbmRpbmdSZXF1ZXN0KysgLCBhKGIpLmFkZENsYXNzKHRoaXMuc2V0dGluZ3MucGVuZGluZ0NsYXNzKSwgdGhpcy5wZW5kaW5nW2IubmFtZV0gPSAhMCkgfSwgc3RvcFJlcXVlc3Q6IGZ1bmN0aW9uIChiLCBjKSB7IHRoaXMucGVuZGluZ1JlcXVlc3QtLSAsIHRoaXMucGVuZGluZ1JlcXVlc3QgPCAwICYmICh0aGlzLnBlbmRpbmdSZXF1ZXN0ID0gMCksIGRlbGV0ZSB0aGlzLnBlbmRpbmdbYi5uYW1lXSwgYShiKS5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLnBlbmRpbmdDbGFzcyksIGMgJiYgMCA9PT0gdGhpcy5wZW5kaW5nUmVxdWVzdCAmJiB0aGlzLmZvcm1TdWJtaXR0ZWQgJiYgdGhpcy5mb3JtKCkgPyAoYSh0aGlzLmN1cnJlbnRGb3JtKS5zdWJtaXQoKSwgdGhpcy5zdWJtaXRCdXR0b24gJiYgYShcImlucHV0OmhpZGRlbltuYW1lPSdcIiArIHRoaXMuc3VibWl0QnV0dG9uLm5hbWUgKyBcIiddXCIsIHRoaXMuY3VycmVudEZvcm0pLnJlbW92ZSgpLCB0aGlzLmZvcm1TdWJtaXR0ZWQgPSAhMSkgOiAhYyAmJiAwID09PSB0aGlzLnBlbmRpbmdSZXF1ZXN0ICYmIHRoaXMuZm9ybVN1Ym1pdHRlZCAmJiAoYSh0aGlzLmN1cnJlbnRGb3JtKS50cmlnZ2VySGFuZGxlcihcImludmFsaWQtZm9ybVwiLCBbdGhpc10pLCB0aGlzLmZvcm1TdWJtaXR0ZWQgPSAhMSkgfSwgcHJldmlvdXNWYWx1ZTogZnVuY3Rpb24gKGIsIGMpIHsgcmV0dXJuIGMgPSBcInN0cmluZ1wiID09IHR5cGVvZiBjICYmIGMgfHwgXCJyZW1vdGVcIiwgYS5kYXRhKGIsIFwicHJldmlvdXNWYWx1ZVwiKSB8fCBhLmRhdGEoYiwgXCJwcmV2aW91c1ZhbHVlXCIsIHsgb2xkOiBudWxsLCB2YWxpZDogITAsIG1lc3NhZ2U6IHRoaXMuZGVmYXVsdE1lc3NhZ2UoYiwgeyBtZXRob2Q6IGMgfSkgfSkgfSwgZGVzdHJveTogZnVuY3Rpb24gKCkgeyB0aGlzLnJlc2V0Rm9ybSgpLCBhKHRoaXMuY3VycmVudEZvcm0pLm9mZihcIi52YWxpZGF0ZVwiKS5yZW1vdmVEYXRhKFwidmFsaWRhdG9yXCIpLmZpbmQoXCIudmFsaWRhdGUtZXF1YWxUby1ibHVyXCIpLm9mZihcIi52YWxpZGF0ZS1lcXVhbFRvXCIpLnJlbW92ZUNsYXNzKFwidmFsaWRhdGUtZXF1YWxUby1ibHVyXCIpIH0gfSwgY2xhc3NSdWxlU2V0dGluZ3M6IHsgcmVxdWlyZWQ6IHsgcmVxdWlyZWQ6ICEwIH0sIGVtYWlsOiB7IGVtYWlsOiAhMCB9LCB1cmw6IHsgdXJsOiAhMCB9LCBkYXRlOiB7IGRhdGU6ICEwIH0sIGRhdGVJU086IHsgZGF0ZUlTTzogITAgfSwgbnVtYmVyOiB7IG51bWJlcjogITAgfSwgZGlnaXRzOiB7IGRpZ2l0czogITAgfSwgY3JlZGl0Y2FyZDogeyBjcmVkaXRjYXJkOiAhMCB9IH0sIGFkZENsYXNzUnVsZXM6IGZ1bmN0aW9uIChiLCBjKSB7IGIuY29uc3RydWN0b3IgPT09IFN0cmluZyA/IHRoaXMuY2xhc3NSdWxlU2V0dGluZ3NbYl0gPSBjIDogYS5leHRlbmQodGhpcy5jbGFzc1J1bGVTZXR0aW5ncywgYikgfSwgY2xhc3NSdWxlczogZnVuY3Rpb24gKGIpIHsgdmFyIGMgPSB7fSwgZCA9IGEoYikuYXR0cihcImNsYXNzXCIpOyByZXR1cm4gZCAmJiBhLmVhY2goZC5zcGxpdChcIiBcIiksIGZ1bmN0aW9uICgpIHsgdGhpcyBpbiBhLnZhbGlkYXRvci5jbGFzc1J1bGVTZXR0aW5ncyAmJiBhLmV4dGVuZChjLCBhLnZhbGlkYXRvci5jbGFzc1J1bGVTZXR0aW5nc1t0aGlzXSkgfSksIGMgfSwgbm9ybWFsaXplQXR0cmlidXRlUnVsZTogZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsgL21pbnxtYXh8c3RlcC8udGVzdChjKSAmJiAobnVsbCA9PT0gYiB8fCAvbnVtYmVyfHJhbmdlfHRleHQvLnRlc3QoYikpICYmIChkID0gTnVtYmVyKGQpLCBpc05hTihkKSAmJiAoZCA9IHZvaWQgMCkpLCBkIHx8IDAgPT09IGQgPyBhW2NdID0gZCA6IGIgPT09IGMgJiYgXCJyYW5nZVwiICE9PSBiICYmIChhW2NdID0gITApIH0sIGF0dHJpYnV0ZVJ1bGVzOiBmdW5jdGlvbiAoYikgeyB2YXIgYywgZCwgZSA9IHt9LCBmID0gYShiKSwgZyA9IGIuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTsgZm9yIChjIGluIGEudmFsaWRhdG9yLm1ldGhvZHMpIFwicmVxdWlyZWRcIiA9PT0gYyA/IChkID0gYi5nZXRBdHRyaWJ1dGUoYyksIFwiXCIgPT09IGQgJiYgKGQgPSAhMCksIGQgPSAhIWQpIDogZCA9IGYuYXR0cihjKSwgdGhpcy5ub3JtYWxpemVBdHRyaWJ1dGVSdWxlKGUsIGcsIGMsIGQpOyByZXR1cm4gZS5tYXhsZW5ndGggJiYgLy0xfDIxNDc0ODM2NDd8NTI0Mjg4Ly50ZXN0KGUubWF4bGVuZ3RoKSAmJiBkZWxldGUgZS5tYXhsZW5ndGgsIGUgfSwgZGF0YVJ1bGVzOiBmdW5jdGlvbiAoYikgeyB2YXIgYywgZCwgZSA9IHt9LCBmID0gYShiKSwgZyA9IGIuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTsgZm9yIChjIGluIGEudmFsaWRhdG9yLm1ldGhvZHMpIGQgPSBmLmRhdGEoXCJydWxlXCIgKyBjLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYy5zdWJzdHJpbmcoMSkudG9Mb3dlckNhc2UoKSksIHRoaXMubm9ybWFsaXplQXR0cmlidXRlUnVsZShlLCBnLCBjLCBkKTsgcmV0dXJuIGUgfSwgc3RhdGljUnVsZXM6IGZ1bmN0aW9uIChiKSB7IHZhciBjID0ge30sIGQgPSBhLmRhdGEoYi5mb3JtLCBcInZhbGlkYXRvclwiKTsgcmV0dXJuIGQuc2V0dGluZ3MucnVsZXMgJiYgKGMgPSBhLnZhbGlkYXRvci5ub3JtYWxpemVSdWxlKGQuc2V0dGluZ3MucnVsZXNbYi5uYW1lXSkgfHwge30pLCBjIH0sIG5vcm1hbGl6ZVJ1bGVzOiBmdW5jdGlvbiAoYiwgYykgeyByZXR1cm4gYS5lYWNoKGIsIGZ1bmN0aW9uIChkLCBlKSB7IGlmIChlID09PSAhMSkgcmV0dXJuIHZvaWQgZGVsZXRlIGJbZF07IGlmIChlLnBhcmFtIHx8IGUuZGVwZW5kcykgeyB2YXIgZiA9ICEwOyBzd2l0Y2ggKHR5cGVvZiBlLmRlcGVuZHMpIHsgY2FzZSBcInN0cmluZ1wiOiBmID0gISFhKGUuZGVwZW5kcywgYy5mb3JtKS5sZW5ndGg7IGJyZWFrOyBjYXNlIFwiZnVuY3Rpb25cIjogZiA9IGUuZGVwZW5kcy5jYWxsKGMsIGMpIH1mID8gYltkXSA9IHZvaWQgMCA9PT0gZS5wYXJhbSB8fCBlLnBhcmFtIDogKGEuZGF0YShjLmZvcm0sIFwidmFsaWRhdG9yXCIpLnJlc2V0RWxlbWVudHMoYShjKSksIGRlbGV0ZSBiW2RdKSB9IH0pLCBhLmVhY2goYiwgZnVuY3Rpb24gKGQsIGUpIHsgYltkXSA9IGEuaXNGdW5jdGlvbihlKSAmJiBcIm5vcm1hbGl6ZXJcIiAhPT0gZCA/IGUoYykgOiBlIH0pLCBhLmVhY2goW1wibWlubGVuZ3RoXCIsIFwibWF4bGVuZ3RoXCJdLCBmdW5jdGlvbiAoKSB7IGJbdGhpc10gJiYgKGJbdGhpc10gPSBOdW1iZXIoYlt0aGlzXSkpIH0pLCBhLmVhY2goW1wicmFuZ2VsZW5ndGhcIiwgXCJyYW5nZVwiXSwgZnVuY3Rpb24gKCkgeyB2YXIgYzsgYlt0aGlzXSAmJiAoYS5pc0FycmF5KGJbdGhpc10pID8gYlt0aGlzXSA9IFtOdW1iZXIoYlt0aGlzXVswXSksIE51bWJlcihiW3RoaXNdWzFdKV0gOiBcInN0cmluZ1wiID09IHR5cGVvZiBiW3RoaXNdICYmIChjID0gYlt0aGlzXS5yZXBsYWNlKC9bXFxbXFxdXS9nLCBcIlwiKS5zcGxpdCgvW1xccyxdKy8pLCBiW3RoaXNdID0gW051bWJlcihjWzBdKSwgTnVtYmVyKGNbMV0pXSkpIH0pLCBhLnZhbGlkYXRvci5hdXRvQ3JlYXRlUmFuZ2VzICYmIChudWxsICE9IGIubWluICYmIG51bGwgIT0gYi5tYXggJiYgKGIucmFuZ2UgPSBbYi5taW4sIGIubWF4XSwgZGVsZXRlIGIubWluLCBkZWxldGUgYi5tYXgpLCBudWxsICE9IGIubWlubGVuZ3RoICYmIG51bGwgIT0gYi5tYXhsZW5ndGggJiYgKGIucmFuZ2VsZW5ndGggPSBbYi5taW5sZW5ndGgsIGIubWF4bGVuZ3RoXSwgZGVsZXRlIGIubWlubGVuZ3RoLCBkZWxldGUgYi5tYXhsZW5ndGgpKSwgYiB9LCBub3JtYWxpemVSdWxlOiBmdW5jdGlvbiAoYikgeyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgYikgeyB2YXIgYyA9IHt9OyBhLmVhY2goYi5zcGxpdCgvXFxzLyksIGZ1bmN0aW9uICgpIHsgY1t0aGlzXSA9ICEwIH0pLCBiID0gYyB9IHJldHVybiBiIH0sIGFkZE1ldGhvZDogZnVuY3Rpb24gKGIsIGMsIGQpIHsgYS52YWxpZGF0b3IubWV0aG9kc1tiXSA9IGMsIGEudmFsaWRhdG9yLm1lc3NhZ2VzW2JdID0gdm9pZCAwICE9PSBkID8gZCA6IGEudmFsaWRhdG9yLm1lc3NhZ2VzW2JdLCBjLmxlbmd0aCA8IDMgJiYgYS52YWxpZGF0b3IuYWRkQ2xhc3NSdWxlcyhiLCBhLnZhbGlkYXRvci5ub3JtYWxpemVSdWxlKGIpKSB9LCBtZXRob2RzOiB7IHJlcXVpcmVkOiBmdW5jdGlvbiAoYiwgYywgZCkgeyBpZiAoIXRoaXMuZGVwZW5kKGQsIGMpKSByZXR1cm4gXCJkZXBlbmRlbmN5LW1pc21hdGNoXCI7IGlmIChcInNlbGVjdFwiID09PSBjLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpIHsgdmFyIGUgPSBhKGMpLnZhbCgpOyByZXR1cm4gZSAmJiBlLmxlbmd0aCA+IDAgfSByZXR1cm4gdGhpcy5jaGVja2FibGUoYykgPyB0aGlzLmdldExlbmd0aChiLCBjKSA+IDAgOiBiLmxlbmd0aCA+IDAgfSwgZW1haWw6IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiB0aGlzLm9wdGlvbmFsKGIpIHx8IC9eW2EtekEtWjAtOS4hIyQlJicqK1xcLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvLnRlc3QoYSkgfSwgdXJsOiBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gdGhpcy5vcHRpb25hbChiKSB8fCAvXig/Oig/Oig/Omh0dHBzP3xmdHApOik/XFwvXFwvKSg/OlxcUysoPzo6XFxTKik/QCk/KD86KD8hKD86MTB8MTI3KSg/OlxcLlxcZHsxLDN9KXszfSkoPyEoPzoxNjlcXC4yNTR8MTkyXFwuMTY4KSg/OlxcLlxcZHsxLDN9KXsyfSkoPyExNzJcXC4oPzoxWzYtOV18MlxcZHwzWzAtMV0pKD86XFwuXFxkezEsM30pezJ9KSg/OlsxLTldXFxkP3wxXFxkXFxkfDJbMDFdXFxkfDIyWzAtM10pKD86XFwuKD86MT9cXGR7MSwyfXwyWzAtNF1cXGR8MjVbMC01XSkpezJ9KD86XFwuKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNF0pKXwoPzooPzpbYS16XFx1MDBhMS1cXHVmZmZmMC05XS0qKSpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSspKD86XFwuKD86W2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0tKikqW2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0rKSooPzpcXC4oPzpbYS16XFx1MDBhMS1cXHVmZmZmXXsyLH0pKS4/KSg/OjpcXGR7Miw1fSk/KD86W1xcLz8jXVxcUyopPyQvaS50ZXN0KGEpIH0sIGRhdGU6IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiB0aGlzLm9wdGlvbmFsKGIpIHx8ICEvSW52YWxpZHxOYU4vLnRlc3QobmV3IERhdGUoYSkudG9TdHJpbmcoKSkgfSwgZGF0ZUlTTzogZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIHRoaXMub3B0aW9uYWwoYikgfHwgL15cXGR7NH1bXFwvXFwtXSgwP1sxLTldfDFbMDEyXSlbXFwvXFwtXSgwP1sxLTldfFsxMl1bMC05XXwzWzAxXSkkLy50ZXN0KGEpIH0sIG51bWJlcjogZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIHRoaXMub3B0aW9uYWwoYikgfHwgL14oPzotP1xcZCt8LT9cXGR7MSwzfSg/OixcXGR7M30pKyk/KD86XFwuXFxkKyk/JC8udGVzdChhKSB9LCBkaWdpdHM6IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiB0aGlzLm9wdGlvbmFsKGIpIHx8IC9eXFxkKyQvLnRlc3QoYSkgfSwgbWlubGVuZ3RoOiBmdW5jdGlvbiAoYiwgYywgZCkgeyB2YXIgZSA9IGEuaXNBcnJheShiKSA/IGIubGVuZ3RoIDogdGhpcy5nZXRMZW5ndGgoYiwgYyk7IHJldHVybiB0aGlzLm9wdGlvbmFsKGMpIHx8IGUgPj0gZCB9LCBtYXhsZW5ndGg6IGZ1bmN0aW9uIChiLCBjLCBkKSB7IHZhciBlID0gYS5pc0FycmF5KGIpID8gYi5sZW5ndGggOiB0aGlzLmdldExlbmd0aChiLCBjKTsgcmV0dXJuIHRoaXMub3B0aW9uYWwoYykgfHwgZSA8PSBkIH0sIHJhbmdlbGVuZ3RoOiBmdW5jdGlvbiAoYiwgYywgZCkgeyB2YXIgZSA9IGEuaXNBcnJheShiKSA/IGIubGVuZ3RoIDogdGhpcy5nZXRMZW5ndGgoYiwgYyk7IHJldHVybiB0aGlzLm9wdGlvbmFsKGMpIHx8IGUgPj0gZFswXSAmJiBlIDw9IGRbMV0gfSwgbWluOiBmdW5jdGlvbiAoYSwgYiwgYykgeyByZXR1cm4gdGhpcy5vcHRpb25hbChiKSB8fCBhID49IGMgfSwgbWF4OiBmdW5jdGlvbiAoYSwgYiwgYykgeyByZXR1cm4gdGhpcy5vcHRpb25hbChiKSB8fCBhIDw9IGMgfSwgcmFuZ2U6IGZ1bmN0aW9uIChhLCBiLCBjKSB7IHJldHVybiB0aGlzLm9wdGlvbmFsKGIpIHx8IGEgPj0gY1swXSAmJiBhIDw9IGNbMV0gfSwgc3RlcDogZnVuY3Rpb24gKGIsIGMsIGQpIHsgdmFyIGUsIGYgPSBhKGMpLmF0dHIoXCJ0eXBlXCIpLCBnID0gXCJTdGVwIGF0dHJpYnV0ZSBvbiBpbnB1dCB0eXBlIFwiICsgZiArIFwiIGlzIG5vdCBzdXBwb3J0ZWQuXCIsIGggPSBbXCJ0ZXh0XCIsIFwibnVtYmVyXCIsIFwicmFuZ2VcIl0sIGkgPSBuZXcgUmVnRXhwKFwiXFxcXGJcIiArIGYgKyBcIlxcXFxiXCIpLCBqID0gZiAmJiAhaS50ZXN0KGguam9pbigpKSwgayA9IGZ1bmN0aW9uIChhKSB7IHZhciBiID0gKFwiXCIgKyBhKS5tYXRjaCgvKD86XFwuKFxcZCspKT8kLyk7IHJldHVybiBiICYmIGJbMV0gPyBiWzFdLmxlbmd0aCA6IDAgfSwgbCA9IGZ1bmN0aW9uIChhKSB7IHJldHVybiBNYXRoLnJvdW5kKGEgKiBNYXRoLnBvdygxMCwgZSkpIH0sIG0gPSAhMDsgaWYgKGopIHRocm93IG5ldyBFcnJvcihnKTsgcmV0dXJuIGUgPSBrKGQpLCAoayhiKSA+IGUgfHwgbChiKSAlIGwoZCkgIT09IDApICYmIChtID0gITEpLCB0aGlzLm9wdGlvbmFsKGMpIHx8IG0gfSwgZXF1YWxUbzogZnVuY3Rpb24gKGIsIGMsIGQpIHsgdmFyIGUgPSBhKGQpOyByZXR1cm4gdGhpcy5zZXR0aW5ncy5vbmZvY3Vzb3V0ICYmIGUubm90KFwiLnZhbGlkYXRlLWVxdWFsVG8tYmx1clwiKS5sZW5ndGggJiYgZS5hZGRDbGFzcyhcInZhbGlkYXRlLWVxdWFsVG8tYmx1clwiKS5vbihcImJsdXIudmFsaWRhdGUtZXF1YWxUb1wiLCBmdW5jdGlvbiAoKSB7IGEoYykudmFsaWQoKSB9KSwgYiA9PT0gZS52YWwoKSB9LCByZW1vdGU6IGZ1bmN0aW9uIChiLCBjLCBkLCBlKSB7IGlmICh0aGlzLm9wdGlvbmFsKGMpKSByZXR1cm4gXCJkZXBlbmRlbmN5LW1pc21hdGNoXCI7IGUgPSBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIGUgfHwgXCJyZW1vdGVcIjsgdmFyIGYsIGcsIGgsIGkgPSB0aGlzLnByZXZpb3VzVmFsdWUoYywgZSk7IHJldHVybiB0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2MubmFtZV0gfHwgKHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbYy5uYW1lXSA9IHt9KSwgaS5vcmlnaW5hbE1lc3NhZ2UgPSBpLm9yaWdpbmFsTWVzc2FnZSB8fCB0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2MubmFtZV1bZV0sIHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbYy5uYW1lXVtlXSA9IGkubWVzc2FnZSwgZCA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGQgJiYgeyB1cmw6IGQgfSB8fCBkLCBoID0gYS5wYXJhbShhLmV4dGVuZCh7IGRhdGE6IGIgfSwgZC5kYXRhKSksIGkub2xkID09PSBoID8gaS52YWxpZCA6IChpLm9sZCA9IGgsIGYgPSB0aGlzLCB0aGlzLnN0YXJ0UmVxdWVzdChjKSwgZyA9IHt9LCBnW2MubmFtZV0gPSBiLCBhLmFqYXgoYS5leHRlbmQoITAsIHsgbW9kZTogXCJhYm9ydFwiLCBwb3J0OiBcInZhbGlkYXRlXCIgKyBjLm5hbWUsIGRhdGFUeXBlOiBcImpzb25cIiwgZGF0YTogZywgY29udGV4dDogZi5jdXJyZW50Rm9ybSwgc3VjY2VzczogZnVuY3Rpb24gKGEpIHsgdmFyIGQsIGcsIGgsIGogPSBhID09PSAhMCB8fCBcInRydWVcIiA9PT0gYTsgZi5zZXR0aW5ncy5tZXNzYWdlc1tjLm5hbWVdW2VdID0gaS5vcmlnaW5hbE1lc3NhZ2UsIGogPyAoaCA9IGYuZm9ybVN1Ym1pdHRlZCwgZi5yZXNldEludGVybmFscygpLCBmLnRvSGlkZSA9IGYuZXJyb3JzRm9yKGMpLCBmLmZvcm1TdWJtaXR0ZWQgPSBoLCBmLnN1Y2Nlc3NMaXN0LnB1c2goYyksIGYuaW52YWxpZFtjLm5hbWVdID0gITEsIGYuc2hvd0Vycm9ycygpKSA6IChkID0ge30sIGcgPSBhIHx8IGYuZGVmYXVsdE1lc3NhZ2UoYywgeyBtZXRob2Q6IGUsIHBhcmFtZXRlcnM6IGIgfSksIGRbYy5uYW1lXSA9IGkubWVzc2FnZSA9IGcsIGYuaW52YWxpZFtjLm5hbWVdID0gITAsIGYuc2hvd0Vycm9ycyhkKSksIGkudmFsaWQgPSBqLCBmLnN0b3BSZXF1ZXN0KGMsIGopIH0gfSwgZCkpLCBcInBlbmRpbmdcIikgfSB9IH0pOyB2YXIgYiwgYyA9IHt9OyByZXR1cm4gYS5hamF4UHJlZmlsdGVyID8gYS5hamF4UHJlZmlsdGVyKGZ1bmN0aW9uIChhLCBiLCBkKSB7IHZhciBlID0gYS5wb3J0OyBcImFib3J0XCIgPT09IGEubW9kZSAmJiAoY1tlXSAmJiBjW2VdLmFib3J0KCksIGNbZV0gPSBkKSB9KSA6IChiID0gYS5hamF4LCBhLmFqYXggPSBmdW5jdGlvbiAoZCkgeyB2YXIgZSA9IChcIm1vZGVcIiBpbiBkID8gZCA6IGEuYWpheFNldHRpbmdzKS5tb2RlLCBmID0gKFwicG9ydFwiIGluIGQgPyBkIDogYS5hamF4U2V0dGluZ3MpLnBvcnQ7IHJldHVybiBcImFib3J0XCIgPT09IGUgPyAoY1tmXSAmJiBjW2ZdLmFib3J0KCksIGNbZl0gPSBiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIGNbZl0pIDogYi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIH0pLCBhIH0pOyIsIi8qISBqUXVlcnkgJiBaZXB0byBMYXp5IHYxLjcuNiAtIGh0dHA6Ly9qcXVlcnkuZWlzYmVoci5kZS9sYXp5IC0gTUlUJkdQTC0yLjAgbGljZW5zZSAtIENvcHlyaWdodCAyMDEyLTIwMTcgRGFuaWVsICdFaXNiZWhyJyBLZXJuICovXHJcbiFmdW5jdGlvbiAodCwgZSkgeyBcInVzZSBzdHJpY3RcIjsgZnVuY3Rpb24gcihyLCBhLCBpLCB1LCBsKSB7IGZ1bmN0aW9uIGYoKSB7IEwgPSB0LmRldmljZVBpeGVsUmF0aW8gPiAxLCBpID0gYyhpKSwgYS5kZWxheSA+PSAwICYmIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBzKCEwKSB9LCBhLmRlbGF5KSwgKGEuZGVsYXkgPCAwIHx8IGEuY29tYmluZWQpICYmICh1LmUgPSB2KGEudGhyb3R0bGUsIGZ1bmN0aW9uICh0KSB7IFwicmVzaXplXCIgPT09IHQudHlwZSAmJiAodyA9IEIgPSAtMSksIHModC5hbGwpIH0pLCB1LmEgPSBmdW5jdGlvbiAodCkgeyB0ID0gYyh0KSwgaS5wdXNoLmFwcGx5KGksIHQpIH0sIHUuZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGkgPSBuKGkpLmZpbHRlcihmdW5jdGlvbiAoKSB7IHJldHVybiAhbih0aGlzKS5kYXRhKGEubG9hZGVkTmFtZSkgfSkgfSwgdS5mID0gZnVuY3Rpb24gKHQpIHsgZm9yICh2YXIgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgZSsrKSB7IHZhciByID0gaS5maWx0ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcyA9PT0gdFtlXSB9KTsgci5sZW5ndGggJiYgcyghMSwgcikgfSB9LCBzKCksIG4oYS5hcHBlbmRTY3JvbGwpLm9uKFwic2Nyb2xsLlwiICsgbCArIFwiIHJlc2l6ZS5cIiArIGwsIHUuZSkpIH0gZnVuY3Rpb24gYyh0KSB7IHZhciBpID0gYS5kZWZhdWx0SW1hZ2UsIG8gPSBhLnBsYWNlaG9sZGVyLCB1ID0gYS5pbWFnZUJhc2UsIGwgPSBhLnNyY3NldEF0dHJpYnV0ZSwgZiA9IGEubG9hZGVyQXR0cmlidXRlLCBjID0gYS5fZiB8fCB7fTsgdCA9IG4odCkuZmlsdGVyKGZ1bmN0aW9uICgpIHsgdmFyIHQgPSBuKHRoaXMpLCByID0gbSh0aGlzKTsgcmV0dXJuICF0LmRhdGEoYS5oYW5kbGVkTmFtZSkgJiYgKHQuYXR0cihhLmF0dHJpYnV0ZSkgfHwgdC5hdHRyKGwpIHx8IHQuYXR0cihmKSB8fCBjW3JdICE9PSBlKSB9KS5kYXRhKFwicGx1Z2luX1wiICsgYS5uYW1lLCByKTsgZm9yICh2YXIgcyA9IDAsIGQgPSB0Lmxlbmd0aDsgcyA8IGQ7IHMrKykgeyB2YXIgQSA9IG4odFtzXSksIGcgPSBtKHRbc10pLCBoID0gQS5hdHRyKGEuaW1hZ2VCYXNlQXR0cmlidXRlKSB8fCB1OyBnID09PSBOICYmIGggJiYgQS5hdHRyKGwpICYmIEEuYXR0cihsLCBiKEEuYXR0cihsKSwgaCkpLCBjW2ddID09PSBlIHx8IEEuYXR0cihmKSB8fCBBLmF0dHIoZiwgY1tnXSksIGcgPT09IE4gJiYgaSAmJiAhQS5hdHRyKEUpID8gQS5hdHRyKEUsIGkpIDogZyA9PT0gTiB8fCAhbyB8fCBBLmNzcyhPKSAmJiBcIm5vbmVcIiAhPT0gQS5jc3MoTykgfHwgQS5jc3MoTywgXCJ1cmwoJ1wiICsgbyArIFwiJylcIikgfSByZXR1cm4gdCB9IGZ1bmN0aW9uIHModCwgZSkgeyBpZiAoIWkubGVuZ3RoKSByZXR1cm4gdm9pZCAoYS5hdXRvRGVzdHJveSAmJiByLmRlc3Ryb3koKSk7IGZvciAodmFyIG8gPSBlIHx8IGksIHUgPSAhMSwgbCA9IGEuaW1hZ2VCYXNlIHx8IFwiXCIsIGYgPSBhLnNyY3NldEF0dHJpYnV0ZSwgYyA9IGEuaGFuZGxlZE5hbWUsIHMgPSAwOyBzIDwgby5sZW5ndGg7IHMrKylpZiAodCB8fCBlIHx8IEEob1tzXSkpIHsgdmFyIGcgPSBuKG9bc10pLCBoID0gbShvW3NdKSwgYiA9IGcuYXR0cihhLmF0dHJpYnV0ZSksIHYgPSBnLmF0dHIoYS5pbWFnZUJhc2VBdHRyaWJ1dGUpIHx8IGwsIHAgPSBnLmF0dHIoYS5sb2FkZXJBdHRyaWJ1dGUpOyBnLmRhdGEoYykgfHwgYS52aXNpYmxlT25seSAmJiAhZy5pcyhcIjp2aXNpYmxlXCIpIHx8ICEoKGIgfHwgZy5hdHRyKGYpKSAmJiAoaCA9PT0gTiAmJiAodiArIGIgIT09IGcuYXR0cihFKSB8fCBnLmF0dHIoZikgIT09IGcuYXR0cihGKSkgfHwgaCAhPT0gTiAmJiB2ICsgYiAhPT0gZy5jc3MoTykpIHx8IHApIHx8ICh1ID0gITAsIGcuZGF0YShjLCAhMCksIGQoZywgaCwgdiwgcCkpIH0gdSAmJiAoaSA9IG4oaSkuZmlsdGVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuICFuKHRoaXMpLmRhdGEoYykgfSkpIH0gZnVuY3Rpb24gZCh0LCBlLCByLCBpKSB7ICsrejsgdmFyIG8gPSBmdW5jdGlvbiAoKSB7IHkoXCJvbkVycm9yXCIsIHQpLCBwKCksIG8gPSBuLm5vb3AgfTsgeShcImJlZm9yZUxvYWRcIiwgdCk7IHZhciB1ID0gYS5hdHRyaWJ1dGUsIGwgPSBhLnNyY3NldEF0dHJpYnV0ZSwgZiA9IGEuc2l6ZXNBdHRyaWJ1dGUsIGMgPSBhLnJldGluYUF0dHJpYnV0ZSwgcyA9IGEucmVtb3ZlQXR0cmlidXRlLCBkID0gYS5sb2FkZWROYW1lLCBBID0gdC5hdHRyKGMpOyBpZiAoaSkgeyB2YXIgZyA9IGZ1bmN0aW9uICgpIHsgcyAmJiB0LnJlbW92ZUF0dHIoYS5sb2FkZXJBdHRyaWJ1dGUpLCB0LmRhdGEoZCwgITApLCB5KFQsIHQpLCBzZXRUaW1lb3V0KHAsIDEpLCBnID0gbi5ub29wIH07IHQub2ZmKEkpLm9uZShJLCBvKS5vbmUoRCwgZyksIHkoaSwgdCwgZnVuY3Rpb24gKGUpIHsgZSA/ICh0Lm9mZihEKSwgZygpKSA6ICh0Lm9mZihJKSwgbygpKSB9KSB8fCB0LnRyaWdnZXIoSSkgfSBlbHNlIHsgdmFyIGggPSBuKG5ldyBJbWFnZSk7IGgub25lKEksIG8pLm9uZShELCBmdW5jdGlvbiAoKSB7IHQuaGlkZSgpLCBlID09PSBOID8gdC5hdHRyKEMsIGguYXR0cihDKSkuYXR0cihGLCBoLmF0dHIoRikpLmF0dHIoRSwgaC5hdHRyKEUpKSA6IHQuY3NzKE8sIFwidXJsKCdcIiArIGguYXR0cihFKSArIFwiJylcIiksIHRbYS5lZmZlY3RdKGEuZWZmZWN0VGltZSksIHMgJiYgKHQucmVtb3ZlQXR0cih1ICsgXCIgXCIgKyBsICsgXCIgXCIgKyBjICsgXCIgXCIgKyBhLmltYWdlQmFzZUF0dHJpYnV0ZSksIGYgIT09IEMgJiYgdC5yZW1vdmVBdHRyKGYpKSwgdC5kYXRhKGQsICEwKSwgeShULCB0KSwgaC5yZW1vdmUoKSwgcCgpIH0pOyB2YXIgbSA9IChMICYmIEEgPyBBIDogdC5hdHRyKHUpKSB8fCBcIlwiOyBoLmF0dHIoQywgdC5hdHRyKGYpKS5hdHRyKEYsIHQuYXR0cihsKSkuYXR0cihFLCBtID8gciArIG0gOiBudWxsKSwgaC5jb21wbGV0ZSAmJiBoLnRyaWdnZXIoRCkgfSB9IGZ1bmN0aW9uIEEodCkgeyB2YXIgZSA9IHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIHIgPSBhLnNjcm9sbERpcmVjdGlvbiwgbiA9IGEudGhyZXNob2xkLCBpID0gaCgpICsgbiA+IGUudG9wICYmIC1uIDwgZS5ib3R0b20sIG8gPSBnKCkgKyBuID4gZS5sZWZ0ICYmIC1uIDwgZS5yaWdodDsgcmV0dXJuIFwidmVydGljYWxcIiA9PT0gciA/IGkgOiBcImhvcml6b250YWxcIiA9PT0gciA/IG8gOiBpICYmIG8gfSBmdW5jdGlvbiBnKCkgeyByZXR1cm4gdyA+PSAwID8gdyA6IHcgPSBuKHQpLndpZHRoKCkgfSBmdW5jdGlvbiBoKCkgeyByZXR1cm4gQiA+PSAwID8gQiA6IEIgPSBuKHQpLmhlaWdodCgpIH0gZnVuY3Rpb24gbSh0KSB7IHJldHVybiB0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSB9IGZ1bmN0aW9uIGIodCwgZSkgeyBpZiAoZSkgeyB2YXIgciA9IHQuc3BsaXQoXCIsXCIpOyB0ID0gXCJcIjsgZm9yICh2YXIgYSA9IDAsIG4gPSByLmxlbmd0aDsgYSA8IG47IGErKyl0ICs9IGUgKyByW2FdLnRyaW0oKSArIChhICE9PSBuIC0gMSA/IFwiLFwiIDogXCJcIikgfSByZXR1cm4gdCB9IGZ1bmN0aW9uIHYodCwgZSkgeyB2YXIgbiwgaSA9IDA7IHJldHVybiBmdW5jdGlvbiAobywgdSkgeyBmdW5jdGlvbiBsKCkgeyBpID0gK25ldyBEYXRlLCBlLmNhbGwociwgbykgfSB2YXIgZiA9ICtuZXcgRGF0ZSAtIGk7IG4gJiYgY2xlYXJUaW1lb3V0KG4pLCBmID4gdCB8fCAhYS5lbmFibGVUaHJvdHRsZSB8fCB1ID8gbCgpIDogbiA9IHNldFRpbWVvdXQobCwgdCAtIGYpIH0gfSBmdW5jdGlvbiBwKCkgeyAtLXosIGkubGVuZ3RoIHx8IHogfHwgeShcIm9uRmluaXNoZWRBbGxcIikgfSBmdW5jdGlvbiB5KHQsIGUsIG4pIHsgcmV0dXJuICEhKHQgPSBhW3RdKSAmJiAodC5hcHBseShyLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpLCAhMCkgfSB2YXIgeiA9IDAsIHcgPSAtMSwgQiA9IC0xLCBMID0gITEsIFQgPSBcImFmdGVyTG9hZFwiLCBEID0gXCJsb2FkXCIsIEkgPSBcImVycm9yXCIsIE4gPSBcImltZ1wiLCBFID0gXCJzcmNcIiwgRiA9IFwic3Jjc2V0XCIsIEMgPSBcInNpemVzXCIsIE8gPSBcImJhY2tncm91bmQtaW1hZ2VcIjsgXCJldmVudFwiID09PSBhLmJpbmQgfHwgbyA/IGYoKSA6IG4odCkub24oRCArIFwiLlwiICsgbCwgZikgfSBmdW5jdGlvbiBhKGEsIG8pIHsgdmFyIHUgPSB0aGlzLCBsID0gbi5leHRlbmQoe30sIHUuY29uZmlnLCBvKSwgZiA9IHt9LCBjID0gbC5uYW1lICsgXCItXCIgKyArK2k7IHJldHVybiB1LmNvbmZpZyA9IGZ1bmN0aW9uICh0LCByKSB7IHJldHVybiByID09PSBlID8gbFt0XSA6IChsW3RdID0gciwgdSkgfSwgdS5hZGRJdGVtcyA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBmLmEgJiYgZi5hKFwic3RyaW5nXCIgPT09IG4udHlwZSh0KSA/IG4odCkgOiB0KSwgdSB9LCB1LmdldEl0ZW1zID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZi5nID8gZi5nKCkgOiB7fSB9LCB1LnVwZGF0ZSA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBmLmUgJiYgZi5lKHt9LCAhdCksIHUgfSwgdS5mb3JjZSA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBmLmYgJiYgZi5mKFwic3RyaW5nXCIgPT09IG4udHlwZSh0KSA/IG4odCkgOiB0KSwgdSB9LCB1LmxvYWRBbGwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmLmUgJiYgZi5lKHsgYWxsOiAhMCB9LCAhMCksIHUgfSwgdS5kZXN0cm95ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbihsLmFwcGVuZFNjcm9sbCkub2ZmKFwiLlwiICsgYywgZi5lKSwgbih0KS5vZmYoXCIuXCIgKyBjKSwgZiA9IHt9LCBlIH0sIHIodSwgbCwgYSwgZiwgYyksIGwuY2hhaW5hYmxlID8gYSA6IHUgfSB2YXIgbiA9IHQualF1ZXJ5IHx8IHQuWmVwdG8sIGkgPSAwLCBvID0gITE7IG4uZm4uTGF6eSA9IG4uZm4ubGF6eSA9IGZ1bmN0aW9uICh0KSB7IHJldHVybiBuZXcgYSh0aGlzLCB0KSB9LCBuLkxhenkgPSBuLmxhenkgPSBmdW5jdGlvbiAodCwgciwgaSkgeyBpZiAobi5pc0Z1bmN0aW9uKHIpICYmIChpID0gciwgciA9IFtdKSwgbi5pc0Z1bmN0aW9uKGkpKSB7IHQgPSBuLmlzQXJyYXkodCkgPyB0IDogW3RdLCByID0gbi5pc0FycmF5KHIpID8gciA6IFtyXTsgZm9yICh2YXIgbyA9IGEucHJvdG90eXBlLmNvbmZpZywgdSA9IG8uX2YgfHwgKG8uX2YgPSB7fSksIGwgPSAwLCBmID0gdC5sZW5ndGg7IGwgPCBmOyBsKyspKG9bdFtsXV0gPT09IGUgfHwgbi5pc0Z1bmN0aW9uKG9bdFtsXV0pKSAmJiAob1t0W2xdXSA9IGkpOyBmb3IgKHZhciBjID0gMCwgcyA9IHIubGVuZ3RoOyBjIDwgczsgYysrKXVbcltjXV0gPSB0WzBdIH0gfSwgYS5wcm90b3R5cGUuY29uZmlnID0geyBuYW1lOiBcImxhenlcIiwgY2hhaW5hYmxlOiAhMCwgYXV0b0Rlc3Ryb3k6ICEwLCBiaW5kOiBcImxvYWRcIiwgdGhyZXNob2xkOiA1MDAsIHZpc2libGVPbmx5OiAhMSwgYXBwZW5kU2Nyb2xsOiB0LCBzY3JvbGxEaXJlY3Rpb246IFwiYm90aFwiLCBpbWFnZUJhc2U6IG51bGwsIGRlZmF1bHRJbWFnZTogXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFQLy8vd0FBQUNINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQ1JBRUFPdz09XCIsIHBsYWNlaG9sZGVyOiBudWxsLCBkZWxheTogLTEsIGNvbWJpbmVkOiAhMSwgYXR0cmlidXRlOiBcImRhdGEtc3JjXCIsIHNyY3NldEF0dHJpYnV0ZTogXCJkYXRhLXNyY3NldFwiLCBzaXplc0F0dHJpYnV0ZTogXCJkYXRhLXNpemVzXCIsIHJldGluYUF0dHJpYnV0ZTogXCJkYXRhLXJldGluYVwiLCBsb2FkZXJBdHRyaWJ1dGU6IFwiZGF0YS1sb2FkZXJcIiwgaW1hZ2VCYXNlQXR0cmlidXRlOiBcImRhdGEtaW1hZ2ViYXNlXCIsIHJlbW92ZUF0dHJpYnV0ZTogITAsIGhhbmRsZWROYW1lOiBcImhhbmRsZWRcIiwgbG9hZGVkTmFtZTogXCJsb2FkZWRcIiwgZWZmZWN0OiBcInNob3dcIiwgZWZmZWN0VGltZTogMCwgZW5hYmxlVGhyb3R0bGU6ICEwLCB0aHJvdHRsZTogMjUwLCBiZWZvcmVMb2FkOiBlLCBhZnRlckxvYWQ6IGUsIG9uRXJyb3I6IGUsIG9uRmluaXNoZWRBbGw6IGUgfSwgbih0KS5vbihcImxvYWRcIiwgZnVuY3Rpb24gKCkgeyBvID0gITAgfSkgfSh3aW5kb3cpOyIsIi8qISB0b29sdGlwc3RlciB2NC4yLjUgKi8hZnVuY3Rpb24gKGEsIGIpIHsgXCJmdW5jdGlvblwiID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbXCJqcXVlcnlcIl0sIGZ1bmN0aW9uIChhKSB7IHJldHVybiBiKGEpIH0pIDogXCJvYmplY3RcIiA9PSB0eXBlb2YgZXhwb3J0cyA/IG1vZHVsZS5leHBvcnRzID0gYihyZXF1aXJlKFwianF1ZXJ5XCIpKSA6IGIoalF1ZXJ5KSB9KHRoaXMsIGZ1bmN0aW9uIChhKSB7XHJcbiAgICBmdW5jdGlvbiBiKGEpIHsgdGhpcy4kY29udGFpbmVyLCB0aGlzLmNvbnN0cmFpbnRzID0gbnVsbCwgdGhpcy5fXyR0b29sdGlwLCB0aGlzLl9faW5pdChhKSB9IGZ1bmN0aW9uIGMoYiwgYykgeyB2YXIgZCA9ICEwOyByZXR1cm4gYS5lYWNoKGIsIGZ1bmN0aW9uIChhLCBlKSB7IHJldHVybiB2b2lkIDAgPT09IGNbYV0gfHwgYlthXSAhPT0gY1thXSA/IChkID0gITEsICExKSA6IHZvaWQgMCB9KSwgZCB9IGZ1bmN0aW9uIGQoYikgeyB2YXIgYyA9IGIuYXR0cihcImlkXCIpLCBkID0gYyA/IGgud2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGMpIDogbnVsbDsgcmV0dXJuIGQgPyBkID09PSBiWzBdIDogYS5jb250YWlucyhoLndpbmRvdy5kb2N1bWVudC5ib2R5LCBiWzBdKSB9IGZ1bmN0aW9uIGUoKSB7IGlmICghZykgcmV0dXJuICExOyB2YXIgYSA9IGcuZG9jdW1lbnQuYm9keSB8fCBnLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgYiA9IGEuc3R5bGUsIGMgPSBcInRyYW5zaXRpb25cIiwgZCA9IFtcIk1velwiLCBcIldlYmtpdFwiLCBcIktodG1sXCIsIFwiT1wiLCBcIm1zXCJdOyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgYltjXSkgcmV0dXJuICEwOyBjID0gYy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGMuc3Vic3RyKDEpOyBmb3IgKHZhciBlID0gMDsgZSA8IGQubGVuZ3RoOyBlKyspaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGJbZFtlXSArIGNdKSByZXR1cm4gITA7IHJldHVybiAhMSB9IHZhciBmID0geyBhbmltYXRpb246IFwiZmFkZVwiLCBhbmltYXRpb25EdXJhdGlvbjogMzUwLCBjb250ZW50OiBudWxsLCBjb250ZW50QXNIVE1MOiAhMSwgY29udGVudENsb25pbmc6ICExLCBkZWJ1ZzogITAsIGRlbGF5OiAzMDAsIGRlbGF5VG91Y2g6IFszMDAsIDUwMF0sIGZ1bmN0aW9uSW5pdDogbnVsbCwgZnVuY3Rpb25CZWZvcmU6IG51bGwsIGZ1bmN0aW9uUmVhZHk6IG51bGwsIGZ1bmN0aW9uQWZ0ZXI6IG51bGwsIGZ1bmN0aW9uRm9ybWF0OiBudWxsLCBJRW1pbjogNiwgaW50ZXJhY3RpdmU6ICExLCBtdWx0aXBsZTogITEsIHBhcmVudDogbnVsbCwgcGx1Z2luczogW1wic2lkZVRpcFwiXSwgcmVwb3NpdGlvbk9uU2Nyb2xsOiAhMSwgcmVzdG9yYXRpb246IFwibm9uZVwiLCBzZWxmRGVzdHJ1Y3Rpb246ICEwLCB0aGVtZTogW10sIHRpbWVyOiAwLCB0cmFja2VySW50ZXJ2YWw6IDUwMCwgdHJhY2tPcmlnaW46ICExLCB0cmFja1Rvb2x0aXA6ICExLCB0cmlnZ2VyOiBcImhvdmVyXCIsIHRyaWdnZXJDbG9zZTogeyBjbGljazogITEsIG1vdXNlbGVhdmU6ICExLCBvcmlnaW5DbGljazogITEsIHNjcm9sbDogITEsIHRhcDogITEsIHRvdWNobGVhdmU6ICExIH0sIHRyaWdnZXJPcGVuOiB7IGNsaWNrOiAhMSwgbW91c2VlbnRlcjogITEsIHRhcDogITEsIHRvdWNoc3RhcnQ6ICExIH0sIHVwZGF0ZUFuaW1hdGlvbjogXCJyb3RhdGVcIiwgekluZGV4OiA5OTk5OTk5IH0sIGcgPSBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiBudWxsLCBoID0geyBoYXNUb3VjaENhcGFiaWxpdHk6ICEoIWcgfHwgIShcIm9udG91Y2hzdGFydFwiIGluIGcgfHwgZy5Eb2N1bWVudFRvdWNoICYmIGcuZG9jdW1lbnQgaW5zdGFuY2VvZiBnLkRvY3VtZW50VG91Y2ggfHwgZy5uYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMpKSwgaGFzVHJhbnNpdGlvbnM6IGUoKSwgSUU6ICExLCBzZW1WZXI6IFwiNC4yLjVcIiwgd2luZG93OiBnIH0sIGkgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX18kZW1pdHRlclByaXZhdGUgPSBhKHt9KSwgdGhpcy5fXyRlbWl0dGVyUHVibGljID0gYSh7fSksIHRoaXMuX19pbnN0YW5jZXNMYXRlc3RBcnIgPSBbXSwgdGhpcy5fX3BsdWdpbnMgPSB7fSwgdGhpcy5fZW52ID0gaCB9OyBpLnByb3RvdHlwZSA9IHsgX19icmlkZ2U6IGZ1bmN0aW9uIChiLCBjLCBkKSB7IGlmICghY1tkXSkgeyB2YXIgZSA9IGZ1bmN0aW9uICgpIHsgfTsgZS5wcm90b3R5cGUgPSBiOyB2YXIgZyA9IG5ldyBlOyBnLl9faW5pdCAmJiBnLl9faW5pdChjKSwgYS5lYWNoKGIsIGZ1bmN0aW9uIChhLCBiKSB7IDAgIT0gYS5pbmRleE9mKFwiX19cIikgJiYgKGNbYV0gPyBmLmRlYnVnICYmIGNvbnNvbGUubG9nKFwiVGhlIFwiICsgYSArIFwiIG1ldGhvZCBvZiB0aGUgXCIgKyBkICsgXCIgcGx1Z2luIGNvbmZsaWN0cyB3aXRoIGFub3RoZXIgcGx1Z2luIG9yIG5hdGl2ZSBtZXRob2RzXCIpIDogKGNbYV0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiBnW2FdLmFwcGx5KGcsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSB9LCBjW2FdLmJyaWRnZWQgPSBnKSkgfSksIGNbZF0gPSBnIH0gcmV0dXJuIHRoaXMgfSwgX19zZXRXaW5kb3c6IGZ1bmN0aW9uIChhKSB7IHJldHVybiBoLndpbmRvdyA9IGEsIHRoaXMgfSwgX2dldFJ1bGVyOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gbmV3IGIoYSkgfSwgX29mZjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vZmYuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIF9vbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vbi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSksIHRoaXMgfSwgX29uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vbmUuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIF9wbHVnaW46IGZ1bmN0aW9uIChiKSB7IHZhciBjID0gdGhpczsgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGIpIHsgdmFyIGQgPSBiLCBlID0gbnVsbDsgcmV0dXJuIGQuaW5kZXhPZihcIi5cIikgPiAwID8gZSA9IGMuX19wbHVnaW5zW2RdIDogYS5lYWNoKGMuX19wbHVnaW5zLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYi5uYW1lLnN1YnN0cmluZyhiLm5hbWUubGVuZ3RoIC0gZC5sZW5ndGggLSAxKSA9PSBcIi5cIiArIGQgPyAoZSA9IGIsICExKSA6IHZvaWQgMCB9KSwgZSB9IGlmIChiLm5hbWUuaW5kZXhPZihcIi5cIikgPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJQbHVnaW5zIG11c3QgYmUgbmFtZXNwYWNlZFwiKTsgcmV0dXJuIGMuX19wbHVnaW5zW2IubmFtZV0gPSBiLCBiLmNvcmUgJiYgYy5fX2JyaWRnZShiLmNvcmUsIGMsIGIubmFtZSksIHRoaXMgfSwgX3RyaWdnZXI6IGZ1bmN0aW9uICgpIHsgdmFyIGEgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTsgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGFbMF0gJiYgKGFbMF0gPSB7IHR5cGU6IGFbMF0gfSksIHRoaXMuX18kZW1pdHRlclByaXZhdGUudHJpZ2dlci5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBhKSwgdGhpcy5fXyRlbWl0dGVyUHVibGljLnRyaWdnZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBhKSwgdGhpcyB9LCBpbnN0YW5jZXM6IGZ1bmN0aW9uIChiKSB7IHZhciBjID0gW10sIGQgPSBiIHx8IFwiLnRvb2x0aXBzdGVyZWRcIjsgcmV0dXJuIGEoZCkuZWFjaChmdW5jdGlvbiAoKSB7IHZhciBiID0gYSh0aGlzKSwgZCA9IGIuZGF0YShcInRvb2x0aXBzdGVyLW5zXCIpOyBkICYmIGEuZWFjaChkLCBmdW5jdGlvbiAoYSwgZCkgeyBjLnB1c2goYi5kYXRhKGQpKSB9KSB9KSwgYyB9LCBpbnN0YW5jZXNMYXRlc3Q6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX19pbnN0YW5jZXNMYXRlc3RBcnIgfSwgb2ZmOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub2ZmLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIG9uOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub24uYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSksIHRoaXMgfSwgb25lOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub25lLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIG9yaWdpbnM6IGZ1bmN0aW9uIChiKSB7IHZhciBjID0gYiA/IGIgKyBcIiBcIiA6IFwiXCI7IHJldHVybiBhKGMgKyBcIi50b29sdGlwc3RlcmVkXCIpLnRvQXJyYXkoKSB9LCBzZXREZWZhdWx0czogZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGEuZXh0ZW5kKGYsIGIpLCB0aGlzIH0sIHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fJGVtaXR0ZXJQdWJsaWMudHJpZ2dlckhhbmRsZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSksIHRoaXMgfSB9LCBhLnRvb2x0aXBzdGVyID0gbmV3IGksIGEuVG9vbHRpcHN0ZXIgPSBmdW5jdGlvbiAoYiwgYykgeyB0aGlzLl9fY2FsbGJhY2tzID0geyBjbG9zZTogW10sIG9wZW46IFtdIH0sIHRoaXMuX19jbG9zaW5nVGltZSwgdGhpcy5fX0NvbnRlbnQsIHRoaXMuX19jb250ZW50QmNyLCB0aGlzLl9fZGVzdHJveWVkID0gITEsIHRoaXMuX18kZW1pdHRlclByaXZhdGUgPSBhKHt9KSwgdGhpcy5fXyRlbWl0dGVyUHVibGljID0gYSh7fSksIHRoaXMuX19lbmFibGVkID0gITAsIHRoaXMuX19nYXJiYWdlQ29sbGVjdG9yLCB0aGlzLl9fR2VvbWV0cnksIHRoaXMuX19sYXN0UG9zaXRpb24sIHRoaXMuX19uYW1lc3BhY2UgPSBcInRvb2x0aXBzdGVyLVwiICsgTWF0aC5yb3VuZCgxZTYgKiBNYXRoLnJhbmRvbSgpKSwgdGhpcy5fX29wdGlvbnMsIHRoaXMuX18kb3JpZ2luUGFyZW50cywgdGhpcy5fX3BvaW50ZXJJc092ZXJPcmlnaW4gPSAhMSwgdGhpcy5fX3ByZXZpb3VzVGhlbWVzID0gW10sIHRoaXMuX19zdGF0ZSA9IFwiY2xvc2VkXCIsIHRoaXMuX190aW1lb3V0cyA9IHsgY2xvc2U6IFtdLCBvcGVuOiBudWxsIH0sIHRoaXMuX190b3VjaEV2ZW50cyA9IFtdLCB0aGlzLl9fdHJhY2tlciA9IG51bGwsIHRoaXMuXyRvcmlnaW4sIHRoaXMuXyR0b29sdGlwLCB0aGlzLl9faW5pdChiLCBjKSB9LCBhLlRvb2x0aXBzdGVyLnByb3RvdHlwZSA9IHsgX19pbml0OiBmdW5jdGlvbiAoYiwgYykgeyB2YXIgZCA9IHRoaXM7IGlmIChkLl8kb3JpZ2luID0gYShiKSwgZC5fX29wdGlvbnMgPSBhLmV4dGVuZCghMCwge30sIGYsIGMpLCBkLl9fb3B0aW9uc0Zvcm1hdCgpLCAhaC5JRSB8fCBoLklFID49IGQuX19vcHRpb25zLklFbWluKSB7IHZhciBlID0gbnVsbDsgaWYgKHZvaWQgMCA9PT0gZC5fJG9yaWdpbi5kYXRhKFwidG9vbHRpcHN0ZXItaW5pdGlhbFRpdGxlXCIpICYmIChlID0gZC5fJG9yaWdpbi5hdHRyKFwidGl0bGVcIiksIHZvaWQgMCA9PT0gZSAmJiAoZSA9IG51bGwpLCBkLl8kb3JpZ2luLmRhdGEoXCJ0b29sdGlwc3Rlci1pbml0aWFsVGl0bGVcIiwgZSkpLCBudWxsICE9PSBkLl9fb3B0aW9ucy5jb250ZW50KSBkLl9fY29udGVudFNldChkLl9fb3B0aW9ucy5jb250ZW50KTsgZWxzZSB7IHZhciBnLCBpID0gZC5fJG9yaWdpbi5hdHRyKFwiZGF0YS10b29sdGlwLWNvbnRlbnRcIik7IGkgJiYgKGcgPSBhKGkpKSwgZyAmJiBnWzBdID8gZC5fX2NvbnRlbnRTZXQoZy5maXJzdCgpKSA6IGQuX19jb250ZW50U2V0KGUpIH0gZC5fJG9yaWdpbi5yZW1vdmVBdHRyKFwidGl0bGVcIikuYWRkQ2xhc3MoXCJ0b29sdGlwc3RlcmVkXCIpLCBkLl9fcHJlcGFyZU9yaWdpbigpLCBkLl9fcHJlcGFyZUdDKCksIGEuZWFjaChkLl9fb3B0aW9ucy5wbHVnaW5zLCBmdW5jdGlvbiAoYSwgYikgeyBkLl9wbHVnKGIpIH0pLCBoLmhhc1RvdWNoQ2FwYWJpbGl0eSAmJiBhKGgud2luZG93LmRvY3VtZW50LmJvZHkpLm9uKFwidG91Y2htb3ZlLlwiICsgZC5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuXCIsIGZ1bmN0aW9uIChhKSB7IGQuX3RvdWNoUmVjb3JkRXZlbnQoYSkgfSksIGQuX29uKFwiY3JlYXRlZFwiLCBmdW5jdGlvbiAoKSB7IGQuX19wcmVwYXJlVG9vbHRpcCgpIH0pLl9vbihcInJlcG9zaXRpb25lZFwiLCBmdW5jdGlvbiAoYSkgeyBkLl9fbGFzdFBvc2l0aW9uID0gYS5wb3NpdGlvbiB9KSB9IGVsc2UgZC5fX29wdGlvbnMuZGlzYWJsZWQgPSAhMCB9LCBfX2NvbnRlbnRJbnNlcnQ6IGZ1bmN0aW9uICgpIHsgdmFyIGEgPSB0aGlzLCBiID0gYS5fJHRvb2x0aXAuZmluZChcIi50b29sdGlwc3Rlci1jb250ZW50XCIpLCBjID0gYS5fX0NvbnRlbnQsIGQgPSBmdW5jdGlvbiAoYSkgeyBjID0gYSB9OyByZXR1cm4gYS5fdHJpZ2dlcih7IHR5cGU6IFwiZm9ybWF0XCIsIGNvbnRlbnQ6IGEuX19Db250ZW50LCBmb3JtYXQ6IGQgfSksIGEuX19vcHRpb25zLmZ1bmN0aW9uRm9ybWF0ICYmIChjID0gYS5fX29wdGlvbnMuZnVuY3Rpb25Gb3JtYXQuY2FsbChhLCBhLCB7IG9yaWdpbjogYS5fJG9yaWdpblswXSB9LCBhLl9fQ29udGVudCkpLCBcInN0cmluZ1wiICE9IHR5cGVvZiBjIHx8IGEuX19vcHRpb25zLmNvbnRlbnRBc0hUTUwgPyBiLmVtcHR5KCkuYXBwZW5kKGMpIDogYi50ZXh0KGMpLCBhIH0sIF9fY29udGVudFNldDogZnVuY3Rpb24gKGIpIHsgcmV0dXJuIGIgaW5zdGFuY2VvZiBhICYmIHRoaXMuX19vcHRpb25zLmNvbnRlbnRDbG9uaW5nICYmIChiID0gYi5jbG9uZSghMCkpLCB0aGlzLl9fQ29udGVudCA9IGIsIHRoaXMuX3RyaWdnZXIoeyB0eXBlOiBcInVwZGF0ZWRcIiwgY29udGVudDogYiB9KSwgdGhpcyB9LCBfX2Rlc3Ryb3lFcnJvcjogZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIHRvb2x0aXAgaGFzIGJlZW4gZGVzdHJveWVkIGFuZCBjYW5ub3QgZXhlY3V0ZSB5b3VyIG1ldGhvZCBjYWxsLlwiKSB9LCBfX2dlb21ldHJ5OiBmdW5jdGlvbiAoKSB7IHZhciBiID0gdGhpcywgYyA9IGIuXyRvcmlnaW4sIGQgPSBiLl8kb3JpZ2luLmlzKFwiYXJlYVwiKTsgaWYgKGQpIHsgdmFyIGUgPSBiLl8kb3JpZ2luLnBhcmVudCgpLmF0dHIoXCJuYW1lXCIpOyBjID0gYSgnaW1nW3VzZW1hcD1cIiMnICsgZSArICdcIl0nKSB9IHZhciBmID0gY1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgZyA9IGEoaC53aW5kb3cuZG9jdW1lbnQpLCBpID0gYShoLndpbmRvdyksIGogPSBjLCBrID0geyBhdmFpbGFibGU6IHsgZG9jdW1lbnQ6IG51bGwsIHdpbmRvdzogbnVsbCB9LCBkb2N1bWVudDogeyBzaXplOiB7IGhlaWdodDogZy5oZWlnaHQoKSwgd2lkdGg6IGcud2lkdGgoKSB9IH0sIHdpbmRvdzogeyBzY3JvbGw6IHsgbGVmdDogaC53aW5kb3cuc2Nyb2xsWCB8fCBoLndpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCwgdG9wOiBoLndpbmRvdy5zY3JvbGxZIHx8IGgud2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfSwgc2l6ZTogeyBoZWlnaHQ6IGkuaGVpZ2h0KCksIHdpZHRoOiBpLndpZHRoKCkgfSB9LCBvcmlnaW46IHsgZml4ZWRMaW5lYWdlOiAhMSwgb2Zmc2V0OiB7fSwgc2l6ZTogeyBoZWlnaHQ6IGYuYm90dG9tIC0gZi50b3AsIHdpZHRoOiBmLnJpZ2h0IC0gZi5sZWZ0IH0sIHVzZW1hcEltYWdlOiBkID8gY1swXSA6IG51bGwsIHdpbmRvd09mZnNldDogeyBib3R0b206IGYuYm90dG9tLCBsZWZ0OiBmLmxlZnQsIHJpZ2h0OiBmLnJpZ2h0LCB0b3A6IGYudG9wIH0gfSB9OyBpZiAoZCkgeyB2YXIgbCA9IGIuXyRvcmlnaW4uYXR0cihcInNoYXBlXCIpLCBtID0gYi5fJG9yaWdpbi5hdHRyKFwiY29vcmRzXCIpOyBpZiAobSAmJiAobSA9IG0uc3BsaXQoXCIsXCIpLCBhLm1hcChtLCBmdW5jdGlvbiAoYSwgYikgeyBtW2JdID0gcGFyc2VJbnQoYSkgfSkpLCBcImRlZmF1bHRcIiAhPSBsKSBzd2l0Y2ggKGwpIHsgY2FzZSBcImNpcmNsZVwiOiB2YXIgbiA9IG1bMF0sIG8gPSBtWzFdLCBwID0gbVsyXSwgcSA9IG8gLSBwLCByID0gbiAtIHA7IGsub3JpZ2luLnNpemUuaGVpZ2h0ID0gMiAqIHAsIGsub3JpZ2luLnNpemUud2lkdGggPSBrLm9yaWdpbi5zaXplLmhlaWdodCwgay5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKz0gciwgay5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArPSBxOyBicmVhazsgY2FzZSBcInJlY3RcIjogdmFyIHMgPSBtWzBdLCB0ID0gbVsxXSwgdSA9IG1bMl0sIHYgPSBtWzNdOyBrLm9yaWdpbi5zaXplLmhlaWdodCA9IHYgLSB0LCBrLm9yaWdpbi5zaXplLndpZHRoID0gdSAtIHMsIGsub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICs9IHMsIGsub3JpZ2luLndpbmRvd09mZnNldC50b3AgKz0gdDsgYnJlYWs7IGNhc2UgXCJwb2x5XCI6IGZvciAodmFyIHcgPSAwLCB4ID0gMCwgeSA9IDAsIHogPSAwLCBBID0gXCJldmVuXCIsIEIgPSAwOyBCIDwgbS5sZW5ndGg7IEIrKykgeyB2YXIgQyA9IG1bQl07IFwiZXZlblwiID09IEEgPyAoQyA+IHkgJiYgKHkgPSBDLCAwID09PSBCICYmICh3ID0geSkpLCB3ID4gQyAmJiAodyA9IEMpLCBBID0gXCJvZGRcIikgOiAoQyA+IHogJiYgKHogPSBDLCAxID09IEIgJiYgKHggPSB6KSksIHggPiBDICYmICh4ID0gQyksIEEgPSBcImV2ZW5cIikgfSBrLm9yaWdpbi5zaXplLmhlaWdodCA9IHogLSB4LCBrLm9yaWdpbi5zaXplLndpZHRoID0geSAtIHcsIGsub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICs9IHcsIGsub3JpZ2luLndpbmRvd09mZnNldC50b3AgKz0geCB9IH0gdmFyIEQgPSBmdW5jdGlvbiAoYSkgeyBrLm9yaWdpbi5zaXplLmhlaWdodCA9IGEuaGVpZ2h0LCBrLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCA9IGEubGVmdCwgay5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCA9IGEudG9wLCBrLm9yaWdpbi5zaXplLndpZHRoID0gYS53aWR0aCB9OyBmb3IgKGIuX3RyaWdnZXIoeyB0eXBlOiBcImdlb21ldHJ5XCIsIGVkaXQ6IEQsIGdlb21ldHJ5OiB7IGhlaWdodDogay5vcmlnaW4uc2l6ZS5oZWlnaHQsIGxlZnQ6IGsub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0LCB0b3A6IGsub3JpZ2luLndpbmRvd09mZnNldC50b3AsIHdpZHRoOiBrLm9yaWdpbi5zaXplLndpZHRoIH0gfSksIGsub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCA9IGsub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICsgay5vcmlnaW4uc2l6ZS53aWR0aCwgay5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSA9IGsub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyBrLm9yaWdpbi5zaXplLmhlaWdodCwgay5vcmlnaW4ub2Zmc2V0LmxlZnQgPSBrLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIGsud2luZG93LnNjcm9sbC5sZWZ0LCBrLm9yaWdpbi5vZmZzZXQudG9wID0gay5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIGsud2luZG93LnNjcm9sbC50b3AsIGsub3JpZ2luLm9mZnNldC5ib3R0b20gPSBrLm9yaWdpbi5vZmZzZXQudG9wICsgay5vcmlnaW4uc2l6ZS5oZWlnaHQsIGsub3JpZ2luLm9mZnNldC5yaWdodCA9IGsub3JpZ2luLm9mZnNldC5sZWZ0ICsgay5vcmlnaW4uc2l6ZS53aWR0aCwgay5hdmFpbGFibGUuZG9jdW1lbnQgPSB7IGJvdHRvbTogeyBoZWlnaHQ6IGsuZG9jdW1lbnQuc2l6ZS5oZWlnaHQgLSBrLm9yaWdpbi5vZmZzZXQuYm90dG9tLCB3aWR0aDogay5kb2N1bWVudC5zaXplLndpZHRoIH0sIGxlZnQ6IHsgaGVpZ2h0OiBrLmRvY3VtZW50LnNpemUuaGVpZ2h0LCB3aWR0aDogay5vcmlnaW4ub2Zmc2V0LmxlZnQgfSwgcmlnaHQ6IHsgaGVpZ2h0OiBrLmRvY3VtZW50LnNpemUuaGVpZ2h0LCB3aWR0aDogay5kb2N1bWVudC5zaXplLndpZHRoIC0gay5vcmlnaW4ub2Zmc2V0LnJpZ2h0IH0sIHRvcDogeyBoZWlnaHQ6IGsub3JpZ2luLm9mZnNldC50b3AsIHdpZHRoOiBrLmRvY3VtZW50LnNpemUud2lkdGggfSB9LCBrLmF2YWlsYWJsZS53aW5kb3cgPSB7IGJvdHRvbTogeyBoZWlnaHQ6IE1hdGgubWF4KGsud2luZG93LnNpemUuaGVpZ2h0IC0gTWF0aC5tYXgoay5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSwgMCksIDApLCB3aWR0aDogay53aW5kb3cuc2l6ZS53aWR0aCB9LCBsZWZ0OiB7IGhlaWdodDogay53aW5kb3cuc2l6ZS5oZWlnaHQsIHdpZHRoOiBNYXRoLm1heChrLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCwgMCkgfSwgcmlnaHQ6IHsgaGVpZ2h0OiBrLndpbmRvdy5zaXplLmhlaWdodCwgd2lkdGg6IE1hdGgubWF4KGsud2luZG93LnNpemUud2lkdGggLSBNYXRoLm1heChrLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQsIDApLCAwKSB9LCB0b3A6IHsgaGVpZ2h0OiBNYXRoLm1heChrLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wLCAwKSwgd2lkdGg6IGsud2luZG93LnNpemUud2lkdGggfSB9OyBcImh0bWxcIiAhPSBqWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKTspIHsgaWYgKFwiZml4ZWRcIiA9PSBqLmNzcyhcInBvc2l0aW9uXCIpKSB7IGsub3JpZ2luLmZpeGVkTGluZWFnZSA9ICEwOyBicmVhayB9IGogPSBqLnBhcmVudCgpIH0gcmV0dXJuIGsgfSwgX19vcHRpb25zRm9ybWF0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0aGlzLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbiAmJiAodGhpcy5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24gPSBbdGhpcy5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24sIHRoaXMuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uXSksIFwibnVtYmVyXCIgPT0gdHlwZW9mIHRoaXMuX19vcHRpb25zLmRlbGF5ICYmICh0aGlzLl9fb3B0aW9ucy5kZWxheSA9IFt0aGlzLl9fb3B0aW9ucy5kZWxheSwgdGhpcy5fX29wdGlvbnMuZGVsYXldKSwgXCJudW1iZXJcIiA9PSB0eXBlb2YgdGhpcy5fX29wdGlvbnMuZGVsYXlUb3VjaCAmJiAodGhpcy5fX29wdGlvbnMuZGVsYXlUb3VjaCA9IFt0aGlzLl9fb3B0aW9ucy5kZWxheVRvdWNoLCB0aGlzLl9fb3B0aW9ucy5kZWxheVRvdWNoXSksIFwic3RyaW5nXCIgPT0gdHlwZW9mIHRoaXMuX19vcHRpb25zLnRoZW1lICYmICh0aGlzLl9fb3B0aW9ucy50aGVtZSA9IFt0aGlzLl9fb3B0aW9ucy50aGVtZV0pLCBudWxsID09PSB0aGlzLl9fb3B0aW9ucy5wYXJlbnQgPyB0aGlzLl9fb3B0aW9ucy5wYXJlbnQgPSBhKGgud2luZG93LmRvY3VtZW50LmJvZHkpIDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgdGhpcy5fX29wdGlvbnMucGFyZW50ICYmICh0aGlzLl9fb3B0aW9ucy5wYXJlbnQgPSBhKHRoaXMuX19vcHRpb25zLnBhcmVudCkpLCBcImhvdmVyXCIgPT0gdGhpcy5fX29wdGlvbnMudHJpZ2dlciA/ICh0aGlzLl9fb3B0aW9ucy50cmlnZ2VyT3BlbiA9IHsgbW91c2VlbnRlcjogITAsIHRvdWNoc3RhcnQ6ICEwIH0sIHRoaXMuX19vcHRpb25zLnRyaWdnZXJDbG9zZSA9IHsgbW91c2VsZWF2ZTogITAsIG9yaWdpbkNsaWNrOiAhMCwgdG91Y2hsZWF2ZTogITAgfSkgOiBcImNsaWNrXCIgPT0gdGhpcy5fX29wdGlvbnMudHJpZ2dlciAmJiAodGhpcy5fX29wdGlvbnMudHJpZ2dlck9wZW4gPSB7IGNsaWNrOiAhMCwgdGFwOiAhMCB9LCB0aGlzLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UgPSB7IGNsaWNrOiAhMCwgdGFwOiAhMCB9KSwgdGhpcy5fdHJpZ2dlcihcIm9wdGlvbnNcIiksIHRoaXMgfSwgX19wcmVwYXJlR0M6IGZ1bmN0aW9uICgpIHsgdmFyIGIgPSB0aGlzOyByZXR1cm4gYi5fX29wdGlvbnMuc2VsZkRlc3RydWN0aW9uID8gYi5fX2dhcmJhZ2VDb2xsZWN0b3IgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHZhciBjID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7IGIuX190b3VjaEV2ZW50cyA9IGEuZ3JlcChiLl9fdG91Y2hFdmVudHMsIGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBjIC0gYS50aW1lID4gNmU0IH0pLCBkKGIuXyRvcmlnaW4pIHx8IGIuY2xvc2UoZnVuY3Rpb24gKCkgeyBiLmRlc3Ryb3koKSB9KSB9LCAyZTQpIDogY2xlYXJJbnRlcnZhbChiLl9fZ2FyYmFnZUNvbGxlY3RvciksIGIgfSwgX19wcmVwYXJlT3JpZ2luOiBmdW5jdGlvbiAoKSB7IHZhciBhID0gdGhpczsgaWYgKGEuXyRvcmlnaW4ub2ZmKFwiLlwiICsgYS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuXCIpLCBoLmhhc1RvdWNoQ2FwYWJpbGl0eSAmJiBhLl8kb3JpZ2luLm9uKFwidG91Y2hzdGFydC5cIiArIGEuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlbiB0b3VjaGVuZC5cIiArIGEuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlbiB0b3VjaGNhbmNlbC5cIiArIGEuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlblwiLCBmdW5jdGlvbiAoYikgeyBhLl90b3VjaFJlY29yZEV2ZW50KGIpIH0pLCBhLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi5jbGljayB8fCBhLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi50YXAgJiYgaC5oYXNUb3VjaENhcGFiaWxpdHkpIHsgdmFyIGIgPSBcIlwiOyBhLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi5jbGljayAmJiAoYiArPSBcImNsaWNrLlwiICsgYS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuIFwiKSwgYS5fX29wdGlvbnMudHJpZ2dlck9wZW4udGFwICYmIGguaGFzVG91Y2hDYXBhYmlsaXR5ICYmIChiICs9IFwidG91Y2hlbmQuXCIgKyBhLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlck9wZW5cIiksIGEuXyRvcmlnaW4ub24oYiwgZnVuY3Rpb24gKGIpIHsgYS5fdG91Y2hJc01lYW5pbmdmdWxFdmVudChiKSAmJiBhLl9vcGVuKGIpIH0pIH0gaWYgKGEuX19vcHRpb25zLnRyaWdnZXJPcGVuLm1vdXNlZW50ZXIgfHwgYS5fX29wdGlvbnMudHJpZ2dlck9wZW4udG91Y2hzdGFydCAmJiBoLmhhc1RvdWNoQ2FwYWJpbGl0eSkgeyB2YXIgYiA9IFwiXCI7IGEuX19vcHRpb25zLnRyaWdnZXJPcGVuLm1vdXNlZW50ZXIgJiYgKGIgKz0gXCJtb3VzZWVudGVyLlwiICsgYS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuIFwiKSwgYS5fX29wdGlvbnMudHJpZ2dlck9wZW4udG91Y2hzdGFydCAmJiBoLmhhc1RvdWNoQ2FwYWJpbGl0eSAmJiAoYiArPSBcInRvdWNoc3RhcnQuXCIgKyBhLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlck9wZW5cIiksIGEuXyRvcmlnaW4ub24oYiwgZnVuY3Rpb24gKGIpIHsgIWEuX3RvdWNoSXNUb3VjaEV2ZW50KGIpICYmIGEuX3RvdWNoSXNFbXVsYXRlZEV2ZW50KGIpIHx8IChhLl9fcG9pbnRlcklzT3Zlck9yaWdpbiA9ICEwLCBhLl9vcGVuU2hvcnRseShiKSkgfSkgfSBpZiAoYS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmUgfHwgYS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRvdWNobGVhdmUgJiYgaC5oYXNUb3VjaENhcGFiaWxpdHkpIHsgdmFyIGIgPSBcIlwiOyBhLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UubW91c2VsZWF2ZSAmJiAoYiArPSBcIm1vdXNlbGVhdmUuXCIgKyBhLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlck9wZW4gXCIpLCBhLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudG91Y2hsZWF2ZSAmJiBoLmhhc1RvdWNoQ2FwYWJpbGl0eSAmJiAoYiArPSBcInRvdWNoZW5kLlwiICsgYS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuIHRvdWNoY2FuY2VsLlwiICsgYS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuXCIpLCBhLl8kb3JpZ2luLm9uKGIsIGZ1bmN0aW9uIChiKSB7IGEuX3RvdWNoSXNNZWFuaW5nZnVsRXZlbnQoYikgJiYgKGEuX19wb2ludGVySXNPdmVyT3JpZ2luID0gITEpIH0pIH0gcmV0dXJuIGEgfSwgX19wcmVwYXJlVG9vbHRpcDogZnVuY3Rpb24gKCkgeyB2YXIgYiA9IHRoaXMsIGMgPSBiLl9fb3B0aW9ucy5pbnRlcmFjdGl2ZSA/IFwiYXV0b1wiIDogXCJcIjsgcmV0dXJuIGIuXyR0b29sdGlwLmF0dHIoXCJpZFwiLCBiLl9fbmFtZXNwYWNlKS5jc3MoeyBcInBvaW50ZXItZXZlbnRzXCI6IGMsIHpJbmRleDogYi5fX29wdGlvbnMuekluZGV4IH0pLCBhLmVhY2goYi5fX3ByZXZpb3VzVGhlbWVzLCBmdW5jdGlvbiAoYSwgYykgeyBiLl8kdG9vbHRpcC5yZW1vdmVDbGFzcyhjKSB9KSwgYS5lYWNoKGIuX19vcHRpb25zLnRoZW1lLCBmdW5jdGlvbiAoYSwgYykgeyBiLl8kdG9vbHRpcC5hZGRDbGFzcyhjKSB9KSwgYi5fX3ByZXZpb3VzVGhlbWVzID0gYS5tZXJnZShbXSwgYi5fX29wdGlvbnMudGhlbWUpLCBiIH0sIF9fc2Nyb2xsSGFuZGxlcjogZnVuY3Rpb24gKGIpIHsgdmFyIGMgPSB0aGlzOyBpZiAoYy5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnNjcm9sbCkgYy5fY2xvc2UoYik7IGVsc2UgaWYgKGQoYy5fJG9yaWdpbikgJiYgZChjLl8kdG9vbHRpcCkpIHsgdmFyIGUgPSBudWxsOyBpZiAoYi50YXJnZXQgPT09IGgud2luZG93LmRvY3VtZW50KSBjLl9fR2VvbWV0cnkub3JpZ2luLmZpeGVkTGluZWFnZSB8fCBjLl9fb3B0aW9ucy5yZXBvc2l0aW9uT25TY3JvbGwgJiYgYy5yZXBvc2l0aW9uKGIpOyBlbHNlIHsgZSA9IGMuX19nZW9tZXRyeSgpOyB2YXIgZiA9ICExOyBpZiAoXCJmaXhlZFwiICE9IGMuXyRvcmlnaW4uY3NzKFwicG9zaXRpb25cIikgJiYgYy5fXyRvcmlnaW5QYXJlbnRzLmVhY2goZnVuY3Rpb24gKGIsIGMpIHsgdmFyIGQgPSBhKGMpLCBnID0gZC5jc3MoXCJvdmVyZmxvdy14XCIpLCBoID0gZC5jc3MoXCJvdmVyZmxvdy15XCIpOyBpZiAoXCJ2aXNpYmxlXCIgIT0gZyB8fCBcInZpc2libGVcIiAhPSBoKSB7IHZhciBpID0gYy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgaWYgKFwidmlzaWJsZVwiICE9IGcgJiYgKGUub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0IDwgaS5sZWZ0IHx8IGUub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCA+IGkucmlnaHQpKSByZXR1cm4gZiA9ICEwLCAhMTsgaWYgKFwidmlzaWJsZVwiICE9IGggJiYgKGUub3JpZ2luLndpbmRvd09mZnNldC50b3AgPCBpLnRvcCB8fCBlLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tID4gaS5ib3R0b20pKSByZXR1cm4gZiA9ICEwLCAhMSB9IHJldHVybiBcImZpeGVkXCIgPT0gZC5jc3MoXCJwb3NpdGlvblwiKSA/ICExIDogdm9pZCAwIH0pLCBmKSBjLl8kdG9vbHRpcC5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpOyBlbHNlIGlmIChjLl8kdG9vbHRpcC5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiKSwgYy5fX29wdGlvbnMucmVwb3NpdGlvbk9uU2Nyb2xsKSBjLnJlcG9zaXRpb24oYik7IGVsc2UgeyB2YXIgZyA9IGUub3JpZ2luLm9mZnNldC5sZWZ0IC0gYy5fX0dlb21ldHJ5Lm9yaWdpbi5vZmZzZXQubGVmdCwgaSA9IGUub3JpZ2luLm9mZnNldC50b3AgLSBjLl9fR2VvbWV0cnkub3JpZ2luLm9mZnNldC50b3A7IGMuXyR0b29sdGlwLmNzcyh7IGxlZnQ6IGMuX19sYXN0UG9zaXRpb24uY29vcmQubGVmdCArIGcsIHRvcDogYy5fX2xhc3RQb3NpdGlvbi5jb29yZC50b3AgKyBpIH0pIH0gfSBjLl90cmlnZ2VyKHsgdHlwZTogXCJzY3JvbGxcIiwgZXZlbnQ6IGIsIGdlbzogZSB9KSB9IHJldHVybiBjIH0sIF9fc3RhdGVTZXQ6IGZ1bmN0aW9uIChhKSB7IHJldHVybiB0aGlzLl9fc3RhdGUgPSBhLCB0aGlzLl90cmlnZ2VyKHsgdHlwZTogXCJzdGF0ZVwiLCBzdGF0ZTogYSB9KSwgdGhpcyB9LCBfX3RpbWVvdXRzQ2xlYXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNsZWFyVGltZW91dCh0aGlzLl9fdGltZW91dHMub3BlbiksIHRoaXMuX190aW1lb3V0cy5vcGVuID0gbnVsbCwgYS5lYWNoKHRoaXMuX190aW1lb3V0cy5jbG9zZSwgZnVuY3Rpb24gKGEsIGIpIHsgY2xlYXJUaW1lb3V0KGIpIH0pLCB0aGlzLl9fdGltZW91dHMuY2xvc2UgPSBbXSwgdGhpcyB9LCBfX3RyYWNrZXJTdGFydDogZnVuY3Rpb24gKCkgeyB2YXIgYSA9IHRoaXMsIGIgPSBhLl8kdG9vbHRpcC5maW5kKFwiLnRvb2x0aXBzdGVyLWNvbnRlbnRcIik7IHJldHVybiBhLl9fb3B0aW9ucy50cmFja1Rvb2x0aXAgJiYgKGEuX19jb250ZW50QmNyID0gYlswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksIGEuX190cmFja2VyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBpZiAoZChhLl8kb3JpZ2luKSAmJiBkKGEuXyR0b29sdGlwKSkgeyBpZiAoYS5fX29wdGlvbnMudHJhY2tPcmlnaW4pIHsgdmFyIGUgPSBhLl9fZ2VvbWV0cnkoKSwgZiA9ICExOyBjKGUub3JpZ2luLnNpemUsIGEuX19HZW9tZXRyeS5vcmlnaW4uc2l6ZSkgJiYgKGEuX19HZW9tZXRyeS5vcmlnaW4uZml4ZWRMaW5lYWdlID8gYyhlLm9yaWdpbi53aW5kb3dPZmZzZXQsIGEuX19HZW9tZXRyeS5vcmlnaW4ud2luZG93T2Zmc2V0KSAmJiAoZiA9ICEwKSA6IGMoZS5vcmlnaW4ub2Zmc2V0LCBhLl9fR2VvbWV0cnkub3JpZ2luLm9mZnNldCkgJiYgKGYgPSAhMCkpLCBmIHx8IChhLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UubW91c2VsZWF2ZSA/IGEuX2Nsb3NlKCkgOiBhLnJlcG9zaXRpb24oKSkgfSBpZiAoYS5fX29wdGlvbnMudHJhY2tUb29sdGlwKSB7IHZhciBnID0gYlswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgZy5oZWlnaHQgPT09IGEuX19jb250ZW50QmNyLmhlaWdodCAmJiBnLndpZHRoID09PSBhLl9fY29udGVudEJjci53aWR0aCB8fCAoYS5yZXBvc2l0aW9uKCksIGEuX19jb250ZW50QmNyID0gZykgfSB9IGVsc2UgYS5fY2xvc2UoKSB9LCBhLl9fb3B0aW9ucy50cmFja2VySW50ZXJ2YWwpLCBhIH0sIF9jbG9zZTogZnVuY3Rpb24gKGIsIGMsIGQpIHsgdmFyIGUgPSB0aGlzLCBmID0gITA7IGlmIChlLl90cmlnZ2VyKHsgdHlwZTogXCJjbG9zZVwiLCBldmVudDogYiwgc3RvcDogZnVuY3Rpb24gKCkgeyBmID0gITEgfSB9KSwgZiB8fCBkKSB7IGMgJiYgZS5fX2NhbGxiYWNrcy5jbG9zZS5wdXNoKGMpLCBlLl9fY2FsbGJhY2tzLm9wZW4gPSBbXSwgZS5fX3RpbWVvdXRzQ2xlYXIoKTsgdmFyIGcgPSBmdW5jdGlvbiAoKSB7IGEuZWFjaChlLl9fY2FsbGJhY2tzLmNsb3NlLCBmdW5jdGlvbiAoYSwgYykgeyBjLmNhbGwoZSwgZSwgeyBldmVudDogYiwgb3JpZ2luOiBlLl8kb3JpZ2luWzBdIH0pIH0pLCBlLl9fY2FsbGJhY2tzLmNsb3NlID0gW10gfTsgaWYgKFwiY2xvc2VkXCIgIT0gZS5fX3N0YXRlKSB7IHZhciBpID0gITAsIGogPSBuZXcgRGF0ZSwgayA9IGouZ2V0VGltZSgpLCBsID0gayArIGUuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdOyBpZiAoXCJkaXNhcHBlYXJpbmdcIiA9PSBlLl9fc3RhdGUgJiYgbCA+IGUuX19jbG9zaW5nVGltZSAmJiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSA+IDAgJiYgKGkgPSAhMSksIGkpIHsgZS5fX2Nsb3NpbmdUaW1lID0gbCwgXCJkaXNhcHBlYXJpbmdcIiAhPSBlLl9fc3RhdGUgJiYgZS5fX3N0YXRlU2V0KFwiZGlzYXBwZWFyaW5nXCIpOyB2YXIgbSA9IGZ1bmN0aW9uICgpIHsgY2xlYXJJbnRlcnZhbChlLl9fdHJhY2tlciksIGUuX3RyaWdnZXIoeyB0eXBlOiBcImNsb3NpbmdcIiwgZXZlbnQ6IGIgfSksIGUuXyR0b29sdGlwLm9mZihcIi5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2VcIikucmVtb3ZlQ2xhc3MoXCJ0b29sdGlwc3Rlci1keWluZ1wiKSwgYShoLndpbmRvdykub2ZmKFwiLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZVwiKSwgZS5fXyRvcmlnaW5QYXJlbnRzLmVhY2goZnVuY3Rpb24gKGIsIGMpIHsgYShjKS5vZmYoXCJzY3JvbGwuXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlXCIpIH0pLCBlLl9fJG9yaWdpblBhcmVudHMgPSBudWxsLCBhKGgud2luZG93LmRvY3VtZW50LmJvZHkpLm9mZihcIi5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2VcIiksIGUuXyRvcmlnaW4ub2ZmKFwiLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZVwiKSwgZS5fb2ZmKFwiZGlzbWlzc2FibGVcIiksIGUuX19zdGF0ZVNldChcImNsb3NlZFwiKSwgZS5fdHJpZ2dlcih7IHR5cGU6IFwiYWZ0ZXJcIiwgZXZlbnQ6IGIgfSksIGUuX19vcHRpb25zLmZ1bmN0aW9uQWZ0ZXIgJiYgZS5fX29wdGlvbnMuZnVuY3Rpb25BZnRlci5jYWxsKGUsIGUsIHsgZXZlbnQ6IGIsIG9yaWdpbjogZS5fJG9yaWdpblswXSB9KSwgZygpIH07IGguaGFzVHJhbnNpdGlvbnMgPyAoZS5fJHRvb2x0aXAuY3NzKHsgXCItbW96LWFuaW1hdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArIFwibXNcIiwgXCItbXMtYW5pbWF0aW9uLWR1cmF0aW9uXCI6IGUuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdICsgXCJtc1wiLCBcIi1vLWFuaW1hdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArIFwibXNcIiwgXCItd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArIFwibXNcIiwgXCJhbmltYXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyBcIm1zXCIsIFwidHJhbnNpdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArIFwibXNcIiB9KSwgZS5fJHRvb2x0aXAuY2xlYXJRdWV1ZSgpLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItc2hvd1wiKS5hZGRDbGFzcyhcInRvb2x0aXBzdGVyLWR5aW5nXCIpLCBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSA+IDAgJiYgZS5fJHRvb2x0aXAuZGVsYXkoZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0pLCBlLl8kdG9vbHRpcC5xdWV1ZShtKSkgOiBlLl8kdG9vbHRpcC5zdG9wKCkuZmFkZU91dChlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSwgbSkgfSB9IGVsc2UgZygpIH0gcmV0dXJuIGUgfSwgX29mZjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vZmYuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIF9vbjogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vbi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSksIHRoaXMgfSwgX29uZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vbmUuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpLCB0aGlzIH0sIF9vcGVuOiBmdW5jdGlvbiAoYiwgYykgeyB2YXIgZSA9IHRoaXM7IGlmICghZS5fX2Rlc3Ryb3lpbmcgJiYgZChlLl8kb3JpZ2luKSAmJiBlLl9fZW5hYmxlZCkgeyB2YXIgZiA9ICEwOyBpZiAoXCJjbG9zZWRcIiA9PSBlLl9fc3RhdGUgJiYgKGUuX3RyaWdnZXIoeyB0eXBlOiBcImJlZm9yZVwiLCBldmVudDogYiwgc3RvcDogZnVuY3Rpb24gKCkgeyBmID0gITEgfSB9KSwgZiAmJiBlLl9fb3B0aW9ucy5mdW5jdGlvbkJlZm9yZSAmJiAoZiA9IGUuX19vcHRpb25zLmZ1bmN0aW9uQmVmb3JlLmNhbGwoZSwgZSwgeyBldmVudDogYiwgb3JpZ2luOiBlLl8kb3JpZ2luWzBdIH0pKSksIGYgIT09ICExICYmIG51bGwgIT09IGUuX19Db250ZW50KSB7IGMgJiYgZS5fX2NhbGxiYWNrcy5vcGVuLnB1c2goYyksIGUuX19jYWxsYmFja3MuY2xvc2UgPSBbXSwgZS5fX3RpbWVvdXRzQ2xlYXIoKTsgdmFyIGcsIGkgPSBmdW5jdGlvbiAoKSB7IFwic3RhYmxlXCIgIT0gZS5fX3N0YXRlICYmIGUuX19zdGF0ZVNldChcInN0YWJsZVwiKSwgYS5lYWNoKGUuX19jYWxsYmFja3Mub3BlbiwgZnVuY3Rpb24gKGEsIGIpIHsgYi5jYWxsKGUsIGUsIHsgb3JpZ2luOiBlLl8kb3JpZ2luWzBdLCB0b29sdGlwOiBlLl8kdG9vbHRpcFswXSB9KSB9KSwgZS5fX2NhbGxiYWNrcy5vcGVuID0gW10gfTsgaWYgKFwiY2xvc2VkXCIgIT09IGUuX19zdGF0ZSkgZyA9IDAsIFwiZGlzYXBwZWFyaW5nXCIgPT09IGUuX19zdGF0ZSA/IChlLl9fc3RhdGVTZXQoXCJhcHBlYXJpbmdcIiksIGguaGFzVHJhbnNpdGlvbnMgPyAoZS5fJHRvb2x0aXAuY2xlYXJRdWV1ZSgpLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItZHlpbmdcIikuYWRkQ2xhc3MoXCJ0b29sdGlwc3Rlci1zaG93XCIpLCBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSA+IDAgJiYgZS5fJHRvb2x0aXAuZGVsYXkoZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0pLCBlLl8kdG9vbHRpcC5xdWV1ZShpKSkgOiBlLl8kdG9vbHRpcC5zdG9wKCkuZmFkZUluKGkpKSA6IFwic3RhYmxlXCIgPT0gZS5fX3N0YXRlICYmIGkoKTsgZWxzZSB7IGlmIChlLl9fc3RhdGVTZXQoXCJhcHBlYXJpbmdcIiksIGcgPSBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSwgZS5fX2NvbnRlbnRJbnNlcnQoKSwgZS5yZXBvc2l0aW9uKGIsICEwKSwgaC5oYXNUcmFuc2l0aW9ucyA/IChlLl8kdG9vbHRpcC5hZGRDbGFzcyhcInRvb2x0aXBzdGVyLVwiICsgZS5fX29wdGlvbnMuYW5pbWF0aW9uKS5hZGRDbGFzcyhcInRvb2x0aXBzdGVyLWluaXRpYWxcIikuY3NzKHsgXCItbW96LWFuaW1hdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArIFwibXNcIiwgXCItbXMtYW5pbWF0aW9uLWR1cmF0aW9uXCI6IGUuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdICsgXCJtc1wiLCBcIi1vLWFuaW1hdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArIFwibXNcIiwgXCItd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArIFwibXNcIiwgXCJhbmltYXRpb24tZHVyYXRpb25cIjogZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyBcIm1zXCIsIFwidHJhbnNpdGlvbi1kdXJhdGlvblwiOiBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArIFwibXNcIiB9KSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IFwiY2xvc2VkXCIgIT0gZS5fX3N0YXRlICYmIChlLl8kdG9vbHRpcC5hZGRDbGFzcyhcInRvb2x0aXBzdGVyLXNob3dcIikucmVtb3ZlQ2xhc3MoXCJ0b29sdGlwc3Rlci1pbml0aWFsXCIpLCBlLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSA+IDAgJiYgZS5fJHRvb2x0aXAuZGVsYXkoZS5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0pLCBlLl8kdG9vbHRpcC5xdWV1ZShpKSkgfSwgMCkpIDogZS5fJHRvb2x0aXAuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIikuZmFkZUluKGUuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdLCBpKSwgZS5fX3RyYWNrZXJTdGFydCgpLCBhKGgud2luZG93KS5vbihcInJlc2l6ZS5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2VcIiwgZnVuY3Rpb24gKGIpIHsgdmFyIGMgPSBhKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpOyAoYy5pcyhcImlucHV0XCIpIHx8IGMuaXMoXCJ0ZXh0YXJlYVwiKSkgJiYgYS5jb250YWlucyhlLl8kdG9vbHRpcFswXSwgY1swXSkgfHwgZS5yZXBvc2l0aW9uKGIpIH0pLm9uKFwic2Nyb2xsLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZVwiLCBmdW5jdGlvbiAoYSkgeyBlLl9fc2Nyb2xsSGFuZGxlcihhKSB9KSwgZS5fXyRvcmlnaW5QYXJlbnRzID0gZS5fJG9yaWdpbi5wYXJlbnRzKCksIGUuX18kb3JpZ2luUGFyZW50cy5lYWNoKGZ1bmN0aW9uIChiLCBjKSB7IGEoYykub24oXCJzY3JvbGwuXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlXCIsIGZ1bmN0aW9uIChhKSB7IGUuX19zY3JvbGxIYW5kbGVyKGEpIH0pIH0pLCBlLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UubW91c2VsZWF2ZSB8fCBlLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudG91Y2hsZWF2ZSAmJiBoLmhhc1RvdWNoQ2FwYWJpbGl0eSkgeyBlLl9vbihcImRpc21pc3NhYmxlXCIsIGZ1bmN0aW9uIChhKSB7IGEuZGlzbWlzc2FibGUgPyBhLmRlbGF5ID8gKG0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgZS5fY2xvc2UoYS5ldmVudCkgfSwgYS5kZWxheSksIGUuX190aW1lb3V0cy5jbG9zZS5wdXNoKG0pKSA6IGUuX2Nsb3NlKGEpIDogY2xlYXJUaW1lb3V0KG0pIH0pOyB2YXIgaiA9IGUuXyRvcmlnaW4sIGsgPSBcIlwiLCBsID0gXCJcIiwgbSA9IG51bGw7IGUuX19vcHRpb25zLmludGVyYWN0aXZlICYmIChqID0gai5hZGQoZS5fJHRvb2x0aXApKSwgZS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmUgJiYgKGsgKz0gXCJtb3VzZWVudGVyLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZSBcIiwgbCArPSBcIm1vdXNlbGVhdmUuXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlIFwiKSwgZS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRvdWNobGVhdmUgJiYgaC5oYXNUb3VjaENhcGFiaWxpdHkgJiYgKGsgKz0gXCJ0b3VjaHN0YXJ0LlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZVwiLCBsICs9IFwidG91Y2hlbmQuXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlIHRvdWNoY2FuY2VsLlwiICsgZS5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJDbG9zZVwiKSwgai5vbihsLCBmdW5jdGlvbiAoYSkgeyBpZiAoZS5fdG91Y2hJc1RvdWNoRXZlbnQoYSkgfHwgIWUuX3RvdWNoSXNFbXVsYXRlZEV2ZW50KGEpKSB7IHZhciBiID0gXCJtb3VzZWxlYXZlXCIgPT0gYS50eXBlID8gZS5fX29wdGlvbnMuZGVsYXkgOiBlLl9fb3B0aW9ucy5kZWxheVRvdWNoOyBlLl90cmlnZ2VyKHsgZGVsYXk6IGJbMV0sIGRpc21pc3NhYmxlOiAhMCwgZXZlbnQ6IGEsIHR5cGU6IFwiZGlzbWlzc2FibGVcIiB9KSB9IH0pLm9uKGssIGZ1bmN0aW9uIChhKSB7ICFlLl90b3VjaElzVG91Y2hFdmVudChhKSAmJiBlLl90b3VjaElzRW11bGF0ZWRFdmVudChhKSB8fCBlLl90cmlnZ2VyKHsgZGlzbWlzc2FibGU6ICExLCBldmVudDogYSwgdHlwZTogXCJkaXNtaXNzYWJsZVwiIH0pIH0pIH0gZS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm9yaWdpbkNsaWNrICYmIGUuXyRvcmlnaW4ub24oXCJjbGljay5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2VcIiwgZnVuY3Rpb24gKGEpIHsgZS5fdG91Y2hJc1RvdWNoRXZlbnQoYSkgfHwgZS5fdG91Y2hJc0VtdWxhdGVkRXZlbnQoYSkgfHwgZS5fY2xvc2UoYSkgfSksIChlLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UuY2xpY2sgfHwgZS5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRhcCAmJiBoLmhhc1RvdWNoQ2FwYWJpbGl0eSkgJiYgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGlmIChcImNsb3NlZFwiICE9IGUuX19zdGF0ZSkgeyB2YXIgYiA9IFwiXCIsIGMgPSBhKGgud2luZG93LmRvY3VtZW50LmJvZHkpOyBlLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UuY2xpY2sgJiYgKGIgKz0gXCJjbGljay5cIiArIGUuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyQ2xvc2UgXCIpLCBlLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudGFwICYmIGguaGFzVG91Y2hDYXBhYmlsaXR5ICYmIChiICs9IFwidG91Y2hlbmQuXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlXCIpLCBjLm9uKGIsIGZ1bmN0aW9uIChiKSB7IGUuX3RvdWNoSXNNZWFuaW5nZnVsRXZlbnQoYikgJiYgKGUuX3RvdWNoUmVjb3JkRXZlbnQoYiksIGUuX19vcHRpb25zLmludGVyYWN0aXZlICYmIGEuY29udGFpbnMoZS5fJHRvb2x0aXBbMF0sIGIudGFyZ2V0KSB8fCBlLl9jbG9zZShiKSkgfSksIGUuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50YXAgJiYgaC5oYXNUb3VjaENhcGFiaWxpdHkgJiYgYy5vbihcInRvdWNoc3RhcnQuXCIgKyBlLl9fbmFtZXNwYWNlICsgXCItdHJpZ2dlckNsb3NlXCIsIGZ1bmN0aW9uIChhKSB7IGUuX3RvdWNoUmVjb3JkRXZlbnQoYSkgfSkgfSB9LCAwKSwgZS5fdHJpZ2dlcihcInJlYWR5XCIpLCBlLl9fb3B0aW9ucy5mdW5jdGlvblJlYWR5ICYmIGUuX19vcHRpb25zLmZ1bmN0aW9uUmVhZHkuY2FsbChlLCBlLCB7IG9yaWdpbjogZS5fJG9yaWdpblswXSwgdG9vbHRpcDogZS5fJHRvb2x0aXBbMF0gfSkgfSBpZiAoZS5fX29wdGlvbnMudGltZXIgPiAwKSB7IHZhciBtID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGUuX2Nsb3NlKCkgfSwgZS5fX29wdGlvbnMudGltZXIgKyBnKTsgZS5fX3RpbWVvdXRzLmNsb3NlLnB1c2gobSkgfSB9IH0gcmV0dXJuIGUgfSwgX29wZW5TaG9ydGx5OiBmdW5jdGlvbiAoYSkgeyB2YXIgYiA9IHRoaXMsIGMgPSAhMDsgaWYgKFwic3RhYmxlXCIgIT0gYi5fX3N0YXRlICYmIFwiYXBwZWFyaW5nXCIgIT0gYi5fX3N0YXRlICYmICFiLl9fdGltZW91dHMub3BlbiAmJiAoYi5fdHJpZ2dlcih7IHR5cGU6IFwic3RhcnRcIiwgZXZlbnQ6IGEsIHN0b3A6IGZ1bmN0aW9uICgpIHsgYyA9ICExIH0gfSksIGMpKSB7IHZhciBkID0gMCA9PSBhLnR5cGUuaW5kZXhPZihcInRvdWNoXCIpID8gYi5fX29wdGlvbnMuZGVsYXlUb3VjaCA6IGIuX19vcHRpb25zLmRlbGF5OyBkWzBdID8gYi5fX3RpbWVvdXRzLm9wZW4gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgYi5fX3RpbWVvdXRzLm9wZW4gPSBudWxsLCBiLl9fcG9pbnRlcklzT3Zlck9yaWdpbiAmJiBiLl90b3VjaElzTWVhbmluZ2Z1bEV2ZW50KGEpID8gKGIuX3RyaWdnZXIoXCJzdGFydGVuZFwiKSwgYi5fb3BlbihhKSkgOiBiLl90cmlnZ2VyKFwic3RhcnRjYW5jZWxcIikgfSwgZFswXSkgOiAoYi5fdHJpZ2dlcihcInN0YXJ0ZW5kXCIpLCBiLl9vcGVuKGEpKSB9IHJldHVybiBiIH0sIF9vcHRpb25zRXh0cmFjdDogZnVuY3Rpb24gKGIsIGMpIHsgdmFyIGQgPSB0aGlzLCBlID0gYS5leHRlbmQoITAsIHt9LCBjKSwgZiA9IGQuX19vcHRpb25zW2JdOyByZXR1cm4gZiB8fCAoZiA9IHt9LCBhLmVhY2goYywgZnVuY3Rpb24gKGEsIGIpIHsgdmFyIGMgPSBkLl9fb3B0aW9uc1thXTsgdm9pZCAwICE9PSBjICYmIChmW2FdID0gYykgfSkpLCBhLmVhY2goZSwgZnVuY3Rpb24gKGIsIGMpIHsgdm9pZCAwICE9PSBmW2JdICYmIChcIm9iamVjdFwiICE9IHR5cGVvZiBjIHx8IGMgaW5zdGFuY2VvZiBBcnJheSB8fCBudWxsID09IGMgfHwgXCJvYmplY3RcIiAhPSB0eXBlb2YgZltiXSB8fCBmW2JdIGluc3RhbmNlb2YgQXJyYXkgfHwgbnVsbCA9PSBmW2JdID8gZVtiXSA9IGZbYl0gOiBhLmV4dGVuZChlW2JdLCBmW2JdKSkgfSksIGUgfSwgX3BsdWc6IGZ1bmN0aW9uIChiKSB7IHZhciBjID0gYS50b29sdGlwc3Rlci5fcGx1Z2luKGIpOyBpZiAoIWMpIHRocm93IG5ldyBFcnJvcignVGhlIFwiJyArIGIgKyAnXCIgcGx1Z2luIGlzIG5vdCBkZWZpbmVkJyk7IHJldHVybiBjLmluc3RhbmNlICYmIGEudG9vbHRpcHN0ZXIuX19icmlkZ2UoYy5pbnN0YW5jZSwgdGhpcywgYy5uYW1lKSwgdGhpcyB9LCBfdG91Y2hJc0VtdWxhdGVkRXZlbnQ6IGZ1bmN0aW9uIChhKSB7IGZvciAodmFyIGIgPSAhMSwgYyA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpLCBkID0gdGhpcy5fX3RvdWNoRXZlbnRzLmxlbmd0aCAtIDE7IGQgPj0gMDsgZC0tKSB7IHZhciBlID0gdGhpcy5fX3RvdWNoRXZlbnRzW2RdOyBpZiAoIShjIC0gZS50aW1lIDwgNTAwKSkgYnJlYWs7IGUudGFyZ2V0ID09PSBhLnRhcmdldCAmJiAoYiA9ICEwKSB9IHJldHVybiBiIH0sIF90b3VjaElzTWVhbmluZ2Z1bEV2ZW50OiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gdGhpcy5fdG91Y2hJc1RvdWNoRXZlbnQoYSkgJiYgIXRoaXMuX3RvdWNoU3dpcGVkKGEudGFyZ2V0KSB8fCAhdGhpcy5fdG91Y2hJc1RvdWNoRXZlbnQoYSkgJiYgIXRoaXMuX3RvdWNoSXNFbXVsYXRlZEV2ZW50KGEpIH0sIF90b3VjaElzVG91Y2hFdmVudDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIDAgPT0gYS50eXBlLmluZGV4T2YoXCJ0b3VjaFwiKSB9LCBfdG91Y2hSZWNvcmRFdmVudDogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHRoaXMuX3RvdWNoSXNUb3VjaEV2ZW50KGEpICYmIChhLnRpbWUgPSAobmV3IERhdGUpLmdldFRpbWUoKSwgdGhpcy5fX3RvdWNoRXZlbnRzLnB1c2goYSkpLCB0aGlzIH0sIF90b3VjaFN3aXBlZDogZnVuY3Rpb24gKGEpIHsgZm9yICh2YXIgYiA9ICExLCBjID0gdGhpcy5fX3RvdWNoRXZlbnRzLmxlbmd0aCAtIDE7IGMgPj0gMDsgYy0tKSB7IHZhciBkID0gdGhpcy5fX3RvdWNoRXZlbnRzW2NdOyBpZiAoXCJ0b3VjaG1vdmVcIiA9PSBkLnR5cGUpIHsgYiA9ICEwOyBicmVhayB9IGlmIChcInRvdWNoc3RhcnRcIiA9PSBkLnR5cGUgJiYgYSA9PT0gZC50YXJnZXQpIGJyZWFrIH0gcmV0dXJuIGIgfSwgX3RyaWdnZXI6IGZ1bmN0aW9uICgpIHsgdmFyIGIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTsgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGJbMF0gJiYgKGJbMF0gPSB7IHR5cGU6IGJbMF0gfSksIGJbMF0uaW5zdGFuY2UgPSB0aGlzLCBiWzBdLm9yaWdpbiA9IHRoaXMuXyRvcmlnaW4gPyB0aGlzLl8kb3JpZ2luWzBdIDogbnVsbCwgYlswXS50b29sdGlwID0gdGhpcy5fJHRvb2x0aXAgPyB0aGlzLl8kdG9vbHRpcFswXSA6IG51bGwsIHRoaXMuX18kZW1pdHRlclByaXZhdGUudHJpZ2dlci5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBiKSwgYS50b29sdGlwc3Rlci5fdHJpZ2dlci5hcHBseShhLnRvb2x0aXBzdGVyLCBiKSwgdGhpcy5fXyRlbWl0dGVyUHVibGljLnRyaWdnZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBiKSwgdGhpcyB9LCBfdW5wbHVnOiBmdW5jdGlvbiAoYikgeyB2YXIgYyA9IHRoaXM7IGlmIChjW2JdKSB7IHZhciBkID0gYS50b29sdGlwc3Rlci5fcGx1Z2luKGIpOyBkLmluc3RhbmNlICYmIGEuZWFjaChkLmluc3RhbmNlLCBmdW5jdGlvbiAoYSwgZCkgeyBjW2FdICYmIGNbYV0uYnJpZGdlZCA9PT0gY1tiXSAmJiBkZWxldGUgY1thXSB9KSwgY1tiXS5fX2Rlc3Ryb3kgJiYgY1tiXS5fX2Rlc3Ryb3koKSwgZGVsZXRlIGNbYl0gfSByZXR1cm4gYyB9LCBjbG9zZTogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHRoaXMuX19kZXN0cm95ZWQgPyB0aGlzLl9fZGVzdHJveUVycm9yKCkgOiB0aGlzLl9jbG9zZShudWxsLCBhKSwgdGhpcyB9LCBjb250ZW50OiBmdW5jdGlvbiAoYSkgeyB2YXIgYiA9IHRoaXM7IGlmICh2b2lkIDAgPT09IGEpIHJldHVybiBiLl9fQ29udGVudDsgaWYgKGIuX19kZXN0cm95ZWQpIGIuX19kZXN0cm95RXJyb3IoKTsgZWxzZSBpZiAoYi5fX2NvbnRlbnRTZXQoYSksIG51bGwgIT09IGIuX19Db250ZW50KSB7IGlmIChcImNsb3NlZFwiICE9PSBiLl9fc3RhdGUgJiYgKGIuX19jb250ZW50SW5zZXJ0KCksIGIucmVwb3NpdGlvbigpLCBiLl9fb3B0aW9ucy51cGRhdGVBbmltYXRpb24pKSBpZiAoaC5oYXNUcmFuc2l0aW9ucykgeyB2YXIgYyA9IGIuX19vcHRpb25zLnVwZGF0ZUFuaW1hdGlvbjsgYi5fJHRvb2x0aXAuYWRkQ2xhc3MoXCJ0b29sdGlwc3Rlci11cGRhdGUtXCIgKyBjKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IFwiY2xvc2VkXCIgIT0gYi5fX3N0YXRlICYmIGIuXyR0b29sdGlwLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItdXBkYXRlLVwiICsgYykgfSwgMWUzKSB9IGVsc2UgYi5fJHRvb2x0aXAuZmFkZVRvKDIwMCwgLjUsIGZ1bmN0aW9uICgpIHsgXCJjbG9zZWRcIiAhPSBiLl9fc3RhdGUgJiYgYi5fJHRvb2x0aXAuZmFkZVRvKDIwMCwgMSkgfSkgfSBlbHNlIGIuX2Nsb3NlKCk7IHJldHVybiBiIH0sIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHsgdmFyIGIgPSB0aGlzOyBpZiAoYi5fX2Rlc3Ryb3llZCkgYi5fX2Rlc3Ryb3lFcnJvcigpOyBlbHNlIHsgXCJjbG9zZWRcIiAhPSBiLl9fc3RhdGUgPyBiLm9wdGlvbihcImFuaW1hdGlvbkR1cmF0aW9uXCIsIDApLl9jbG9zZShudWxsLCBudWxsLCAhMCkgOiBiLl9fdGltZW91dHNDbGVhcigpLCBiLl90cmlnZ2VyKFwiZGVzdHJveVwiKSwgYi5fX2Rlc3Ryb3llZCA9ICEwLCBiLl8kb3JpZ2luLnJlbW92ZURhdGEoYi5fX25hbWVzcGFjZSkub2ZmKFwiLlwiICsgYi5fX25hbWVzcGFjZSArIFwiLXRyaWdnZXJPcGVuXCIpLCBhKGgud2luZG93LmRvY3VtZW50LmJvZHkpLm9mZihcIi5cIiArIGIuX19uYW1lc3BhY2UgKyBcIi10cmlnZ2VyT3BlblwiKTsgdmFyIGMgPSBiLl8kb3JpZ2luLmRhdGEoXCJ0b29sdGlwc3Rlci1uc1wiKTsgaWYgKGMpIGlmICgxID09PSBjLmxlbmd0aCkgeyB2YXIgZCA9IG51bGw7IFwicHJldmlvdXNcIiA9PSBiLl9fb3B0aW9ucy5yZXN0b3JhdGlvbiA/IGQgPSBiLl8kb3JpZ2luLmRhdGEoXCJ0b29sdGlwc3Rlci1pbml0aWFsVGl0bGVcIikgOiBcImN1cnJlbnRcIiA9PSBiLl9fb3B0aW9ucy5yZXN0b3JhdGlvbiAmJiAoZCA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGIuX19Db250ZW50ID8gYi5fX0NvbnRlbnQgOiBhKFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kKGIuX19Db250ZW50KS5odG1sKCkpLCBkICYmIGIuXyRvcmlnaW4uYXR0cihcInRpdGxlXCIsIGQpLCBiLl8kb3JpZ2luLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXJlZFwiKSwgYi5fJG9yaWdpbi5yZW1vdmVEYXRhKFwidG9vbHRpcHN0ZXItbnNcIikucmVtb3ZlRGF0YShcInRvb2x0aXBzdGVyLWluaXRpYWxUaXRsZVwiKSB9IGVsc2UgYyA9IGEuZ3JlcChjLCBmdW5jdGlvbiAoYSwgYykgeyByZXR1cm4gYSAhPT0gYi5fX25hbWVzcGFjZSB9KSwgYi5fJG9yaWdpbi5kYXRhKFwidG9vbHRpcHN0ZXItbnNcIiwgYyk7IGIuX3RyaWdnZXIoXCJkZXN0cm95ZWRcIiksIGIuX29mZigpLCBiLm9mZigpLCBiLl9fQ29udGVudCA9IG51bGwsIGIuX18kZW1pdHRlclByaXZhdGUgPSBudWxsLCBiLl9fJGVtaXR0ZXJQdWJsaWMgPSBudWxsLCBiLl9fb3B0aW9ucy5wYXJlbnQgPSBudWxsLCBiLl8kb3JpZ2luID0gbnVsbCwgYi5fJHRvb2x0aXAgPSBudWxsLCBhLnRvb2x0aXBzdGVyLl9faW5zdGFuY2VzTGF0ZXN0QXJyID0gYS5ncmVwKGEudG9vbHRpcHN0ZXIuX19pbnN0YW5jZXNMYXRlc3RBcnIsIGZ1bmN0aW9uIChhLCBjKSB7IHJldHVybiBiICE9PSBhIH0pLCBjbGVhckludGVydmFsKGIuX19nYXJiYWdlQ29sbGVjdG9yKSB9IHJldHVybiBiIH0sIGRpc2FibGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX19kZXN0cm95ZWQgPyAodGhpcy5fX2Rlc3Ryb3lFcnJvcigpLCB0aGlzKSA6ICh0aGlzLl9jbG9zZSgpLCB0aGlzLl9fZW5hYmxlZCA9ICExLCB0aGlzKSB9LCBlbGVtZW50T3JpZ2luOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fZGVzdHJveWVkID8gdm9pZCB0aGlzLl9fZGVzdHJveUVycm9yKCkgOiB0aGlzLl8kb3JpZ2luWzBdIH0sIGVsZW1lbnRUb29sdGlwOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl8kdG9vbHRpcCA/IHRoaXMuXyR0b29sdGlwWzBdIDogbnVsbCB9LCBlbmFibGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX19lbmFibGVkID0gITAsIHRoaXMgfSwgaGlkZTogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHRoaXMuY2xvc2UoYSkgfSwgaW5zdGFuY2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMgfSwgb2ZmOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fZGVzdHJveWVkIHx8IHRoaXMuX18kZW1pdHRlclB1YmxpYy5vZmYuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSksIHRoaXMgfSwgb246IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX19kZXN0cm95ZWQgPyB0aGlzLl9fZGVzdHJveUVycm9yKCkgOiB0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub24uYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSksIHRoaXMgfSwgb25lOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9fZGVzdHJveWVkID8gdGhpcy5fX2Rlc3Ryb3lFcnJvcigpIDogdGhpcy5fXyRlbWl0dGVyUHVibGljLm9uZS5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSwgdGhpcyB9LCBvcGVuOiBmdW5jdGlvbiAoYSkgeyByZXR1cm4gdGhpcy5fX2Rlc3Ryb3llZCA/IHRoaXMuX19kZXN0cm95RXJyb3IoKSA6IHRoaXMuX29wZW4obnVsbCwgYSksIHRoaXMgfSwgb3B0aW9uOiBmdW5jdGlvbiAoYiwgYykgeyByZXR1cm4gdm9pZCAwID09PSBjID8gdGhpcy5fX29wdGlvbnNbYl0gOiAodGhpcy5fX2Rlc3Ryb3llZCA/IHRoaXMuX19kZXN0cm95RXJyb3IoKSA6ICh0aGlzLl9fb3B0aW9uc1tiXSA9IGMsIHRoaXMuX19vcHRpb25zRm9ybWF0KCksIGEuaW5BcnJheShiLCBbXCJ0cmlnZ2VyXCIsIFwidHJpZ2dlckNsb3NlXCIsIFwidHJpZ2dlck9wZW5cIl0pID49IDAgJiYgdGhpcy5fX3ByZXBhcmVPcmlnaW4oKSwgXCJzZWxmRGVzdHJ1Y3Rpb25cIiA9PT0gYiAmJiB0aGlzLl9fcHJlcGFyZUdDKCkpLCB0aGlzKSB9LCByZXBvc2l0aW9uOiBmdW5jdGlvbiAoYSwgYikgeyB2YXIgYyA9IHRoaXM7IHJldHVybiBjLl9fZGVzdHJveWVkID8gYy5fX2Rlc3Ryb3lFcnJvcigpIDogXCJjbG9zZWRcIiAhPSBjLl9fc3RhdGUgJiYgZChjLl8kb3JpZ2luKSAmJiAoYiB8fCBkKGMuXyR0b29sdGlwKSkgJiYgKGIgfHwgYy5fJHRvb2x0aXAuZGV0YWNoKCksIGMuX19HZW9tZXRyeSA9IGMuX19nZW9tZXRyeSgpLCBjLl90cmlnZ2VyKHsgdHlwZTogXCJyZXBvc2l0aW9uXCIsIGV2ZW50OiBhLCBoZWxwZXI6IHsgZ2VvOiBjLl9fR2VvbWV0cnkgfSB9KSksIGMgfSwgc2hvdzogZnVuY3Rpb24gKGEpIHsgcmV0dXJuIHRoaXMub3BlbihhKSB9LCBzdGF0dXM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHsgZGVzdHJveWVkOiB0aGlzLl9fZGVzdHJveWVkLCBlbmFibGVkOiB0aGlzLl9fZW5hYmxlZCwgb3BlbjogXCJjbG9zZWRcIiAhPT0gdGhpcy5fX3N0YXRlLCBzdGF0ZTogdGhpcy5fX3N0YXRlIH0gfSwgdHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX19kZXN0cm95ZWQgPyB0aGlzLl9fZGVzdHJveUVycm9yKCkgOiB0aGlzLl9fJGVtaXR0ZXJQdWJsaWMudHJpZ2dlckhhbmRsZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSksIHRoaXMgfSB9LCBhLmZuLnRvb2x0aXBzdGVyID0gZnVuY3Rpb24gKCkgeyB2YXIgYiA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpLCBjID0gXCJZb3UgYXJlIHVzaW5nIGEgc2luZ2xlIEhUTUwgZWxlbWVudCBhcyBjb250ZW50IGZvciBzZXZlcmFsIHRvb2x0aXBzLiBZb3UgcHJvYmFibHkgd2FudCB0byBzZXQgdGhlIGNvbnRlbnRDbG9uaW5nIG9wdGlvbiB0byBUUlVFLlwiOyBpZiAoMCA9PT0gdGhpcy5sZW5ndGgpIHJldHVybiB0aGlzOyBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgYlswXSkgeyB2YXIgZCA9IFwiIyokfiZcIjsgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7IHZhciBlID0gYSh0aGlzKS5kYXRhKFwidG9vbHRpcHN0ZXItbnNcIiksIGYgPSBlID8gYSh0aGlzKS5kYXRhKGVbMF0pIDogbnVsbDsgaWYgKCFmKSB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgY2FsbGVkIFRvb2x0aXBzdGVyJ3MgXFxcIlwiICsgYlswXSArICdcIiBtZXRob2Qgb24gYW4gdW5pbml0aWFsaXplZCBlbGVtZW50Jyk7IGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGZbYlswXV0pIHRocm93IG5ldyBFcnJvcignVW5rbm93biBtZXRob2QgXCInICsgYlswXSArICdcIicpOyB0aGlzLmxlbmd0aCA+IDEgJiYgXCJjb250ZW50XCIgPT0gYlswXSAmJiAoYlsxXSBpbnN0YW5jZW9mIGEgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2YgYlsxXSAmJiBudWxsICE9IGJbMV0gJiYgYlsxXS50YWdOYW1lKSAmJiAhZi5fX29wdGlvbnMuY29udGVudENsb25pbmcgJiYgZi5fX29wdGlvbnMuZGVidWcgJiYgY29uc29sZS5sb2coYyk7IHZhciBnID0gZltiWzBdXShiWzFdLCBiWzJdKTsgcmV0dXJuIGcgIT09IGYgfHwgXCJpbnN0YW5jZVwiID09PSBiWzBdID8gKGQgPSBnLCAhMSkgOiB2b2lkIDAgfSksIFwiIyokfiZcIiAhPT0gZCA/IGQgOiB0aGlzIH0gYS50b29sdGlwc3Rlci5fX2luc3RhbmNlc0xhdGVzdEFyciA9IFtdOyB2YXIgZSA9IGJbMF0gJiYgdm9pZCAwICE9PSBiWzBdLm11bHRpcGxlLCBnID0gZSAmJiBiWzBdLm11bHRpcGxlIHx8ICFlICYmIGYubXVsdGlwbGUsIGggPSBiWzBdICYmIHZvaWQgMCAhPT0gYlswXS5jb250ZW50LCBpID0gaCAmJiBiWzBdLmNvbnRlbnQgfHwgIWggJiYgZi5jb250ZW50LCBqID0gYlswXSAmJiB2b2lkIDAgIT09IGJbMF0uY29udGVudENsb25pbmcsIGsgPSBqICYmIGJbMF0uY29udGVudENsb25pbmcgfHwgIWogJiYgZi5jb250ZW50Q2xvbmluZywgbCA9IGJbMF0gJiYgdm9pZCAwICE9PSBiWzBdLmRlYnVnLCBtID0gbCAmJiBiWzBdLmRlYnVnIHx8ICFsICYmIGYuZGVidWc7IHJldHVybiB0aGlzLmxlbmd0aCA+IDEgJiYgKGkgaW5zdGFuY2VvZiBhIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIGkgJiYgbnVsbCAhPSBpICYmIGkudGFnTmFtZSkgJiYgIWsgJiYgbSAmJiBjb25zb2xlLmxvZyhjKSwgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsgdmFyIGMgPSAhMSwgZCA9IGEodGhpcyksIGUgPSBkLmRhdGEoXCJ0b29sdGlwc3Rlci1uc1wiKSwgZiA9IG51bGw7IGUgPyBnID8gYyA9ICEwIDogbSAmJiAoY29uc29sZS5sb2coXCJUb29sdGlwc3Rlcjogb25lIG9yIG1vcmUgdG9vbHRpcHMgYXJlIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIGVsZW1lbnQgYmVsb3cuIElnbm9yaW5nLlwiKSwgY29uc29sZS5sb2codGhpcykpIDogYyA9ICEwLCBjICYmIChmID0gbmV3IGEuVG9vbHRpcHN0ZXIodGhpcywgYlswXSksIGUgfHwgKGUgPSBbXSksIGUucHVzaChmLl9fbmFtZXNwYWNlKSwgZC5kYXRhKFwidG9vbHRpcHN0ZXItbnNcIiwgZSksIGQuZGF0YShmLl9fbmFtZXNwYWNlLCBmKSwgZi5fX29wdGlvbnMuZnVuY3Rpb25Jbml0ICYmIGYuX19vcHRpb25zLmZ1bmN0aW9uSW5pdC5jYWxsKGYsIGYsIHsgb3JpZ2luOiB0aGlzIH0pLCBmLl90cmlnZ2VyKFwiaW5pdFwiKSksIGEudG9vbHRpcHN0ZXIuX19pbnN0YW5jZXNMYXRlc3RBcnIucHVzaChmKSB9KSwgdGhpcyB9LCBiLnByb3RvdHlwZSA9IHsgX19pbml0OiBmdW5jdGlvbiAoYikgeyB0aGlzLl9fJHRvb2x0aXAgPSBiLCB0aGlzLl9fJHRvb2x0aXAuY3NzKHsgbGVmdDogMCwgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsIHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHRvcDogMCB9KS5maW5kKFwiLnRvb2x0aXBzdGVyLWNvbnRlbnRcIikuY3NzKFwib3ZlcmZsb3dcIiwgXCJhdXRvXCIpLCB0aGlzLiRjb250YWluZXIgPSBhKCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItcnVsZXJcIj48L2Rpdj4nKS5hcHBlbmQodGhpcy5fXyR0b29sdGlwKS5hcHBlbmRUbyhoLndpbmRvdy5kb2N1bWVudC5ib2R5KSB9LCBfX2ZvcmNlUmVkcmF3OiBmdW5jdGlvbiAoKSB7IHZhciBhID0gdGhpcy5fXyR0b29sdGlwLnBhcmVudCgpOyB0aGlzLl9fJHRvb2x0aXAuZGV0YWNoKCksIHRoaXMuX18kdG9vbHRpcC5hcHBlbmRUbyhhKSB9LCBjb25zdHJhaW46IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiB0aGlzLmNvbnN0cmFpbnRzID0geyB3aWR0aDogYSwgaGVpZ2h0OiBiIH0sIHRoaXMuX18kdG9vbHRpcC5jc3MoeyBkaXNwbGF5OiBcImJsb2NrXCIsIGhlaWdodDogXCJcIiwgb3ZlcmZsb3c6IFwiYXV0b1wiLCB3aWR0aDogYSB9KSwgdGhpcyB9LCBkZXN0cm95OiBmdW5jdGlvbiAoKSB7IHRoaXMuX18kdG9vbHRpcC5kZXRhY2goKS5maW5kKFwiLnRvb2x0aXBzdGVyLWNvbnRlbnRcIikuY3NzKHsgZGlzcGxheTogXCJcIiwgb3ZlcmZsb3c6IFwiXCIgfSksIHRoaXMuJGNvbnRhaW5lci5yZW1vdmUoKSB9LCBmcmVlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLmNvbnN0cmFpbnRzID0gbnVsbCwgdGhpcy5fXyR0b29sdGlwLmNzcyh7IGRpc3BsYXk6IFwiXCIsIGhlaWdodDogXCJcIiwgb3ZlcmZsb3c6IFwidmlzaWJsZVwiLCB3aWR0aDogXCJcIiB9KSwgdGhpcyB9LCBtZWFzdXJlOiBmdW5jdGlvbiAoKSB7IHRoaXMuX19mb3JjZVJlZHJhdygpOyB2YXIgYSA9IHRoaXMuX18kdG9vbHRpcFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgYiA9IHsgc2l6ZTogeyBoZWlnaHQ6IGEuaGVpZ2h0IHx8IGEuYm90dG9tIC0gYS50b3AsIHdpZHRoOiBhLndpZHRoIHx8IGEucmlnaHQgLSBhLmxlZnQgfSB9OyBpZiAodGhpcy5jb25zdHJhaW50cykgeyB2YXIgYyA9IHRoaXMuX18kdG9vbHRpcC5maW5kKFwiLnRvb2x0aXBzdGVyLWNvbnRlbnRcIiksIGQgPSB0aGlzLl9fJHRvb2x0aXAub3V0ZXJIZWlnaHQoKSwgZSA9IGNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGYgPSB7IGhlaWdodDogZCA8PSB0aGlzLmNvbnN0cmFpbnRzLmhlaWdodCwgd2lkdGg6IGEud2lkdGggPD0gdGhpcy5jb25zdHJhaW50cy53aWR0aCAmJiBlLndpZHRoID49IGNbMF0uc2Nyb2xsV2lkdGggLSAxIH07IGIuZml0cyA9IGYuaGVpZ2h0ICYmIGYud2lkdGggfSByZXR1cm4gaC5JRSAmJiBoLklFIDw9IDExICYmIGIuc2l6ZS53aWR0aCAhPT0gaC53aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoICYmIChiLnNpemUud2lkdGggPSBNYXRoLmNlaWwoYi5zaXplLndpZHRoKSArIDEpLCBiIH0gfTsgdmFyIGogPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7IC0xICE9IGouaW5kZXhPZihcIm1zaWVcIikgPyBoLklFID0gcGFyc2VJbnQoai5zcGxpdChcIm1zaWVcIilbMV0pIDogLTEgIT09IGoudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwidHJpZGVudFwiKSAmJiAtMSAhPT0gai5pbmRleE9mKFwiIHJ2OjExXCIpID8gaC5JRSA9IDExIDogLTEgIT0gai50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJlZGdlL1wiKSAmJiAoaC5JRSA9IHBhcnNlSW50KGoudG9Mb3dlckNhc2UoKS5zcGxpdChcImVkZ2UvXCIpWzFdKSk7IHZhciBrID0gXCJ0b29sdGlwc3Rlci5zaWRlVGlwXCI7IHJldHVybiBhLnRvb2x0aXBzdGVyLl9wbHVnaW4oe1xyXG4gICAgICAgIG5hbWU6IGssIGluc3RhbmNlOiB7XHJcbiAgICAgICAgICAgIF9fZGVmYXVsdHM6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHsgYXJyb3c6ICEwLCBkaXN0YW5jZTogNiwgZnVuY3Rpb25Qb3NpdGlvbjogbnVsbCwgbWF4V2lkdGg6IG51bGwsIG1pbkludGVyc2VjdGlvbjogMTYsIG1pbldpZHRoOiAwLCBwb3NpdGlvbjogbnVsbCwgc2lkZTogXCJ0b3BcIiwgdmlld3BvcnRBd2FyZTogITAgfSB9LCBfX2luaXQ6IGZ1bmN0aW9uIChhKSB7IHZhciBiID0gdGhpczsgYi5fX2luc3RhbmNlID0gYSwgYi5fX25hbWVzcGFjZSA9IFwidG9vbHRpcHN0ZXItc2lkZVRpcC1cIiArIE1hdGgucm91bmQoMWU2ICogTWF0aC5yYW5kb20oKSksIGIuX19wcmV2aW91c1N0YXRlID0gXCJjbG9zZWRcIiwgYi5fX29wdGlvbnMsIGIuX19vcHRpb25zRm9ybWF0KCksIGIuX19pbnN0YW5jZS5fb24oXCJzdGF0ZS5cIiArIGIuX19uYW1lc3BhY2UsIGZ1bmN0aW9uIChhKSB7IFwiY2xvc2VkXCIgPT0gYS5zdGF0ZSA/IGIuX19jbG9zZSgpIDogXCJhcHBlYXJpbmdcIiA9PSBhLnN0YXRlICYmIFwiY2xvc2VkXCIgPT0gYi5fX3ByZXZpb3VzU3RhdGUgJiYgYi5fX2NyZWF0ZSgpLCBiLl9fcHJldmlvdXNTdGF0ZSA9IGEuc3RhdGUgfSksIGIuX19pbnN0YW5jZS5fb24oXCJvcHRpb25zLlwiICsgYi5fX25hbWVzcGFjZSwgZnVuY3Rpb24gKCkgeyBiLl9fb3B0aW9uc0Zvcm1hdCgpIH0pLCBiLl9faW5zdGFuY2UuX29uKFwicmVwb3NpdGlvbi5cIiArIGIuX19uYW1lc3BhY2UsIGZ1bmN0aW9uIChhKSB7IGIuX19yZXBvc2l0aW9uKGEuZXZlbnQsIGEuaGVscGVyKSB9KSB9LCBfX2Nsb3NlOiBmdW5jdGlvbiAoKSB7IHRoaXMuX19pbnN0YW5jZS5jb250ZW50KCkgaW5zdGFuY2VvZiBhICYmIHRoaXMuX19pbnN0YW5jZS5jb250ZW50KCkuZGV0YWNoKCksIHRoaXMuX19pbnN0YW5jZS5fJHRvb2x0aXAucmVtb3ZlKCksIHRoaXMuX19pbnN0YW5jZS5fJHRvb2x0aXAgPSBudWxsIH0sIF9fY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYiA9IGEoJzxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1iYXNlIHRvb2x0aXBzdGVyLXNpZGV0aXBcIj48ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYm94XCI+PGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWNvbnRlbnRcIj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYXJyb3dcIj48ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYXJyb3ctdW5jcm9wcGVkXCI+PGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWFycm93LWJvcmRlclwiPjwvZGl2PjxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1hcnJvdy1iYWNrZ3JvdW5kXCI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7IHRoaXMuX19vcHRpb25zLmFycm93IHx8IGIuZmluZChcIi50b29sdGlwc3Rlci1ib3hcIikuY3NzKFwibWFyZ2luXCIsIDApLmVuZCgpLmZpbmQoXCIudG9vbHRpcHN0ZXItYXJyb3dcIikuaGlkZSgpLCB0aGlzLl9fb3B0aW9ucy5taW5XaWR0aCAmJiBiLmNzcyhcIm1pbi13aWR0aFwiLCB0aGlzLl9fb3B0aW9ucy5taW5XaWR0aCArIFwicHhcIiksIHRoaXMuX19vcHRpb25zLm1heFdpZHRoICYmIGIuY3NzKFwibWF4LXdpZHRoXCIsIHRoaXMuX19vcHRpb25zLm1heFdpZHRoICsgXCJweFwiKSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW5zdGFuY2UuXyR0b29sdGlwID0gYiwgdGhpcy5fX2luc3RhbmNlLl90cmlnZ2VyKFwiY3JlYXRlZFwiKVxyXG4gICAgICAgICAgICB9LCBfX2Rlc3Ryb3k6IGZ1bmN0aW9uICgpIHsgdGhpcy5fX2luc3RhbmNlLl9vZmYoXCIuXCIgKyBzZWxmLl9fbmFtZXNwYWNlKSB9LCBfX29wdGlvbnNGb3JtYXQ6IGZ1bmN0aW9uICgpIHsgdmFyIGIgPSB0aGlzOyBpZiAoYi5fX29wdGlvbnMgPSBiLl9faW5zdGFuY2UuX29wdGlvbnNFeHRyYWN0KGssIGIuX19kZWZhdWx0cygpKSwgYi5fX29wdGlvbnMucG9zaXRpb24gJiYgKGIuX19vcHRpb25zLnNpZGUgPSBiLl9fb3B0aW9ucy5wb3NpdGlvbiksIFwib2JqZWN0XCIgIT0gdHlwZW9mIGIuX19vcHRpb25zLmRpc3RhbmNlICYmIChiLl9fb3B0aW9ucy5kaXN0YW5jZSA9IFtiLl9fb3B0aW9ucy5kaXN0YW5jZV0pLCBiLl9fb3B0aW9ucy5kaXN0YW5jZS5sZW5ndGggPCA0ICYmICh2b2lkIDAgPT09IGIuX19vcHRpb25zLmRpc3RhbmNlWzFdICYmIChiLl9fb3B0aW9ucy5kaXN0YW5jZVsxXSA9IGIuX19vcHRpb25zLmRpc3RhbmNlWzBdKSwgdm9pZCAwID09PSBiLl9fb3B0aW9ucy5kaXN0YW5jZVsyXSAmJiAoYi5fX29wdGlvbnMuZGlzdGFuY2VbMl0gPSBiLl9fb3B0aW9ucy5kaXN0YW5jZVswXSksIHZvaWQgMCA9PT0gYi5fX29wdGlvbnMuZGlzdGFuY2VbM10gJiYgKGIuX19vcHRpb25zLmRpc3RhbmNlWzNdID0gYi5fX29wdGlvbnMuZGlzdGFuY2VbMV0pLCBiLl9fb3B0aW9ucy5kaXN0YW5jZSA9IHsgdG9wOiBiLl9fb3B0aW9ucy5kaXN0YW5jZVswXSwgcmlnaHQ6IGIuX19vcHRpb25zLmRpc3RhbmNlWzFdLCBib3R0b206IGIuX19vcHRpb25zLmRpc3RhbmNlWzJdLCBsZWZ0OiBiLl9fb3B0aW9ucy5kaXN0YW5jZVszXSB9KSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgYi5fX29wdGlvbnMuc2lkZSkgeyB2YXIgYyA9IHsgdG9wOiBcImJvdHRvbVwiLCByaWdodDogXCJsZWZ0XCIsIGJvdHRvbTogXCJ0b3BcIiwgbGVmdDogXCJyaWdodFwiIH07IGIuX19vcHRpb25zLnNpZGUgPSBbYi5fX29wdGlvbnMuc2lkZSwgY1tiLl9fb3B0aW9ucy5zaWRlXV0sIFwibGVmdFwiID09IGIuX19vcHRpb25zLnNpZGVbMF0gfHwgXCJyaWdodFwiID09IGIuX19vcHRpb25zLnNpZGVbMF0gPyBiLl9fb3B0aW9ucy5zaWRlLnB1c2goXCJ0b3BcIiwgXCJib3R0b21cIikgOiBiLl9fb3B0aW9ucy5zaWRlLnB1c2goXCJyaWdodFwiLCBcImxlZnRcIikgfSA2ID09PSBhLnRvb2x0aXBzdGVyLl9lbnYuSUUgJiYgYi5fX29wdGlvbnMuYXJyb3cgIT09ICEwICYmIChiLl9fb3B0aW9ucy5hcnJvdyA9ICExKSB9LCBfX3JlcG9zaXRpb246IGZ1bmN0aW9uIChiLCBjKSB7IHZhciBkLCBlID0gdGhpcywgZiA9IGUuX190YXJnZXRGaW5kKGMpLCBnID0gW107IGUuX19pbnN0YW5jZS5fJHRvb2x0aXAuZGV0YWNoKCk7IHZhciBoID0gZS5fX2luc3RhbmNlLl8kdG9vbHRpcC5jbG9uZSgpLCBpID0gYS50b29sdGlwc3Rlci5fZ2V0UnVsZXIoaCksIGogPSAhMSwgayA9IGUuX19pbnN0YW5jZS5vcHRpb24oXCJhbmltYXRpb25cIik7IHN3aXRjaCAoayAmJiBoLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItXCIgKyBrKSwgYS5lYWNoKFtcIndpbmRvd1wiLCBcImRvY3VtZW50XCJdLCBmdW5jdGlvbiAoZCwgaykgeyB2YXIgbCA9IG51bGw7IGlmIChlLl9faW5zdGFuY2UuX3RyaWdnZXIoeyBjb250YWluZXI6IGssIGhlbHBlcjogYywgc2F0aXNmaWVkOiBqLCB0YWtlVGVzdDogZnVuY3Rpb24gKGEpIHsgbCA9IGEgfSwgcmVzdWx0czogZywgdHlwZTogXCJwb3NpdGlvblRlc3RcIiB9KSwgMSA9PSBsIHx8IDAgIT0gbCAmJiAwID09IGogJiYgKFwid2luZG93XCIgIT0gayB8fCBlLl9fb3B0aW9ucy52aWV3cG9ydEF3YXJlKSkgZm9yICh2YXIgZCA9IDA7IGQgPCBlLl9fb3B0aW9ucy5zaWRlLmxlbmd0aDsgZCsrKSB7IHZhciBtID0geyBob3Jpem9udGFsOiAwLCB2ZXJ0aWNhbDogMCB9LCBuID0gZS5fX29wdGlvbnMuc2lkZVtkXTsgXCJ0b3BcIiA9PSBuIHx8IFwiYm90dG9tXCIgPT0gbiA/IG0udmVydGljYWwgPSBlLl9fb3B0aW9ucy5kaXN0YW5jZVtuXSA6IG0uaG9yaXpvbnRhbCA9IGUuX19vcHRpb25zLmRpc3RhbmNlW25dLCBlLl9fc2lkZUNoYW5nZShoLCBuKSwgYS5lYWNoKFtcIm5hdHVyYWxcIiwgXCJjb25zdHJhaW5lZFwiXSwgZnVuY3Rpb24gKGEsIGQpIHsgaWYgKGwgPSBudWxsLCBlLl9faW5zdGFuY2UuX3RyaWdnZXIoeyBjb250YWluZXI6IGssIGV2ZW50OiBiLCBoZWxwZXI6IGMsIG1vZGU6IGQsIHJlc3VsdHM6IGcsIHNhdGlzZmllZDogaiwgc2lkZTogbiwgdGFrZVRlc3Q6IGZ1bmN0aW9uIChhKSB7IGwgPSBhIH0sIHR5cGU6IFwicG9zaXRpb25UZXN0XCIgfSksIDEgPT0gbCB8fCAwICE9IGwgJiYgMCA9PSBqKSB7IHZhciBoID0geyBjb250YWluZXI6IGssIGRpc3RhbmNlOiBtLCBmaXRzOiBudWxsLCBtb2RlOiBkLCBvdXRlclNpemU6IG51bGwsIHNpZGU6IG4sIHNpemU6IG51bGwsIHRhcmdldDogZltuXSwgd2hvbGU6IG51bGwgfSwgbyA9IFwibmF0dXJhbFwiID09IGQgPyBpLmZyZWUoKSA6IGkuY29uc3RyYWluKGMuZ2VvLmF2YWlsYWJsZVtrXVtuXS53aWR0aCAtIG0uaG9yaXpvbnRhbCwgYy5nZW8uYXZhaWxhYmxlW2tdW25dLmhlaWdodCAtIG0udmVydGljYWwpLCBwID0gby5tZWFzdXJlKCk7IGlmIChoLnNpemUgPSBwLnNpemUsIGgub3V0ZXJTaXplID0geyBoZWlnaHQ6IHAuc2l6ZS5oZWlnaHQgKyBtLnZlcnRpY2FsLCB3aWR0aDogcC5zaXplLndpZHRoICsgbS5ob3Jpem9udGFsIH0sIFwibmF0dXJhbFwiID09IGQgPyBjLmdlby5hdmFpbGFibGVba11bbl0ud2lkdGggPj0gaC5vdXRlclNpemUud2lkdGggJiYgYy5nZW8uYXZhaWxhYmxlW2tdW25dLmhlaWdodCA+PSBoLm91dGVyU2l6ZS5oZWlnaHQgPyBoLmZpdHMgPSAhMCA6IGguZml0cyA9ICExIDogaC5maXRzID0gcC5maXRzLCBcIndpbmRvd1wiID09IGsgJiYgKGguZml0cyA/IFwidG9wXCIgPT0gbiB8fCBcImJvdHRvbVwiID09IG4gPyBoLndob2xlID0gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCA+PSBlLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gJiYgYy5nZW8ud2luZG93LnNpemUud2lkdGggLSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgPj0gZS5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uIDogaC53aG9sZSA9IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tID49IGUuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiAmJiBjLmdlby53aW5kb3cuc2l6ZS5oZWlnaHQgLSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCA+PSBlLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gOiBoLndob2xlID0gITEpLCBnLnB1c2goaCksIGgud2hvbGUpIGogPSAhMDsgZWxzZSBpZiAoXCJuYXR1cmFsXCIgPT0gaC5tb2RlICYmIChoLmZpdHMgfHwgaC5zaXplLndpZHRoIDw9IGMuZ2VvLmF2YWlsYWJsZVtrXVtuXS53aWR0aCkpIHJldHVybiAhMSB9IH0pIH0gfSksIGUuX19pbnN0YW5jZS5fdHJpZ2dlcih7IGVkaXQ6IGZ1bmN0aW9uIChhKSB7IGcgPSBhIH0sIGV2ZW50OiBiLCBoZWxwZXI6IGMsIHJlc3VsdHM6IGcsIHR5cGU6IFwicG9zaXRpb25UZXN0ZWRcIiB9KSwgZy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IGlmIChhLndob2xlICYmICFiLndob2xlKSByZXR1cm4gLTE7IGlmICghYS53aG9sZSAmJiBiLndob2xlKSByZXR1cm4gMTsgaWYgKGEud2hvbGUgJiYgYi53aG9sZSkgeyB2YXIgYyA9IGUuX19vcHRpb25zLnNpZGUuaW5kZXhPZihhLnNpZGUpLCBkID0gZS5fX29wdGlvbnMuc2lkZS5pbmRleE9mKGIuc2lkZSk7IHJldHVybiBkID4gYyA/IC0xIDogYyA+IGQgPyAxIDogXCJuYXR1cmFsXCIgPT0gYS5tb2RlID8gLTEgOiAxIH0gaWYgKGEuZml0cyAmJiAhYi5maXRzKSByZXR1cm4gLTE7IGlmICghYS5maXRzICYmIGIuZml0cykgcmV0dXJuIDE7IGlmIChhLmZpdHMgJiYgYi5maXRzKSB7IHZhciBjID0gZS5fX29wdGlvbnMuc2lkZS5pbmRleE9mKGEuc2lkZSksIGQgPSBlLl9fb3B0aW9ucy5zaWRlLmluZGV4T2YoYi5zaWRlKTsgcmV0dXJuIGQgPiBjID8gLTEgOiBjID4gZCA/IDEgOiBcIm5hdHVyYWxcIiA9PSBhLm1vZGUgPyAtMSA6IDEgfSByZXR1cm4gXCJkb2N1bWVudFwiID09IGEuY29udGFpbmVyICYmIFwiYm90dG9tXCIgPT0gYS5zaWRlICYmIFwibmF0dXJhbFwiID09IGEubW9kZSA/IC0xIDogMSB9KSwgZCA9IGdbMF0sIGQuY29vcmQgPSB7fSwgZC5zaWRlKSB7IGNhc2UgXCJsZWZ0XCI6IGNhc2UgXCJyaWdodFwiOiBkLmNvb3JkLnRvcCA9IE1hdGguZmxvb3IoZC50YXJnZXQgLSBkLnNpemUuaGVpZ2h0IC8gMik7IGJyZWFrOyBjYXNlIFwiYm90dG9tXCI6IGNhc2UgXCJ0b3BcIjogZC5jb29yZC5sZWZ0ID0gTWF0aC5mbG9vcihkLnRhcmdldCAtIGQuc2l6ZS53aWR0aCAvIDIpIH1zd2l0Y2ggKGQuc2lkZSkgeyBjYXNlIFwibGVmdFwiOiBkLmNvb3JkLmxlZnQgPSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgLSBkLm91dGVyU2l6ZS53aWR0aDsgYnJlYWs7IGNhc2UgXCJyaWdodFwiOiBkLmNvb3JkLmxlZnQgPSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0ICsgZC5kaXN0YW5jZS5ob3Jpem9udGFsOyBicmVhazsgY2FzZSBcInRvcFwiOiBkLmNvb3JkLnRvcCA9IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wIC0gZC5vdXRlclNpemUuaGVpZ2h0OyBicmVhazsgY2FzZSBcImJvdHRvbVwiOiBkLmNvb3JkLnRvcCA9IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tICsgZC5kaXN0YW5jZS52ZXJ0aWNhbCB9XCJ3aW5kb3dcIiA9PSBkLmNvbnRhaW5lciA/IFwidG9wXCIgPT0gZC5zaWRlIHx8IFwiYm90dG9tXCIgPT0gZC5zaWRlID8gZC5jb29yZC5sZWZ0IDwgMCA/IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gPj0gMCA/IGQuY29vcmQubGVmdCA9IDAgOiBkLmNvb3JkLmxlZnQgPSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0IC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uIC0gMSA6IGQuY29vcmQubGVmdCA+IGMuZ2VvLndpbmRvdy5zaXplLndpZHRoIC0gZC5zaXplLndpZHRoICYmIChjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gPD0gYy5nZW8ud2luZG93LnNpemUud2lkdGggPyBkLmNvb3JkLmxlZnQgPSBjLmdlby53aW5kb3cuc2l6ZS53aWR0aCAtIGQuc2l6ZS53aWR0aCA6IGQuY29vcmQubGVmdCA9IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiArIDEgLSBkLnNpemUud2lkdGgpIDogZC5jb29yZC50b3AgPCAwID8gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20gLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gPj0gMCA/IGQuY29vcmQudG9wID0gMCA6IGQuY29vcmQudG9wID0gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20gLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gLSAxIDogZC5jb29yZC50b3AgPiBjLmdlby53aW5kb3cuc2l6ZS5oZWlnaHQgLSBkLnNpemUuaGVpZ2h0ICYmIChjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiA8PSBjLmdlby53aW5kb3cuc2l6ZS5oZWlnaHQgPyBkLmNvb3JkLnRvcCA9IGMuZ2VvLndpbmRvdy5zaXplLmhlaWdodCAtIGQuc2l6ZS5oZWlnaHQgOiBkLmNvb3JkLnRvcCA9IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uICsgMSAtIGQuc2l6ZS5oZWlnaHQpIDogKGQuY29vcmQubGVmdCA+IGMuZ2VvLndpbmRvdy5zaXplLndpZHRoIC0gZC5zaXplLndpZHRoICYmIChkLmNvb3JkLmxlZnQgPSBjLmdlby53aW5kb3cuc2l6ZS53aWR0aCAtIGQuc2l6ZS53aWR0aCksIGQuY29vcmQubGVmdCA8IDAgJiYgKGQuY29vcmQubGVmdCA9IDApKSwgZS5fX3NpZGVDaGFuZ2UoaCwgZC5zaWRlKSwgYy50b29sdGlwQ2xvbmUgPSBoWzBdLCBjLnRvb2x0aXBQYXJlbnQgPSBlLl9faW5zdGFuY2Uub3B0aW9uKFwicGFyZW50XCIpLnBhcmVudFswXSwgYy5tb2RlID0gZC5tb2RlLCBjLndob2xlID0gZC53aG9sZSwgYy5vcmlnaW4gPSBlLl9faW5zdGFuY2UuXyRvcmlnaW5bMF0sIGMudG9vbHRpcCA9IGUuX19pbnN0YW5jZS5fJHRvb2x0aXBbMF0sIGRlbGV0ZSBkLmNvbnRhaW5lciwgZGVsZXRlIGQuZml0cywgZGVsZXRlIGQubW9kZSwgZGVsZXRlIGQub3V0ZXJTaXplLCBkZWxldGUgZC53aG9sZSwgZC5kaXN0YW5jZSA9IGQuZGlzdGFuY2UuaG9yaXpvbnRhbCB8fCBkLmRpc3RhbmNlLnZlcnRpY2FsOyB2YXIgbCA9IGEuZXh0ZW5kKCEwLCB7fSwgZCk7IGlmIChlLl9faW5zdGFuY2UuX3RyaWdnZXIoeyBlZGl0OiBmdW5jdGlvbiAoYSkgeyBkID0gYSB9LCBldmVudDogYiwgaGVscGVyOiBjLCBwb3NpdGlvbjogbCwgdHlwZTogXCJwb3NpdGlvblwiIH0pLCBlLl9fb3B0aW9ucy5mdW5jdGlvblBvc2l0aW9uKSB7IHZhciBtID0gZS5fX29wdGlvbnMuZnVuY3Rpb25Qb3NpdGlvbi5jYWxsKGUsIGUuX19pbnN0YW5jZSwgYywgbCk7IG0gJiYgKGQgPSBtKSB9IGkuZGVzdHJveSgpOyB2YXIgbiwgbzsgXCJ0b3BcIiA9PSBkLnNpZGUgfHwgXCJib3R0b21cIiA9PSBkLnNpZGUgPyAobiA9IHsgcHJvcDogXCJsZWZ0XCIsIHZhbDogZC50YXJnZXQgLSBkLmNvb3JkLmxlZnQgfSwgbyA9IGQuc2l6ZS53aWR0aCAtIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbikgOiAobiA9IHsgcHJvcDogXCJ0b3BcIiwgdmFsOiBkLnRhcmdldCAtIGQuY29vcmQudG9wIH0sIG8gPSBkLnNpemUuaGVpZ2h0IC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uKSwgbi52YWwgPCB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gPyBuLnZhbCA9IHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiA6IG4udmFsID4gbyAmJiAobi52YWwgPSBvKTsgdmFyIHA7IHAgPSBjLmdlby5vcmlnaW4uZml4ZWRMaW5lYWdlID8gYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldCA6IHsgbGVmdDogYy5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICsgYy5nZW8ud2luZG93LnNjcm9sbC5sZWZ0LCB0b3A6IGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgYy5nZW8ud2luZG93LnNjcm9sbC50b3AgfSwgZC5jb29yZCA9IHsgbGVmdDogcC5sZWZ0ICsgKGQuY29vcmQubGVmdCAtIGMuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCksIHRvcDogcC50b3AgKyAoZC5jb29yZC50b3AgLSBjLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCkgfSwgZS5fX3NpZGVDaGFuZ2UoZS5fX2luc3RhbmNlLl8kdG9vbHRpcCwgZC5zaWRlKSwgYy5nZW8ub3JpZ2luLmZpeGVkTGluZWFnZSA/IGUuX19pbnN0YW5jZS5fJHRvb2x0aXAuY3NzKFwicG9zaXRpb25cIiwgXCJmaXhlZFwiKSA6IGUuX19pbnN0YW5jZS5fJHRvb2x0aXAuY3NzKFwicG9zaXRpb25cIiwgXCJcIiksIGUuX19pbnN0YW5jZS5fJHRvb2x0aXAuY3NzKHsgbGVmdDogZC5jb29yZC5sZWZ0LCB0b3A6IGQuY29vcmQudG9wLCBoZWlnaHQ6IGQuc2l6ZS5oZWlnaHQsIHdpZHRoOiBkLnNpemUud2lkdGggfSkuZmluZChcIi50b29sdGlwc3Rlci1hcnJvd1wiKS5jc3MoeyBsZWZ0OiBcIlwiLCB0b3A6IFwiXCIgfSkuY3NzKG4ucHJvcCwgbi52YWwpLCBlLl9faW5zdGFuY2UuXyR0b29sdGlwLmFwcGVuZFRvKGUuX19pbnN0YW5jZS5vcHRpb24oXCJwYXJlbnRcIikpLCBlLl9faW5zdGFuY2UuX3RyaWdnZXIoeyB0eXBlOiBcInJlcG9zaXRpb25lZFwiLCBldmVudDogYiwgcG9zaXRpb246IGQgfSkgfSwgX19zaWRlQ2hhbmdlOiBmdW5jdGlvbiAoYSwgYikgeyBhLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItYm90dG9tXCIpLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItbGVmdFwiKS5yZW1vdmVDbGFzcyhcInRvb2x0aXBzdGVyLXJpZ2h0XCIpLnJlbW92ZUNsYXNzKFwidG9vbHRpcHN0ZXItdG9wXCIpLmFkZENsYXNzKFwidG9vbHRpcHN0ZXItXCIgKyBiKSB9LCBfX3RhcmdldEZpbmQ6IGZ1bmN0aW9uIChhKSB7IHZhciBiID0ge30sIGMgPSB0aGlzLl9faW5zdGFuY2UuXyRvcmlnaW5bMF0uZ2V0Q2xpZW50UmVjdHMoKTsgaWYgKGMubGVuZ3RoID4gMSkgeyB2YXIgZCA9IHRoaXMuX19pbnN0YW5jZS5fJG9yaWdpbi5jc3MoXCJvcGFjaXR5XCIpOyAxID09IGQgJiYgKHRoaXMuX19pbnN0YW5jZS5fJG9yaWdpbi5jc3MoXCJvcGFjaXR5XCIsIC45OSksIGMgPSB0aGlzLl9faW5zdGFuY2UuXyRvcmlnaW5bMF0uZ2V0Q2xpZW50UmVjdHMoKSwgdGhpcy5fX2luc3RhbmNlLl8kb3JpZ2luLmNzcyhcIm9wYWNpdHlcIiwgMSkpIH0gaWYgKGMubGVuZ3RoIDwgMikgYi50b3AgPSBNYXRoLmZsb29yKGEuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIGEuZ2VvLm9yaWdpbi5zaXplLndpZHRoIC8gMiksIGIuYm90dG9tID0gYi50b3AsIGIubGVmdCA9IE1hdGguZmxvb3IoYS5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyBhLmdlby5vcmlnaW4uc2l6ZS5oZWlnaHQgLyAyKSwgYi5yaWdodCA9IGIubGVmdDsgZWxzZSB7IHZhciBlID0gY1swXTsgYi50b3AgPSBNYXRoLmZsb29yKGUubGVmdCArIChlLnJpZ2h0IC0gZS5sZWZ0KSAvIDIpLCBlID0gYy5sZW5ndGggPiAyID8gY1tNYXRoLmNlaWwoYy5sZW5ndGggLyAyKSAtIDFdIDogY1swXSwgYi5yaWdodCA9IE1hdGguZmxvb3IoZS50b3AgKyAoZS5ib3R0b20gLSBlLnRvcCkgLyAyKSwgZSA9IGNbYy5sZW5ndGggLSAxXSwgYi5ib3R0b20gPSBNYXRoLmZsb29yKGUubGVmdCArIChlLnJpZ2h0IC0gZS5sZWZ0KSAvIDIpLCBlID0gYy5sZW5ndGggPiAyID8gY1tNYXRoLmNlaWwoKGMubGVuZ3RoICsgMSkgLyAyKSAtIDFdIDogY1tjLmxlbmd0aCAtIDFdLCBiLmxlZnQgPSBNYXRoLmZsb29yKGUudG9wICsgKGUuYm90dG9tIC0gZS50b3ApIC8gMikgfSByZXR1cm4gYiB9XHJcbiAgICAgICAgfVxyXG4gICAgfSksIGFcclxufSk7IiwiLyohXHJcbiAqIGpRdWVyeSB0aHJvdHRsZSAvIGRlYm91bmNlIC0gdjEuMSAtIDMvNy8yMDEwXHJcbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vcHJvamVjdHMvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlLXBsdWdpbi9cclxuICogXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hblxyXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cclxuICogaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlL1xyXG4gKi9cclxuXHJcbi8vIFNjcmlwdDogalF1ZXJ5IHRocm90dGxlIC8gZGVib3VuY2U6IFNvbWV0aW1lcywgbGVzcyBpcyBtb3JlIVxyXG4vL1xyXG4vLyAqVmVyc2lvbjogMS4xLCBMYXN0IHVwZGF0ZWQ6IDMvNy8yMDEwKlxyXG4vLyBcclxuLy8gUHJvamVjdCBIb21lIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9wcm9qZWN0cy9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UtcGx1Z2luL1xyXG4vLyBHaXRIdWIgICAgICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlL1xyXG4vLyBTb3VyY2UgICAgICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlL3Jhdy9tYXN0ZXIvanF1ZXJ5LmJhLXRocm90dGxlLWRlYm91bmNlLmpzXHJcbi8vIChNaW5pZmllZCkgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UvcmF3L21hc3Rlci9qcXVlcnkuYmEtdGhyb3R0bGUtZGVib3VuY2UubWluLmpzICgwLjdrYilcclxuLy8gXHJcbi8vIEFib3V0OiBMaWNlbnNlXHJcbi8vIFxyXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW4sXHJcbi8vIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxyXG4vLyBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXHJcbi8vIFxyXG4vLyBBYm91dDogRXhhbXBsZXNcclxuLy8gXHJcbi8vIFRoZXNlIHdvcmtpbmcgZXhhbXBsZXMsIGNvbXBsZXRlIHdpdGggZnVsbHkgY29tbWVudGVkIGNvZGUsIGlsbHVzdHJhdGUgYSBmZXdcclxuLy8gd2F5cyBpbiB3aGljaCB0aGlzIHBsdWdpbiBjYW4gYmUgdXNlZC5cclxuLy8gXHJcbi8vIFRocm90dGxlIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS10aHJvdHRsZS1kZWJvdW5jZS9leGFtcGxlcy90aHJvdHRsZS9cclxuLy8gRGVib3VuY2UgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LXRocm90dGxlLWRlYm91bmNlL2V4YW1wbGVzL2RlYm91bmNlL1xyXG4vLyBcclxuLy8gQWJvdXQ6IFN1cHBvcnQgYW5kIFRlc3RpbmdcclxuLy8gXHJcbi8vIEluZm9ybWF0aW9uIGFib3V0IHdoYXQgdmVyc2lvbiBvciB2ZXJzaW9ucyBvZiBqUXVlcnkgdGhpcyBwbHVnaW4gaGFzIGJlZW5cclxuLy8gdGVzdGVkIHdpdGgsIHdoYXQgYnJvd3NlcnMgaXQgaGFzIGJlZW4gdGVzdGVkIGluLCBhbmQgd2hlcmUgdGhlIHVuaXQgdGVzdHNcclxuLy8gcmVzaWRlIChzbyB5b3UgY2FuIHRlc3QgaXQgeW91cnNlbGYpLlxyXG4vLyBcclxuLy8galF1ZXJ5IFZlcnNpb25zIC0gbm9uZSwgMS4zLjIsIDEuNC4yXHJcbi8vIEJyb3dzZXJzIFRlc3RlZCAtIEludGVybmV0IEV4cGxvcmVyIDYtOCwgRmlyZWZveCAyLTMuNiwgU2FmYXJpIDMtNCwgQ2hyb21lIDQtNSwgT3BlcmEgOS42LTEwLjEuXHJcbi8vIFVuaXQgVGVzdHMgICAgICAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UvdW5pdC9cclxuLy8gXHJcbi8vIEFib3V0OiBSZWxlYXNlIEhpc3RvcnlcclxuLy8gXHJcbi8vIDEuMSAtICgzLzcvMjAxMCkgRml4ZWQgYSBidWcgaW4gPGpRdWVyeS50aHJvdHRsZT4gd2hlcmUgdHJhaWxpbmcgY2FsbGJhY2tzXHJcbi8vICAgICAgIGV4ZWN1dGVkIGxhdGVyIHRoYW4gdGhleSBzaG91bGQuIFJld29ya2VkIGEgZmFpciBhbW91bnQgb2YgaW50ZXJuYWxcclxuLy8gICAgICAgbG9naWMgYXMgd2VsbC5cclxuLy8gMS4wIC0gKDMvNi8yMDEwKSBJbml0aWFsIHJlbGVhc2UgYXMgYSBzdGFuZC1hbG9uZSBwcm9qZWN0LiBNaWdyYXRlZCBvdmVyXHJcbi8vICAgICAgIGZyb20ganF1ZXJ5LW1pc2MgcmVwbyB2MC40IHRvIGpxdWVyeS10aHJvdHRsZSByZXBvIHYxLjAsIGFkZGVkIHRoZVxyXG4vLyAgICAgICBub190cmFpbGluZyB0aHJvdHRsZSBwYXJhbWV0ZXIgYW5kIGRlYm91bmNlIGZ1bmN0aW9uYWxpdHkuXHJcbi8vIFxyXG4vLyBUb3BpYzogTm90ZSBmb3Igbm9uLWpRdWVyeSB1c2Vyc1xyXG4vLyBcclxuLy8galF1ZXJ5IGlzbid0IGFjdHVhbGx5IHJlcXVpcmVkIGZvciB0aGlzIHBsdWdpbiwgYmVjYXVzZSBub3RoaW5nIGludGVybmFsXHJcbi8vIHVzZXMgYW55IGpRdWVyeSBtZXRob2RzIG9yIHByb3BlcnRpZXMuIGpRdWVyeSBpcyBqdXN0IHVzZWQgYXMgYSBuYW1lc3BhY2VcclxuLy8gdW5kZXIgd2hpY2ggdGhlc2UgbWV0aG9kcyBjYW4gZXhpc3QuXHJcbi8vIFxyXG4vLyBTaW5jZSBqUXVlcnkgaXNuJ3QgYWN0dWFsbHkgcmVxdWlyZWQgZm9yIHRoaXMgcGx1Z2luLCBpZiBqUXVlcnkgZG9lc24ndCBleGlzdFxyXG4vLyB3aGVuIHRoaXMgcGx1Z2luIGlzIGxvYWRlZCwgdGhlIG1ldGhvZCBkZXNjcmliZWQgYmVsb3cgd2lsbCBiZSBjcmVhdGVkIGluXHJcbi8vIHRoZSBgQ293Ym95YCBuYW1lc3BhY2UuIFVzYWdlIHdpbGwgYmUgZXhhY3RseSB0aGUgc2FtZSwgYnV0IGluc3RlYWQgb2ZcclxuLy8gJC5tZXRob2QoKSBvciBqUXVlcnkubWV0aG9kKCksIHlvdSdsbCBuZWVkIHRvIHVzZSBDb3dib3kubWV0aG9kKCkuXHJcblxyXG4oZnVuY3Rpb24gKHdpbmRvdywgdW5kZWZpbmVkKSB7XHJcbiAgICAnJDpub211bmdlJzsgLy8gVXNlZCBieSBZVUkgY29tcHJlc3Nvci5cclxuXHJcbiAgICAvLyBTaW5jZSBqUXVlcnkgcmVhbGx5IGlzbid0IHJlcXVpcmVkIGZvciB0aGlzIHBsdWdpbiwgdXNlIGBqUXVlcnlgIGFzIHRoZVxyXG4gICAgLy8gbmFtZXNwYWNlIG9ubHkgaWYgaXQgYWxyZWFkeSBleGlzdHMsIG90aGVyd2lzZSB1c2UgdGhlIGBDb3dib3lgIG5hbWVzcGFjZSxcclxuICAgIC8vIGNyZWF0aW5nIGl0IGlmIG5lY2Vzc2FyeS5cclxuICAgIHZhciAkID0gd2luZG93LmpRdWVyeSB8fCB3aW5kb3cuQ293Ym95IHx8ICh3aW5kb3cuQ293Ym95ID0ge30pLFxyXG5cclxuICAgICAgICAvLyBJbnRlcm5hbCBtZXRob2QgcmVmZXJlbmNlLlxyXG4gICAgICAgIGpxX3Rocm90dGxlO1xyXG5cclxuICAgIC8vIE1ldGhvZDogalF1ZXJ5LnRocm90dGxlXHJcbiAgICAvLyBcclxuICAgIC8vIFRocm90dGxlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBFc3BlY2lhbGx5IHVzZWZ1bCBmb3IgcmF0ZSBsaW1pdGluZ1xyXG4gICAgLy8gZXhlY3V0aW9uIG9mIGhhbmRsZXJzIG9uIGV2ZW50cyBsaWtlIHJlc2l6ZSBhbmQgc2Nyb2xsLiBJZiB5b3Ugd2FudCB0b1xyXG4gICAgLy8gcmF0ZS1saW1pdCBleGVjdXRpb24gb2YgYSBmdW5jdGlvbiB0byBhIHNpbmdsZSB0aW1lLCBzZWUgdGhlXHJcbiAgICAvLyA8alF1ZXJ5LmRlYm91bmNlPiBtZXRob2QuXHJcbiAgICAvLyBcclxuICAgIC8vIEluIHRoaXMgdmlzdWFsaXphdGlvbiwgfCBpcyBhIHRocm90dGxlZC1mdW5jdGlvbiBjYWxsIGFuZCBYIGlzIHRoZSBhY3R1YWxcclxuICAgIC8vIGNhbGxiYWNrIGV4ZWN1dGlvbjpcclxuICAgIC8vIFxyXG4gICAgLy8gPiBUaHJvdHRsZWQgd2l0aCBgbm9fdHJhaWxpbmdgIHNwZWNpZmllZCBhcyBmYWxzZSBvciB1bnNwZWNpZmllZDpcclxuICAgIC8vID4gfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fCAocGF1c2UpIHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHxcclxuICAgIC8vID4gWCAgICBYICAgIFggICAgWCAgICBYICAgIFggICAgICAgIFggICAgWCAgICBYICAgIFggICAgWCAgICBYXHJcbiAgICAvLyA+IFxyXG4gICAgLy8gPiBUaHJvdHRsZWQgd2l0aCBgbm9fdHJhaWxpbmdgIHNwZWNpZmllZCBhcyB0cnVlOlxyXG4gICAgLy8gPiB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8IChwYXVzZSkgfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fFxyXG4gICAgLy8gPiBYICAgIFggICAgWCAgICBYICAgIFggICAgICAgICAgICAgWCAgICBYICAgIFggICAgWCAgICBYXHJcbiAgICAvLyBcclxuICAgIC8vIFVzYWdlOlxyXG4gICAgLy8gXHJcbiAgICAvLyA+IHZhciB0aHJvdHRsZWQgPSBqUXVlcnkudGhyb3R0bGUoIGRlbGF5LCBbIG5vX3RyYWlsaW5nLCBdIGNhbGxiYWNrICk7XHJcbiAgICAvLyA+IFxyXG4gICAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykuYmluZCggJ3NvbWVldmVudCcsIHRocm90dGxlZCApO1xyXG4gICAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykudW5iaW5kKCAnc29tZWV2ZW50JywgdGhyb3R0bGVkICk7XHJcbiAgICAvLyBcclxuICAgIC8vIFRoaXMgYWxzbyB3b3JrcyBpbiBqUXVlcnkgMS40KzpcclxuICAgIC8vIFxyXG4gICAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykuYmluZCggJ3NvbWVldmVudCcsIGpRdWVyeS50aHJvdHRsZSggZGVsYXksIFsgbm9fdHJhaWxpbmcsIF0gY2FsbGJhY2sgKSApO1xyXG4gICAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykudW5iaW5kKCAnc29tZWV2ZW50JywgY2FsbGJhY2sgKTtcclxuICAgIC8vIFxyXG4gICAgLy8gQXJndW1lbnRzOlxyXG4gICAgLy8gXHJcbiAgICAvLyAgZGVsYXkgLSAoTnVtYmVyKSBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudFxyXG4gICAgLy8gICAgY2FsbGJhY2tzLCB2YWx1ZXMgYXJvdW5kIDEwMCBvciAyNTAgKG9yIGV2ZW4gaGlnaGVyKSBhcmUgbW9zdCB1c2VmdWwuXHJcbiAgICAvLyAgbm9fdHJhaWxpbmcgLSAoQm9vbGVhbikgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBub190cmFpbGluZyBpc1xyXG4gICAgLy8gICAgdHJ1ZSwgY2FsbGJhY2sgd2lsbCBvbmx5IGV4ZWN1dGUgZXZlcnkgYGRlbGF5YCBtaWxsaXNlY29uZHMgd2hpbGUgdGhlXHJcbiAgICAvLyAgICB0aHJvdHRsZWQtZnVuY3Rpb24gaXMgYmVpbmcgY2FsbGVkLiBJZiBub190cmFpbGluZyBpcyBmYWxzZSBvclxyXG4gICAgLy8gICAgdW5zcGVjaWZpZWQsIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgb25lIGZpbmFsIHRpbWUgYWZ0ZXIgdGhlIGxhc3RcclxuICAgIC8vICAgIHRocm90dGxlZC1mdW5jdGlvbiBjYWxsLiAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW5cclxuICAgIC8vICAgIGNhbGxlZCBmb3IgYGRlbGF5YCBtaWxsaXNlY29uZHMsIHRoZSBpbnRlcm5hbCBjb3VudGVyIGlzIHJlc2V0KVxyXG4gICAgLy8gIGNhbGxiYWNrIC0gKEZ1bmN0aW9uKSBBIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIGRlbGF5IG1pbGxpc2Vjb25kcy5cclxuICAgIC8vICAgIFRoZSBgdGhpc2AgY29udGV4dCBhbmQgYWxsIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRocm91Z2gsIGFzLWlzLCB0b1xyXG4gICAgLy8gICAgYGNhbGxiYWNrYCB3aGVuIHRoZSB0aHJvdHRsZWQtZnVuY3Rpb24gaXMgZXhlY3V0ZWQuXHJcbiAgICAvLyBcclxuICAgIC8vIFJldHVybnM6XHJcbiAgICAvLyBcclxuICAgIC8vICAoRnVuY3Rpb24pIEEgbmV3LCB0aHJvdHRsZWQsIGZ1bmN0aW9uLlxyXG5cclxuICAgICQudGhyb3R0bGUgPSBqcV90aHJvdHRsZSA9IGZ1bmN0aW9uIChkZWxheSwgbm9fdHJhaWxpbmcsIGNhbGxiYWNrLCBkZWJvdW5jZV9tb2RlKSB7XHJcbiAgICAgICAgLy8gQWZ0ZXIgd3JhcHBlciBoYXMgc3RvcHBlZCBiZWluZyBjYWxsZWQsIHRoaXMgdGltZW91dCBlbnN1cmVzIHRoYXRcclxuICAgICAgICAvLyBgY2FsbGJhY2tgIGlzIGV4ZWN1dGVkIGF0IHRoZSBwcm9wZXIgdGltZXMgaW4gYHRocm90dGxlYCBhbmQgYGVuZGBcclxuICAgICAgICAvLyBkZWJvdW5jZSBtb2Rlcy5cclxuICAgICAgICB2YXIgdGltZW91dF9pZCxcclxuXHJcbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIGxhc3QgdGltZSBgY2FsbGJhY2tgIHdhcyBleGVjdXRlZC5cclxuICAgICAgICAgICAgbGFzdF9leGVjID0gMDtcclxuXHJcbiAgICAgICAgLy8gYG5vX3RyYWlsaW5nYCBkZWZhdWx0cyB0byBmYWxzeS5cclxuICAgICAgICBpZiAodHlwZW9mIG5vX3RyYWlsaW5nICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgZGVib3VuY2VfbW9kZSA9IGNhbGxiYWNrO1xyXG4gICAgICAgICAgICBjYWxsYmFjayA9IG5vX3RyYWlsaW5nO1xyXG4gICAgICAgICAgICBub190cmFpbGluZyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRoZSBgd3JhcHBlcmAgZnVuY3Rpb24gZW5jYXBzdWxhdGVzIGFsbCBvZiB0aGUgdGhyb3R0bGluZyAvIGRlYm91bmNpbmdcclxuICAgICAgICAvLyBmdW5jdGlvbmFsaXR5IGFuZCB3aGVuIGV4ZWN1dGVkIHdpbGwgbGltaXQgdGhlIHJhdGUgYXQgd2hpY2ggYGNhbGxiYWNrYFxyXG4gICAgICAgIC8vIGlzIGV4ZWN1dGVkLlxyXG4gICAgICAgIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGVsYXBzZWQgPSArbmV3IERhdGUoKSAtIGxhc3RfZXhlYyxcclxuICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XHJcblxyXG4gICAgICAgICAgICAvLyBFeGVjdXRlIGBjYWxsYmFja2AgYW5kIHVwZGF0ZSB0aGUgYGxhc3RfZXhlY2AgdGltZXN0YW1wLlxyXG4gICAgICAgICAgICBmdW5jdGlvbiBleGVjKCkge1xyXG4gICAgICAgICAgICAgICAgbGFzdF9leGVjID0gK25ldyBEYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh0aGF0LCBhcmdzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIGBkZWJvdW5jZV9tb2RlYCBpcyB0cnVlIChhdF9iZWdpbikgdGhpcyBpcyB1c2VkIHRvIGNsZWFyIHRoZSBmbGFnXHJcbiAgICAgICAgICAgIC8vIHRvIGFsbG93IGZ1dHVyZSBgY2FsbGJhY2tgIGV4ZWN1dGlvbnMuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gICAgICAgICAgICAgICAgdGltZW91dF9pZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZWJvdW5jZV9tb2RlICYmICF0aW1lb3V0X2lkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSBgd3JhcHBlcmAgaXMgYmVpbmcgY2FsbGVkIGZvciB0aGUgZmlyc3QgdGltZSBhbmRcclxuICAgICAgICAgICAgICAgIC8vIGBkZWJvdW5jZV9tb2RlYCBpcyB0cnVlIChhdF9iZWdpbiksIGV4ZWN1dGUgYGNhbGxiYWNrYC5cclxuICAgICAgICAgICAgICAgIGV4ZWMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVvdXQuXHJcbiAgICAgICAgICAgIHRpbWVvdXRfaWQgJiYgY2xlYXJUaW1lb3V0KHRpbWVvdXRfaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRlYm91bmNlX21vZGUgPT09IHVuZGVmaW5lZCAmJiBlbGFwc2VkID4gZGVsYXkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEluIHRocm90dGxlIG1vZGUsIGlmIGBkZWxheWAgdGltZSBoYXMgYmVlbiBleGNlZWRlZCwgZXhlY3V0ZVxyXG4gICAgICAgICAgICAgICAgLy8gYGNhbGxiYWNrYC5cclxuICAgICAgICAgICAgICAgIGV4ZWMoKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm9fdHJhaWxpbmcgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIEluIHRyYWlsaW5nIHRocm90dGxlIG1vZGUsIHNpbmNlIGBkZWxheWAgdGltZSBoYXMgbm90IGJlZW5cclxuICAgICAgICAgICAgICAgIC8vIGV4Y2VlZGVkLCBzY2hlZHVsZSBgY2FsbGJhY2tgIHRvIGV4ZWN1dGUgYGRlbGF5YCBtcyBhZnRlciBtb3N0XHJcbiAgICAgICAgICAgICAgICAvLyByZWNlbnQgZXhlY3V0aW9uLlxyXG4gICAgICAgICAgICAgICAgLy8gXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBgZGVib3VuY2VfbW9kZWAgaXMgdHJ1ZSAoYXRfYmVnaW4pLCBzY2hlZHVsZSBgY2xlYXJgIHRvIGV4ZWN1dGVcclxuICAgICAgICAgICAgICAgIC8vIGFmdGVyIGBkZWxheWAgbXMuXHJcbiAgICAgICAgICAgICAgICAvLyBcclxuICAgICAgICAgICAgICAgIC8vIElmIGBkZWJvdW5jZV9tb2RlYCBpcyBmYWxzZSAoYXQgZW5kKSwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0b1xyXG4gICAgICAgICAgICAgICAgLy8gZXhlY3V0ZSBhZnRlciBgZGVsYXlgIG1zLlxyXG4gICAgICAgICAgICAgICAgdGltZW91dF9pZCA9IHNldFRpbWVvdXQoZGVib3VuY2VfbW9kZSA/IGNsZWFyIDogZXhlYywgZGVib3VuY2VfbW9kZSA9PT0gdW5kZWZpbmVkID8gZGVsYXkgLSBlbGFwc2VkIDogZGVsYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHRoZSBndWlkIG9mIGB3cmFwcGVyYCBmdW5jdGlvbiB0byB0aGUgc2FtZSBvZiBvcmlnaW5hbCBjYWxsYmFjaywgc29cclxuICAgICAgICAvLyBpdCBjYW4gYmUgcmVtb3ZlZCBpbiBqUXVlcnkgMS40KyAudW5iaW5kIG9yIC5kaWUgYnkgdXNpbmcgdGhlIG9yaWdpbmFsXHJcbiAgICAgICAgLy8gY2FsbGJhY2sgYXMgYSByZWZlcmVuY2UuXHJcbiAgICAgICAgaWYgKCQuZ3VpZCkge1xyXG4gICAgICAgICAgICB3cmFwcGVyLmd1aWQgPSBjYWxsYmFjay5ndWlkID0gY2FsbGJhY2suZ3VpZCB8fCAkLmd1aWQrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJldHVybiB0aGUgd3JhcHBlciBmdW5jdGlvbi5cclxuICAgICAgICByZXR1cm4gd3JhcHBlcjtcclxuICAgIH07XHJcblxyXG4gICAgLy8gTWV0aG9kOiBqUXVlcnkuZGVib3VuY2VcclxuICAgIC8vIFxyXG4gICAgLy8gRGVib3VuY2UgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24uIERlYm91bmNpbmcsIHVubGlrZSB0aHJvdHRsaW5nLFxyXG4gICAgLy8gZ3VhcmFudGVlcyB0aGF0IGEgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBhIHNpbmdsZSB0aW1lLCBlaXRoZXIgYXQgdGhlXHJcbiAgICAvLyB2ZXJ5IGJlZ2lubmluZyBvZiBhIHNlcmllcyBvZiBjYWxscywgb3IgYXQgdGhlIHZlcnkgZW5kLiBJZiB5b3Ugd2FudCB0b1xyXG4gICAgLy8gc2ltcGx5IHJhdGUtbGltaXQgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24sIHNlZSB0aGUgPGpRdWVyeS50aHJvdHRsZT5cclxuICAgIC8vIG1ldGhvZC5cclxuICAgIC8vIFxyXG4gICAgLy8gSW4gdGhpcyB2aXN1YWxpemF0aW9uLCB8IGlzIGEgZGVib3VuY2VkLWZ1bmN0aW9uIGNhbGwgYW5kIFggaXMgdGhlIGFjdHVhbFxyXG4gICAgLy8gY2FsbGJhY2sgZXhlY3V0aW9uOlxyXG4gICAgLy8gXHJcbiAgICAvLyA+IERlYm91bmNlZCB3aXRoIGBhdF9iZWdpbmAgc3BlY2lmaWVkIGFzIGZhbHNlIG9yIHVuc3BlY2lmaWVkOlxyXG4gICAgLy8gPiB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8IChwYXVzZSkgfHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fFxyXG4gICAgLy8gPiAgICAgICAgICAgICAgICAgICAgICAgICAgWCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhcclxuICAgIC8vID4gXHJcbiAgICAvLyA+IERlYm91bmNlZCB3aXRoIGBhdF9iZWdpbmAgc3BlY2lmaWVkIGFzIHRydWU6XHJcbiAgICAvLyA+IHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHwgKHBhdXNlKSB8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8XHJcbiAgICAvLyA+IFggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYXHJcbiAgICAvLyBcclxuICAgIC8vIFVzYWdlOlxyXG4gICAgLy8gXHJcbiAgICAvLyA+IHZhciBkZWJvdW5jZWQgPSBqUXVlcnkuZGVib3VuY2UoIGRlbGF5LCBbIGF0X2JlZ2luLCBdIGNhbGxiYWNrICk7XHJcbiAgICAvLyA+IFxyXG4gICAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykuYmluZCggJ3NvbWVldmVudCcsIGRlYm91bmNlZCApO1xyXG4gICAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykudW5iaW5kKCAnc29tZWV2ZW50JywgZGVib3VuY2VkICk7XHJcbiAgICAvLyBcclxuICAgIC8vIFRoaXMgYWxzbyB3b3JrcyBpbiBqUXVlcnkgMS40KzpcclxuICAgIC8vIFxyXG4gICAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykuYmluZCggJ3NvbWVldmVudCcsIGpRdWVyeS5kZWJvdW5jZSggZGVsYXksIFsgYXRfYmVnaW4sIF0gY2FsbGJhY2sgKSApO1xyXG4gICAgLy8gPiBqUXVlcnkoJ3NlbGVjdG9yJykudW5iaW5kKCAnc29tZWV2ZW50JywgY2FsbGJhY2sgKTtcclxuICAgIC8vIFxyXG4gICAgLy8gQXJndW1lbnRzOlxyXG4gICAgLy8gXHJcbiAgICAvLyAgZGVsYXkgLSAoTnVtYmVyKSBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudFxyXG4gICAgLy8gICAgY2FsbGJhY2tzLCB2YWx1ZXMgYXJvdW5kIDEwMCBvciAyNTAgKG9yIGV2ZW4gaGlnaGVyKSBhcmUgbW9zdCB1c2VmdWwuXHJcbiAgICAvLyAgYXRfYmVnaW4gLSAoQm9vbGVhbikgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBhdF9iZWdpbiBpcyBmYWxzZSBvclxyXG4gICAgLy8gICAgdW5zcGVjaWZpZWQsIGNhbGxiYWNrIHdpbGwgb25seSBiZSBleGVjdXRlZCBgZGVsYXlgIG1pbGxpc2Vjb25kcyBhZnRlclxyXG4gICAgLy8gICAgdGhlIGxhc3QgZGVib3VuY2VkLWZ1bmN0aW9uIGNhbGwuIElmIGF0X2JlZ2luIGlzIHRydWUsIGNhbGxiYWNrIHdpbGwgYmVcclxuICAgIC8vICAgIGV4ZWN1dGVkIG9ubHkgYXQgdGhlIGZpcnN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLiAoQWZ0ZXIgdGhlXHJcbiAgICAvLyAgICB0aHJvdHRsZWQtZnVuY3Rpb24gaGFzIG5vdCBiZWVuIGNhbGxlZCBmb3IgYGRlbGF5YCBtaWxsaXNlY29uZHMsIHRoZVxyXG4gICAgLy8gICAgaW50ZXJuYWwgY291bnRlciBpcyByZXNldClcclxuICAgIC8vICBjYWxsYmFjayAtIChGdW5jdGlvbikgQSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkZWxheSBtaWxsaXNlY29uZHMuXHJcbiAgICAvLyAgICBUaGUgYHRoaXNgIGNvbnRleHQgYW5kIGFsbCBhcmd1bWVudHMgYXJlIHBhc3NlZCB0aHJvdWdoLCBhcy1pcywgdG9cclxuICAgIC8vICAgIGBjYWxsYmFja2Agd2hlbiB0aGUgZGVib3VuY2VkLWZ1bmN0aW9uIGlzIGV4ZWN1dGVkLlxyXG4gICAgLy8gXHJcbiAgICAvLyBSZXR1cm5zOlxyXG4gICAgLy8gXHJcbiAgICAvLyAgKEZ1bmN0aW9uKSBBIG5ldywgZGVib3VuY2VkLCBmdW5jdGlvbi5cclxuXHJcbiAgICAkLmRlYm91bmNlID0gZnVuY3Rpb24gKGRlbGF5LCBhdF9iZWdpbiwgY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm4gY2FsbGJhY2sgPT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IGpxX3Rocm90dGxlKGRlbGF5LCBhdF9iZWdpbiwgZmFsc2UpXHJcbiAgICAgICAgICAgIDoganFfdGhyb3R0bGUoZGVsYXksIGNhbGxiYWNrLCBhdF9iZWdpbiAhPT0gZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcbn0pKHdpbmRvdyk7IiwiKGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gICAgJC5mbi5zaHVmZmxlID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB2YXIgYWxsRWxlbXMgPSB0aGlzLmdldCgpLFxyXG4gICAgICAgICAgICBnZXRSYW5kb20gPSBmdW5jdGlvbiAobWF4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWF4KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2h1ZmZsZWQgPSAkLm1hcChhbGxFbGVtcywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJhbmRvbSA9IGdldFJhbmRvbShhbGxFbGVtcy5sZW5ndGgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJhbmRFbCA9ICQoYWxsRWxlbXNbcmFuZG9tXSkuY2xvbmUodHJ1ZSlbMF07XHJcbiAgICAgICAgICAgICAgICBhbGxFbGVtcy5zcGxpY2UocmFuZG9tLCAxKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByYW5kRWw7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5yZXBsYWNlV2l0aCgkKHNodWZmbGVkW2ldKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAkKHNodWZmbGVkKTtcclxuXHJcbiAgICB9O1xyXG5cclxufSkoalF1ZXJ5KTsiLCIvKiFcclxuICogQm93c2VyIC0gYSBicm93c2VyIGRldGVjdG9yXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWQvYm93c2VyXHJcbiAqIE1JVCBMaWNlbnNlIHwgKGMpIER1c3RpbiBEaWF6IDIwMTVcclxuICovXHJcbiAgXHJcbiFmdW5jdGlvbiAocm9vdCwgbmFtZSwgZGVmaW5pdGlvbikge1xyXG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIG1vZHVsZS5leHBvcnRzID0gZGVmaW5pdGlvbigpXHJcbiAgICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgZGVmaW5lKG5hbWUsIGRlZmluaXRpb24pXHJcbiAgICBlbHNlIHtcclxuICAgICAgICB3aW5kb3dbbmFtZV0gPSBkZWZpbml0aW9uKClcclxuICAgIH1cclxufSh0aGlzLCAnYm93c2VyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgICogU2VlIHVzZXJhZ2VudHMuanMgZm9yIGV4YW1wbGVzIG9mIG5hdmlnYXRvci51c2VyQWdlbnRcclxuICAgICAgKi9cclxuXHJcbiAgICB2YXIgdCA9IHRydWVcclxuXHJcbiAgICBmdW5jdGlvbiBkZXRlY3QodWEpIHtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Rmlyc3RNYXRjaChyZWdleCkge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSB1YS5tYXRjaChyZWdleCk7XHJcbiAgICAgICAgICAgIHJldHVybiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSAmJiBtYXRjaFsxXSkgfHwgJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRTZWNvbmRNYXRjaChyZWdleCkge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSB1YS5tYXRjaChyZWdleCk7XHJcbiAgICAgICAgICAgIHJldHVybiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSAmJiBtYXRjaFsyXSkgfHwgJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaW9zZGV2aWNlID0gZ2V0Rmlyc3RNYXRjaCgvKGlwb2R8aXBob25lfGlwYWQpL2kpLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgLCBsaWtlQW5kcm9pZCA9IC9saWtlIGFuZHJvaWQvaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIGFuZHJvaWQgPSAhbGlrZUFuZHJvaWQgJiYgL2FuZHJvaWQvaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIG5leHVzTW9iaWxlID0gL25leHVzXFxzKlswLTZdXFxzKi9pLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgbmV4dXNUYWJsZXQgPSAhbmV4dXNNb2JpbGUgJiYgL25leHVzXFxzKlswLTldKy9pLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgY2hyb21lb3MgPSAvQ3JPUy8udGVzdCh1YSlcclxuICAgICAgICAgICAgLCBzaWxrID0gL3NpbGsvaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIHNhaWxmaXNoID0gL3NhaWxmaXNoL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCB0aXplbiA9IC90aXplbi9pLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgd2Vib3MgPSAvKHdlYnxocHcpKG98MClzL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCB3aW5kb3dzcGhvbmUgPSAvd2luZG93cyBwaG9uZS9pLnRlc3QodWEpXHJcbiAgICAgICAgICAgICwgc2Ftc3VuZ0Jyb3dzZXIgPSAvU2Ftc3VuZ0Jyb3dzZXIvaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIHdpbmRvd3MgPSAhd2luZG93c3Bob25lICYmIC93aW5kb3dzL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCBtYWMgPSAhaW9zZGV2aWNlICYmICFzaWxrICYmIC9tYWNpbnRvc2gvaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIGxpbnV4ID0gIWFuZHJvaWQgJiYgIXNhaWxmaXNoICYmICF0aXplbiAmJiAhd2Vib3MgJiYgL2xpbnV4L2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCBlZGdlVmVyc2lvbiA9IGdldFNlY29uZE1hdGNoKC9lZGcoW2VhXXxpb3MpXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICAsIHZlcnNpb25JZGVudGlmaWVyID0gZ2V0Rmlyc3RNYXRjaCgvdmVyc2lvblxcLyhcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgLCB0YWJsZXQgPSAvdGFibGV0L2kudGVzdCh1YSkgJiYgIS90YWJsZXQgcGMvaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIG1vYmlsZSA9ICF0YWJsZXQgJiYgL1teLV1tb2JpL2kudGVzdCh1YSlcclxuICAgICAgICAgICAgLCB4Ym94ID0gL3hib3gvaS50ZXN0KHVhKVxyXG4gICAgICAgICAgICAsIHJlc3VsdFxyXG5cclxuICAgICAgICBpZiAoL29wZXJhL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgLy8gIGFuIG9sZCBPcGVyYVxyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnT3BlcmEnXHJcbiAgICAgICAgICAgICAgICAsIG9wZXJhOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IHZlcnNpb25JZGVudGlmaWVyIHx8IGdldEZpcnN0TWF0Y2goLyg/Om9wZXJhfG9wcnxvcGlvcylbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoL29wclxcL3xvcGlvcy9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIC8vIGEgbmV3IE9wZXJhXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdPcGVyYSdcclxuICAgICAgICAgICAgICAgICwgb3BlcmE6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86b3ByfG9waW9zKVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9TYW1zdW5nQnJvd3Nlci9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdTYW1zdW5nIEludGVybmV0IGZvciBBbmRyb2lkJ1xyXG4gICAgICAgICAgICAgICAgLCBzYW1zdW5nQnJvd3NlcjogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllciB8fCBnZXRGaXJzdE1hdGNoKC8oPzpTYW1zdW5nQnJvd3NlcilbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvV2hhbGUvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnTkFWRVIgV2hhbGUgYnJvd3NlcidcclxuICAgICAgICAgICAgICAgICwgd2hhbGU6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86d2hhbGUpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvTVpCcm93c2VyL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ01aIEJyb3dzZXInXHJcbiAgICAgICAgICAgICAgICAsIG16YnJvd3NlcjogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpNWkJyb3dzZXIpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvY29hc3QvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnT3BlcmEgQ29hc3QnXHJcbiAgICAgICAgICAgICAgICAsIGNvYXN0OiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IHZlcnNpb25JZGVudGlmaWVyIHx8IGdldEZpcnN0TWF0Y2goLyg/OmNvYXN0KVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9mb2N1cy9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdGb2N1cydcclxuICAgICAgICAgICAgICAgICwgZm9jdXM6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86Zm9jdXMpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgveWFicm93c2VyL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1lhbmRleCBCcm93c2VyJ1xyXG4gICAgICAgICAgICAgICAgLCB5YW5kZXhicm93c2VyOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IHZlcnNpb25JZGVudGlmaWVyIHx8IGdldEZpcnN0TWF0Y2goLyg/OnlhYnJvd3NlcilbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvdWNicm93c2VyL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1VDIEJyb3dzZXInXHJcbiAgICAgICAgICAgICAgICAsIHVjYnJvd3NlcjogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzp1Y2Jyb3dzZXIpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvbXhpb3MvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnTWF4dGhvbidcclxuICAgICAgICAgICAgICAgICwgbWF4dGhvbjogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpteGlvcylbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9lcGlwaGFueS9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdFcGlwaGFueSdcclxuICAgICAgICAgICAgICAgICwgZXBpcGhhbnk6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86ZXBpcGhhbnkpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvcHVmZmluL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1B1ZmZpbidcclxuICAgICAgICAgICAgICAgICwgcHVmZmluOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OnB1ZmZpbilbXFxzXFwvXShcXGQrKD86XFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9zbGVpcG5pci9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdTbGVpcG5pcidcclxuICAgICAgICAgICAgICAgICwgc2xlaXBuaXI6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86c2xlaXBuaXIpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvay1tZWxlb24vaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnSy1NZWxlb24nXHJcbiAgICAgICAgICAgICAgICAsIGtNZWxlb246IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86ay1tZWxlb24pW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh3aW5kb3dzcGhvbmUpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1dpbmRvd3MgUGhvbmUnXHJcbiAgICAgICAgICAgICAgICAsIG9zbmFtZTogJ1dpbmRvd3MgUGhvbmUnXHJcbiAgICAgICAgICAgICAgICAsIHdpbmRvd3NwaG9uZTogdFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlZGdlVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0Lm1zZWRnZSA9IHRcclxuICAgICAgICAgICAgICAgIHJlc3VsdC52ZXJzaW9uID0gZWRnZVZlcnNpb25cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5tc2llID0gdFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC9pZW1vYmlsZVxcLyhcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvbXNpZXx0cmlkZW50L2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0ludGVybmV0IEV4cGxvcmVyJ1xyXG4gICAgICAgICAgICAgICAgLCBtc2llOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/Om1zaWUgfHJ2OikoXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGNocm9tZW9zKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdDaHJvbWUnXHJcbiAgICAgICAgICAgICAgICAsIG9zbmFtZTogJ0Nocm9tZSBPUydcclxuICAgICAgICAgICAgICAgICwgY2hyb21lb3M6IHRcclxuICAgICAgICAgICAgICAgICwgY2hyb21lQm9vazogdFxyXG4gICAgICAgICAgICAgICAgLCBjaHJvbWU6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86Y2hyb21lfGNyaW9zfGNybW8pXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgvZWRnKFtlYV18aW9zKS9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdNaWNyb3NvZnQgRWRnZSdcclxuICAgICAgICAgICAgICAgICwgbXNlZGdlOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGVkZ2VWZXJzaW9uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL3ZpdmFsZGkvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnVml2YWxkaSdcclxuICAgICAgICAgICAgICAgICwgdml2YWxkaTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC92aXZhbGRpXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNhaWxmaXNoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdTYWlsZmlzaCdcclxuICAgICAgICAgICAgICAgICwgb3NuYW1lOiAnU2FpbGZpc2ggT1MnXHJcbiAgICAgICAgICAgICAgICAsIHNhaWxmaXNoOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goL3NhaWxmaXNoXFxzP2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL3NlYW1vbmtleVxcLy9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdTZWFNb25rZXknXHJcbiAgICAgICAgICAgICAgICAsIHNlYW1vbmtleTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC9zZWFtb25rZXlcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL2ZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0ZpcmVmb3gnXHJcbiAgICAgICAgICAgICAgICAsIGZpcmVmb3g6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86ZmlyZWZveHxpY2V3ZWFzZWx8Znhpb3MpWyBcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgvXFwoKG1vYmlsZXx0YWJsZXQpO1teXFwpXSpydjpbXFxkXFwuXStcXCkvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmZpcmVmb3hvcyA9IHRcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5vc25hbWUgPSAnRmlyZWZveCBPUydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzaWxrKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdBbWF6b24gU2lsaydcclxuICAgICAgICAgICAgICAgICwgc2lsazogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC9zaWxrXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9waGFudG9tL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1BoYW50b21KUydcclxuICAgICAgICAgICAgICAgICwgcGhhbnRvbTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC9waGFudG9tanNcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL3NsaW1lcmpzL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1NsaW1lckpTJ1xyXG4gICAgICAgICAgICAgICAgLCBzbGltZXI6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvc2xpbWVyanNcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL2JsYWNrYmVycnl8XFxiYmJcXGQrL2kudGVzdCh1YSkgfHwgL3JpbVxcc3RhYmxldC9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdCbGFja0JlcnJ5J1xyXG4gICAgICAgICAgICAgICAgLCBvc25hbWU6ICdCbGFja0JlcnJ5IE9TJ1xyXG4gICAgICAgICAgICAgICAgLCBibGFja2JlcnJ5OiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IHZlcnNpb25JZGVudGlmaWVyIHx8IGdldEZpcnN0TWF0Y2goL2JsYWNrYmVycnlbXFxkXStcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAod2Vib3MpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1dlYk9TJ1xyXG4gICAgICAgICAgICAgICAgLCBvc25hbWU6ICdXZWJPUydcclxuICAgICAgICAgICAgICAgICwgd2Vib3M6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXIgfHwgZ2V0Rmlyc3RNYXRjaCgvdyg/OmViKT9vc2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC90b3VjaHBhZFxcLy9pLnRlc3QodWEpICYmIChyZXN1bHQudG91Y2hwYWQgPSB0KVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvYmFkYS9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdCYWRhJ1xyXG4gICAgICAgICAgICAgICAgLCBvc25hbWU6ICdCYWRhJ1xyXG4gICAgICAgICAgICAgICAgLCBiYWRhOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goL2RvbGZpblxcLyhcXGQrKFxcLlxcZCspPykvaSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGl6ZW4pIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1RpemVuJ1xyXG4gICAgICAgICAgICAgICAgLCBvc25hbWU6ICdUaXplbidcclxuICAgICAgICAgICAgICAgICwgdGl6ZW46IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86dGl6ZW5cXHM/KT9icm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvcXVwemlsbGEvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnUXVwWmlsbGEnXHJcbiAgICAgICAgICAgICAgICAsIHF1cHppbGxhOiB0XHJcbiAgICAgICAgICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OnF1cHppbGxhKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpIHx8IHZlcnNpb25JZGVudGlmaWVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoL2Nocm9taXVtL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0Nocm9taXVtJ1xyXG4gICAgICAgICAgICAgICAgLCBjaHJvbWl1bTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWl1bSlbXFxzXFwvXShcXGQrKD86XFwuXFxkKyk/KS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9jaHJvbWV8Y3Jpb3N8Y3Jtby9pLnRlc3QodWEpKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6ICdDaHJvbWUnXHJcbiAgICAgICAgICAgICAgICAsIGNocm9tZTogdFxyXG4gICAgICAgICAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWV8Y3Jpb3N8Y3JtbylcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYW5kcm9pZCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnQW5kcm9pZCdcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgvc2FmYXJpfGFwcGxld2Via2l0L2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1NhZmFyaSdcclxuICAgICAgICAgICAgICAgICwgc2FmYXJpOiB0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZlcnNpb25JZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IHZlcnNpb25JZGVudGlmaWVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaW9zZGV2aWNlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGlvc2RldmljZSA9PSAnaXBob25lJyA/ICdpUGhvbmUnIDogaW9zZGV2aWNlID09ICdpcGFkJyA/ICdpUGFkJyA6ICdpUG9kJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFdURjogdmVyc2lvbiBpcyBub3QgcGFydCBvZiB1c2VyIGFnZW50IGluIHdlYiBhcHBzXHJcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnZlcnNpb24gPSB2ZXJzaW9uSWRlbnRpZmllclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKC9nb29nbGVib3QvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnR29vZ2xlYm90J1xyXG4gICAgICAgICAgICAgICAgLCBnb29nbGVib3Q6IHRcclxuICAgICAgICAgICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvZ29vZ2xlYm90XFwvKFxcZCsoXFwuXFxkKykpL2kpIHx8IHZlcnNpb25JZGVudGlmaWVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGdldEZpcnN0TWF0Y2goL14oLiopXFwvKC4qKSAvKSxcclxuICAgICAgICAgICAgICAgIHZlcnNpb246IGdldFNlY29uZE1hdGNoKC9eKC4qKVxcLyguKikgLylcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHNldCB3ZWJraXQgb3IgZ2Vja28gZmxhZyBmb3IgYnJvd3NlcnMgYmFzZWQgb24gdGhlc2UgZW5naW5lc1xyXG4gICAgICAgIGlmICghcmVzdWx0Lm1zZWRnZSAmJiAvKGFwcGxlKT93ZWJraXQvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICBpZiAoLyhhcHBsZSk/d2Via2l0XFwvNTM3XFwuMzYvaS50ZXN0KHVhKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0Lm5hbWUgPSByZXN1bHQubmFtZSB8fCBcIkJsaW5rXCJcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5ibGluayA9IHRcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5uYW1lID0gcmVzdWx0Lm5hbWUgfHwgXCJXZWJraXRcIlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LndlYmtpdCA9IHRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdC52ZXJzaW9uICYmIHZlcnNpb25JZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IHZlcnNpb25JZGVudGlmaWVyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKCFyZXN1bHQub3BlcmEgJiYgL2dlY2tvXFwvL2kudGVzdCh1YSkpIHtcclxuICAgICAgICAgICAgcmVzdWx0Lm5hbWUgPSByZXN1bHQubmFtZSB8fCBcIkdlY2tvXCJcclxuICAgICAgICAgICAgcmVzdWx0LmdlY2tvID0gdFxyXG4gICAgICAgICAgICByZXN1bHQudmVyc2lvbiA9IHJlc3VsdC52ZXJzaW9uIHx8IGdldEZpcnN0TWF0Y2goL2dlY2tvXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gc2V0IE9TIGZsYWdzIGZvciBwbGF0Zm9ybXMgdGhhdCBoYXZlIG11bHRpcGxlIGJyb3dzZXJzXHJcbiAgICAgICAgaWYgKCFyZXN1bHQud2luZG93c3Bob25lICYmIChhbmRyb2lkIHx8IHJlc3VsdC5zaWxrKSkge1xyXG4gICAgICAgICAgICByZXN1bHQuYW5kcm9pZCA9IHRcclxuICAgICAgICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdBbmRyb2lkJ1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIXJlc3VsdC53aW5kb3dzcGhvbmUgJiYgaW9zZGV2aWNlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtpb3NkZXZpY2VdID0gdFxyXG4gICAgICAgICAgICByZXN1bHQuaW9zID0gdFxyXG4gICAgICAgICAgICByZXN1bHQub3NuYW1lID0gJ2lPUydcclxuICAgICAgICB9IGVsc2UgaWYgKG1hYykge1xyXG4gICAgICAgICAgICByZXN1bHQubWFjID0gdFxyXG4gICAgICAgICAgICByZXN1bHQub3NuYW1lID0gJ21hY09TJ1xyXG4gICAgICAgIH0gZWxzZSBpZiAoeGJveCkge1xyXG4gICAgICAgICAgICByZXN1bHQueGJveCA9IHRcclxuICAgICAgICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdYYm94J1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93cykge1xyXG4gICAgICAgICAgICByZXN1bHQud2luZG93cyA9IHRcclxuICAgICAgICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdXaW5kb3dzJ1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGludXgpIHtcclxuICAgICAgICAgICAgcmVzdWx0LmxpbnV4ID0gdFxyXG4gICAgICAgICAgICByZXN1bHQub3NuYW1lID0gJ0xpbnV4J1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0V2luZG93c1ZlcnNpb24ocykge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHMpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ05UJzogcmV0dXJuICdOVCdcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1hQJzogcmV0dXJuICdYUCdcclxuICAgICAgICAgICAgICAgIGNhc2UgJ05UIDUuMCc6IHJldHVybiAnMjAwMCdcclxuICAgICAgICAgICAgICAgIGNhc2UgJ05UIDUuMSc6IHJldHVybiAnWFAnXHJcbiAgICAgICAgICAgICAgICBjYXNlICdOVCA1LjInOiByZXR1cm4gJzIwMDMnXHJcbiAgICAgICAgICAgICAgICBjYXNlICdOVCA2LjAnOiByZXR1cm4gJ1Zpc3RhJ1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnTlQgNi4xJzogcmV0dXJuICc3J1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnTlQgNi4yJzogcmV0dXJuICc4J1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnTlQgNi4zJzogcmV0dXJuICc4LjEnXHJcbiAgICAgICAgICAgICAgICBjYXNlICdOVCAxMC4wJzogcmV0dXJuICcxMCdcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gT1MgdmVyc2lvbiBleHRyYWN0aW9uXHJcbiAgICAgICAgdmFyIG9zVmVyc2lvbiA9ICcnO1xyXG4gICAgICAgIGlmIChyZXN1bHQud2luZG93cykge1xyXG4gICAgICAgICAgICBvc1ZlcnNpb24gPSBnZXRXaW5kb3dzVmVyc2lvbihnZXRGaXJzdE1hdGNoKC9XaW5kb3dzICgoTlR8WFApKCBcXGRcXGQ/LlxcZCk/KS9pKSlcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC53aW5kb3dzcGhvbmUpIHtcclxuICAgICAgICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvd2luZG93cyBwaG9uZSAoPzpvcyk/XFxzPyhcXGQrKFxcLlxcZCspKikvaSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQubWFjKSB7XHJcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL01hYyBPUyBYIChcXGQrKFtfXFwuXFxzXVxcZCspKikvaSk7XHJcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IG9zVmVyc2lvbi5yZXBsYWNlKC9bX1xcc10vZywgJy4nKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlvc2RldmljZSkge1xyXG4gICAgICAgICAgICBvc1ZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC9vcyAoXFxkKyhbX1xcc11cXGQrKSopIGxpa2UgbWFjIG9zIHgvaSk7XHJcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IG9zVmVyc2lvbi5yZXBsYWNlKC9bX1xcc10vZywgJy4nKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGFuZHJvaWQpIHtcclxuICAgICAgICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvYW5kcm9pZFsgXFwvLV0oXFxkKyhcXC5cXGQrKSopL2kpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LndlYm9zKSB7XHJcbiAgICAgICAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goLyg/OndlYnxocHcpb3NcXC8oXFxkKyhcXC5cXGQrKSopL2kpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmJsYWNrYmVycnkpIHtcclxuICAgICAgICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvcmltXFxzdGFibGV0XFxzb3NcXHMoXFxkKyhcXC5cXGQrKSopL2kpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0LmJhZGEpIHtcclxuICAgICAgICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvYmFkYVxcLyhcXGQrKFxcLlxcZCspKikvaSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQudGl6ZW4pIHtcclxuICAgICAgICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvdGl6ZW5bXFwvXFxzXShcXGQrKFxcLlxcZCspKikvaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvc1ZlcnNpb24pIHtcclxuICAgICAgICAgICAgcmVzdWx0Lm9zdmVyc2lvbiA9IG9zVmVyc2lvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRldmljZSB0eXBlIGV4dHJhY3Rpb25cclxuICAgICAgICB2YXIgb3NNYWpvclZlcnNpb24gPSAhcmVzdWx0LndpbmRvd3MgJiYgb3NWZXJzaW9uLnNwbGl0KCcuJylbMF07XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICB0YWJsZXRcclxuICAgICAgICAgICAgfHwgbmV4dXNUYWJsZXRcclxuICAgICAgICAgICAgfHwgaW9zZGV2aWNlID09ICdpcGFkJ1xyXG4gICAgICAgICAgICB8fCAoYW5kcm9pZCAmJiAob3NNYWpvclZlcnNpb24gPT0gMyB8fCAob3NNYWpvclZlcnNpb24gPj0gNCAmJiAhbW9iaWxlKSkpXHJcbiAgICAgICAgICAgIHx8IHJlc3VsdC5zaWxrXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC50YWJsZXQgPSB0XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgbW9iaWxlXHJcbiAgICAgICAgICAgIHx8IGlvc2RldmljZSA9PSAnaXBob25lJ1xyXG4gICAgICAgICAgICB8fCBpb3NkZXZpY2UgPT0gJ2lwb2QnXHJcbiAgICAgICAgICAgIHx8IGFuZHJvaWRcclxuICAgICAgICAgICAgfHwgbmV4dXNNb2JpbGVcclxuICAgICAgICAgICAgfHwgcmVzdWx0LmJsYWNrYmVycnlcclxuICAgICAgICAgICAgfHwgcmVzdWx0LndlYm9zXHJcbiAgICAgICAgICAgIHx8IHJlc3VsdC5iYWRhXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5tb2JpbGUgPSB0XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHcmFkZWQgQnJvd3NlciBTdXBwb3J0XHJcbiAgICAgICAgLy8gaHR0cDovL2RldmVsb3Blci55YWhvby5jb20veXVpL2FydGljbGVzL2dic1xyXG4gICAgICAgIGlmIChyZXN1bHQubXNlZGdlIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQubXNpZSAmJiByZXN1bHQudmVyc2lvbiA+PSAxMCkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC55YW5kZXhicm93c2VyICYmIHJlc3VsdC52ZXJzaW9uID49IDE1KSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0LnZpdmFsZGkgJiYgcmVzdWx0LnZlcnNpb24gPj0gMS4wKSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0LmNocm9tZSAmJiByZXN1bHQudmVyc2lvbiA+PSAyMCkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5zYW1zdW5nQnJvd3NlciAmJiByZXN1bHQudmVyc2lvbiA+PSA0KSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0LndoYWxlICYmIGNvbXBhcmVWZXJzaW9ucyhbcmVzdWx0LnZlcnNpb24sICcxLjAnXSkgPT09IDEpIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQubXpicm93c2VyICYmIGNvbXBhcmVWZXJzaW9ucyhbcmVzdWx0LnZlcnNpb24sICc2LjAnXSkgPT09IDEpIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQuZm9jdXMgJiYgY29tcGFyZVZlcnNpb25zKFtyZXN1bHQudmVyc2lvbiwgJzEuMCddKSA9PT0gMSkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5maXJlZm94ICYmIHJlc3VsdC52ZXJzaW9uID49IDIwLjApIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQuc2FmYXJpICYmIHJlc3VsdC52ZXJzaW9uID49IDYpIHx8XHJcbiAgICAgICAgICAgIChyZXN1bHQub3BlcmEgJiYgcmVzdWx0LnZlcnNpb24gPj0gMTAuMCkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5pb3MgJiYgcmVzdWx0Lm9zdmVyc2lvbiAmJiByZXN1bHQub3N2ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSA+PSA2KSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0LmJsYWNrYmVycnkgJiYgcmVzdWx0LnZlcnNpb24gPj0gMTAuMSlcclxuICAgICAgICAgICAgfHwgKHJlc3VsdC5jaHJvbWl1bSAmJiByZXN1bHQudmVyc2lvbiA+PSAyMClcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmVzdWx0LmEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgocmVzdWx0Lm1zaWUgJiYgcmVzdWx0LnZlcnNpb24gPCAxMCkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5jaHJvbWUgJiYgcmVzdWx0LnZlcnNpb24gPCAyMCkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5maXJlZm94ICYmIHJlc3VsdC52ZXJzaW9uIDwgMjAuMCkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5zYWZhcmkgJiYgcmVzdWx0LnZlcnNpb24gPCA2KSB8fFxyXG4gICAgICAgICAgICAocmVzdWx0Lm9wZXJhICYmIHJlc3VsdC52ZXJzaW9uIDwgMTAuMCkgfHxcclxuICAgICAgICAgICAgKHJlc3VsdC5pb3MgJiYgcmVzdWx0Lm9zdmVyc2lvbiAmJiByZXN1bHQub3N2ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSA8IDYpXHJcbiAgICAgICAgICAgIHx8IChyZXN1bHQuY2hyb21pdW0gJiYgcmVzdWx0LnZlcnNpb24gPCAyMClcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmVzdWx0LmMgPSB0XHJcbiAgICAgICAgfSBlbHNlIHJlc3VsdC54ID0gdFxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGJvd3NlciA9IGRldGVjdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyA/IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgJycgOiAnJylcclxuXHJcbiAgICBib3dzZXIudGVzdCA9IGZ1bmN0aW9uIChicm93c2VyTGlzdCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnJvd3Nlckxpc3QubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIGJyb3dzZXJJdGVtID0gYnJvd3Nlckxpc3RbaV07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnJvd3Nlckl0ZW0gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnJvd3Nlckl0ZW0gaW4gYm93c2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHZlcnNpb24gcHJlY2lzaW9ucyBjb3VudFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAgIGdldFZlcnNpb25QcmVjaXNpb24oXCIxLjEwLjNcIikgLy8gM1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gdmVyc2lvblxyXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRWZXJzaW9uUHJlY2lzaW9uKHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdmVyc2lvbi5zcGxpdChcIi5cIikubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXJyYXk6Om1hcCBwb2x5ZmlsbFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge0FycmF5fSBhcnJcclxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBpdGVyYXRvclxyXG4gICAgICogQHJldHVybiB7QXJyYXl9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIG1hcChhcnIsIGl0ZXJhdG9yKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdLCBpO1xyXG4gICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUubWFwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYXJyLCBpdGVyYXRvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlcmF0b3IoYXJyW2ldKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgYnJvd3NlciB2ZXJzaW9uIHdlaWdodFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAgIGNvbXBhcmVWZXJzaW9ucyhbJzEuMTAuMi4xJywgICcxLjguMi4xLjkwJ10pICAgIC8vIDFcclxuICAgICAqICAgY29tcGFyZVZlcnNpb25zKFsnMS4wMTAuMi4xJywgJzEuMDkuMi4xLjkwJ10pOyAgLy8gMVxyXG4gICAgICogICBjb21wYXJlVmVyc2lvbnMoWycxLjEwLjIuMScsICAnMS4xMC4yLjEnXSk7ICAgICAvLyAwXHJcbiAgICAgKiAgIGNvbXBhcmVWZXJzaW9ucyhbJzEuMTAuMi4xJywgICcxLjA4MDAuMiddKTsgICAgIC8vIC0xXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7QXJyYXk8U3RyaW5nPn0gdmVyc2lvbnMgdmVyc2lvbnMgdG8gY29tcGFyZVxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBjb21wYXJpc29uIHJlc3VsdFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjb21wYXJlVmVyc2lvbnModmVyc2lvbnMpIHtcclxuICAgICAgICAvLyAxKSBnZXQgY29tbW9uIHByZWNpc2lvbiBmb3IgYm90aCB2ZXJzaW9ucywgZm9yIGV4YW1wbGUgZm9yIFwiMTAuMFwiIGFuZCBcIjlcIiBpdCBzaG91bGQgYmUgMlxyXG4gICAgICAgIHZhciBwcmVjaXNpb24gPSBNYXRoLm1heChnZXRWZXJzaW9uUHJlY2lzaW9uKHZlcnNpb25zWzBdKSwgZ2V0VmVyc2lvblByZWNpc2lvbih2ZXJzaW9uc1sxXSkpO1xyXG4gICAgICAgIHZhciBjaHVua3MgPSBtYXAodmVyc2lvbnMsIGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IHByZWNpc2lvbiAtIGdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbik7XHJcblxyXG4gICAgICAgICAgICAvLyAyKSBcIjlcIiAtPiBcIjkuMFwiIChmb3IgcHJlY2lzaW9uID0gMilcclxuICAgICAgICAgICAgdmVyc2lvbiA9IHZlcnNpb24gKyBuZXcgQXJyYXkoZGVsdGEgKyAxKS5qb2luKFwiLjBcIik7XHJcblxyXG4gICAgICAgICAgICAvLyAzKSBcIjkuMFwiIC0+IFtcIjAwMDAwMDAwMFwiXCIsIFwiMDAwMDAwMDA5XCJdXHJcbiAgICAgICAgICAgIHJldHVybiBtYXAodmVyc2lvbi5zcGxpdChcIi5cIiksIGZ1bmN0aW9uIChjaHVuaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBcnJheSgyMCAtIGNodW5rLmxlbmd0aCkuam9pbihcIjBcIikgKyBjaHVuaztcclxuICAgICAgICAgICAgfSkucmV2ZXJzZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBpdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgYnkgcmV2ZXJzZWQgY2h1bmtzIGFycmF5XHJcbiAgICAgICAgd2hpbGUgKC0tcHJlY2lzaW9uID49IDApIHtcclxuICAgICAgICAgICAgLy8gNCkgY29tcGFyZTogXCIwMDAwMDAwMDlcIiA+IFwiMDAwMDAwMDEwXCIgPSBmYWxzZSAoYnV0IFwiOVwiID4gXCIxMFwiID0gdHJ1ZSlcclxuICAgICAgICAgICAgaWYgKGNodW5rc1swXVtwcmVjaXNpb25dID4gY2h1bmtzWzFdW3ByZWNpc2lvbl0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNodW5rc1swXVtwcmVjaXNpb25dID09PSBjaHVua3NbMV1bcHJlY2lzaW9uXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZWNpc2lvbiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbCB2ZXJzaW9uIGNodW5rcyBhcmUgc2FtZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgYnJvd3NlciBpcyB1bnN1cHBvcnRlZFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAgIGJvd3Nlci5pc1Vuc3VwcG9ydGVkQnJvd3Nlcih7XHJcbiAgICAgKiAgICAgbXNpZTogXCIxMFwiLFxyXG4gICAgICogICAgIGZpcmVmb3g6IFwiMjNcIixcclxuICAgICAqICAgICBjaHJvbWU6IFwiMjlcIixcclxuICAgICAqICAgICBzYWZhcmk6IFwiNS4xXCIsXHJcbiAgICAgKiAgICAgb3BlcmE6IFwiMTZcIixcclxuICAgICAqICAgICBwaGFudG9tOiBcIjUzNFwiXHJcbiAgICAgKiAgIH0pO1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge09iamVjdH0gIG1pblZlcnNpb25zIG1hcCBvZiBtaW5pbWFsIHZlcnNpb24gdG8gYnJvd3NlclxyXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gW3N0cmljdE1vZGUgPSBmYWxzZV0gZmxhZyB0byByZXR1cm4gZmFsc2UgaWYgYnJvd3NlciB3YXNuJ3QgZm91bmQgaW4gbWFwXHJcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBbdWFdIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBpc1Vuc3VwcG9ydGVkQnJvd3NlcihtaW5WZXJzaW9ucywgc3RyaWN0TW9kZSwgdWEpIHtcclxuICAgICAgICB2YXIgX2Jvd3NlciA9IGJvd3NlcjtcclxuXHJcbiAgICAgICAgLy8gbWFrZSBzdHJpY3RNb2RlIHBhcmFtIG9wdGlvbmFsIHdpdGggdWEgcGFyYW0gdXNhZ2VcclxuICAgICAgICBpZiAodHlwZW9mIHN0cmljdE1vZGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHVhID0gc3RyaWN0TW9kZTtcclxuICAgICAgICAgICAgc3RyaWN0TW9kZSA9IHZvaWQgKDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN0cmljdE1vZGUgPT09IHZvaWQgKDApKSB7XHJcbiAgICAgICAgICAgIHN0cmljdE1vZGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVhKSB7XHJcbiAgICAgICAgICAgIF9ib3dzZXIgPSBkZXRlY3QodWEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHZlcnNpb24gPSBcIlwiICsgX2Jvd3Nlci52ZXJzaW9uO1xyXG4gICAgICAgIGZvciAodmFyIGJyb3dzZXIgaW4gbWluVmVyc2lvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG1pblZlcnNpb25zLmhhc093blByb3BlcnR5KGJyb3dzZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2Jvd3Nlclticm93c2VyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluVmVyc2lvbnNbYnJvd3Nlcl0gIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQnJvd3NlciB2ZXJzaW9uIGluIHRoZSBtaW5WZXJzaW9uIG1hcCBzaG91bGQgYmUgYSBzdHJpbmc6ICcgKyBicm93c2VyICsgJzogJyArIFN0cmluZyhtaW5WZXJzaW9ucykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYnJvd3NlciB2ZXJzaW9uIGFuZCBtaW4gc3VwcG9ydGVkIHZlcnNpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhcmVWZXJzaW9ucyhbdmVyc2lvbiwgbWluVmVyc2lvbnNbYnJvd3Nlcl1dKSA8IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzdHJpY3RNb2RlOyAvLyBub3QgZm91bmRcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGJyb3dzZXIgaXMgc3VwcG9ydGVkXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBtaW5WZXJzaW9ucyBtYXAgb2YgbWluaW1hbCB2ZXJzaW9uIHRvIGJyb3dzZXJcclxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IFtzdHJpY3RNb2RlID0gZmFsc2VdIGZsYWcgdG8gcmV0dXJuIGZhbHNlIGlmIGJyb3dzZXIgd2Fzbid0IGZvdW5kIGluIG1hcFxyXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgW3VhXSB1c2VyIGFnZW50IHN0cmluZ1xyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY2hlY2sobWluVmVyc2lvbnMsIHN0cmljdE1vZGUsIHVhKSB7XHJcbiAgICAgICAgcmV0dXJuICFpc1Vuc3VwcG9ydGVkQnJvd3NlcihtaW5WZXJzaW9ucywgc3RyaWN0TW9kZSwgdWEpO1xyXG4gICAgfVxyXG5cclxuICAgIGJvd3Nlci5pc1Vuc3VwcG9ydGVkQnJvd3NlciA9IGlzVW5zdXBwb3J0ZWRCcm93c2VyO1xyXG4gICAgYm93c2VyLmNvbXBhcmVWZXJzaW9ucyA9IGNvbXBhcmVWZXJzaW9ucztcclxuICAgIGJvd3Nlci5jaGVjayA9IGNoZWNrO1xyXG5cclxuICAgIC8qXHJcbiAgICAgKiBTZXQgb3VyIGRldGVjdCBtZXRob2QgdG8gdGhlIG1haW4gYm93c2VyIG9iamVjdCBzbyB3ZSBjYW5cclxuICAgICAqIHJldXNlIGl0IHRvIHRlc3Qgb3RoZXIgdXNlciBhZ2VudHMuXHJcbiAgICAgKiBUaGlzIGlzIG5lZWRlZCB0byBpbXBsZW1lbnQgZnV0dXJlIHRlc3RzLlxyXG4gICAgICovXHJcbiAgICBib3dzZXIuX2RldGVjdCA9IGRldGVjdDtcclxuXHJcbiAgICAvKlxyXG4gICAgICogU2V0IG91ciBkZXRlY3QgcHVibGljIG1ldGhvZCB0byB0aGUgbWFpbiBib3dzZXIgb2JqZWN0XHJcbiAgICAgKiBUaGlzIGlzIG5lZWRlZCB0byBpbXBsZW1lbnQgYm93c2VyIGluIHNlcnZlciBzaWRlXHJcbiAgICAgKi9cclxuICAgIGJvd3Nlci5kZXRlY3QgPSBkZXRlY3Q7XHJcbiAgICByZXR1cm4gYm93c2VyXHJcbn0pOyIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG5hcHAuc2l0ZU5hbWUgPSAnbGF5b3V0cic7XHJcblxyXG5hcHAuaHRtbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2h0bWwnKTtcclxuYXBwLmhlYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkJyk7XHJcbmFwcC5ib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG5hcHAubWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21haW4nKTtcclxuYXBwLmNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCA+IGRpdicpO1xyXG5hcHAuaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJyk7XHJcbmFwcC5mb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb290ZXInKTtcclxuYXBwLmxlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGVmdCcpO1xyXG5hcHAucmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmlnaHQnKTtcclxuYXBwLmxvYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9hZGluZycpO1xyXG5hcHAub3ZlcmZsb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjb3ZlcmZsb3cnKTtcclxuYXBwLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsJyk7XHJcbmFwcC50aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aXRsZScpO1xyXG5hcHAuYXV0aGVudGljYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXV0aGVudGljYXRpb24nKTtcclxuYXBwLnVuYXV0aGVudGljYXRlZCA9IGFwcC5hdXRoZW50aWNhdGlvbi5xdWVyeVNlbGVjdG9yKCcudW5hdXRoZW50aWNhdGVkJyk7XHJcbmFwcC5hdXRoZW50aWNhdGVkID0gYXBwLmF1dGhlbnRpY2F0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5hdXRoZW50aWNhdGVkJyk7XHJcbmFwcC51c2VyID0gYXBwLmF1dGhlbnRpY2F0aW9uLnF1ZXJ5U2VsZWN0b3IoJ2RpdiA+IC51c2VyJyk7XHJcbmFwcC51c2VyTGlua3MgPSBhcHAudXNlci5xdWVyeVNlbGVjdG9yKCcubGlua3MnKTtcclxuXHJcbmFwcC5jb29raWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29va2llJyk7XHJcbmFwcC5Gb2N1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb2N1cycpO1xyXG5cclxuYXBwLnRocm90dGxlSW50ZXJ2YWwgPSA1MDtcclxuYXBwLmRlYm91bmNlSW50ZXJ2YWwgPSA1MDtcclxuXHJcbmFwcC50cmFuc2l0aW9uVGltZSA9IDQwMDtcclxuYXBwLmZhZGVPdXRUaW1lID0gNTAwO1xyXG5hcHAuaHRtbE92ZXJmbG93RW5hYmxlZCA9IHRydWU7XHJcbmFwcC5zbWFsbEJyZWFrcG9pbnQgPSA3MzI7XHJcbmFwcC5zY3JvbGxiYXJXaWR0aCA9IDA7XHJcbmFwcC5sb2FkaW5nQ291bnQgPSAwO1xyXG5hcHAuZG9jdW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbmFwcC5mdWxsc2NyZWVuID0gZmFsc2U7XHJcbmFwcC5hamF4ID0gJ2Rpc3QvYWpheC8nO1xyXG5cclxuYXBwLm5hdmlnYXRpb24gPSBbXTtcclxuXHJcbmJvd3Nlci5kZXNrdG9wID0gIWJvd3Nlci5tb2JpbGUgJiYgIWJvd3Nlci50YWJsZXQ7IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbmFwcC5ndWlkID0gKCkgPT4ge1xyXG4gICAgbGV0IHM0ID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwKVxyXG4gICAgICAgICAgICAudG9TdHJpbmcoMTYpXHJcbiAgICAgICAgICAgIC5zdWJzdHJpbmcoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArXHJcbiAgICAgICAgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTtcclxufTtcclxuXHJcbmFwcC5pc1NtYWxsQnJlYWtwb2ludCA9ICgpID0+IHtcclxuICAgIHJldHVybiAkKHdpbmRvdykub3V0ZXJXaWR0aCgpIDwgNzMyIHx8IGFwcC5pc0FzaWRlTGVmdCgpICYmICFhcHAuaXNBc2lkZUxlZnRTaHJpbmsoKSB8fCBhcHAuaXNBc2lkZVJpZ2h0KCkgJiYgIWFwcC5pc0FzaWRlUmlnaHRTaHJpbmsoKTtcclxufTtcclxuXHJcbmFwcC5pc0FzaWRlID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGFwcC5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKS5sZW5ndGg7XHJcbn07XHJcblxyXG5hcHAuaXNBc2lkZUxlZnQgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuYXR0cignZGF0YS1hc2lkZScpID09PSAnbGVmdCc7XHJcbn07XHJcblxyXG5hcHAuaXNBc2lkZVJpZ2h0ID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGFwcC5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKSA9PT0gJ3JpZ2h0JztcclxufTtcclxuXHJcbmFwcC5pc0FzaWRlTGVmdFNocmluayA9ICgpID0+IHtcclxuICAgIHJldHVybiBhcHAuaHRtbC5oYXNDbGFzcygnbGVmdC1zaHJpbmsnKSAmJiBhcHAuaXNBc2lkZUxlZnQoKTtcclxufTtcclxuXHJcbmFwcC5pc0FzaWRlUmlnaHRTaHJpbmsgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuaGFzQ2xhc3MoJ3JpZ2h0LXNocmluaycpICYmIGFwcC5pc0FzaWRlUmlnaHQoKTtcclxufTtcclxuXHJcbmFwcC5pc0FzaWRlTGVmdENsb3NlT25DbGlja091dHNpZGUgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuaGFzQ2xhc3MoJ2Nsb3NlLWxlZnQtY2xpY2stb3V0c2lkZScpO1xyXG59O1xyXG5hcHAuaXNBc2lkZVJpZ2h0Q2xvc2VPbkNsaWNrT3V0c2lkZSA9ICgpID0+IHtcclxuICAgIHJldHVybiBhcHAuaHRtbC5oYXNDbGFzcygnY2xvc2UtcmlnaHQtY2xpY2stb3V0c2lkZScpO1xyXG59O1xyXG5cclxuYXBwLmlzTW9kYWwgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuaGFzQ2xhc3MoJ21vZGFsJyk7XHJcbn07XHJcblxyXG5hcHAuaXNNb2RhbEZvcm0gPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuYXR0cignZGF0YS1tb2RhbCcpID09PSAnZm9ybSc7XHJcbn07XHJcblxyXG5hcHAuaXNNb2RhbEltYWdlID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGFwcC5odG1sLmF0dHIoJ2RhdGEtbW9kYWwnKSA9PT0gJ2ltYWdlJztcclxufTtcclxuXHJcbmFwcC5pc0ZvY3VzID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGFwcC5odG1sLmhhc0NsYXNzKCdmb2N1cycpICYmIGFwcC5odG1sLmF0dHIoJ2RhdGEtZm9jdXMnKSA9PT0gJ3RydWUnO1xyXG59XHJcblxyXG5hcHAuaXNUVFMgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuaGFzQ2xhc3MoJ3R0cycpO1xyXG59XHJcblxyXG5hcHAuaXNUVFNFbmFibGVkID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGFwcC5odG1sLmhhc0NsYXNzKCd0dHMnKSAmJiBhcHAuaHRtbC5hdHRyKCdkYXRhLXR0cycpID09PSAndHJ1ZSc7XHJcbn1cclxuYXBwLmlzQXV0aGVudGljYXRpb24gPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuYXR0cignZGF0YS1hdXRoZW50aWNhdGlvbicpICE9PSAnJztcclxufTtcclxuXHJcbmFwcC5pc0xvYWRpbmcgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuaGFzQ2xhc3MoJ2xvYWRpbmcnKTtcclxufTtcclxuXHJcbmFwcC5pc1Njcm9sbERpc2FibGVkID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGFwcC5odG1sLmhhc0NsYXNzKCdzY3JvbGwtZGlzYWJsZWQnKTtcclxufTtcclxuXHJcbmFwcC5pc0Nsb3NlTGVmdFBhZ2VDaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuaGFzQ2xhc3MoJ2Nsb3NlLWxlZnQtcGFnZS1jaGFuZ2UnKTtcclxufTtcclxuXHJcbmFwcC5pc1RyYW5zaXRpb25zID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGFwcC5odG1sLmhhc0NsYXNzKCd0cmFuc2l0aW9ucycpO1xyXG59O1xyXG5cclxuYXBwLmlzU3dpcGUgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gYXBwLmh0bWwuaGFzQ2xhc3MoJ3N3aXBlJyk7XHJcbn07XHJcblxyXG5hcHAuaXNTaXRlTG9hZGVkID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIGFwcC5odG1sLmhhc0NsYXNzKCdzaXRlLWxvYWRlZCcpO1xyXG59O1xyXG5cclxuYXBwLmNhcGl0YWxpemUgPSAoc3RyaW5nKSA9PiB7XHJcbiAgICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xyXG59O1xyXG5cclxuYXBwLnNjcm9sbFRvcCA9ICgpID0+IHtcclxuICAgIHJldHVybiBNYXRoLm1heChhcHAuYm9keS5zY3JvbGxUb3AoKSwgYXBwLm1haW4uc2Nyb2xsVG9wKCksIGFwcC5odG1sLnNjcm9sbFRvcCgpKTtcclxufTtcclxuXHJcbmFwcC50cnlQYXJzZUludCA9IChzdHIsIGRlZmF1bHRWYWx1ZSkgPT4ge1xyXG4gICAgbGV0IHJldFZhbHVlID0gZGVmYXVsdFZhbHVlO1xyXG4gICAgaWYgKHN0ciAhPT0gdW5kZWZpbmVkICYmIHN0ciAhPT0gbnVsbCAmJiBzdHIubGVuZ3RoID4gMCAmJiAhaXNOYU4oc3RyKSkge1xyXG4gICAgICAgIHJldFZhbHVlID0gcGFyc2VJbnQoc3RyKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXRWYWx1ZTtcclxufTtcclxuXHJcbmFwcC50cnlQYXJzZUZsb2F0ID0gKHN0ciwgZGVmYXVsdFZhbHVlKSA9PiB7XHJcbiAgICBsZXQgcmV0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICBpZiAoc3RyICE9PSB1bmRlZmluZWQgJiYgc3RyICE9PSBudWxsICYmIHN0ci5sZW5ndGggPiAwICYmICFpc05hTihzdHIpKSB7XHJcbiAgICAgICAgcmV0VmFsdWUgPSBwYXJzZUZsb2F0KHN0cik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0VmFsdWU7XHJcbn07XHJcblxyXG5hcHAudHJ5UGFyc2VKU09OID0gKHN0ciwgZGVmYXVsdFZhbHVlKSA9PiB7XHJcbiAgICBsZXQgcmV0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldFZhbHVlID0gSlNPTi5wYXJzZShzdHIpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldFZhbHVlO1xyXG59O1xyXG5cclxuYXBwLmlzVHJ1ZSA9IChzdHIpID0+IHtcclxuICAgIHJldHVybiBzdHIgPT09ICd0cnVlJztcclxufTtcclxuXHJcblN0cmluZy5wcm90b3R5cGUucmVwbGFjZUFsbCA9IGZ1bmN0aW9uIChzZWFyY2gsIHJlcGxhY2VtZW50KSB7XHJcbiAgICB2YXIgdGFyZ2V0ID0gdGhpcztcclxuICAgIHJldHVybiB0YXJnZXQucmVwbGFjZShuZXcgUmVnRXhwKHNlYXJjaCwgJ2cnKSwgcmVwbGFjZW1lbnQpO1xyXG59OyIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG4kKCgpID0+IHtcclxuICAgIGlmIChib3dzZXIubXNlZGdlKSB7XHJcbiAgICAgICAgYXBwLmh0bWwuY2xhc3NMaXN0LmFkZCgnbXNlZGdlJyk7IC8vIHVzZWQgYnkgYXBwLmVuYWJsZVNjcm9sbCgpXHJcbiAgICB9IGVsc2UgaWYgKGJvd3Nlci5tc2llKSB7XHJcbiAgICAgICAgYXBwLmh0bWwuY2xhc3NMaXN0LmFkZCgnbXNpZScpOyAvLyBub3QgY3VycmVudGx5IHVzZWQgZm9yIGFueXRoaW5nXHJcbiAgICB9XHJcbiAgICBpZiAoYm93c2VyLm1vYmlsZSkge1xyXG4gICAgICAgIGFwcC5odG1sLmNsYXNzTGlzdC5hZGQoJ21vYmlsZScpOyAvLyBkaXNhYmxlcyBmaXhlZCBmb290ZXJcclxuICAgIH0gZWxzZSBpZiAoYm93c2VyLnRhYmxldCkge1xyXG4gICAgICAgIGFwcC5odG1sLmNsYXNzTGlzdC5hZGQoJ3RhYmxldCcpOyAvLyBkb2VzIG5vdGhpbmcgY3VycmVudGx5XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwcC5odG1sLmNsYXNzTGlzdC5hZGQoJ2Rlc2t0b3AnKTsgLy8gZW5hYmxlcyBob3ZlciBlZmZlY3RzXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJvd3Nlci5hbmRyb2lkKSB7XHJcbiAgICAgICAgYXBwLmh0bWwuY2xhc3NMaXN0LmFkZCgnYW5kcm9pZCcpOyAvLyB1c2VkIGJ5IG1vZGFsXHJcbiAgICB9IGVsc2UgaWYgKGJvd3Nlci5pb3MpIHtcclxuICAgICAgICBhcHAuaHRtbC5jbGFzc0xpc3QuYWRkKCdpb3MnKTsgLy8gdXNlZCB0byBhcHBseSBmb2N1c1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChib3dzZXIubXNpZSB8fCBib3dzZXIubXNlZGdlKSB7XHJcbiAgICAgICAgLy8gZGlzYWJsZSBzbW9vdGggc2Nyb2xsaW5nLCBzaW5jZSBpdCBjYXVzZXMgZWxlbWVudCBqdW1waW5nL2xhZ2dpbmcgb24gc2Nyb2xsXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjk0MTY0NDgvaG93LXRvLWRpc2FibGUtc21vb3RoLXNjcm9sbGluZy1pbi1pZTExXHJcbiAgICAgICAgYXBwLmJvZHkub24oXCJtb3VzZXdoZWVsXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKCFhcHAuaXNNb2RhbCgpICYmIGV2ZW50LmN0cmxLZXkgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGxldCBhc2lkZSA9IHRhcmdldC5jbG9zZXN0KCdhc2lkZSA+IC5jb250ZW50JykgfHwgdGFyZ2V0LnBhcmVudHMoJ2FzaWRlIC5jb250ZW50JyksXHJcbiAgICAgICAgICAgICAgICAgICAgd2hlZWxEZWx0YSA9IGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY3JvbGxQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIGlmIChhc2lkZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2Nyb2xsUG9zaXRpb24gPSBhc2lkZS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBhc2lkZS5zY3JvbGxUb3AoY3VycmVudFNjcm9sbFBvc2l0aW9uIC0gd2hlZWxEZWx0YSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgY3VycmVudFNjcm9sbFBvc2l0aW9uIC0gd2hlZWxEZWx0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gYXQgc29tZSB6b29tIGxldmVscyBlZGdlL2llIG1ha2VzICQod2luZG93KSBoZWlnaGVyIHRoYW4gJChkb2N1bWVudClcclxuICAgICAgICAvLyBpdCBjYXVzZXMgYSBnYXAgYmV0d2VlbiBmb290ZXIgYW5kIHRoZSBib3R0b20gb2YgJCh3aW5kb3cpLlxyXG4gICAgICAgICQod2luZG93KS5zY3JvbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2Nyb2xsVG9wID0gc2VsZi5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICBpZiAoc2Nyb2xsVG9wICsgJCh3aW5kb3cpLmhlaWdodCgpID49ICQoZG9jdW1lbnQpLmhlaWdodCgpKSB7XHJcbiAgICAgICAgICAgICAgICBhcHAuaHRtbC5jbGFzc0xpc3QuYWRkKCdzdWJwaXhlbCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXBwLmh0bWwuY2xhc3NMaXN0LnJlbW92ZSgnc3VicGl4ZWwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuJCgoKSA9PiB7XHJcbiAgICAkLnZhbGlkYXRvci5zZXREZWZhdWx0cyh7XHJcbiAgICAgICAgc3VibWl0SGFuZGxlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBhbGVydChcIkZha2Ugc3VibWl0dGVkIVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkLnZhbGlkYXRvci5hZGRNZXRob2QoJ3Bhc3N3b3JkX3JlZ2V4JywgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIC9eKD89LipbYS16w6bDuMOlXSkoPz0uKltBLVrDhsOYw4VdKSg/PS4qXFxkKS57OCx9JC8udGVzdCh2YWx1ZSk7XHJcbiAgICB9LCAnUGFzc3dvcmQgbXVzdCBjb250YWluIGF0IGxlYXN0IGVpZ2h0IGNoYXJhY3RlcnMsIG9uZSB1cHBlcmNhc2UgbGV0dGVyLCBvbmUgbG93ZXJjYXNlIGxldHRlciBhbmQgb25lIG51bWJlcicpO1xyXG59KTtcclxuXHJcbmFwcC5hZGRWYWxpZGF0aW9uID0gKGZvcm0sIHJ1bGVzLCBtZXNzYWdlcykgPT4ge1xyXG4gICAgJChmb3JtKS52YWxpZGF0ZSh7XHJcbiAgICAgICAgcnVsZXM6IHJ1bGVzLFxyXG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcyxcclxuICAgICAgICBlcnJvckVsZW1lbnQ6IFwiZW1cIixcclxuICAgICAgICBlcnJvclBsYWNlbWVudDogKGVycm9yLCBlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudCgpO1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcygnY2hlY2tib3gnKSB8fCBlbGVtZW50Lmhhc0NsYXNzKCdyYWRpbycpIHx8IGVsZW1lbnQuaGFzQ2xhc3MoJ2lucHV0LWdyb3VwJykpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kKGVycm9yKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhpZ2hsaWdodDogKGVsZW1lbnQsIGVycm9yQ2xhc3MsIHZhbGlkQ2xhc3MpID0+IHtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5wYXJlbnRzKFwiLmZvcm0tZ3JvdXBcIikuYWRkQ2xhc3MoXCJ0aGVtZS1kYW5nZXJcIik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1bmhpZ2hsaWdodDogKGVsZW1lbnQsIGVycm9yQ2xhc3MsIHZhbGlkQ2xhc3MpID0+IHtcclxuICAgICAgICAgICAgJChlbGVtZW50KS5wYXJlbnRzKFwiLmZvcm0tZ3JvdXBcIikucmVtb3ZlQ2xhc3MoXCJ0aGVtZS1kYW5nZXJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKGZvcm0pLm9uKCdjaGFuZ2UnLCAnaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QnLCAoZSkgPT4ge1xyXG4gICAgICAgICQoZS5jdXJyZW50VGFyZ2V0KS52YWxpZCgpO1xyXG4gICAgfSk7XHJcbn07IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbiQuYWpheFNldHVwKHtcclxuICAgIGNhY2hlOiB0cnVlXHJcbn0pO1xyXG5cclxuYXBwLmZvb3Rlci5pbm5lckhUTUwgPSAnPHA+XFx1MDBBOSAnICsgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICsgJyBGcmVkZXJpayBOaWVsc2VuPC9wPic7XHJcblxyXG4kKCgpID0+IHtcclxuXHJcbiAgICAvL2FwcC5zZXRIdG1sU2Nyb2xsKCk7IC8vIG91dGNvbW1lbnQgaWYgaXQgY2FuIGJlIGRpc2FibGVkIGF0IGZpcnN0IHBhZ2UgbG9hZFxyXG5cclxuICAgICQuZ2V0KGFwcC5ob3N0ICsgYXBwLmFqYXggKyAnc3ZnL2Jhc2UuaHRtbCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgJChkYXRhKS5wcmVwZW5kVG8oYXBwLmJvZHkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGJvd3Nlci5hbmRyb2lkKSB7XHJcbiAgICAgICAgLy8gYW5kcm9pZCBkb2Vzbid0IGhhbmRsZSB2aCBjb3JyZWN0bHksIHNvIGl0IGdldHMgY29udmVydGVkIHRvIHB4XHJcbiAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhcHAuaXNNb2RhbCgpICYmIGFwcC5pc01vZGFsSW1hZ2UoKSkge1xyXG4gICAgICAgICAgICAgICAgYXBwLm1vZGFsLmZpbmQoJyNtb2RhbC1pbWcnKS5jc3MoJ21heC1oZWlnaHQnLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuJCh3aW5kb3cpLmNsaWNrKChlKSA9PiB7XHJcbiAgICBsZXQgdGFyZ2V0ID0gJChlLnRhcmdldCksXHJcbiAgICAgICAgbW9kYWwgPSB0YXJnZXQuY2xvc2VzdChhcHAubW9kYWxbMF0pO1xyXG5cclxuICAgIGlmICghYXBwLmlzTG9hZGluZygpICYmICFhcHAuaXNGb2N1cygpKSB7XHJcbiAgICAgICAgaWYgKGJvd3Nlci5pb3MpIHtcclxuICAgICAgICAgICAgLy8gaW9zIGJyb3dzZXJzIGRvZXNuJ3QgYXBwbHkgOmZvY3VzIHRvIGJ1dHRvbnMgaW4gbWFueSBjYXNlcyxcclxuICAgICAgICAgICAgLy8gdGhpcyBmb3JjZXMgOmZvY3VzIHRvIGJlIGFwcGxpZWQgY29ycmVjdGx5LlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LnBhcmVudHMoJ2J1dHRvbicpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudHMoJ2J1dHRvbicpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChhcHAuaXNBdXRoZW50aWNhdGlvbigpICYmICF0YXJnZXQuY2xvc2VzdCgnI2F1dGhlbnRpY2F0aW9uJykubGVuZ3RoICYmICF0YXJnZXQuY2xvc2VzdCgnI21vZGFsJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGFwcC5odG1sLmF0dHIoJ2RhdGEtYXV0aGVudGljYXRpb24nLCAnJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChtb2RhbC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbGV0IGltYWdlID0gYXBwLmlzTW9kYWxJbWFnZSgpICYmICF0YXJnZXQuY2xvc2VzdCgnI21vZGFsLXRvZ2dsZScpLmxlbmd0aCAmJiAhdGFyZ2V0LmNsb3Nlc3QoJyNtb2RhbC10aXRsZScpLmxlbmd0aCAmJiAhdGFyZ2V0LmNsb3Nlc3QoJyNtb2RhbC1kZXNjcmlwdGlvbicpLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGZvcm0gPSBhcHAuaXNNb2RhbEZvcm0oKSAmJiAhdGFyZ2V0LmNsb3Nlc3QoJyNtb2RhbCA+IGRpdiA+IGRpdiA+IGRpdicpLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKGltYWdlIHx8IGZvcm0gfHwgdGFyZ2V0LmNsb3Nlc3QoJyNtb2RhbC1jbG9zZScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgYXBwLmNsb3NlTW9kYWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBpc1NtYWxsQnJlYWtwb2ludCA9IGFwcC5pc1NtYWxsQnJlYWtwb2ludCgpLFxyXG4gICAgICAgICAgICAgICAgbGVmdCA9IGFwcC5pc0FzaWRlTGVmdCgpICYmIChhcHAuaXNBc2lkZUxlZnRDbG9zZU9uQ2xpY2tPdXRzaWRlKCkgfHwgaXNTbWFsbEJyZWFrcG9pbnQpICYmICF0YXJnZXQuY2xvc2VzdChcIiNsZWZ0XCIpLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gYXBwLmlzQXNpZGVSaWdodCgpICYmIChhcHAuaXNBc2lkZVJpZ2h0Q2xvc2VPbkNsaWNrT3V0c2lkZSgpIHx8IGlzU21hbGxCcmVha3BvaW50KSAmJiAhdGFyZ2V0LmNsb3Nlc3QoXCIjcmlnaHRcIikubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgbm90VGFyZ2V0ID0gIXRhcmdldC5jbG9zZXN0KFwiLmFzaWRlXCIpLmxlbmd0aCAmJiAhdGFyZ2V0LmNsb3Nlc3QoJy5wb3B1cCcpLmxlbmd0aCAmJiAhdGFyZ2V0LmNsb3Nlc3QoJyNjb29raWUnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGlmICgobGVmdCB8fCByaWdodCkgJiYgbm90VGFyZ2V0ICYmICFhcHAuaXNMb2FkaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIGFwcC5lbmFibGVTY3JvbGwoKTtcclxuICAgICAgICAgICAgICAgIGFwcC50b2dnbGVBc2lkZSh1bmRlZmluZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbmFwcC5jb250ZW50TG9hZGVkID0gKGVsZW1lbnQpID0+IHtcclxuICAgIGFwcC5jaGVja1Jlc3BvbnNpdmVCYWNrZ3JvdW5kKGVsZW1lbnQuZmluZCgnLnJiJykpO1xyXG4gICAgYXBwLmNoZWNrTGF6eShlbGVtZW50LmZpbmQoJy5sYXp5JykpO1xyXG4gICAgYXBwLmNoZWNrQWNjb3JkaW9uKGVsZW1lbnQuZmluZCgnLmFjY29yZGlvbicpKTtcclxuICAgIGFwcC5jaGVja0Ryb3Bkb3duKGVsZW1lbnQuZmluZCgnc2VsZWN0LmRyb3Bkb3duJykpO1xyXG4gICAgYXBwLmNoZWNrVG9vbHRpcChlbGVtZW50LmZpbmQoJy50b29sdGlwJykpO1xyXG4gICAgYXBwLmNoZWNrQXNzaWdubWVudChlbGVtZW50LmZpbmQoJy5hc3NpZ25tZW50JykpO1xyXG4gICAgYXBwLmNoZWNrTWF0aChlbGVtZW50LmZpbmQoJy5tYXRoJykpO1xyXG4gICAgYXBwLmNoZWNrTWVkaWEoZWxlbWVudC5maW5kKCdhdWRpbywgdmlkZW8nKSk7XHJcbiAgICBhcHAuY2hlY2tNYXAoZWxlbWVudC5maW5kKCcubWFwJykpO1xyXG4gICAgYXBwLmNoZWNrRGF0YXRhYmxlKGVsZW1lbnQuZmluZCgnLmRhdGFUYWJsZScpKTtcclxuICAgIGFwcC5jaGVja1N3aXBlcihlbGVtZW50LmZpbmQoJy5zd2lwZXInKSk7XHJcbn1cclxuXHJcbmFwcC5wYWdlTG9hZGVkID0gKGluaXRpYWwpID0+IHtcclxuICAgIGFwcC5tYWluLmNzcygnb3ZlcmZsb3cnLCAnYXV0bycpO1xyXG4gICAgYXBwLm1haW4uc2Nyb2xsVG9wKDApO1xyXG4gICAgYXBwLm1haW4uY3NzKCdvdmVyZmxvdycsICcnKTtcclxuICAgIGFwcC5odG1sLmFuaW1hdGUoeyBzY3JvbGxUb3A6IDAgfSwgMCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBpZiAoIWluaXRpYWwgJiYgYXBwLmlzQ2xvc2VMZWZ0UGFnZUNoYW5nZSgpKSB7XHJcbiAgICAgICAgICAgIGFwcC50b2dnbGVBc2lkZSh1bmRlZmluZWQsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIDIwMCk7XHJcblxyXG4gICAgaWYgKGluaXRpYWwpIHtcclxuICAgICAgICBsZXQgYXdhaXRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGFwcC5mb250c0xvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChhd2FpdEludGVydmFsKTtcclxuICAgICAgICAgICAgICAgIGFwcC5oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgYXBwLmh0bWwuYWRkQ2xhc3MoJ3NpdGUtbG9hZGVkJyk7XHJcbiAgICAgICAgICAgICAgICBhcHAucmVzcG9uc2l2ZUhlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgYXBwLmNvbnRlbnRMb2FkZWQoYXBwLmNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzY3JvbGwgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2Nyb2xsXCIpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc2Nyb2xsICE9PSBudWxsICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmID09PSBzY3JvbGwuaHJlZikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5ib2R5LnNjcm9sbFRvcChhcHAuYm9keVswXS5zY3JvbGxIZWlnaHQgPj0gc2Nyb2xsLnNjcm9sbFRvcCA/IHNjcm9sbC5zY3JvbGxUb3AgOiBhcHAuYm9keVswXS5zY3JvbGxIZWlnaHQpOyAvLyBlZGdlLCBzYWZhcmlcclxuICAgICAgICAgICAgICAgICAgICBhcHAuaHRtbC5zY3JvbGxUb3AoYXBwLmh0bWxbMF0uc2Nyb2xsSGVpZ2h0ID49IHNjcm9sbC5zY3JvbGxUb3AgPyBzY3JvbGwuc2Nyb2xsVG9wIDogYXBwLmh0bWxbMF0uc2Nyb2xsSGVpZ2h0KTsgLy8gY2hyb21lLCBmaXJlZm94LCBpZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgYXBwLmF3YWl0SW50ZXJ2YWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhcHAuaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICBhcHAuY29udGVudExvYWRlZChhcHAuY29udGVudCk7XHJcbiAgICB9XHJcbn07IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxudmFyIGZ1bGxzY3JlZW5TY3JvbGxUb3A7XHJcblxyXG5hcHAucmVxdWVzdEZ1bGxTY3JlZW4gPSAoKSA9PiB7XHJcbiAgICBpZiAoIWFwcC5mdWxsc2NyZWVuICYmIGJvd3Nlci5kZXNrdG9wKSB7XHJcbiAgICAgICAgZnVsbHNjcmVlblNjcm9sbFRvcCA9IGFwcC5zY3JvbGxUb3AoKTtcclxuICAgICAgICBpZiAoYXBwLmRvY3VtZW50LnJlcXVlc3RGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgIGFwcC5kb2N1bWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhcHAuZG9jdW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICBhcHAuZG9jdW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhcHAuZG9jdW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgYXBwLmRvY3VtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFwcC5kb2N1bWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICBhcHAuZG9jdW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJywgZnVsbHNjcmVlbkNoYW5nZSwgZmFsc2UpO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3pmdWxsc2NyZWVuY2hhbmdlJywgZnVsbHNjcmVlbkNoYW5nZSwgZmFsc2UpO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmdWxsc2NyZWVuY2hhbmdlJywgZnVsbHNjcmVlbkNoYW5nZSwgZmFsc2UpO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdNU0Z1bGxzY3JlZW5DaGFuZ2UnLCBmdWxsc2NyZWVuQ2hhbmdlLCBmYWxzZSk7XHJcblxyXG5mdW5jdGlvbiBmdWxsc2NyZWVuQ2hhbmdlKGUpIHtcclxuICAgIGFwcC5mdWxsc2NyZWVuID0gIWFwcC5mdWxsc2NyZWVuO1xyXG4gICAgaWYgKCFhcHAuZnVsbHNjcmVlbiAmJiBib3dzZXIuZGVza3RvcCkge1xyXG4gICAgICAgIGlmIChhcHAuaXNNb2RhbCgpKSB7XHJcbiAgICAgICAgICAgIGFwcC5jbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFwcC5ib2R5LnNjcm9sbFRvcChmdWxsc2NyZWVuU2Nyb2xsVG9wKTtcclxuICAgICAgICBhcHAuaHRtbC5zY3JvbGxUb3AoZnVsbHNjcmVlblNjcm9sbFRvcCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5hcHAuZXhpdEZ1bGxTY3JlZW4gPSAoKSA9PiB7XHJcbiAgICBpZiAoYXBwLmZ1bGxzY3JlZW4gJiYgYm93c2VyLmRlc2t0b3ApIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4pIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC53ZWJraXRFeGl0RnVsbHNjcmVlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbmFwcC50b2dnbGVGdWxsU2NyZWVuID0gKGVsZW1lbnQpID0+IHtcclxuICAgIGlmIChhcHAuZnVsbHNjcmVlbilcclxuICAgICAgICBleGl0RnVsbFNjcmVlbigpO1xyXG4gICAgZWxzZVxyXG4gICAgICAgIHJlcXVlc3RGdWxsU2NyZWVuKGVsZW1lbnQpO1xyXG59OyIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG52YXIgc2Nyb2xsYmFyV2lkdGggPSAoKSA9PiB7XHJcbiAgICBhcHAuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsICc8ZGl2IGlkPVwic2Nyb2xsYmFyLXdpZHRoXCI+PC9kaXY+Jyk7XHJcbiAgICBsZXQgZWxlbWVudCA9IGFwcC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJyNzY3JvbGxiYXItd2lkdGgnKTtcclxuICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcclxuICAgIGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gJzEwMHB4JztcclxuICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMHB4JztcclxuICAgIGFwcC5zY3JvbGxiYXJXaWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGggLSBlbGVtZW50LmNsaWVudFdpZHRoO1xyXG4gICAgZWxlbWVudC5yZW1vdmUoKTtcclxufTtcclxuXHJcbmFwcC5kaXNhYmxlU2Nyb2xsID0gKCkgPT4ge1xyXG4gICAgaWYgKGFwcC5odG1sT3ZlcmZsb3dFbmFibGVkKSB7XHJcbiAgICAgICAgYXBwLmh0bWxPdmVyZmxvd0VuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAoYXBwLmlzTW9kYWwoKSkge1xyXG4gICAgICAgICAgICBhcHAuY2hlY2tNb2RhbCgpO1xyXG4gICAgICAgICAgICBhcHAubW9kYWwuZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHNjcm9sbFRvcCA9IGFwcC5zY3JvbGxUb3AoKTtcclxuICAgICAgICBhcHAuaHRtbC5hZGRDbGFzcygnc2Nyb2xsLWRpc2FibGVkJyk7XHJcbiAgICAgICAgYXBwLmJvZHkuc2Nyb2xsVG9wKHNjcm9sbFRvcCk7XHJcbiAgICAgICAgYXBwLm1haW4uc2Nyb2xsVG9wKHNjcm9sbFRvcCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5hcHAuZW5hYmxlU2Nyb2xsID0gKCkgPT4ge1xyXG4gICAgaWYgKCFhcHAuaHRtbE92ZXJmbG93RW5hYmxlZCkge1xyXG4gICAgICAgIGFwcC5odG1sT3ZlcmZsb3dFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoYXBwLmlzU2l0ZUxvYWRlZCgpKSB7XHJcbiAgICAgICAgICAgIGxldCBzY3JvbGxUb3AgPSBhcHAuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgIGFwcC5odG1sLnJlbW92ZUNsYXNzKCdzY3JvbGwtZGlzYWJsZWQgbW9kYWwnKTtcclxuICAgICAgICAgICAgYXBwLm1haW4uZm9jdXMoKTtcclxuICAgICAgICAgICAgYXBwLmJvZHkuc2Nyb2xsVG9wKHNjcm9sbFRvcCk7IC8vIGVkZ2UsIHNhZmFyaVxyXG4gICAgICAgICAgICBhcHAuaHRtbC5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTsgLy8gY2hyb21lLCBmaXJlZm94LCBpZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwcC5odG1sLnJlbW92ZUNsYXNzKCdzY3JvbGwtZGlzYWJsZWQgbW9kYWwnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5hcHAuc2V0SHRtbFNjcm9sbCA9ICgpID0+IHtcclxuICAgIGlmICghYXBwLmlzTW9kYWwoKSAmJiAhYXBwLmlzTG9hZGluZygpICYmICFhcHAuaHRtbE92ZXJmbG93RW5hYmxlZCAmJiAoIWFwcC5pc1NtYWxsQnJlYWtwb2ludCgpIHx8IGFwcC5pc1NtYWxsQnJlYWtwb2ludCgpICYmICFhcHAuaXNBc2lkZUxlZnQoKSAmJiAhYXBwLmlzQXNpZGVSaWdodCgpKSkge1xyXG4gICAgICAgIGFwcC5lbmFibGVTY3JvbGwoKTtcclxuICAgIH0gZWxzZSBpZiAoYXBwLmlzTW9kYWwoKSB8fCBhcHAuaXNTbWFsbEJyZWFrcG9pbnQoKSAmJiBhcHAuaHRtbE92ZXJmbG93RW5hYmxlZCAmJiAoYXBwLmlzQXNpZGVMZWZ0KCkgfHwgYXBwLmlzQXNpZGVSaWdodCgpKSkge1xyXG4gICAgICAgIGFwcC5kaXNhYmxlU2Nyb2xsKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4kKCgpID0+IHtcclxuICAgIHNjcm9sbGJhcldpZHRoKCk7XHJcbn0pO1xyXG5cclxuJCh3aW5kb3cpLnJlc2l6ZSgkLnRocm90dGxlKGFwcC50aHJvdHRsZUludGVydmFsLCBmYWxzZSwgKCkgPT4ge1xyXG4gICAgYXBwLmNoZWNrTW9kYWwoKTtcclxuICAgIGFwcC5zZXRIdG1sU2Nyb2xsKCk7XHJcbiAgICBzY3JvbGxiYXJXaWR0aCgpO1xyXG4gICAgc2V0U2Nyb2xsVG9wKCk7XHJcbn0pKTtcclxuXHJcbnZhciBzZXRTY3JvbGxUb3AgPSAoKSA9PiB7XHJcbiAgICBsZXQgc2Nyb2xsVG9wID0gYXBwLnNjcm9sbFRvcCgpO1xyXG5cclxuICAgIGxldCBlbnRyeSA9IHtcclxuICAgICAgICBocmVmOiB3aW5kb3cubG9jYXRpb24uaHJlZixcclxuICAgICAgICBzY3JvbGxUb3A6IHNjcm9sbFRvcFxyXG4gICAgfTtcclxuXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2Nyb2xsJywgSlNPTi5zdHJpbmdpZnkoZW50cnkpKTtcclxufTtcclxuXHJcbiQod2luZG93KS5zY3JvbGwoJC50aHJvdHRsZShhcHAudGhyb3R0bGVJbnRlcnZhbCwgZmFsc2UsICgpID0+IHtcclxuICAgIHNldFNjcm9sbFRvcCgpO1xyXG59KSk7IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbmFwcC5zaG93TG9hZGluZyA9ICgpID0+IHtcclxuICAgIGFwcC5sb2FkaW5nQ291bnQrKztcclxuICAgIGFwcC5kaXNhYmxlU2Nyb2xsKCk7XHJcbiAgICBhcHAuaHRtbC5hZGRDbGFzcygnbG9hZGluZycpO1xyXG59O1xyXG5cclxuYXBwLmhpZGVMb2FkaW5nID0gKCkgPT4ge1xyXG4gICAgYXBwLmxvYWRpbmdDb3VudC0tO1xyXG4gICAgaWYgKGFwcC5sb2FkaW5nQ291bnQgPD0gMCkge1xyXG4gICAgICAgIGFwcC5sb2FkaW5nQ291bnQgPSAwO1xyXG4gICAgICAgIGFwcC5odG1sLnJlbW92ZUNsYXNzKCdsb2FkaW5nJyk7XHJcbiAgICAgICAgYXBwLnNldEh0bWxTY3JvbGwoKTtcclxuICAgIH1cclxufTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5sZXQgdHJhbnNpdGlvbkxvY2sgPSBmYWxzZTtcclxuXHJcbmFwcC5hc2lkZUNoYW5nZWQgPSAoKSA9PiB7XHJcbiAgICBsZXQgdHJpZ2dlciA9ICgpID0+IHtcclxuICAgICAgICBhcHAuaHRtbC50cmlnZ2VyKCdhc2lkZS1jaGFuZ2VkLmRhdGF0YWJsZXMnKTtcclxuICAgICAgICBhcHAuaHRtbC50cmlnZ2VyKCdhc2lkZS1jaGFuZ2VkLnJiJyk7XHJcbiAgICAgICAgYXBwLmh0bWwudHJpZ2dlcignYXNpZGUtY2hhbmdlZC5tYXAnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYXBwLmlzVHJhbnNpdGlvbnMoKSkge1xyXG4gICAgICAgIGxldCBhd2FpdEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIXRyYW5zaXRpb25Mb2NrKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGF3YWl0SW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgYXBwLmF3YWl0SW50ZXJ2YWwpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uTG9jayA9IGZhbHNlO1xyXG4gICAgICAgIH0sIGFwcC50cmFuc2l0aW9uVGltZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRyYW5zaXRpb25Mb2NrID0gZmFsc2U7XHJcbiAgICAgICAgdHJpZ2dlcigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5hcHAudG9nZ2xlQXNpZGUgPSAoYXNpZGUsIHBhZ2VDaGFuZ2VkKSA9PiB7XHJcbiAgICBpZiAoIXRyYW5zaXRpb25Mb2NrKSB7XHJcbiAgICAgICAgdHJhbnNpdGlvbkxvY2sgPSB0cnVlO1xyXG4gICAgICAgIGFwcC5odG1sLmF0dHIoJ2RhdGEtYXV0aGVudGljYXRpb24nLCAnJyk7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRBc2lkZSA9IGFwcC5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKTtcclxuICAgICAgICBpZiAoY3VycmVudEFzaWRlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpZiAoYXNpZGUgPT09IHVuZGVmaW5lZCB8fCBjdXJyZW50QXNpZGUgPT09IGFzaWRlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2Nyb2xsVG9wID0gYXBwLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICAgICAgYXBwLmh0bWwuYXR0cignZGF0YS1hc2lkZScsICcnKTtcclxuICAgICAgICAgICAgICAgIGFwcC5tYWluLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICBhcHAuYm9keS5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTsgLy8gZWRnZSwgc2FmYXJpXHJcbiAgICAgICAgICAgICAgICBhcHAuaHRtbC5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTsgLy8gY2hyb21lLCBmaXJlZm94LCBpZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXBwLmh0bWwuYXR0cignZGF0YS1hc2lkZScsIGFzaWRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwcC5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnLCBhc2lkZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhc2lkZSA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgIGFwcC5sZWZ0LmZvY3VzKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChhc2lkZSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICBhcHAucmlnaHQuZm9jdXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFwcC5hc2lkZUNoYW5nZWQoKTtcclxuICAgICAgICBhcHAuc2V0SHRtbFNjcm9sbCgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuYXBwLm1haW4ucXVlcnlTZWxlY3RvcignLmFzaWRlLmxlZnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGFwcC50b2dnbGVBc2lkZSgnbGVmdCcpO1xyXG59KTtcclxuXHJcbmFwcC5tYWluLnF1ZXJ5U2VsZWN0b3IoJy5hc2lkZS5yaWdodCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgYXBwLnRvZ2dsZUFzaWRlKCdyaWdodCcpO1xyXG59KTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuYXBwLmF1dGhlbnRpY2F0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKCc+IGRpdiA+IGJ1dHRvbicpKSB7XHJcbiAgICAgICAgbGV0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpLFxyXG4gICAgICAgICAgICB0eXBlID0gJHRoaXMuYXR0cignZGF0YS10eXBlJyk7XHJcbiAgICAgICAgaWYgKGFwcC5odG1sLmF0dHIoJ2RhdGEtYXV0aGVudGljYXRpb24nKSA9PT0gdHlwZSkge1xyXG4gICAgICAgICAgICBhcHAuaHRtbC5hdHRyKCdkYXRhLWF1dGhlbnRpY2F0aW9uJywgJycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwcC5odG1sLmF0dHIoJ2RhdGEtYXV0aGVudGljYXRpb24nLCB0eXBlKTtcclxuICAgICAgICAgICAgYXBwLmF1dGhlbnRpY2F0aW9uLmNoaWxkcmVuKCc6bGFzdC1jaGlsZCcpLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuXHJcbmFwcC51c2VyTGlua3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoJz4gYScpKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmFwcC5hZGRWYWxpZGF0aW9uKFxyXG4gICAgYXBwLmF1dGhlbnRpY2F0aW9uLnF1ZXJ5U2VsZWN0b3IoJy5yZWdpc3RlciA+IGZvcm0nKSxcclxuICAgIHtcclxuICAgICAgICByZWdpc3Rlcl91c2VybmFtZToge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgbWlubGVuZ3RoOiAyXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWdpc3Rlcl9wYXNzd29yZDoge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgcGFzc3dvcmRfcmVnZXg6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZ2lzdGVyX2NvbmZpcm1fcGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIGVxdWFsVG86IFwiI3JlZ2lzdGVyX3Bhc3N3b3JkXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZ2lzdGVyX2VtYWlsOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBlbWFpbDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgcmVnaXN0ZXJfdXNlcm5hbWU6IHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIHlvdXIgdXNlcm5hbWVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVnaXN0ZXJfcGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIHlvdXIgcGFzc3dvcmRcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVnaXN0ZXJfY29uZmlybV9wYXNzd29yZDoge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogXCJQbGVhc2UgcHJvdmlkZSBhIHBhc3N3b3JkXCIsXHJcbiAgICAgICAgICAgIGVxdWFsVG86IFwiUGxlYXNlIGVudGVyIHRoZSBzYW1lIHBhc3N3b3JkIGFzIGFib3ZlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZ2lzdGVyX2VtYWlsOiBcIlBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIGFkZHJlc3NcIlxyXG4gICAgfVxyXG4pO1xyXG5cclxuYXBwLmFkZFZhbGlkYXRpb24oXHJcbiAgICBhcHAuYXV0aGVudGljYXRpb24ucXVlcnlTZWxlY3RvcignLmxvZ2luID4gZm9ybScpLFxyXG4gICAge1xyXG4gICAgICAgIHVzZXJuYW1lOiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXNzd29yZDoge1xyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgdXNlcm5hbWU6IHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIHlvdXIgdXNlcm5hbWVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIHlvdXIgcGFzc3dvcmRcIlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuKTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuYXBwLmNvb2tpZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKCcjY29va2llLWFjY2VwdCcpKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Nvb2tpZScsICdjb29raWUnKTtcclxuICAgICAgICBhcHAuaHRtbC5yZW1vdmVDbGFzcygnY29va2llJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxubGV0IGNvb2tpZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY29va2llXCIpO1xyXG5pZiAoY29va2llID09PSBudWxsKSB7XHJcbiAgICBhcHAuaHRtbC5jbGFzc0xpc3QuYWRkKCdjb29raWUnKTtcclxufSIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG5hcHAubG9hZFBhZ2UgPSAodXJsLCBwdXNoU3RhdGUsIGluaXRpYWwpID0+IHtcclxuICAgIGFwcC5zaG93TG9hZGluZygpO1xyXG4gICAgYXBwLmNvbnRlbnQubG9hZChhcHAuaG9zdCArIGFwcC5hamF4ICsgJ3BhZ2VzJyArICh1cmwgPT09ICcvJyA/ICcvaG9tZScgOiB1cmwpICsgJy5odG1sJywgKHJlc3BvbnNlLCBzdGF0dXMsIHhocikgPT4ge1xyXG4gICAgICAgIGxldCBxID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgICAgICB1cmwgPSB1cmwuc3Vic3RyaW5nKDAsIHEgIT09IC0xID8gcSA6IHVybC5sZW5ndGgpO1xyXG4gICAgICAgIGFwcC5sZWZ0LmZpbmQoJy50cmVlIGEubGFiZWwuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIGFwcC5sZWZ0LmZpbmQoJ2EubGFiZWxbaHJlZj1cIicgKyB1cmwgKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIGFwcC5odG1sLmF0dHIoJ2RhdGEtc3RhdHVzJywgc3RhdHVzKTtcclxuICAgICAgICBsZXQgc3RhdHVzQ29kZSA9IHhoci5zdGF0dXM7XHJcbiAgICAgICAgYXBwLnRpdGxlLmh0bWwoJycpO1xyXG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gYXBwLnNpdGVOYW1lO1xyXG4gICAgICAgIGlmIChzdGF0dXNDb2RlID09PSAyMDApIHtcclxuICAgICAgICAgICAgaWYgKHVybCA9PT0gJy8nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwLmJvZHkuY2hpbGRyZW4oJyNzdmctYnJvd3NlcicpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZ2V0KGFwcC5ob3N0ICsgYXBwLmFqYXggKyAnc3ZnL2Jyb3dzZXIuaHRtbCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZGF0YSkucHJlcGVuZFRvKGFwcC5ib2R5KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhcHAuYm9keS5jaGlsZHJlbignI3N2Zy1vcycpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQuZ2V0KGFwcC5ob3N0ICsgYXBwLmFqYXggKyAnc3ZnL29zLmh0bWwnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRhdGEpLnByZXBlbmRUbyhhcHAuYm9keSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBhcHAuY2FwaXRhbGl6ZSh1cmwucmVwbGFjZSgnLycsICcnKS5yZXBsYWNlQWxsKCctJywgJyAnKSk7XHJcbiAgICAgICAgICAgICAgICBhcHAudGl0bGUuaHRtbCh0aXRsZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlICsgJyAtICcgKyBhcHAuc2l0ZU5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodXJsID09PSAnL2Zvcm0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLnBhZ2VGb3JtKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXBwLmh0bWwudHJpZ2dlcignaGVhZGVyLWNoYW5nZWQucmVzcG9uc2l2ZUhlYWRlcicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFwcC5jb250ZW50LmxvYWQoYXBwLmhvc3QgKyBhcHAuYWpheCArICdwYWdlcy9lcnJvci5odG1sJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBzdGF0dXNDb2RlICsgJyAtICcgKyBhcHAuc2l0ZU5hbWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBzdGF0dXNDb2RlICsgJyAtICc7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gNDA0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgKz0gJ1BhZ2Ugbm90IGZvdW5kJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzQ29kZSA9PT0gNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgKz0gJ1NlcnZlciBlcnJvcic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlICs9IHN0YXR1c1RleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhcHAuY29udGVudC5maW5kKCcjZXJyb3ItdGl0bGUnKS5odG1sKHRpdGxlKTtcclxuICAgICAgICAgICAgICAgIGFwcC5odG1sLnRyaWdnZXIoJ2hlYWRlci1jaGFuZ2VkLnJlc3BvbnNpdmVIZWFkZXInKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYXdhaXRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGFwcC5jc3NMb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoYXdhaXRJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICBhcHAucGFnZUxvYWRlZChpbml0aWFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGFwcC5hd2FpdEludGVydmFsKTtcclxuICAgIH0pO1xyXG4gICAgbGV0IGhpc3RvcnlVcmwgPSAoYXBwLmlzTG9jYWxob3N0ID8gJycgOiAnLycgKyB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKVsxXSkgKyB1cmw7XHJcbiAgICBpZiAocHVzaFN0YXRlKSB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIGhpc3RvcnlVcmwpO1xyXG4gICAgICAgIGxvYWRQYWdlID0gdHJ1ZTtcclxuICAgIH1cclxufTtcclxuXHJcbmFwcC5pbnRlcm5hbExpbmtDbGljayA9IChocmVmLCBlKSA9PiB7XHJcbiAgICBpZiAoIWUuY3RybEtleSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBhcHAubG9hZFBhZ2UoaHJlZiwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuKGZ1bmN0aW9uIChsKSB7XHJcbiAgICBpZiAobC5zZWFyY2gpIHtcclxuICAgICAgICBhcHAudXJsID0ge307XHJcbiAgICAgICAgbC5zZWFyY2guc2xpY2UoMSkuc3BsaXQoJyYnKS5mb3JFYWNoKCh2KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBhID0gdi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBhcHAudXJsW2FbMF1dID0gYS5zbGljZSgxKS5qb2luKCc9JykucmVwbGFjZSgvfmFuZH4vZywgJyYnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoYXBwLnVybC5wICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIG51bGwsXHJcbiAgICAgICAgICAgICAgICBsLnBhdGhuYW1lLnNsaWNlKDAsIC0xKSArIGFwcC51cmwucCArXHJcbiAgICAgICAgICAgICAgICAoYXBwLnVybC5xID8gJz8nICsgYXBwLnVybC5xIDogJycpICtcclxuICAgICAgICAgICAgICAgIGwuaGFzaFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSh3aW5kb3cubG9jYXRpb24pKTtcclxuXHJcbmxldCBsb2FkUGFnZSA9IHdpbmRvdy5oaXN0b3J5LnN0YXRlO1xyXG53aW5kb3cub25wb3BzdGF0ZSA9IChlKSA9PiB7XHJcbiAgICBpZiAobG9hZFBhZ2UpIHtcclxuICAgICAgICBsZXQgdXJsID0gbG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgICAgaWYgKCFhcHAuaXNMb2NhbGhvc3QpIHtcclxuICAgICAgICAgICAgdXJsID0gdXJsLnN1YnN0cmluZyh1cmwuaW5kZXhPZihcIi9cIiwgdXJsLmluZGV4T2YoXCIvXCIpICsgMSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhcHAubG9hZFBhZ2UodXJsLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5hcHAuYXBwbHlOYXZpZ2F0aW9uID0gKGlkLCB2YWx1ZSwgc2V0KSA9PiB7XHJcbiAgICBpZiAoc2V0KSB7XHJcbiAgICAgICAgbGV0IGVudHJ5ID0ge1xyXG4gICAgICAgICAgICBcImlkXCI6IGlkLFxyXG4gICAgICAgICAgICBcInZhbHVlXCI6IHZhbHVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICAgICAgZXhpc3RzID0gJC5ncmVwKGFwcC5uYXZpZ2F0aW9uLCAoZSkgPT4geyByZXR1cm4gZS5uYW1lID09PSBuYW1lOyB9KTtcclxuICAgICAgICBpZiAoZXhpc3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAvLyBub3QgZm91bmRcclxuICAgICAgICAgICAgYXBwLm5hdmlnYXRpb24ucHVzaChlbnRyeSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChleGlzdHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIC8vIGZvdW5kXHJcbiAgICAgICAgICAgIGV4aXN0c1swXS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbmF2aWdhdGlvbicsIEpTT04uc3RyaW5naWZ5KGFwcC5uYXZpZ2F0aW9uKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwcC5sZWZ0LmZpbmQoJyMnICsgaWQpLnByb3AoJ2NoZWNrZWQnLCB2YWx1ZSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIGFwcC5sZWZ0LmZpbmQoJz4gLmNvbnRlbnQgPiBkaXYnKS5sb2FkKGFwcC5ob3N0ICsgYXBwLmFqYXggKyAnbGF5b3V0L25hdmlnYXRpb24uaHRtbCcsICgpID0+IHtcclxuICAgICAgICBhcHAubmF2aWdhdGlvblRyZWUgPSBhcHAubGVmdC5maW5kKCcudHJlZScpO1xyXG4gICAgICAgIGFwcC5uYXZpZ2F0aW9uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm5hdmlnYXRpb25cIikpO1xyXG4gICAgICAgIGlmIChhcHAubmF2aWdhdGlvbiA9PT0gbnVsbCkgYXBwLm5hdmlnYXRpb24gPSBbXTtcclxuICAgICAgICAkLmVhY2goYXBwLm5hdmlnYXRpb24sIGZ1bmN0aW9uIChpLCBlbnRyeSkge1xyXG4gICAgICAgICAgICBhcHAuYXBwbHlOYXZpZ2F0aW9uKGVudHJ5LmlkLCBlbnRyeS52YWx1ZSwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcC5uYXZpZ2F0aW9uVHJlZS5vbignY2hhbmdlJywgJ2lucHV0W3R5cGU9Y2hlY2tib3hdJywgKGUpID0+IHtcclxuICAgICAgICAgICAgbGV0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgaWQgPSAkdGhpcy5hdHRyKCdpZCcpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSAkdGhpcy5pcygnOmNoZWNrZWQnKTtcclxuICAgICAgICAgICAgYXBwLmFwcGx5TmF2aWdhdGlvbihpZCwgdmFsdWUsIHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwcC5oZWFkZXIuZmluZCgnLmFzaWRlLmxlZnQnKS5hZGRDbGFzcygnbG9hZGVkJyk7XHJcbiAgICAgICAgaWYgKGFwcC51cmwgJiYgYXBwLnVybC5wKSB7XHJcbiAgICAgICAgICAgIGFwcC5uYXZpZ2F0aW9uVHJlZS5maW5kKCdhLmxhYmVsW2hyZWY9XCInICsgYXBwLnVybC5wLnJlcGxhY2UoL15cXC8rL2csICcnKSArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBwLm5hdmlnYXRpb25UcmVlLmZpbmQoJ2EubGFiZWxbaHJlZj1cIlwiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmIChhcHAudXJsICYmIGFwcC51cmwucCkge1xyXG4gICAgICAgIGFwcC5sb2FkUGFnZShhcHAudXJsLnAsIHRydWUsIHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgbCA9IHdpbmRvdy5sb2NhdGlvbjtcclxuICAgICAgICB2YXIgc2VnbWVudENvdW50ID0gbC5vcmlnaW4uZW5kc1dpdGgoJ2dpdGh1Yi5pbycpID8gMSA6IDA7XHJcbiAgICAgICAgdmFyIHVybCA9ICcvJyArIGwucGF0aG5hbWUuc2xpY2UoMSkuc3BsaXQoJy8nKS5zbGljZShzZWdtZW50Q291bnQpO1xyXG4gICAgICAgIGFwcC5sb2FkUGFnZSh1cmwsIHRydWUsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgYXBwLmxlZnQub24oJ2NsaWNrJywgJy50cmVlIGEubGFiZWw6bm90KC5hY3RpdmUpJywgKGUpID0+IHtcclxuICAgICAgICBhcHAuaW50ZXJuYWxMaW5rQ2xpY2soJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2hyZWYnKSwgZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhcHAuYm9keS5vbignY2xpY2snLCAnLmludGVybmFsLWxpbmsnLCAoZSkgPT4ge1xyXG4gICAgICAgIGFwcC5pbnRlcm5hbExpbmtDbGljaygkKGUuY3VycmVudFRhcmdldCkuYXR0cignaHJlZicpLCBlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFwcC5sZWZ0Lm9uKCdjbGljaycsICcjbmF2aWdhdGlvbi1leHBhbmQnLCAoKSA9PiB7XHJcbiAgICAgICAgYXBwLm5hdmlnYXRpb25UcmVlLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdOm5vdCg6Y2hlY2tlZCknKS5jbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXBwLmxlZnQub24oJ2NsaWNrJywgJyNuYXZpZ2F0aW9uLWNvbGxhcHNlJywgKCkgPT4ge1xyXG4gICAgICAgIGFwcC5uYXZpZ2F0aW9uVHJlZS5maW5kKCdpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkJykuY2xpY2soKTtcclxuICAgIH0pO1xyXG59KTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuYXBwLmFwcGx5U2V0dGluZ3MgPSAoaWQsIG5hbWUsIHR5cGUsIHZhbHVlLCBzZXQpID0+IHtcclxuICAgIGlmIChzZXQpIHtcclxuICAgICAgICBsZXQgZW50cnkgPSB7XHJcbiAgICAgICAgICAgIFwiaWRcIjogaWQsXHJcbiAgICAgICAgICAgIFwibmFtZVwiOiBuYW1lLFxyXG4gICAgICAgICAgICBcInR5cGVcIjogdHlwZSxcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIGV4aXN0cyA9ICQuZ3JlcChhcHAuc2V0dGluZ3MsIChlKSA9PiB7IHJldHVybiBlLm5hbWUgPT09IG5hbWU7IH0pO1xyXG4gICAgICAgIGlmIChleGlzdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIG5vdCBmb3VuZFxyXG4gICAgICAgICAgICBhcHAuc2V0dGluZ3MucHVzaChlbnRyeSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChleGlzdHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIC8vIGZvdW5kXHJcbiAgICAgICAgICAgIGV4aXN0c1swXS5pZCA9IGlkO1xyXG4gICAgICAgICAgICBleGlzdHNbMF0udmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NldHRpbmdzJywgSlNPTi5zdHJpbmdpZnkoYXBwLnNldHRpbmdzKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcImNoZWNrYm94XCIgfHwgdHlwZSA9PT0gXCJyYWRpb1wiKSB7XHJcbiAgICAgICAgICAgIGFwcC5yaWdodC5maW5kKCcjc2V0dGluZ3MtJyArIGlkKS5wcm9wKCdjaGVja2VkJywgdmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJzbGlkZXJcIikge1xyXG4gICAgICAgICAgICBhcHAucmlnaHQuZmluZCgnI3NldHRpbmdzLScgKyBpZCkuc2xpZGVyKCdzZXRWYWx1ZScsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZSA9PT0gJ2NoZWNrYm94JyB8fCB0eXBlID09PSBcInJhZGlvXCIpIHtcclxuICAgICAgICBpZiAodHlwZSA9PT0gJ3JhZGlvJykge1xyXG4gICAgICAgICAgICAkLmVhY2goYXBwLnJpZ2h0LmZpbmQoJ2lucHV0W3R5cGU9cmFkaW9dW25hbWU9XCJzZXR0aW5ncy0nICsgbmFtZSArICdcIl06bm90KCNzZXR0aW5ncy0nICsgaWQgKyAnKScpLCAoaSwgcmFkaW8pID0+IHtcclxuICAgICAgICAgICAgICAgIGFwcC5odG1sLnJlbW92ZUNsYXNzKCQocmFkaW8pLmF0dHIoJ2lkJykucmVwbGFjZSgnc2V0dGluZ3MtJywgJycpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuYW1lID09PSAndGhlbWUnKSB7XHJcbiAgICAgICAgICAgIGFwcC5sb2FkVGhlbWUoaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmFtZSA9PT0gJ2ZvY3VzJyAmJiB2YWx1ZSkge1xyXG4gICAgICAgICAgICBhcHAuZW5hYmxlRm9jdXMoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICd0dHMnICYmIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGFwcC5lbmFibGVUVFMoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdzd2lwZScgJiYgdmFsdWUpIHtcclxuICAgICAgICAgICAgYXBwLmVuYWJsZVN3aXBlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBhcHAuaHRtbC5hZGRDbGFzcyhpZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBwLmh0bWwucmVtb3ZlQ2xhc3MoaWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaWQgPT09ICd0d28tY29sdW1ucycpIHtcclxuICAgICAgICAgICAgYXBwLmh0bWwudHJpZ2dlcignY29sdW1ucy1jaGFuZ2VkLnJiJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpZCA9PT0gJ3NpZ25lZC1pbicgfHwgaWQgPT09ICdmb2N1cycgfHwgaWQgPT09ICd0dHMnKSB7XHJcbiAgICAgICAgICAgIGFwcC5odG1sLnRyaWdnZXIoJ2hlYWRlci1jaGFuZ2VkLnJlc3BvbnNpdmVIZWFkZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5hbWUgPT09ICdhc2lkZS1sZWZ0JyB8fCAnYXNpZGUtcmlnaHQnKSB7XHJcbiAgICAgICAgICAgIGFwcC5hc2lkZUNoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG4kKCgpID0+IHtcclxuICAgIGFwcC5yaWdodC5maW5kKCc+IC5jb250ZW50ID4gZGl2JykubG9hZChhcHAuaG9zdCArIGFwcC5hamF4ICsgJ2xheW91dC9zZXR0aW5ncy5odG1sJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBhd2FpdEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYXBwLmNzc0xvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChhd2FpdEludGVydmFsKTtcclxuICAgICAgICAgICAgICAgICQuZWFjaChhcHAuc2V0dGluZ3MsIChpLCBlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5hcHBseVNldHRpbmdzKGVudHJ5LmlkLCBlbnRyeS5uYW1lLCBlbnRyeS50eXBlLCBlbnRyeS52YWx1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhcHAuaGVhZGVyLmZpbmQoJy5hc2lkZS5yaWdodCcpLmFkZENsYXNzKCdsb2FkZWQnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykub24oJ2NoYW5nZScsICdpbnB1dFt0eXBlPWNoZWNrYm94XSwgaW5wdXRbdHlwZT1yYWRpb10nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSAkdGhpcy5hdHRyKCdpZCcpLnJlcGxhY2UoJ3NldHRpbmdzLScsICcnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9ICR0aGlzLmF0dHIoJ25hbWUnKS5yZXBsYWNlKCdzZXR0aW5ncy0nLCAnJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAkdGhpcy5hdHRyKCd0eXBlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJHRoaXMuaXMoJzpjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmFwcGx5U2V0dGluZ3MoaWQsIG5hbWUsIHR5cGUsIHZhbHVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPT09ICdsZWZ0LXNocmluaycgfHwgaWQgPT09ICdyaWdodC1zaHJpbmsnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID09PSAnbGVmdC1wdXNoJyB8fCBpZCA9PT0gJ3JpZ2h0LXB1c2gnIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID09PSAnbGVmdC1vdmVybGF5JyB8fCBpZCA9PT0gJ3JpZ2h0LW92ZXJsYXknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5zZXRIdG1sU2Nyb2xsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBhcHAuYXdhaXRJbnRlcnZhbCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhcHAucmlnaHQub24oJ2NsaWNrJywgJyNzZXR0aW5ncy1jbGVhci1sb2NhbHN0b3JhZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICB9KTtcclxufSk7IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgYXBwLmJvZHkub24oXCJrZXlkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgICAgbGV0IHRhcmdldCA9ICQoZS50YXJnZXQpLFxyXG4gICAgICAgICAgICBwYXJlbnQgPSB0YXJnZXQucGFyZW50KCk7XHJcbiAgICAgICAgaWYgKGFwcC5pc0xvYWRpbmcoKSkge1xyXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gOSB8fCBlLmN0cmxLZXkgJiYgZS5rZXlDb2RlID09PSA2NSkgeyAvLyB0YWIgfHwgIGN0cmwgKyBhXHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMzcgJiYgIWFwcC5pc0ZvY3VzKCkgJiYgIWFwcC5pc01vZGFsKCkpIHsgLy8gbGVmdFxyXG4gICAgICAgICAgICAgICAgaWYgKGFwcC5pc0FzaWRlTGVmdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLnRvZ2dsZUFzaWRlKCk7IC8vIGNsb3NlcyByaWdodFxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYXBwLmlzQXNpZGVSaWdodCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLnRvZ2dsZUFzaWRlKCdyaWdodCcpOyAvLyBvcGVucyByaWdodFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IDM5ICYmICFhcHAuaXNGb2N1cygpICYmICFhcHAuaXNNb2RhbCgpKSB7IC8vIHJpZ2h0XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwLmlzQXNpZGVSaWdodCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLnRvZ2dsZUFzaWRlKCk7IC8vIGNsb3NlcyBsZWZ0XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFhcHAuaXNBc2lkZUxlZnQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC50b2dnbGVBc2lkZSgnbGVmdCcpOyAvLyBvcGVucyBsZWZ0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS53aGljaCA9PT0gMjcpIHsgLy8gZXNjXHJcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFwcC50dHMgIT09IHVuZGVmaW5lZCAmJiBhcHAudHRzLklzU3BlYWtpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5zdG9wVFRTKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFwcC5pc0ZvY3VzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHAuaGlkZUZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFwcC5pc01vZGFsKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHAuY2xvc2VNb2RhbCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLmlzQXNpZGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAudG9nZ2xlQXNpZGUoKTsgLy8gY2xvc2VzIGFzaWRlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3B1cHMgPSBhcHAuYm9keS5jaGlsZHJlbignLnBvcHVwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcHVwcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBzLmZhZGVPdXQoYXBwLmZhZGVPdXRUaW1lLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cHMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgZHJvcGRvd25zID0gYXBwLmNvbnRlbnQuZmluZCgnZGl2LmRyb3Bkb3duLm9wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZHJvcGRvd25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bnMucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmh0bWwuYXR0cignZGF0YS1hdXRoZW50aWNhdGlvbicsICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMTMpIHsgLy8gZW50ZXJcclxuICAgICAgICAgICAgICAgIGxldCBkcm9wZG93biA9IHRhcmdldC5wYXJlbnRzKCdkaXYuZHJvcGRvd24nKTtcclxuICAgICAgICAgICAgICAgIGlmIChkcm9wZG93bi5sZW5ndGggfHwgcGFyZW50LnBhcmVudCgpLmhhc0NsYXNzKCdhY2NvcmRpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZHJvcGRvd24ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmNoaWxkcmVuKCdkaXYnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFyZW50Lmhhc0NsYXNzKCdjaGVja2JveCcpIHx8IHBhcmVudC5oYXNDbGFzcygncmFkaW8nKSB8fCBwYXJlbnQuaGFzQ2xhc3MoJ3N3aXRjaCcpIHx8IHRhcmdldC5oYXNDbGFzcygndG9nZ2xlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2libGluZ3MoJ2lucHV0JykuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBhcHAuYm9keS5vbigna2V5dXAnLCAoZSkgPT4ge1xyXG4gICAgICAgIGlmICghYXBwLmlzTG9hZGluZygpICYmICFhcHAuaXNGb2N1cygpKSB7XHJcbiAgICAgICAgICAgIGlmIChlLndoaWNoID09PSA5KSB7IC8vIHRhYlxyXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9ICQoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQucGFyZW50cygnZGl2LmRyb3Bkb3duLm9wZW4nKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCdkaXYuZHJvcGRvd24ub3BlbicpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5wYXJlbnRzKCcjYXV0aGVudGljYXRlZC5vcGVuJykubGVuZ3RoIHx8IHRhcmdldC5jbG9zZXN0KCcjYXV0aGVudGljYXRlZCA+IGJ1dHRvbicpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNhdXRoZW50aWNhdGVkLm9wZW4nKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGFwcC5pc01vZGFsKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5wYXJlbnRzKCcjbW9kYWwnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmNsb3NlTW9kYWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhc2lkZSA9IHRhcmdldC5wYXJlbnRzKCdhc2lkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhc2lkZS5sZW5ndGggPT09IDAgJiYgdGFyZ2V0LmlzKCdhc2lkZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzaWRlID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXNpZGUubGVuZ3RoICYmIGFzaWRlLmF0dHIoJ2lkJykgIT09IGFwcC5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAudG9nZ2xlQXNpZGUoYXNpZGUuYXR0cignaWQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYXNpZGUubGVuZ3RoICYmIGFwcC5pc0FzaWRlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnRvZ2dsZUFzaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pOyIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG5hcHAuc2hvd01vZGFsID0gKHR5cGUpID0+IHtcclxuICAgIGFwcC5odG1sLmF0dHIoJ2RhdGEtbW9kYWwnLCB0eXBlKTtcclxuICAgIGFwcC5odG1sLmFkZENsYXNzKCdtb2RhbCcpO1xyXG4gICAgYXBwLmhpZGVMb2FkaW5nKCk7XHJcbiAgICBhcHAuY2hlY2tNb2RhbCgpO1xyXG4gICAgYXBwLm1vZGFsLmZvY3VzKCk7XHJcbn07XHJcblxyXG5hcHAuY2xvc2VNb2RhbCA9ICgpID0+IHtcclxuICAgIGlmIChhcHAuZnVsbHNjcmVlbikge1xyXG4gICAgICAgIGFwcC5leGl0RnVsbFNjcmVlbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhcHAuaHRtbC5yZW1vdmVDbGFzcygnbW9kYWwnKS5hdHRyKCdkYXRhLW1vZGFsJywgJycpO1xyXG4gICAgICAgIGFwcC5tb2RhbC5yZW1vdmVDbGFzcygnaW5mby1zaG93bicpLmVtcHR5KCk7XHJcbiAgICAgICAgYXBwLmNoZWNrTW9kYWwoKTtcclxuICAgICAgICBhcHAuc2V0SHRtbFNjcm9sbCgpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuYXBwLmNoZWNrTW9kYWwgPSAoKSA9PiB7XHJcbiAgICBpZiAoYXBwLmlzTW9kYWwoKSkge1xyXG4gICAgICAgIGFwcC5ib2R5LmNzcygncGFkZGluZy1yaWdodCcsIGFwcC5zY3JvbGxiYXJXaWR0aCk7XHJcbiAgICAgICAgaWYgKGFwcC5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKSA9PT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICBhcHAucmlnaHQuY3NzKCdtYXJnaW4tcmlnaHQnLCBhcHAuc2Nyb2xsYmFyV2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhcHAuYm9keS5jaGlsZHJlbignLnBvcHVwJykuY3NzKCdtYXJnaW4tcmlnaHQnLCBhcHAuc2Nyb2xsYmFyV2lkdGgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhcHAuYm9keS5jc3MoJ3BhZGRpbmctcmlnaHQnLCAwKTtcclxuICAgICAgICBhcHAucmlnaHQuY3NzKCdtYXJnaW4tcmlnaHQnLCAwKTtcclxuICAgICAgICBhcHAuYm9keS5jaGlsZHJlbignLnBvcHVwJykuY3NzKCdtYXJnaW4tcmlnaHQnLCAwKTtcclxuICAgIH1cclxuICAgIGFwcC5odG1sLnRyaWdnZXIoJ21vZGVsLWNoZWNrJyk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIGFwcC5ib2R5Lm9uKCdjbGljaycsICcubW9kYWwnLCAoZSkgPT4ge1xyXG4gICAgICAgIGxldCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KSxcclxuICAgICAgICAgICAgdHlwZSA9ICR0aGlzLmF0dHIoJ2RhdGEtbW9kYWwnKTtcclxuICAgICAgICBpZiAodHlwZSAhPT0gdW5kZWZpbmVkICYmIHR5cGUubGVuZ3RoICYmICh0eXBlID09PSAnaW1hZ2UnIHx8IHR5cGUgPT09ICdmb3JtJykpIHtcclxuICAgICAgICAgICAgYXBwLnNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIGxldCBpZCA9ICR0aGlzLmF0dHIoJ2RhdGEtbW9kYWwtaWQnKSxcclxuICAgICAgICAgICAgICAgIGh0bWwgPSBbXSxcclxuICAgICAgICAgICAgICAgIGRhdGFUaXRsZSA9ICR0aGlzLmF0dHIoJ2RhdGEtbW9kYWwtdGl0bGUnKSxcclxuICAgICAgICAgICAgICAgIGRhdGFDb250ZW50ID0gJHRoaXMuYXR0cignZGF0YS1tb2RhbC1jb250ZW50JyksXHJcbiAgICAgICAgICAgICAgICBkYXRhRnVsbHNjcmVlbiA9ICR0aGlzLmF0dHIoJ2RhdGEtbW9kYWwtZnVsbHNjcmVlbicpID09PSAndHJ1ZSc7XHJcbiAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdj48ZGl2PjxkaXYgaWQ9XCJtb2RhbC1jb250YWluZXJcIj4nKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdpbWFnZScgJiYgJHRoaXMuYXR0cignZGF0YS1tb2RhbC1pbWcnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhVGl0bGUgIT09IHVuZGVmaW5lZCB8fCBkYXRhQ29udGVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLm1vZGFsLmFkZENsYXNzKCdoYXMtaW5mbycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGJ1dHRvbiBpZD1cIm1vZGFsLXRvZ2dsZVwiIGNsYXNzPVwiYnRuXCIgYXJpYS1sYWJlbD1cIlRvZ2dsZSBpbmZvXCI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCI+PHVzZSB4bGluazpocmVmPVwiI3N2Zy1pbmZvXCI+PC91c2U+PC9zdmc+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2J1dHRvbj4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhVGl0bGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdiBpZD1cIm1vZGFsLXRpdGxlXCI+JyArIGRhdGFUaXRsZSArICc8L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhQ29udGVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGlkPVwibW9kYWwtY29udGVudFwiPicgKyBkYXRhQ29udGVudCArICc8L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGltZyBpZD1cIm1vZGFsLWltZ1wiIC8+Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Zvcm0nKSB7XHJcbiAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJoZWFkZXJcIj4nKTtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRhVGl0bGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPHNwYW4gY2xhc3M9XCJ0aXRsZVwiPicgKyBkYXRhVGl0bGUgKyAnPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8YnV0dG9uIGlkPVwibW9kYWwtY2xvc2VcIiBjbGFzcz1cImNsb3NlIGV4cGFuZFwiIGFyaWEtbGFiZWw9XCJDbG9zZSAnICsgKGRhdGFUaXRsZSAhPT0gdW5kZWZpbmVkID8gZGF0YVRpdGxlIDogJycpICsgJ1wiPjxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIj48dXNlIHhsaW5rOmhyZWY9XCIjc3ZnLWNsb3NlXCI+PC91c2U+PC9zdmc+PC9idXR0b24gPicpO1xyXG4gICAgICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2Rpdj48ZGl2IGNsYXNzPVwiY29udGVudFwiPicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGh0bWwucHVzaCgnPC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgIGxldCBkaXYgPSBodG1sLmpvaW4oXCJcIik7XHJcbiAgICAgICAgICAgIGFwcC5tb2RhbC5odG1sKGRpdik7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnaW1hZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW1hZ2UgPSBhcHAubW9kYWwuZmluZCgnI21vZGFsLWltZycpO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2Uub24oJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvd3Nlci5hbmRyb2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLmNzcygnbWF4LWhlaWdodCcsIHdpbmRvdy5pbm5lckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5zaG93TW9kYWwodHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGltYWdlLmF0dHIoJ3NyYycsICR0aGlzLmF0dHIoJ2RhdGEtbW9kYWwtaW1nJykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGFTaXplID0gJHRoaXMuYXR0cignZGF0YS1tb2RhbC1zaXplJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVNpemUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5tb2RhbC5jaGlsZHJlbignZGl2JykuYXR0cignZGF0YS1tb2RhbC1zaXplJywgZGF0YVNpemUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBhcHAubW9kYWwuZmluZCgnI21vZGFsLWNvbnRhaW5lciA+IC5jb250ZW50Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LmFwcGVuZChkYXRhQ29udGVudCk7XHJcbiAgICAgICAgICAgICAgICBhcHAuY29udGVudExvYWRlZChjb250ZW50KTtcclxuICAgICAgICAgICAgICAgIGFwcC5zaG93TW9kYWwodHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRhdGFGdWxsc2NyZWVuKSB7XHJcbiAgICAgICAgICAgICAgICBhcHAucmVxdWVzdEZ1bGxTY3JlZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGFwcC5ib2R5Lm9uKCdjbGljaycsICcjbW9kYWwtdG9nZ2xlJywgKCkgPT4ge1xyXG4gICAgICAgIGFwcC5tb2RhbC50b2dnbGVDbGFzcygnaW5mby1zaG93bicpO1xyXG4gICAgfSk7XHJcbn0pOyIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG5hcHAucmVzcG9uc2l2ZUhlYWRlciA9ICgpID0+IHtcclxuICAgIGxldCBoMSA9IGFwcC5oZWFkZXIuZmluZCgnaDEnKSxcclxuICAgICAgICBsaW5rID0gaDEuY2hpbGRyZW4oJ2EnKTtcclxuXHJcbiAgICBsZXQgY2hlY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgaDEuYWRkQ2xhc3MoJ3Nob3ctdGl0bGUnKTtcclxuICAgICAgICBhcHAudW5hdXRoZW50aWNhdGVkLmFkZENsYXNzKCdzaG93LXRleHQnKTtcclxuICAgICAgICBpZiAoaDEub3V0ZXJXaWR0aCgpIDwgbGluay5vdXRlcldpZHRoKCkpIHtcclxuICAgICAgICAgICAgYXBwLnVuYXV0aGVudGljYXRlZC5yZW1vdmVDbGFzcygnc2hvdy10ZXh0Jyk7XHJcbiAgICAgICAgICAgIGlmIChoMS5vdXRlcldpZHRoKCkgPCBsaW5rLm91dGVyV2lkdGgoKSkge1xyXG4gICAgICAgICAgICAgICAgaDEucmVtb3ZlQ2xhc3MoJ3Nob3ctdGl0bGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgICAgICBjaGVjaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2hlY2soKTtcclxuXHJcbiAgICBhcHAuaHRtbC5vbignaGVhZGVyLWNoYW5nZWQucmVzcG9uc2l2ZUhlYWRlcicsICgpID0+IHtcclxuICAgICAgICBjaGVjaygpO1xyXG4gICAgfSk7XHJcbn07IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbmFwcC5lbmFibGVGb2N1cyA9ICgpID0+IHtcclxuICAgIGxldCBjb21wb25lbnQgPSBhcHAuRm9jdXMuZmluZCgnPiAuY29tcG9uZW50ID4gZGl2Jyk7XHJcblxyXG4gICAgJC5nZXRTY3JpcHQoJ2Rpc3QvanMvZm9jdXMuanMnLCAoKSA9PiB7XHJcbiAgICAgICAgY29tcG9uZW50XHJcbiAgICAgICAgICAgIC5kcmFnZ2FibGUoe1xyXG4gICAgICAgICAgICAgICAgYXhpczogXCJ5XCIsXHJcbiAgICAgICAgICAgICAgICBjb250YWlubWVudDogXCJwYXJlbnRcIixcclxuICAgICAgICAgICAgICAgIGhhbmRsZTogXCIubW92ZVwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5yZXNpemFibGUoe1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG46ICcudWktcmVzaXphYmxlLW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHM6ICcudWktcmVzaXphYmxlLXMnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY29udGFpbm1lbnQ6IFwicGFyZW50XCJcclxuICAgICAgICAgICAgfSkub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYXBwLkZvY3VzLm9uKCdjbGljaycsICcuY2xvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGFwcC5oaWRlRm9jdXMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYXBwLm1haW4uZmluZCgnLmZvY3VzJykuY2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICBhcHAuc2hvd0ZvY3VzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7IFxyXG4gICAgICAgICQod2luZG93KS5yZXNpemUoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nIGlmIHRoZSBoZWlnaHQgaXMgdGhlIHNhbWVcclxuICAgICAgICAgICAgaWYgKCQod2luZG93KS5oZWlnaHQoKSA9PT0gaGVpZ2h0KSByZXR1cm47XHJcbiAgICAgICAgICAgIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgY29tcG9uZW50LnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmFwcC5zaG93Rm9jdXMgPSAoKSA9PiB7XHJcbiAgICBhcHAuaHRtbC5hdHRyKCdkYXRhLWF1dGhlbnRpY2F0aW9uJywgJycpO1xyXG4gICAgYXBwLmh0bWwuYXR0cignZGF0YS1mb2N1cycsIHRydWUpO1xyXG4gICAgYXBwLkZvY3VzLmZvY3VzKCk7XHJcbn07XHJcbmFwcC5oaWRlRm9jdXMgPSAoKSA9PiB7XHJcbiAgICBsZXQgc2Nyb2xsVG9wID0gYXBwLnNjcm9sbFRvcCgpO1xyXG4gICAgYXBwLmh0bWwuYXR0cignZGF0YS1mb2N1cycsIGZhbHNlKTtcclxuICAgIGFwcC5tYWluLmZvY3VzKCk7XHJcbiAgICBhcHAuYm9keS5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTsgLy8gZWRnZSwgc2FmYXJpXHJcbiAgICBhcHAuaHRtbC5zY3JvbGxUb3Aoc2Nyb2xsVG9wKTsgLy8gY2hyb21lLCBmaXJlZm94LCBpZVxyXG59OyIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG5hcHAuZW5hYmxlU3dpcGUgPSAoKSA9PiB7XHJcbiAgICBpZiAoYm93c2VyLmFuZHJvaWQpIHtcclxuICAgICAgICBsZXQgeERvd24gPSBudWxsLFxyXG4gICAgICAgICAgICB5RG93biA9IG51bGwsXHJcbiAgICAgICAgICAgIG9mZnNldEJlZm9yZTtcclxuXHJcbiAgICAgICAgbGV0IGhhbmRsZVRvdWNoU3RhcnQgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYXBwLmlzU3dpcGUoKSkge1xyXG4gICAgICAgICAgICAgICAgeERvd24gPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgICAgICAgICAgICAgIHlEb3duID0gZS50b3VjaGVzWzBdLmNsaWVudFk7XHJcblxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0QmVmb3JlID0gJChlLnRhcmdldCkub2Zmc2V0KCkubGVmdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBoYW5kbGVUb3VjaE1vdmUgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYXBwLmlzU3dpcGUoKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9mZnNldEFmdGVyID0gJChlLnRhcmdldCkub2Zmc2V0KCkubGVmdDtcclxuICAgICAgICAgICAgICAgIGlmICgheERvd24gfHwgIXlEb3duIHx8IG9mZnNldEJlZm9yZSAhPT0gb2Zmc2V0QWZ0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgeFVwID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLFxyXG4gICAgICAgICAgICAgICAgICAgIHlVcCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSxcclxuICAgICAgICAgICAgICAgICAgICB4RGlmZiA9IHhEb3duIC0geFVwLFxyXG4gICAgICAgICAgICAgICAgICAgIHlEaWZmID0geURvd24gLSB5VXA7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoeERpZmYpID4gTWF0aC5hYnMoeURpZmYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gcGFyc2VJbnQoJCh3aW5kb3cpLndpZHRoKCkgLyAyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeURpZmYgPiAtMTAwIHx8IHlEaWZmIDwgMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50QXNpZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4RGlmZiA+IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsZWZ0IHN3aXBlICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFwcC5pc01vZGFsKCkgJiYgIWFwcC5pc0xvYWRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBc2lkZSA9IGFwcC5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEFzaWRlID09PSAnbGVmdCcgJiYgY3VycmVudEFzaWRlICE9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC50b2dnbGVBc2lkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEFzaWRlICE9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC50b2dnbGVBc2lkZSgncmlnaHQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoeERpZmYgPCAtZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHJpZ2h0IHN3aXBlICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFwcC5pc01vZGFsKCkgJiYgIWFwcC5pc0xvYWRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBc2lkZSA9IGFwcC5odG1sLmF0dHIoJ2RhdGEtYXNpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEFzaWRlID09PSAncmlnaHQnICYmIGN1cnJlbnRBc2lkZSAhPT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC50b2dnbGVBc2lkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEFzaWRlICE9PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLnRvZ2dsZUFzaWRlKCdsZWZ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qIHJlc2V0IHZhbHVlcyAqL1xyXG4gICAgICAgICAgICAgICAgeERvd24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgeURvd24gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgaGFuZGxlVG91Y2hTdGFydCwgZmFsc2UpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaGFuZGxlVG91Y2hNb3ZlLCBmYWxzZSk7XHJcbiAgICB9XHJcbn07IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbmFwcC5jbGVhclNlbGVjdGlvbiA9ICgpID0+IHtcclxuICAgIGxldCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XHJcbiAgICBzZWxlY3Rpb24uYWRkUmFuZ2UoZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSk7XHJcbn1cclxuXHJcbmFwcC5zdG9wVFRTID0gKCkgPT4ge1xyXG4gICAgYXBwLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICBpZiAoYXBwLnR0cyAmJiBhcHAudHRzLklzU3BlYWtpbmcoKSkge1xyXG4gICAgICAgIGFwcC50dHMuU2h1dFVwKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5hcHAuZW5hYmxlVFRTID0gKCkgPT4ge1xyXG4gICAgaWYgKGJvd3Nlci5kZXNrdG9wICYmICFib3dzZXIubXNpZSkge1xyXG4gICAgICAgIGxldCBzbmFwU2VsZWN0aW9uVG9Xb3JkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2UuY29sbGFwc2VkIHx8IHJhbmdlLnRvU3RyaW5nKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0IGZ1bGwgc3RhcnQgd29yZFxyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChyYW5nZS5zdGFydE9mZnNldCA+IDAgJiYgcmFuZ2UudG9TdHJpbmcoKVswXS5tYXRjaCgvW15cXHNdLykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0IC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBzcGFjZSBhcyBmaXJzdCBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IHJhbmdlLnN0YXJ0Q29udGFpbmVyLmRhdGEuc3Vic3RyaW5nKHJhbmdlLnN0YXJ0T2Zmc2V0KS5jaGFyQXQoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09PSAnICcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2V0U3RhcnQocmFuZ2Uuc3RhcnRDb250YWluZXIsIHJhbmdlLnN0YXJ0T2Zmc2V0ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdCBmdWxsIGVuZCB3b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJhbmdlLmVuZE9mZnNldCA8IHJhbmdlLmVuZENvbnRhaW5lci5sZW5ndGggJiYgcmFuZ2UudG9TdHJpbmcoKVtyYW5nZS50b1N0cmluZygpLmxlbmd0aCAtIDFdLm1hdGNoKC9bXlxcc10vKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zZXRFbmQocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHNwYWNlIGFzIGxhc3Qgc2VsZWN0ZWRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZW5kID0gcmFuZ2UuZW5kQ29udGFpbmVyLmRhdGEuc3Vic3RyaW5nKDAsIHJhbmdlLmVuZE9mZnNldCkuc2xpY2UoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmQgPT09ICcgJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zZXRFbmQocmFuZ2UuZW5kQ29udGFpbmVyLCByYW5nZS5lbmRPZmZzZXQgLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBnZXRUZXh0ID0gKG5vZGUsIHNlbGVjdGlvbikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGV4dCA9IFtdLFxyXG4gICAgICAgICAgICAgICAgbm9uV2hpdGVzcGFjZU1hdGNoZXIgPSAvXFxTLyxcclxuICAgICAgICAgICAgICAgIGdldFRleHROb2RlcyA9IChub2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmVudCA9ICQobm9kZS5wYXJlbnROb2RlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lhbCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uLmNvbnRhaW5zTm9kZShub2RlLCBmYWxzZSkgJiYgKG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZXh0YXJlYScpICYmIG5vbldoaXRlc3BhY2VNYXRjaGVyLnRlc3Qobm9kZS52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lhbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3BlY2lhbCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24uY29udGFpbnNOb2RlKG5vZGUsIHRydWUpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9uV2hpdGVzcGFjZU1hdGNoZXIudGVzdChub2RlLm5vZGVWYWx1ZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50LmlzKCc6dmlzaWJsZScpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5jc3MoJ3VzZXItc2VsZWN0JykgIT09ICdub25lJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQucGFyZW50cygpLmNzcygndXNlci1zZWxlY3QnKSAhPT0gJ25vbmUnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50Tm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJ1xyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShzZWxlY3Rpb24uZXh0ZW50Tm9kZS5ub2RlVHlwZSAhPT0gMyAmJiAkKHNlbGVjdGlvbi5leHRlbnROb2RlKS5pcyhwYXJlbnQpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RlLm5vZGVWYWx1ZS5tYXRjaCgvXFwuXFxzKiQvKSAmJiBub2RlLm5leHRFbGVtZW50U2libGluZyA9PT0gbnVsbCAmJiBwYXJlbnQuaXMoJ2gxIHNwYW4sIGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYsIHAsIHRoLCB0ZCwgLmRhdGFUYWJsZSB0aCBzcGFuJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LnB1c2gobm9kZS5ub2RlVmFsdWUgKyAnLiAnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC5wdXNoKG5vZGUubm9kZVZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKHNlbGVjdGlvbi5hbmNob3JOb2RlKS5pcyhzZWxlY3Rpb24uZm9jdXNOb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRbMF0gPSB0ZXh0WzBdLnN1YnN0cmluZygwLCBzZWxlY3Rpb24uZm9jdXNPZmZzZXQpLnN1YnN0cmluZyhzZWxlY3Rpb24uYmFzZU9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRbMF0gPSB0ZXh0WzBdLnN1YnN0cmluZyhzZWxlY3Rpb24uYmFzZU9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dFswXSA9PT0gJy4gJyB8fCB0ZXh0WzBdID09PSAnICcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0WzBdID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VGV4dE5vZGVzKG5vZGUuY2hpbGROb2Rlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBnZXRUZXh0Tm9kZXMobm9kZSk7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0Lmxlbmd0aCAmJiB0ZXh0Lmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHRleHRbdGV4dC5sZW5ndGggLSAxXSA9IHRleHRbdGV4dC5sZW5ndGggLSAxXS5zdWJzdHJpbmcoMCwgc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5qb2luKCcgJykucmVwbGFjZSgvKD86XFxyXFxufFxccnxcXG4pL2csICcgJykucmVwbGFjZSgvICtcXC4vZywgJy4gJykucmVwbGFjZSgvXFxzXFxzKy9nLCAnICcpLnJlcGxhY2UoJywuJywgJy4nKS50cmltKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGJvd3Nlci5tc2llKSB7XHJcbiAgICAgICAgICAgIGlmICghYXBwLmh0bWwuaGFzQ2xhc3MoJ3BvbHlmaWxscy1sb2FkZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgYXBwLmhlYWQuYXBwZW5kKCQoJzxzY3JpcHQgc3JjPVwiZGlzdC9qcy9wb2x5ZmlsbHMuanNcIj48L3NjcmlwdD4nKSk7XHJcbiAgICAgICAgICAgICAgICBhcHAuaHRtbC5hZGRDbGFzcygncG9seWZpbGxzLWxvYWRlZCcpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuZ2V0U2NyaXB0KCdkaXN0L2pzL3R0cy5qcycsICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IGF3c0NyZWRlbnRpYWxzID0gbmV3IEFXUy5DcmVkZW50aWFscygnQUtJQUk1Sk1DVkJaNENXU1NPT1EnLCAnRk03ajlGYlFMa1VVOHUzdEhTY3YwSU9HNElvYXlVa3AvUk5OTk5uaScpLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdzQ3JlZGVudGlhbHM6IGF3c0NyZWRlbnRpYWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIGF3c1JlZ2lvbjogJ2V1LWNlbnRyYWwtMScsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9sbHlWb2ljZUlkOiAnUnVzc2VsbCdcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBhcHAudHRzID0gQ2hhdHR5S2F0aHkoc2V0dGluZ3MpO1xyXG5cclxuICAgICAgICAgICAgYXBwLmh0bWwuYXR0cignZGF0YS10dHMnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICQod2luZG93KS5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhcHAuaXNMb2FkaW5nKCkgJiYgIWFwcC5pc0ZvY3VzKCkgJiYgYXBwLmlzVFRTKCkgJiYgYXBwLmlzVFRTRW5hYmxlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghJChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS5pcygnaW5wdXQsIHRleHRhcmVhLCBidXR0b24sIHNlbGVjdCwgLmRyb3Bkb3duJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFwcC5pc0xvYWRpbmcoKSAmJiAhYXBwLmlzRm9jdXMoKSAmJiBhcHAuaXNUVFMoKSAmJiBhcHAuaXNUVFNFbmFibGVkKCkgJiYgZS5vcmlnaW5hbEV2ZW50LmRldGFpbCA8IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0aW9uID0gc25hcFNlbGVjdGlvblRvV29yZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBnZXRUZXh0KHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLCBzZWxlY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC50dHMuU3BlYWtXaXRoUHJvbWlzZSh0ZXh0KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5zdG9wVFRTKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhcHAuaGVhZGVyLmZpbmQoJy50dHMnKS5jbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXBwLmh0bWwuYXR0cignZGF0YS10dHMnKSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmh0bWwuYXR0cignZGF0YS10dHMnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLnN0b3BUVFMoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmh0bWwuYXR0cignZGF0YS10dHMnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbiQoKCkgPT4ge1xyXG4gICAgYXBwLmh0bWwub24oJ21vZGVsLWNoZWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGxldCBjb250ZW50SGVhZGVyID0gYXBwLmNvbnRlbnQuY2hpbGRyZW4oJy5jb250ZW50LWhlYWRlcjpub3QoLmZ1bGwpJyk7XHJcbiAgICAgICAgaWYgKGNvbnRlbnRIZWFkZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmIChhcHAuaXNNb2RhbCgpICYmIGNvbnRlbnRIZWFkZXIuY3NzKCdwb3NpdGlvbicpID09PSAnZml4ZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGFsZk92ZXJmbG93WSA9IGFwcC5zY3JvbGxiYXJXaWR0aCAvIDI7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50SGVhZGVyLmNoaWxkcmVuKCkuY3NzKCd3aWR0aCcsICdjYWxjKDEwMCUgLSAnICsgaGFsZk92ZXJmbG93WSArICdweCknKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRIZWFkZXIuY2hpbGRyZW4oKS5jc3MoJ3dpZHRoJywgJycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pOyIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG5hcHAubG9hZFRoZW1lID0gKGlkKSA9PiB7XHJcblxyXG4gICAgbGV0IGxvYWRTdHlsZVNoZWV0ID0gKHBhdGgsIGZuLCBzY29wZSkgPT4ge1xyXG4gICAgICAgIHZhciBib2R5ID0gYXBwLmJvZHlbMF0sXHJcbiAgICAgICAgICAgIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XHJcblxyXG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgcGF0aCk7XHJcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ3JlbCcsICdzdHlsZXNoZWV0Jyk7XHJcbiAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTtcclxuXHJcbiAgICAgICAgdmFyIHNoZWV0LCBjc3NSdWxlcztcclxuXHJcbiAgICAgICAgLy8gZ2V0IHRoZSBjb3JyZWN0IHByb3BlcnRpZXMgdG8gY2hlY2sgZm9yIGRlcGVuZGluZyBvbiB0aGUgYnJvd3NlclxyXG4gICAgICAgIGlmICgnc2hlZXQnIGluIGxpbmspIHtcclxuICAgICAgICAgICAgc2hlZXQgPSAnc2hlZXQnO1xyXG4gICAgICAgICAgICBjc3NSdWxlcyA9ICdjc3NSdWxlcyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzaGVldCA9ICdzdHlsZVNoZWV0JztcclxuICAgICAgICAgICAgY3NzUnVsZXMgPSAncnVsZXMnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGludGVydmFsX2lkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmtbc2hlZXRdICYmIGxpbmtbc2hlZXRdW2Nzc1J1bGVzXS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsX2lkKTtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dF9pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4uY2FsbChzY29wZSB8fCB3aW5kb3csIHRydWUsIGxpbmspO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7IH0gZmluYWxseSB7IH1cclxuICAgICAgICB9LCAxMCksXHJcbiAgICAgICAgICAgIHRpbWVvdXRfaWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxfaWQpO1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRfaWQpO1xyXG4gICAgICAgICAgICAgICAgYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcclxuICAgICAgICAgICAgICAgIGZuLmNhbGwoc2NvcGUgfHwgd2luZG93LCBmYWxzZSwgbGluayk7XHJcbiAgICAgICAgICAgIH0sIDE1MDAwKTtcclxuXHJcbiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChsaW5rKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICB9XHJcblxyXG4gICAgYXBwLnNob3dMb2FkaW5nKCk7XHJcbiAgICBsZXQgc3R5bGVzaGVldCA9IGFwcC5ib2R5LmNoaWxkcmVuKCdsaW5rW3JlbD1cInN0eWxlc2hlZXRcIl1baHJlZl49XCInICsgYXBwLmhvc3QgKyAnZGlzdC9jc3MvdGhlbWUvXCJdJyksXHJcbiAgICAgICAgaHJlZiA9IHN0eWxlc2hlZXQuYXR0cignaHJlZicpLFxyXG4gICAgICAgIHNwbGl0MSA9IGhyZWYuc3BsaXQoJy8nKSxcclxuICAgICAgICBzcGxpdDIgPSBzcGxpdDFbc3BsaXQxLmxlbmd0aCAtIDFdLnNwbGl0KCcuJyk7XHJcbiAgICBocmVmID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNwbGl0MS5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICBocmVmLnB1c2goc3BsaXQxW2ldICsgJy8nKTtcclxuICAgIH1cclxuICAgIGxldCB0aGVtZSA9IGlkLnN1YnN0cmluZyhpZC5pbmRleE9mKFwiLVwiKSArIDEpO1xyXG4gICAgaHJlZi5wdXNoKHRoZW1lKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNwbGl0Mi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGhyZWYucHVzaCgnLicgKyBzcGxpdDJbaV0pO1xyXG4gICAgfVxyXG4gICAgaHJlZiA9IGhyZWYuam9pbihcIlwiKTtcclxuICAgIGxvYWRTdHlsZVNoZWV0KGhyZWYsIChzdWNjZXNzLCBsaW5rKSA9PiB7XHJcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgc3R5bGVzaGVldC5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFwcC5zaG93UG9wdXBBbGVydCgnRmFpbGVkIHRvIGxvYWQgdGhlbWUnLCAnZGFuZ2VyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFwcC5oaWRlTG9hZGluZygpO1xyXG4gICAgfSk7XHJcbn0iLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuYXBwLnNldE9ubGluZSA9ICgpID0+IHtcclxuICAgIGxldCBvbmxpbmUgPSBuYXZpZ2F0b3Iub25MaW5lO1xyXG5cclxuICAgIGFwcC5ib2R5LmZpbmQoJy5hbGVydFtkYXRhLXR5cGU9XCJjb25uZWN0ZWRcIl0nKS5yZW1vdmUoKTtcclxuICAgIGlmIChvbmxpbmUpIHtcclxuICAgICAgICBhcHAuc2hvd1BvcHVwQWxlcnQoJ1lvdSBhcmUgb25saW5lJywgJ3N1Y2Nlc3MnLCAnYm90dG9tIHJpZ2h0JywgJ2Nvbm5lY3RlZCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBhcHAuc2hvd1BvcHVwQWxlcnQoJ1lvdSBhcmUgb2ZmbGluZScsICdkYW5nZXInLCAnYm90dG9tIHJpZ2h0JywgJ2Nvbm5lY3RlZCcpO1xyXG4gICAgfVxyXG59XHJcblxyXG4kKCgpID0+IHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCBhcHAuc2V0T25saW5lKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgYXBwLnNldE9ubGluZSk7XHJcblxyXG4gICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7XHJcbiAgICAgICAgYXBwLnNldE9ubGluZSgpO1xyXG4gICAgfVxyXG59KTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuYXBwLmNoZWNrRHJvcGRvd24gPSAoZHJvcGRvd25zKSA9PiB7XHJcbiAgICBkcm9wZG93bnMuZWFjaCgoaSwgZSkgPT4ge1xyXG4gICAgICAgIGxldCAkdGhpcyA9ICQoZSksXHJcbiAgICAgICAgICAgIHNlbGVjdGVkID0gJHRoaXMuY2hpbGRyZW4oJ29wdGlvbjpzZWxlY3RlZCcpLFxyXG4gICAgICAgICAgICBodG1sID0gW10sXHJcbiAgICAgICAgICAgIGF0dHIgPSAkdGhpcy5hdHRyKCdjbGFzcycpLFxyXG4gICAgICAgICAgICB0aGVtZSA9ICcnLFxyXG4gICAgICAgICAgICB3aWR0aCA9ICR0aGlzLmF0dHIoJ2RhdGEtd2lkdGgnKTtcclxuICAgICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoICE9PSAxKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkID0gJHRoaXMuY2hpbGRyZW4oKS5maXJzdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJkcm9wZG93bicgK1xyXG4gICAgICAgICAgICAoJHRoaXMuaGFzQ2xhc3MoJ25vdC1maXJzdCcpID8gJyBub3QtZmlyc3QnIDogJycpICtcclxuICAgICAgICAgICAgKCR0aGlzLmhhc0NsYXNzKCdub3dyYXAnKSA/ICcgbm93cmFwJyA6ICcnKSArXHJcbiAgICAgICAgICAgICgkdGhpcy5oYXNDbGFzcygnY2hlY2snKSA/ICcgY2hlY2snIDogJycpICtcclxuICAgICAgICAgICAgKCR0aGlzLmhhc0NsYXNzKCdlbGxpcHNpcycpID8gJyBlbGxpcHNpcycgOiAnJykgK1xyXG4gICAgICAgICAgICAoJHRoaXMuaGFzQ2xhc3MoJ2FsaWduLWxlZnQnKSA/ICcgYWxpZ24tbGVmdCcgOiAnJykgK1xyXG4gICAgICAgICAgICAoJHRoaXMuaGFzQ2xhc3MoJ2FsaWduLXJpZ2h0JykgPyAnIGFsaWduLXJpZ2h0JyA6ICcnKSArXHJcbiAgICAgICAgICAgICgkdGhpcy5oYXNDbGFzcygnZGlyZWN0aW9uLXVwJykgPyAnIGRpcmVjdGlvbi11cCcgOiAnJykgK1xyXG4gICAgICAgICAgICAnXCInICtcclxuICAgICAgICAgICAgKHdpZHRoICE9PSB1bmRlZmluZWQgPyAnIHN0eWxlPVwid2lkdGg6JyArIHdpZHRoICsgJ3B4XCInIDogJycpXHJcbiAgICAgICAgICAgICsgJz4gJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHR5cGVvZiBhdHRyICE9PSB0eXBlb2YgdW5kZWZpbmVkICYmIGF0dHIgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGxldCB0ZW1wID0gYXR0ci5zcGxpdCgnICcpO1xyXG4gICAgICAgICAgICB0ZW1wID0gJC5ncmVwKHRlbXAsIGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udHJpbSgpLm1hdGNoKC9edGhlbWUtLyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAodGVtcC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoZW1lID0gdGVtcFswXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBodG1sLnB1c2goJzxkaXYgdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCInICsgdGhlbWUgKyAnXCI+PGxhYmVsPicgKyBzZWxlY3RlZC50ZXh0KCkgKyAnPC9sYWJlbD48c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCI+PHVzZSB4bGluazpocmVmPVwiI3N2Zy1hcnJvd1wiPjwvdXNlPjwvc3ZnPjwvZGl2PicpO1xyXG4gICAgICAgIGh0bWwucHVzaCgnPHVsIGNsYXNzPVwiJyArIHRoZW1lICsgJ1wiPicpO1xyXG4gICAgICAgICR0aGlzLmNoaWxkcmVuKCkuZWFjaCgoaSwgZSkgPT4geyAvKiAnOm5vdChbdmFsdWU9XCJcIl0pJyAqL1xyXG4gICAgICAgICAgICBsZXQgJHRoYXQgPSAkKGUpLFxyXG4gICAgICAgICAgICAgICAgdGV4dCA9ICR0aGF0LnRleHQoKTtcclxuICAgICAgICAgICAgaWYgKCF0ZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGV4dCA9ICcmbmJzcDsnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0ZXh0LmluZGV4T2YoJyQkJykgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICR0aGF0LmF0dHIoJ2RhdGEtbWF0aCcsIHRleHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBodG1sLnB1c2goJzxsaSBkYXRhLWlkPVwiJyArICR0aGF0LnZhbCgpICsgJ1wiJyArICgkdGhhdC5pcygnOnNlbGVjdGVkJykgPyAnIGNsYXNzPVwic2VsZWN0ZWRcIicgOiAnJykgKyAnPjxkaXYgdGFiaW5kZXg9XCIwXCIgY2xhc3M9XCJ0aGVtZS1saWdodFwiPjxsYWJlbD4nICsgdGV4dCArICc8L2xhYmVsPjxzdmcgZm9jdXNhYmxlPVwiZmFsc2VcIj48dXNlIHhsaW5rOmhyZWY9XCIjc3ZnLWNoZWNrbWFya1wiPjwvdXNlPjwvc3ZnPjwvZGl2PjwvbGk+Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaHRtbC5wdXNoKCc8L3VsPicpO1xyXG4gICAgICAgIGh0bWwucHVzaCgnPC9kaXY+Jyk7XHJcbiAgICAgICAgbGV0IGRyb3Bkb3duID0gaHRtbC5qb2luKFwiXCIpO1xyXG4gICAgICAgICR0aGlzLmFmdGVyKGRyb3Bkb3duKTtcclxuICAgICAgICBkcm9wZG93biA9ICR0aGlzLm5leHQoKTtcclxuXHJcblxyXG4gICAgICAgIGlmICgkdGhpcy5oYXNDbGFzcygnbm93cmFwJykpIHtcclxuICAgICAgICAgICAgbGV0IHRvcCA9IGRyb3Bkb3duLmNoaWxkcmVuKCkuZXEoMCksXHJcbiAgICAgICAgICAgICAgICBib3R0b20gPSBkcm9wZG93bi5jaGlsZHJlbigpLmVxKDEpLFxyXG4gICAgICAgICAgICAgICAgdG9wV2lkdGggPSB0b3Aud2lkdGgoKSxcclxuICAgICAgICAgICAgICAgIGJvdHRvbVdpZHRoID0gYm90dG9tLndpZHRoKCk7XHJcbiAgICAgICAgICAgIGlmIChib3R0b21XaWR0aCA+IHRvcFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0b3AuY3NzKCdtaW4td2lkdGgnLCBib3R0b21XaWR0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRyb3Bkb3duLm9uKCdjbGljaycsICc+IGRpdicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCAkdGhhdCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgJHRoYXQucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkcm9wZG93bi5vbignY2xpY2snLCAnbGknLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgJHRoYXQgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmICghJHRoYXQuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcclxuICAgICAgICAgICAgICAgICR0aGF0LnNpYmxpbmdzKCcuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICR0aGF0LmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9ICR0aGlzLmNoaWxkcmVuKCdbdmFsdWU9XCInICsgJHRoYXQuYXR0cignZGF0YS1pZCcpICsgJ1wiXScpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQgPSAkdGhhdC50ZXh0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWF0aCA9IG9wdGlvbi5hdHRyKCdkYXRhLW1hdGgnKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gbWF0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBsYWJlbCA9IGRyb3Bkb3duLmNoaWxkcmVuKCdkaXYnKS5jaGlsZHJlbignbGFiZWwnKTtcclxuICAgICAgICAgICAgICAgIGxhYmVsLnRleHQodGV4dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0aCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyTWF0aEluRWxlbWVudChsYWJlbFswXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5jaGlsZHJlbignOnNlbGVjdGVkJykucmVtb3ZlQXR0cignc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5hdHRyKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuY2hhbmdlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHJvcGRvd24ucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuJCh3aW5kb3cpLmNsaWNrKChlKSA9PiB7XHJcbiAgICBsZXQgdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoXCJkaXYuZHJvcGRvd25cIikubGVuZ3RoKSB7XHJcbiAgICAgICAgJCgnZGl2LmRyb3Bkb3duJykubm90KHRhcmdldC5jbG9zZXN0KFwiZGl2LmRyb3Bkb3duXCIpKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGFyZ2V0LmNsb3Nlc3QoXCIuZHJvcGRvd25cIikubGVuZ3RoKSB7XHJcbiAgICAgICAgJCgnZGl2LmRyb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgIH1cclxufSk7IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbmFwcC5jaGVja0FjY29yZGlvbiA9IChlbGVtZW50cykgPT4ge1xyXG4gICAgZWxlbWVudHMub24oXCJjbGlja1wiLCBcIi5oZWFkbGluZVwiLCAoZSkgPT4ge1xyXG4gICAgICAgIGxldCBjb250ZW50ID0gJChlLmN1cnJlbnRUYXJnZXQpLm5leHQoKTtcclxuICAgICAgICBpZiAoY29udGVudC5oYXNDbGFzcygnb3BlbicpKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnRcclxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnb3BlbicpXHJcbiAgICAgICAgICAgICAgICAuc2xpZGVVcChcIjgwMFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb250ZW50XHJcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJvcGVuXCIpXHJcbiAgICAgICAgICAgICAgICAuc2xpZGVUb2dnbGUoXCI4MDBcIilcclxuICAgICAgICAgICAgICAgIC5wYXJlbnRzKCcuYWNjb3JkaW9uJykuZmluZChcIi5jb250ZW50Lm9wZW5cIikubm90KGNvbnRlbnQpLnJlbW92ZUNsYXNzKCdvcGVuJykuc2xpZGVVcChcIjgwMFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxudmFyIGNsb3NlQWxlcnQgPSAodGFyZ2V0KSA9PiB7XHJcbiAgICB0YXJnZXQuZmFkZU91dChhcHAuZmFkZU91dFRpbWUsICgpID0+IHtcclxuICAgICAgICBsZXQgcGFyZW50ID0gdGFyZ2V0LnBhcmVudCgpO1xyXG4gICAgICAgIGlmIChwYXJlbnQuaGFzQ2xhc3MoJ3BvcHVwJykgJiYgcGFyZW50LmNoaWxkcmVuKCkubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIHBhcmVudC5yZW1vdmUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgYXBwLmJvZHkub24oJ2NsaWNrJywgJy5hbGVydCAuY2xvc2UnLCAoZSkgPT4ge1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSAkKGUuY3VycmVudFRhcmdldCkucGFyZW50KCk7XHJcbiAgICAgICAgY2xvc2VBbGVydCh0YXJnZXQpO1xyXG4gICAgfSk7XHJcbn0pOyIsInZhciBhcHAgPSBhcHAgfHwge30sXHJcbiAgICBnb29nbGU7XHJcblxyXG5hcHAuY2hlY2tNYXAgPSAobWFwcykgPT4ge1xyXG4gICAgYXBwLmhlYWQuZmluZCgnc2NyaXB0W3NyY149XCJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy1hcGktXCJdJykucmVtb3ZlKCk7XHJcbiAgICBpZiAobWFwcy5sZW5ndGgpIHtcclxuICAgICAgICBpZiAoIWFwcC5odG1sLmhhc0NsYXNzKCdtYXAtbG9hZGVkJykpIHtcclxuICAgICAgICAgICAgYXBwLmhlYWQuYXBwZW5kKCQoJzxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2tleT1BSXphU3lCRWNvbURqUlM0TnUzUlFDa2tTSVEwbnJCaHVRTTBnbmdcIj48L3NjcmlwdD4nKSk7XHJcbiAgICAgICAgICAgIGFwcC5odG1sLmFkZENsYXNzKCdtYXAtbG9hZGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGltZW91dCA9IDEwMDtcclxuICAgICAgICBsZXQgY2hlY2tHb29nbGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChnb29nbGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbWFwcy5lYWNoKChpLCBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0ICR0aGlzID0gJChlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF0ID0gYXBwLnRyeVBhcnNlRmxvYXQoJHRoaXMuYXR0cignZGF0YS1sYXQnKSwgMzcuNDAyOTkzNyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxuZyA9IGFwcC50cnlQYXJzZUZsb2F0KCR0aGlzLmF0dHIoJ2RhdGEtbG5nJyksIC0xMjIuMTgxMTc5MyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb20gPSBhcHAudHJ5UGFyc2VJbnQoJHRoaXMuYXR0cignZGF0YS16b29tJyksIDQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3JkcyA9IHsgbGF0OiBsYXQsIGxuZzogbG5nIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKCR0aGlzWzBdLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IHpvb20sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogY29yZHNcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogY29yZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogbWFwXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLmJpbmQoJ3Jlc2l6ZS5tYXAnLCAkLnRocm90dGxlKGFwcC50aHJvdHRsZUludGVydmFsLCBmYWxzZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKCR0aGlzWzBdLCAncmVzaXplJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhcHAuaHRtbC5vbignYXNpZGUtY2hhbmdlZC5tYXAnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIoJHRoaXNbMF0sICdyZXNpemUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoY2hlY2tHb29nbGUsIHRpbWVvdXQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2hlY2tHb29nbGUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCh3aW5kb3cpLnVuYmluZCgncmVzaXplLm1hcCcpO1xyXG4gICAgICAgIGFwcC5odG1sLm9mZignYXNpZGUtY2hhbmdlZC5tYXAnKTtcclxuICAgIH1cclxufTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuYXBwLmNoZWNrTWF0aCA9IChtYXRoKSA9PiB7XHJcbiAgICBpZiAobWF0aC5sZW5ndGgpIHtcclxuICAgICAgICBpZiAoIWFwcC5odG1sLmhhc0NsYXNzKCdtYXRoLWxvYWRlZCcpKSB7XHJcbiAgICAgICAgICAgIGFwcC5oZWFkLmFwcGVuZCgkKCc8bGluayByZWw9XCJzdHlsZXNoZWV0XCJocmVmPVwiZGlzdC9jc3Mva2F0ZXguY3NzXCI+JykpO1xyXG4gICAgICAgICAgICBhcHAuaHRtbC5hZGRDbGFzcygnbWF0aC1sb2FkZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuZ2V0U2NyaXB0KCdkaXN0L2pzL2thdGV4LmpzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBtYXRoLmVhY2goKGksIGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZSk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJNYXRoSW5FbGVtZW50KCR0aGlzWzBdKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdtYXRoJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn07IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbmFwcC5jaGVja01lZGlhID0gKG1lZGlhKSA9PiB7XHJcbiAgICBpZiAobWVkaWEubGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKCFhcHAuaHRtbC5oYXNDbGFzcygnbWVkaWEtbG9hZGVkJykpIHtcclxuICAgICAgICAgICAgYXBwLmhlYWQuYXBwZW5kKCQoJzxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiZGlzdC9jc3MvcGx5ci5jc3NcIj4nKSk7XHJcbiAgICAgICAgICAgIGFwcC5odG1sLmFkZENsYXNzKCdtZWRpYS1sb2FkZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuZ2V0U2NyaXB0KCdkaXN0L2pzL3BseXIuanMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG1lZGlhLmVhY2goZnVuY3Rpb24gKGksIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIG5ldyBQbHlyKGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuYXBwLmNoZWNrTGF6eSA9IChlbGVtZW50cykgPT4ge1xyXG4gICAgZWxlbWVudHMubGF6eSh7XHJcbiAgICAgICAgYWZ0ZXJMb2FkOiAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKCdsYXp5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbiQoKCkgPT4ge1xyXG4gICAgYXBwLmJvZHkub24oJ2NsaWNrJywgJy5zaG93LXBvcHVwLWFsZXJ0JywgKGUpID0+IHtcclxuICAgICAgICBsZXQgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCksXHJcbiAgICAgICAgICAgIHRpdGxlID0gJHRoaXMuYXR0cignZGF0YS1wb3B1cC10aXRsZScpLFxyXG4gICAgICAgICAgICB0aGVtZSA9ICR0aGlzLmF0dHIoJ2RhdGEtcG9wdXAtdGhlbWUnKSxcclxuICAgICAgICAgICAgcG9zaXRpb24gPSAkdGhpcy5hdHRyKCdkYXRhLXBvcHVwLXBvc2l0aW9uJyk7XHJcbiAgICAgICAgYXBwLnNob3dQb3B1cEFsZXJ0KHRpdGxlLCB0aGVtZSwgcG9zaXRpb24pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnNob3dQb3B1cEFsZXJ0ID0gKHRpdGxlLCB0aGVtZSA9ICdsaWdodCcsIHBvc2l0aW9uID0gJ3RvcCBsZWZ0JywgdHlwZSA9ICdkZWZhdWx0JykgPT4ge1xyXG4gICAgaWYgKHRpdGxlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsZXQgYWxlcnQgPSBbXSxcclxuICAgICAgICAgICAgcG9wdXAgPSBhcHAuYm9keS5jaGlsZHJlbignLnBvcHVwW2RhdGEtcG9zaXRpb249XCInICsgcG9zaXRpb24gKyAnXCJdJyk7XHJcbiAgICAgICAgYWxlcnQucHVzaCgnPGRpdiBjbGFzcz1cImFsZXJ0IHRoZW1lLScgKyB0aGVtZSArICdcIiBkYXRhLXR5cGU9XCInICsgdHlwZSArICdcIj4nKTtcclxuICAgICAgICBhbGVydC5wdXNoKCc8ZGl2PjxwPicgKyB0aXRsZSArICc8L3A+PC9kaXY+Jyk7XHJcbiAgICAgICAgYWxlcnQucHVzaCgnPGJ1dHRvbiBjbGFzcz1cImNsb3NlXCIgYXJpYS1sYWJlbD1cIkNsb3NlIHBvcHVwXCI+PHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiPjx1c2UgeGxpbms6aHJlZj1cIiNzdmctY2xvc2VcIj48L3VzZT48L3N2Zz48L2J1dHRvbj4nKTtcclxuICAgICAgICBhbGVydC5wdXNoKCc8L2Rpdj4nKTtcclxuICAgICAgICBhbGVydCA9IGFsZXJ0LmpvaW4oJycpO1xyXG4gICAgICAgIGlmIChwb3B1cC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcG9wdXAuYXBwZW5kKGFsZXJ0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgaHRtbCA9IFtdO1xyXG4gICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJwb3B1cCBwb3NpdGlvbiAnICsgcG9zaXRpb24gKyAnXCIgZGF0YS1wb3NpdGlvbj1cIicgKyBwb3NpdGlvbiArICdcIj4nKTtcclxuICAgICAgICAgICAgaHRtbC5wdXNoKGFsZXJ0KTtcclxuICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2Rpdj4nKTtcclxuICAgICAgICAgICAgaHRtbCA9IGh0bWwuam9pbihcIlwiKTtcclxuICAgICAgICAgICAgYXBwLmJvZHkucHJlcGVuZChodG1sKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuLy8gcmVzcG9uc2l2ZS1iYWNrZ3JvdW5kXHJcbmFwcC5jaGVja1Jlc3BvbnNpdmVCYWNrZ3JvdW5kID0gKGVsZW1lbnRzKSA9PiB7XHJcbiAgICBsZXQgc2V0UmIgPSAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGxldCBpbWFnZSA9IGVsZW1lbnQuYXR0cignZGF0YS1yYi1pbWFnZScpLFxyXG4gICAgICAgICAgICBmaWxldHlwZSA9IGVsZW1lbnQuYXR0cignZGF0YS1yYi1pbWFnZS1maWxldHlwZScpLFxyXG4gICAgICAgICAgICBzaXplc1dpZHRoID0gZWxlbWVudC5hdHRyKCdkYXRhLXJiLXNpemVzJyksXHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBlbGVtZW50LmF0dHIoJ2RhdGEtcmItY3VycmVudCcpLFxyXG4gICAgICAgICAgICBhc3BlY3RSYXRpbyA9IGVsZW1lbnQuYXR0cignZGF0YS1yYi1hc3BlY3QtcmF0aW8nKTtcclxuICAgICAgICBpZiAoaW1hZ2UgIT09IHVuZGVmaW5lZCAmJiBpbWFnZS5sZW5ndGggJiZcclxuICAgICAgICAgICAgZmlsZXR5cGUgIT09IHVuZGVmaW5lZCAmJiBmaWxldHlwZS5sZW5ndGggJiZcclxuICAgICAgICAgICAgc2l6ZXNXaWR0aCAhPT0gdW5kZWZpbmVkICYmIHNpemVzV2lkdGgubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIGFzcGVjdFJhdGlvICE9PSB1bmRlZmluZWQgJiYgYXNwZWN0UmF0aW8ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICgoZmlsZXR5cGUgPT09ICdqcGcnIHx8IGZpbGV0eXBlID09PSAnanBlZycgfHwgZmlsZXR5cGUgPT09ICdwbmcnKSAmJlxyXG4gICAgICAgICAgICAgICAgKGFzcGVjdFJhdGlvID09PSAnMjFieTknIHx8IGFzcGVjdFJhdGlvID09PSAnMTZieTknIHx8IGFzcGVjdFJhdGlvID09PSAnNGJ5MycgfHwgYXNwZWN0UmF0aW8gPT09ICcxYnkxJykpIHtcclxuICAgICAgICAgICAgICAgIHNpemVzV2lkdGggPSBzaXplc1dpZHRoLnJlcGxhY2UoL1xccy9nLCAnJykuc3BsaXQoJywnKS5zb3J0KChhLCBiKSA9PiB7IHJldHVybiBhIC0gYjsgfSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZ29hbFdpZHRoID0gZWxlbWVudC53aWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGdvYWxIZWlnaHQgPSBlbGVtZW50LmhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RXaWR0aCxcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZXN0SGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodFBlcmNlbnRhZ2U7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0SGVpZ2h0SW5QZXJjZW50YWdlKG51bSwgYW1vdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bSAqIDEwMCAvIGFtb3VudDtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFzcGVjdFJhdGlvID09PSAnMjFieTknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0UGVyY2VudGFnZSA9IGdldEhlaWdodEluUGVyY2VudGFnZSg5LCAyMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFzcGVjdFJhdGlvID09PSAnMTZieTknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0UGVyY2VudGFnZSA9IGdldEhlaWdodEluUGVyY2VudGFnZSg5LCAxNik7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhc3BlY3RSYXRpbyA9PT0gJzRieTMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0UGVyY2VudGFnZSA9IGdldEhlaWdodEluUGVyY2VudGFnZSgzLCA0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFzcGVjdFJhdGlvID09PSAnMWJ5MScpIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHRQZXJjZW50YWdlID0gMTAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEhlaWdodEluUGl4ZWxzKG51bSwgYW1vdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bSAqIGFtb3VudCAvIDEwMDtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKHNpemVzV2lkdGgsIChpLCBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHdpZHRoID0gcGFyc2VJbnQoZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IGdldEhlaWdodEluUGl4ZWxzKGhlaWdodFBlcmNlbnRhZ2UsIHdpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VzdFdpZHRoID09PSB1bmRlZmluZWQgfHwgd2lkdGggPCBnb2FsV2lkdGggfHwgY2xvc2VzdFdpZHRoIDwgZ29hbFdpZHRoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RIZWlnaHQgPT09IHVuZGVmaW5lZCB8fCBoZWlnaHQgPCBnb2FsSGVpZ2h0IHx8IGNsb3Nlc3RIZWlnaHQgPCBnb2FsSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RXaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0SGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ICE9PSB1bmRlZmluZWQgJiYgY3VycmVudC5sZW5ndGggJiYgcGFyc2VJbnQoY3VycmVudCkgPCBjbG9zZXN0V2lkdGggfHwgY3VycmVudCA9PT0gdW5kZWZpbmVkIHx8IGN1cnJlbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmJvZHkuYXBwZW5kKCc8aW1nIGlkPVwicmJcIiBjbGFzcz1cImhpZGRlblwiIHNyYz1cIicgKyBpbWFnZSArICctJyArIGNsb3Nlc3RXaWR0aCArICcuJyArIGZpbGV0eXBlICsgJ1wiIC8+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBJbWFnZSA9IGFwcC5ib2R5LmNoaWxkcmVuKCcjcmInKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wSW1hZ2Uub24oJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBJbWFnZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyYyA9ICd1cmwoJyArIGltYWdlICsgJy0nICsgY2xvc2VzdFdpZHRoICsgJy4nICsgZmlsZXR5cGUgKyAnKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgc3JjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hdHRyKCdkYXRhLXJiLWN1cnJlbnQnLCBjbG9zZXN0V2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmKGVsZW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgIGVsZW1lbnRzLmVhY2goKGksIGUpID0+IHtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSAkKGUpO1xyXG5cclxuICAgICAgICAgICAgc2V0UmIoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZS5yYicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFJiKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGFwcC5odG1sLm9uKCdjb2x1bW5zLWNoYW5nZWQucmInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRSYihlbGVtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhcHAuaHRtbC5vbignYXNpZGUtY2hhbmdlZC5yYicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFJiKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQod2luZG93KS5vZmYoJ3Jlc2l6ZS5yYicpO1xyXG4gICAgICAgIGFwcC5odG1sLm9mZignY29sdW1ucy1jaGFuZ2VkLnJiJyk7XHJcbiAgICAgICAgYXBwLmh0bWwub2ZmKCdhc2lkZS1jaGFuZ2VkLnJiJyk7XHJcbiAgICB9XHJcbiAgICBcclxufTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuYXBwLmNoZWNrVG9vbHRpcCA9ICh0b29sdGlwcykgPT4ge1xyXG4gICAgdG9vbHRpcHMuZWFjaCgoaSwgZSkgPT4ge1xyXG4gICAgICAgIGxldCAkdGhpcyA9ICQoZSksXHJcbiAgICAgICAgICAgIGludGVyYWN0aXZlID0gJHRoaXMuaGFzQ2xhc3MoJ2ludGVyYWN0aXZlJyk7XHJcbiAgICAgICAgJHRoaXMudG9vbHRpcHN0ZXIoe1xyXG4gICAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgaW50ZXJhY3RpdmU6IGludGVyYWN0aXZlLFxyXG4gICAgICAgICAgICB0cmlnZ2VyOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgdHJpZ2dlck9wZW46IHtcclxuICAgICAgICAgICAgICAgIG1vdXNlZW50ZXI6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB0b3VjaHN0YXJ0OiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRyaWdnZXJDbG9zZToge1xyXG4gICAgICAgICAgICAgICAgbW91c2VsZWF2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRhcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNjcm9sbDogdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xyXG5cclxuYXBwLmNoZWNrRGF0YXRhYmxlID0gKHRhYmxlcykgPT4ge1xyXG4gICAgaWYgKHRhYmxlcy5sZW5ndGgpIHtcclxuICAgICAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgICAgIGFwcC5zaG93TG9hZGluZygpO1xyXG4gICAgICAgICQuZ2V0U2NyaXB0KCdkaXN0L2pzL2RhdGF0YWJsZXMuanMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzcGFjaW5nID0gJ3NwYWNlLTMnO1xyXG5cclxuICAgICAgICAgICAgbGV0IHRhYmxlX2hlYWRlcl9pbnB1dCA9IChpbnN0YW5jZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbHVtbnMgPSBpbnN0YW5jZS5jb2x1bW5zKCkuaGVhZGVyKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWxlbWVudHMgPSBqUXVlcnkuZ3JlcChjb2x1bW5zLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb2x1bW4gPSAkKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2x1bW4uaGFzQ2xhc3MoJ2Ryb3Bkb3duJykgfHwgY29sdW1uLmhhc0NsYXNzKCd0ZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbHVtbnMoKS5ldmVyeShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRoID0gdGhpcy5oZWFkZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRoLmlubmVyVGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uID0gJCh0aCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlID0gJyc7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWluV2lkdGggPSBjb2x1bW4uYXR0cignZGF0YS1taW4td2lkdGgnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWluV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUgKz0gJ21pbi13aWR0aDogJyArIG1pbldpZHRoICsgJ3B4Oyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb2x1bW4uZW1wdHkoKS5hcHBlbmQoJzxkaXYgc3R5bGU9XCInICsgc3R5bGUgKyAnXCI+PGRpdj48c3Bhbj4nICsgdGV4dCArICc8L3NwYW4+PC9kaXY+JyArIChlbGVtZW50cy5sZW5ndGggPyAnPGRpdj48L2Rpdj4nIDogJycpICsgJzwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IGNvbHVtbi5pbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmhhc0NsYXNzKCdkcm9wZG93bicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3QgPSAkKCc8c2VsZWN0IGNsYXNzPVwiZHJvcGRvd24gYWxpZ24tbGVmdCBub3dyYXBcIj48b3B0aW9uIHZhbHVlPVwiXCI+PC9vcHRpb24+PC9zZWxlY3Q+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhjb2x1bW4uZmluZCgnPiBkaXYgPiBkaXY6bGFzdC1jaGlsZCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbHVtbihpbmRleCkuc2VhcmNoKGUuY3VycmVudFRhcmdldC52YWx1ZSkuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEoKS51bmlxdWUoKS5zb3J0KCkuZWFjaCgoZCwgaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0LmFwcGVuZCgnPG9wdGlvbiB2YWx1ZT1cIicgKyBkICsgJ1wiPicgKyBkICsgJzwvb3B0aW9uPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbHVtbi5oYXNDbGFzcygndGV4dCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dCA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIC8+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhjb2x1bW4uZmluZCgnPiBkaXYgPiBkaXY6bGFzdC1jaGlsZCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdrZXl1cCBjaGFuZ2UnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbHVtbihpbmRleCkuc2VhcmNoKGUuY3VycmVudFRhcmdldC52YWx1ZSkuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnBhcmVudCgpLmFkZENsYXNzKCdmb3JtLWdyb3VwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHRhYmxlX2hlYWRlcl9zb3J0ID0gKGluc3RhbmNlLCB3cmFwcGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGggPSB3cmFwcGVyLmZpbmQoJ3RoZWFkIHRoJyk7XHJcbiAgICAgICAgICAgICAgICB0aC51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICB0aC5maW5kKCc+IGRpdiA+IGRpdjpmaXJzdC1jaGlsZCcpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJzb3J0LWJ0blwiPjwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgIHRoLmNsaWNrKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0ICR0aGlzID0gJChlLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdGhpcy5jbG9zZXN0KCdkaXYuZHJvcGRvd24nKS5sZW5ndGggJiYgISR0aGlzLmNsb3Nlc3QoJ2lucHV0JykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSAkdGhpcy5wYXJlbnRzKCd0aCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBwYXJlbnQuaW5kZXgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC5oYXNDbGFzcygnc29ydGluZ19hc2MnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UuY29sdW1uKGluZGV4KS5vcmRlcignZGVzYycpLmRyYXcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jb2x1bW4oaW5kZXgpLm9yZGVyKCdhc2MnKS5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdGFibGVfaGVhZGVyX2xlbmd0aCA9ICh3cmFwcGVyLCBoZWFkZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBsZW5ndGggPSB3cmFwcGVyLmZpbmQoJy5kYXRhVGFibGVzX2xlbmd0aCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duID0gbGVuZ3RoLmZpbmQoJ3NlbGVjdCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxlbmd0aC5hcHBlbmQoZHJvcGRvd24pO1xyXG4gICAgICAgICAgICAgICAgbGVuZ3RoLmNoaWxkcmVuKCdsYWJlbCcpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkQ2xhc3MoJ2Ryb3Bkb3duJykuYXR0cignZGF0YS13aWR0aCcsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKGxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHRhYmxlX2hlYWRlcl9idXR0b25zID0gKHdyYXBwZXIsIGhlYWRlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IHdyYXBwZXIuZmluZCgnLmR0LWJ1dHRvbnMnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZmxleCBjb2x1bW4gd3JhcCAnICsgc3BhY2luZyArICdcIj48L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZGl2ID0gY29udGFpbmVyLmNoaWxkcmVuKCdkaXYnKSxcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25zID0gY29udGFpbmVyLmNoaWxkcmVuKCdidXR0b24nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKGRpdik7XHJcbiAgICAgICAgICAgICAgICBidXR0b25zLmFkZENsYXNzKCdidG4nKTtcclxuICAgICAgICAgICAgICAgIGRpdi5hcHBlbmQoYnV0dG9ucyk7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXIuYXBwZW5kKGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHRhYmxlX2hlYWRlcl9maWx0ZXIgPSAod3JhcHBlciwgaGVhZGVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyID0gd3JhcHBlci5maW5kKCcuZGF0YVRhYmxlc19maWx0ZXInKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXIuYWRkQ2xhc3MoJ2lucHV0LWdyb3VwJyk7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXIuZmluZCgnaW5wdXQnKS5hcHBlbmRUbyhmaWx0ZXIpO1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwLWFkZG9uXCI+PHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiPjx1c2UgeGxpbms6aHJlZj1cIiNzdmctc2VhcmNoXCI+PC91c2U+PC9zdmc+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXIuZmluZCgnbGFiZWwnKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGhlYWRlci5hcHBlbmQoZmlsdGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdGFibGVfY29udGVudCA9ICh3cmFwcGVyLCBjb250ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFibGUgPSB3cmFwcGVyLmZpbmQoJ3RhYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LmFwcGVuZCh0YWJsZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFibGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHRhYmxlX2Zvb3Rlcl9pbmZvID0gKHdyYXBwZXIsIGZvb3RlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGluZm8gPSB3cmFwcGVyLmZpbmQoJy5kYXRhVGFibGVzX2luZm8nKTtcclxuICAgICAgICAgICAgICAgIGZvb3Rlci5hcHBlbmQoaW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHBhZ2luYXRlRml4ID0gKHBhZ2luYXRlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3BhbiA9IHBhZ2luYXRlLmNoaWxkcmVuKCdzcGFuJyksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldiA9IHBhZ2luYXRlLmZpbmQoJy5wYWdpbmF0ZV9idXR0b24ucHJldmlvdXMnKSxcclxuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gcGFnaW5hdGUuZmluZCgnLnBhZ2luYXRlX2J1dHRvbi5uZXh0Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcHJldi5odG1sKCc8c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCI+PHVzZSB4bGluazpocmVmPVwiI3N2Zy1hcnJvd1wiPjwvdXNlPjwvc3ZnPicpO1xyXG4gICAgICAgICAgICAgICAgbmV4dC5odG1sKCc8c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCI+PHVzZSB4bGluazpocmVmPVwiI3N2Zy1hcnJvd1wiPjwvdXNlPjwvc3ZnPicpO1xyXG5cclxuICAgICAgICAgICAgICAgIHByZXYucHJlcGVuZFRvKHNwYW4pO1xyXG4gICAgICAgICAgICAgICAgbmV4dC5hcHBlbmRUbyhzcGFuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdGFibGVfZm9vdGVyX3BhZ2luYXRlID0gKHdyYXBwZXIsIGZvb3RlciwgcGFnaW5hdGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHBhZ2luYXRlLmFkZENsYXNzKCdmbGV4IGNvbHVtbiB3cmFwJyk7XHJcbiAgICAgICAgICAgICAgICBmb290ZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZGF0YVRhYmxlc19wYWdpbmF0ZV9jb250YWluZXJcIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgIGxldCBjb250YWluZXIgPSBmb290ZXIuZmluZCgnLmRhdGFUYWJsZXNfcGFnaW5hdGVfY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgICAgICBwYWdpbmF0ZUZpeChwYWdpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKHBhZ2luYXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgdGFibGVfZHJvcGRvd25zID0gKHdyYXBwZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBkcm9wZG93bnMgPSB3cmFwcGVyLmZpbmQoJ3NlbGVjdC5kcm9wZG93bicpO1xyXG4gICAgICAgICAgICAgICAgYXBwLmNoZWNrRHJvcGRvd24oZHJvcGRvd25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGFibGVzLmVhY2goKGksIGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCAkdGhpcyA9ICQoZSk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnbm93cmFwJyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5EYXRhVGFibGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiZG9tXCI6ICdsQmZydGlwJyxcclxuICAgICAgICAgICAgICAgICAgICBcImJTb3J0Q2VsbHNUb3BcIjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJ2NvcHknLCAnZXhjZWwnLCAnY3N2J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRlbmQ6ICdjb3B5SHRtbDUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiBmYWxzZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kOiAnZXhjZWxIdG1sNScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb290ZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0T3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9ybWF0XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBmdW5jdGlvbiAodGV4dCwgaW5kZXgsIHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aCkuZmluZCgnc3BhbjpmaXJzdCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kOiAnY3N2SHRtbDUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydE9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvcm1hdFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogZnVuY3Rpb24gKHRleHQsIGluZGV4LCB0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodGgpLmZpbmQoJ3NwYW46Zmlyc3QnKS5odG1sKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5pdENvbXBsZXRlOiBmdW5jdGlvbiAoc2V0dGluZ3MsIGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5hcGkoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIgPSAkKHNldHRpbmdzLm5UYWJsZVdyYXBwZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJkYXRhVGFibGVzX2hlYWRlciBmbGV4IGdyb3dcIj48ZGl2IGNsYXNzPVwiZmxleCBjb2x1bW4gd3JhcCAnICsgc3BhY2luZyArICdcIj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhlYWRlciA9IHdyYXBwZXIuZmluZCgnPiAuZGF0YVRhYmxlc19oZWFkZXIgPiBkaXYnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZGF0YVRhYmxlc19jb250ZW50IHRhYmxlXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gd3JhcHBlci5maW5kKCc+IC5kYXRhVGFibGVzX2NvbnRlbnQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiZGF0YVRhYmxlc19mb290ZXJcIj48ZGl2IGNsYXNzPVwiZmxleCBjb2x1bW4gd3JhcCB2ZXJ0aWNhbC1jZW50ZXIgJyArIHNwYWNpbmcgKyAnXCI+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmb290ZXIgPSB3cmFwcGVyLmZpbmQoJz4gLmRhdGFUYWJsZXNfZm9vdGVyID4gZGl2Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZV9oZWFkZXJfaW5wdXQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZV9oZWFkZXJfc29ydChpbnN0YW5jZSwgd3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2hlYWRlcl9sZW5ndGgod3JhcHBlciwgaGVhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfaGVhZGVyX2J1dHRvbnMod3JhcHBlciwgaGVhZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfaGVhZGVyX2ZpbHRlcih3cmFwcGVyLCBoZWFkZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhYmxlID0gdGFibGVfY29udGVudCh3cmFwcGVyLCBjb250ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2Zvb3Rlcl9pbmZvKHdyYXBwZXIsIGZvb3Rlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFnaW5hdGUgPSB3cmFwcGVyLmZpbmQoJy5kYXRhVGFibGVzX3BhZ2luYXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2Zvb3Rlcl9wYWdpbmF0ZSh3cmFwcGVyLCBmb290ZXIsIHBhZ2luYXRlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX2Ryb3Bkb3ducyh3cmFwcGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA9IHRhYmxlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5vbignZHJhdy5kdCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRlRml4KHBhZ2luYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2x1bW5zID0gaW5zdGFuY2UuY29sdW1ucygpLnJlc3BvbnNpdmVIaWRkZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoJ3Jlc3BvbnNpdmUtcmVzaXplLmR0JywgW3RoaXMsIGNvbHVtbnNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuaHRtbC5vbignYXNpZGUtY2hhbmdlZC5kYXRhdGFibGVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UucmVzcG9uc2l2ZS5yZWNhbGMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5vbigncmVzcG9uc2l2ZS1yZXNpemUuZHQnLCAoZSwgZGF0YXRhYmxlLCBjb2x1bW5zKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY291bnQgPSBjb2x1bW5zLnJlZHVjZSgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiID09PSBmYWxzZSA/IGEgKyAxIDogYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbGVtZW50cyA9IHRhYmxlLmZpbmQoJ3Rib2R5IHRyOm5vdCguY2hpbGQpID4gKjpmaXJzdC1jaGlsZDpub3QoLmRhdGFUYWJsZXNfZW1wdHkpJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLmNoaWxkcmVuKCdpJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5wcmVwZW5kKCc8aSB0YWJpbmRleD1cIjBcIj48c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCI+PHVzZSB4bGluazpocmVmPVwiI3N2Zy1wbHVzXCI+PC91c2U+PC9zdmc+PHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiPjx1c2UgeGxpbms6aHJlZj1cIiNzdmctbWludXNcIj48L3VzZT48L3N2Zz48L2k+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFwcC5odG1sLm9mZignYXNpZGUtY2hhbmdlZC5kYXRhdGFibGVzJyk7XHJcbiAgICB9XHJcbn07IiwidmFyIGFwcCA9IGFwcCB8fCB7fTtcclxuXHJcbmFwcC5jaGVja1N3aXBlciA9IChzd2lwZXIpID0+IHtcclxuICAgIGlmIChzd2lwZXIubGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKCFhcHAuaHRtbC5oYXNDbGFzcygnc3dpcGVyLWxvYWRlZCcpKSB7XHJcbiAgICAgICAgICAgIGFwcC5oZWFkLmFwcGVuZCgkKCc8bGluayByZWw9XCJzdHlsZXNoZWV0XCJocmVmPVwiZGlzdC9jc3Mvc3dpcGVyLmNzc1wiPicpKTtcclxuICAgICAgICAgICAgYXBwLmh0bWwuYWRkQ2xhc3MoJ3N3aXBlci1sb2FkZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuZ2V0U2NyaXB0KCdkaXN0L2pzL3N3aXBlci5qcycsICgpID0+IHtcclxuICAgICAgICAgICAgc3dpcGVyLmVhY2goKGksIGUpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgJHRoaXMgPSAkKGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkdGhpcy5oYXNDbGFzcygnbG9hZGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzd2lwZXItZm9vdGVyXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuY2hpbGRyZW4oJy5zd2lwZXItZm9vdGVyJykuYXBwZW5kKCc8ZGl2PjwvZGl2PicpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmb290ZXIgPSAkdGhpcy5maW5kKCc+IC5zd2lwZXItZm9vdGVyID4gZGl2JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb24gPSAkdGhpcy5oYXNDbGFzcygncGFnaW5hdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljQnVsbGV0cyA9ICR0aGlzLmhhc0NsYXNzKCdkeW5hbWljLWJ1bGxldHMnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbiA9ICR0aGlzLmhhc0NsYXNzKCduYXZpZ2F0aW9uJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb3AgPSBhcHAuaXNUcnVlKCR0aGlzLmF0dHIoJ2RhdGEtbG9vcCcpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuID0gJHRoaXMuaGFzQ2xhc3MoJ3NwYWNlLWJldHdlZW4nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldyA9IGFwcC50cnlQYXJzZUludCgkdGhpcy5hdHRyKCdkYXRhLXNsaWRlcy1wZXItdmlldycpLCAxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludHMgPSBhcHAudHJ5UGFyc2VKU09OKCR0aGlzLmF0dHIoJ2RhdGEtYnJlYWtwb2ludHMnKSwge30pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb290ZXIuYWRkQ2xhc3MoJ2ZsZXggY29sdW1uIHdyYXAgc3BhY2UtMyBjZW50ZXInKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2luYXRpb24gfHwgZHluYW1pY0J1bGxldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cInN3aXBlci1wYWdpbmF0aW9uXCI+PGRpdiBjbGFzcz1cImZsZXggY29sdW1uIHdyYXAgc3BhY2UtMSBjZW50ZXJcIj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvb3Rlci5hcHBlbmQoJzxidXR0b24gY2xhc3M9XCJidG4gc3F1YXJlIGNpcmNsZSBwcmV2IHRoZW1lLWRhcmtcIj48c3ZnIGZvY3VzYWJsZT1cImZhbHNlXCI+PHVzZSB4bGluazpocmVmPVwiI3N2Zy1hcnJvd1wiPjwvdXNlPjwvc3ZnPjwvYnV0dG9uPicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb290ZXIuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwiYnRuIHNxdWFyZSBjaXJjbGUgbmV4dCB0aGVtZS1kYXJrXCI+PHN2ZyBmb2N1c2FibGU9XCJmYWxzZVwiPjx1c2UgeGxpbms6aHJlZj1cIiNzdmctYXJyb3dcIj48L3VzZT48L3N2Zz48L2J1dHRvbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGFjZUJldHdlZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuID0gMTY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3dpcGVyID0gbmV3IFN3aXBlcigkdGhpc1swXSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb29wOiBsb29wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiBzbGlkZXNQZXJWaWV3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IHNwYWNlQmV0d2VlbixcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIG5lZWQgcGFnaW5hdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbiA+IGRpdicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljQnVsbGV0czogZHluYW1pY0J1bGxldHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5hdmlnYXRpb24gYXJyb3dzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRFbDogJy5zd2lwZXItZm9vdGVyIC5uZXh0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZFbDogJy5zd2lwZXItZm9vdGVyIC5wcmV2JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuZCBpZiB3ZSBuZWVkIHNjcm9sbGJhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxiYXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsOiAnLnN3aXBlci1zY3JvbGxiYXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50czogYnJlYWtwb2ludHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2xvYWRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQ2hhbmdlOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmNoZWNrTGF6eSgkdGhpcy5maW5kKCcubGF6eScpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uUmVuZGVyOiAoZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIChuYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgJChlbCkuYXBwZW5kKGZvb3Rlci5jaGlsZHJlbignLmJ0bicpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59OyIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG5hcHAuZ2V0QXNzaWdubWVudEl0ZW0gPSAoaXRlbXMsIGlkKSA9PiB7XHJcbiAgICByZXR1cm4gJCgkLm1hcChpdGVtcywgKGl0ZW0pID0+IHtcclxuICAgICAgICBpZiAoaXRlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIpID09PSBpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbn07XHJcblxyXG5hcHAuY2hlY2tBc3NpZ25tZW50ID0gKGFzc2lnbm1lbnRzKSA9PiB7XHJcbiAgICBpZiAoYXNzaWdubWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgJC5nZXRTY3JpcHQoJ2Rpc3QvanMvYXNzaWdubWVudHMuanMnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICQoYXNzaWdubWVudHMpLmVhY2goKGksIGFzc2lnbm1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGFzc2lnbm1lbnQgPSAkKGFzc2lnbm1lbnQpO1xyXG4gICAgICAgICAgICAgICAgYXBwLmNoZWNrQXNzaWdubWVudFNvcnQoYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICBhcHAuY2hlY2tBc3NpZ25tZW50RHJhZ0FuZERyb3AoYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgICAgICBhcHAuY2hlY2tBc3NpZ25tZW50Q29sb3IoYXNzaWdubWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59OyIsInZhciBhcHAgPSBhcHAgfHwge307XHJcblxyXG5hcHAucGFnZUZvcm0gPSAoKSA9PiB7XHJcbiAgICBhcHAuYWRkVmFsaWRhdGlvbihcclxuICAgICAgICBhcHAuY29udGVudC5maW5kKCcjZm9ybScpLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgZmlyc3ROYW1lOiB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogMlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBsYXN0TmFtZToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtaW5sZW5ndGg6IDJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdXNlcm5hbWU6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWlubGVuZ3RoOiAyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHBhc3N3b3JkX3JlZ2V4OiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbmZpcm1fcGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZXF1YWxUbzogXCIjcGFzc3dvcmRcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbWFpbDoge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkcm9wZG93bl8xOiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgIGRyb3Bkb3duXzI6IFwicmVxdWlyZWRcIixcclxuICAgICAgICAgICAgZHJvcGRvd25fMzogXCJyZXF1aXJlZFwiLFxyXG4gICAgICAgICAgICBkcm9wZG93bl80OiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgIGRyb3Bkb3duXzU6IFwicmVxdWlyZWRcIixcclxuICAgICAgICAgICAgZHJvcGRvd25fNjogXCJyZXF1aXJlZFwiLFxyXG4gICAgICAgICAgICBnZW5kZXI6IFwicmVxdWlyZWRcIixcclxuICAgICAgICAgICAgaW50ZXJlc3RzOiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgIGFncmVlOiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgICAgIGZvbnRfc2l6ZTogXCJyZXF1aXJlZFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZpcnN0TmFtZToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIHlvdXIgZmlyc3QgbmFtZVwiLFxyXG4gICAgICAgICAgICAgICAgbWlubGVuZ3RoOiBcIllvdXIgZmlyc3QgbmFtZSBtdXN0IGNvbnNpc3Qgb2YgYXQgbGVhc3QgMiBjaGFyYWN0ZXJzXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGFzdE5hbWU6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcIlBsZWFzZSBlbnRlciB5b3VyIGxhc3QgbmFtZVwiLFxyXG4gICAgICAgICAgICAgICAgbWlubGVuZ3RoOiBcIllvdXIgbGFzdCBuYW1lIG11c3QgY29uc2lzdCBvZiBhdCBsZWFzdCAyIGNoYXJhY3RlcnNcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB1c2VybmFtZToge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIGVudGVyIGEgdXNlcm5hbWVcIixcclxuICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogXCJZb3VyIHVzZXJuYW1lIG11c3QgY29uc2lzdCBvZiBhdCBsZWFzdCAyIGNoYXJhY3RlcnNcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwYXNzd29yZDoge1xyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IFwiUGxlYXNlIHByb3ZpZGUgYSBwYXNzd29yZFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbmZpcm1fcGFzc3dvcmQ6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBcIlBsZWFzZSBwcm92aWRlIGEgcGFzc3dvcmRcIixcclxuICAgICAgICAgICAgICAgIGVxdWFsVG86IFwiUGxlYXNlIGVudGVyIHRoZSBzYW1lIHBhc3N3b3JkIGFzIGFib3ZlXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW1haWw6IFwiUGxlYXNlIGVudGVyIGEgdmFsaWQgZW1haWwgYWRkcmVzc1wiLFxyXG4gICAgICAgICAgICBkcm9wZG93bl8xOiBcIlBsZWFzZSBzZWxlY3QgYW4gb3B0aW9uXCIsXHJcbiAgICAgICAgICAgIGRyb3Bkb3duXzI6IFwiUGxlYXNlIHNlbGVjdCBhbiBvcHRpb25cIixcclxuICAgICAgICAgICAgZHJvcGRvd25fMzogXCJQbGVhc2Ugc2VsZWN0IGFuIG9wdGlvblwiLFxyXG4gICAgICAgICAgICBkcm9wZG93bl80OiBcIlBsZWFzZSBzZWxlY3QgYW4gb3B0aW9uXCIsXHJcbiAgICAgICAgICAgIGRyb3Bkb3duXzU6IFwiUGxlYXNlIHNlbGVjdCBhbiBvcHRpb25cIixcclxuICAgICAgICAgICAgZHJvcGRvd25fNjogXCJQbGVhc2Ugc2VsZWN0IGFuIG9wdGlvblwiLFxyXG4gICAgICAgICAgICBnZW5kZXI6IFwiUGxlYXNlIHNlbGVjdCB5b3VyIGdlbmRlclwiLFxyXG4gICAgICAgICAgICBpbnRlcmVzdHM6IFwiUGxlYXNlIHNlbGVjdCBhdCBsZWFzdCBvbmUgaW50ZXJlc3RcIixcclxuICAgICAgICAgICAgYWdyZWU6IFwiUGxlYXNlIGFjY2VwdCBvdXIgcG9saWN5XCJcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59OyJdfQ==
